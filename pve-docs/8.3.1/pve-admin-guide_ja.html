<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="AsciiDoc 10.2.0" />
<title>Proxmox VE管理ガイド</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>

<style type="text/css">
div #toc {
    width: 19em;
    font-family: sans;
    border-right: 3px solid gainsboro;
}
.book, .article {
    margin-left: 22em
}
div #toc a:link, div #toc a:visited {
    color: black;
    text-decoration: none;
}
div #toc a:hover {
    text-decoration: underline;
}
div .toclevel1 {
    font-size: 1.1em;
    margin-bottom: 0.3em;
}

.monospaced, code, pre {
    overflow-wrap: break-word;
}
img {
    max-width: 100%;
}

@media only screen and (min-width: 85em) {
div #toc {
    width: 22em
}
.book, .article {
    margin-left: 25em
}
div .toclevel1 {
    font-size: 1.2em;
}
}
</style>

<style type="text/css">
:root {
    /* pre-defined colors */
    --pdt-grey-950: hsl(0deg, 0%, 95%);
    --pdt-grey-750: hsl(0deg, 0%, 75%);
    --pdt-grey-400: hsl(0deg, 0%, 40%);
    --pdt-grey-250: hsl(0deg, 0%, 25%);
    --pdt-grey-150: hsl(0deg, 0%, 15%);
    --pdt-grey-100: hsl(0deg, 0%, 10%);
    --pdt-primary-850: hsl(205deg, 100%, 85%);
    --pdt-primary-800: hsl(205deg, 100%, 80%);
    --pdt-primary-700: hsl(205deg, 100%, 70%);
    --pdt-secondary-850: hsl(250deg, 100%, 85%);
}

/* adjust admonition block spacing. this allows for a background on
 * admonition blocks that doesn't make the elements look to tightly
 * spaced.
 */
div.admonitionblock {
    border-radius: 3px;
    margin: 1.5em 0;
    padding: 0.5em 10% 0.5em 0.5em;
}

div.admonitionblock td.icon {
    padding-right: 0.5em;
}

div.admonitionblock td.icon > img {
    box-sizing: border-box;
    padding: 0.15em;
}

/* Fine-tune headings a bit */
h4 {
  font-size: 1.1em;
}
h5 {
  font-size: 1.05em;
}
h6 {
  font-size: 1.0em;
}

/* Support for heading anchor links */
h3 {
    border-bottom: unset;
}

h3 > span {
    display: inline-block;
    border-bottom: 2px solid silver;
}

a.headerlink {
    color: var(--pdt-grey-750);
    padding: 0 4px;
    text-decoration: none;
    visibility: hidden;
}

/* add it as an pseudo-element, so that it does not show up in the ToC */
a.headerlink::after {
    content: '\00b6';
    text-decoration: none;
}

h1:hover > a.headerlink,
h2:hover > a.headerlink,
h3:hover > a.headerlink,
h4:hover > a.headerlink,
h5:hover > a.headerlink,
h6:hover > a.headerlink {
  visibility: visible;
}

/* Dark mode theme */
@media screen and (prefers-color-scheme: dark) {
    :root {
        color-scheme: dark;
        --pdt-body-background: var(--pdt-grey-150);
        --pdt-text: var(--pdt-grey-950);
        --pdt-headline: var(--pdt-primary-800);
        --pdt-link: var(--pdt-primary-700);
        --pdt-link-visited: var(--pdt-secondary-850);
        --pdt-highlighted-text: var(--pdt-primary-850);
        --pdt-background-sidebar: var(--pdt-grey-100);
        --pdt-background-listings: var(--pdt-grey-100);
        --pdt-border: var(--pdt-grey-400);
        --pdt-border-alt: var(--pdt-grey-250);
        --pdt-table-border: var(--pdt-grey-400);
        --pdt-background-admonition: var(--pdt-grey-250);
    }

    body {
        color: var(--pdt-text);
        background-color: var(--pdt-body-background);
    }

    a {
        color: var(--pdt-link);
    }

    a:visited {
        color: var(--pdt-link-visited);
    }

    /* style headlines, titles etc. */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    thead,
    #author,
    #toctitle,
    div.title,
    td.hdlist1,
    caption.title,
    p.tableblock.header {
        color: var(--pdt-headline);
    }

    h1,
    h2,
    h3,
    #footer {
        border-color: var(--pdt-border);
    }

    /* formatted colored text */
    dt,
    em,
    pre,
    code,
    strong,
    .monospaced {
        color: var(--pdt-highlighted-text);
    }

    /* style the table of contents sidebar */
    div #toc {
        color: var(--pdt-text);
        background-color: var(--pdt-background-sidebar);
        border-color: var(--pdt-border-alt);
    }

    div #toc a:link,
    div #toc a:visited {
        color: var(--pdt-text);
    }

    /* reduce the brigthness of images a bit and make it reversable
     * through hovering over them.
     */
    .image > img {
        filter: brightness(90%);
    }

    .image > img:hover {
        filter: none;
    }

    /* tables */
    th.tableblock,
    td.tableblock,
    table.tableblock {
        border-color: var(--pdt-table-border);
    }

    div.quoteblock,
    div.verseblock {
        color: var(--pdt-text);
        border-color: var(--pdt-border);
    }

    /* listings (e.g. code snippet blocks) */
    div.listingblock > div.content {
        background-color: var(--pdt-background-listings);
        border-color: var(--pdt-border-alt);
    }

    /* admonition blocks (e.g. notes, warnings etc.) */
    div.admonitionblock {
        color: var(--pdt-text);
        background-color: var(--pdt-background-admonition);
    }

    div.admonitionblock td.content {
        border-color: var(--pdt-border);
    }

    /* makes the admonition icons appear a bit more consistent, by
     * adding a white background the shadows in the icons look
     * "correct"
     */
    div.admonitionblock td.icon > img {
        background-color: white;
        border-radius: 100%;
        filter: brightness(95%);
    }

    /* invert the logo */
    #header > h1 > .image > img {
        filter: invert(100%) hue-rotate(180deg) brightness(90%);
    }

    /* fixes the black text on unorderd lists */
    ul > li > * {
        color: var(--pdt-text);
    }
}
</style>

<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book" style="max-width:55em">
<div id="header">
<h1><span class="image">
<img alt="./images/proxmox-logo.svg" title="Proxmox VE Administration Guide" src="data:image/svg+xml;base64,
PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjwh
LS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoK
PHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHht
bG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0
cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJo
dHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIw
MDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5l
dC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3Nj
YXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iODAwIgogICBoZWlnaHQ9IjEy
OS4wMzkyOSIKICAgaWQ9InN2ZzMwMTgiCiAgIHZlcnNpb249IjEuMSIKICAgaW5rc2NhcGU6dmVy
c2lvbj0iMC40OC4zLjEgcjk4ODYiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlByb3htb3hfbG9nb19z
dGFuZGFyZF9oZXguc3ZnIgogICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9IlM6XFByb3htb3gt
TG9nby1ORVdcU3RhbmRhcmQtTG9nb1xQTkdcUHJveG1veF9sb2dvX3N0YW5kYXJkX2hleF84MDBw
eC5wbmciCiAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSI5MCIKICAgaW5rc2NhcGU6ZXhwb3J0LXlk
cGk9IjkwIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNv
bG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNp
dHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBh
Z2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMi44IgogICAgIGlua3NjYXBlOmN4PSIz
NDkuMDE2MDIiCiAgICAgaW5rc2NhcGU6Y3k9IjY0LjUwNTI2NSIKICAgICBpbmtzY2FwZTpkb2N1
bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAg
IHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjI1NjAiCiAgICAg
aW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3NyIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iLTgi
CiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6
ZWQ9IjEiCiAgICAgc2hvd2d1aWRlcz0idHJ1ZSIKICAgICBpbmtzY2FwZTpndWlkZS1iYm94PSJ0
cnVlIgogICAgIG9iamVjdHRvbGVyYW5jZT0iNCIKICAgICBncmlkdG9sZXJhbmNlPSIyIgogICAg
IGd1aWRldG9sZXJhbmNlPSIxIgogICAgIGZpdC1tYXJnaW4tdG9wPSI1IgogICAgIGZpdC1tYXJn
aW4tbGVmdD0iNSIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSI1IgogICAgIGZpdC1tYXJnaW4tYm90
dG9tPSI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIgLz4KICA8ZGVmcwog
ICAgIGlkPSJkZWZzMzAyMCI+CiAgICA8Y2xpcFBhdGgKICAgICAgIGNsaXBQYXRoVW5pdHM9InVz
ZXJTcGFjZU9uVXNlIgogICAgICAgaWQ9ImNsaXBQYXRoMzEwMi0xIj4KICAgICAgPHJlY3QKICAg
ICAgICAgc3R5bGU9ImZpbGw6I2U1NzAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9k
ZDtzdHJva2U6bm9uZSIKICAgICAgICAgaWQ9InJlY3QzMTA0LTciCiAgICAgICAgIHdpZHRoPSI0
MzYuNDAxODkiCiAgICAgICAgIGhlaWdodD0iMzI2LjQwOTkxIgogICAgICAgICB4PSItODIuOTk5
OTE2IgogICAgICAgICB5PSItMzQ3LjcxMzg3IgogICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgw
LjczNDQ5MTYxLDAuNjc4NjE3NzYsLTAuNzg0OTcxOTMsMC42MTk1MzEzMywwLDApIiAvPgogICAg
PC9jbGlwUGF0aD4KICAgIDxjbGlwUGF0aAogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNl
T25Vc2UiCiAgICAgICBpZD0iY2xpcFBhdGg0NzQ2Ij4KICAgICAgPHJlY3QKICAgICAgICAgc3R5
bGU9ImZpbGw6I2U1NzAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6
bm9uZSIKICAgICAgICAgaWQ9InJlY3Q0NzQ4IgogICAgICAgICB3aWR0aD0iNDM2LjQwMTg5Igog
ICAgICAgICBoZWlnaHQ9IjMyNi40MDk5MSIKICAgICAgICAgeD0iLTgyLjk5OTkxNiIKICAgICAg
ICAgeT0iLTM0Ny43MTM4NyIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC43MzQ0OTE2MSww
LjY3ODYxNzc2LC0wLjc4NDk3MTkzLDAuNjE5NTMxMzMsMCwwKSIgLz4KICAgIDwvY2xpcFBhdGg+
CiAgICA8Y2xpcFBhdGgKICAgICAgIGlkPSJjbGlwUGF0aDI5OTktMi0zLTQtMSIKICAgICAgIGNs
aXBQYXRoVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHBhdGgKICAgICAgICAgaW5rc2Nh
cGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgaWQ9InBhdGgzMDAxLTgtOC02LTAi
CiAgICAgICAgIGQ9Im0gMCwxNDQwMCAxNDQwMCwwIEwgMTQ0MDAsMCAwLDAgMCwxNDQwMCB6IiAv
PgogICAgPC9jbGlwUGF0aD4KICAgIDxjbGlwUGF0aAogICAgICAgY2xpcFBhdGhVbml0cz0idXNl
clNwYWNlT25Vc2UiCiAgICAgICBpZD0iY2xpcFBhdGgzMTAyLTQiPgogICAgICA8cmVjdAogICAg
ICAgICBzdHlsZT0iZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2Rk
O3N0cm9rZTpub25lIgogICAgICAgICBpZD0icmVjdDMxMDQtMSIKICAgICAgICAgd2lkdGg9IjQz
Ni40MDE4OSIKICAgICAgICAgaGVpZ2h0PSIzMjYuNDA5OTEiCiAgICAgICAgIHg9Ii04Mi45OTk5
MTYiCiAgICAgICAgIHk9Ii0zNDcuNzEzODciCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAu
NzM0NDkxNjEsMC42Nzg2MTc3NiwtMC43ODQ5NzE5MywwLjYxOTUzMTMzLDAsMCkiIC8+CiAgICA8
L2NsaXBQYXRoPgogICAgPGNsaXBQYXRoCiAgICAgICBjbGlwUGF0aFVuaXRzPSJ1c2VyU3BhY2VP
blVzZSIKICAgICAgIGlkPSJjbGlwUGF0aDMwMDgiPgogICAgICA8cmVjdAogICAgICAgICBzdHls
ZT0iZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpu
b25lIgogICAgICAgICBpZD0icmVjdDMwMTAiCiAgICAgICAgIHdpZHRoPSI0MzYuNDAxODkiCiAg
ICAgICAgIGhlaWdodD0iMzI2LjQwOTkxIgogICAgICAgICB4PSItODIuOTk5OTE2IgogICAgICAg
ICB5PSItMzQ3LjcxMzg3IgogICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjczNDQ5MTYxLDAu
Njc4NjE3NzYsLTAuNzg0OTcxOTMsMC42MTk1MzEzMywwLDApIiAvPgogICAgPC9jbGlwUGF0aD4K
ICAgIDxjbGlwUGF0aAogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAg
ICBpZD0iY2xpcFBhdGgzMTAyIj4KICAgICAgPHJlY3QKICAgICAgICAgc3R5bGU9ImZpbGw6I2U1
NzAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAg
ICAgaWQ9InJlY3QzMTA0IgogICAgICAgICB3aWR0aD0iNDM2LjQwMTg5IgogICAgICAgICBoZWln
aHQ9IjMyNi40MDk5MSIKICAgICAgICAgeD0iLTgyLjk5OTkxNiIKICAgICAgICAgeT0iLTM0Ny43
MTM4NyIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC43MzQ0OTE2MSwwLjY3ODYxNzc2LC0w
Ljc4NDk3MTkzLDAuNjE5NTMxMzMsMCwwKSIgLz4KICAgIDwvY2xpcFBhdGg+CiAgICA8Y2xpcFBh
dGgKICAgICAgIGNsaXBQYXRoVW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgaWQ9ImNsaXBQ
YXRoNDgxNCI+CiAgICAgIDxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiNlNTcwMDA7ZmlsbC1v
cGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiCiAgICAgICAgIGlkPSJyZWN0
NDgxNiIKICAgICAgICAgd2lkdGg9IjQzNi40MDE4OSIKICAgICAgICAgaGVpZ2h0PSIzMjYuNDA5
OTEiCiAgICAgICAgIHg9Ii04Mi45OTk5MTYiCiAgICAgICAgIHk9Ii0zNDcuNzEzODciCiAgICAg
ICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzM0NDkxNjEsMC42Nzg2MTc3NiwtMC43ODQ5NzE5Myww
LjYxOTUzMTMzLDAsMCkiIC8+CiAgICA8L2NsaXBQYXRoPgogICAgPGNsaXBQYXRoCiAgICAgICBp
ZD0iY2xpcFBhdGgyOTk5LTItMy00IgogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25V
c2UiPgogICAgICA8cGF0aAogICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIw
IgogICAgICAgICBpZD0icGF0aDMwMDEtOC04LTYiCiAgICAgICAgIGQ9Im0gMCwxNDQwMCAxNDQw
MCwwIEwgMTQ0MDAsMCAwLDAgMCwxNDQwMCB6IiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+
CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMzAyMyI+CiAgICA8cmRmOlJERj4KICAgICAg
PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uv
c3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291
cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8
ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwv
bWV0YWRhdGE+CiAgPGcKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDUxLjEzNzQsMzguOTMy
MjkzKSIKICAgICBpZD0ibGF5ZXIxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAg
ICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiPgogICAgPGcKICAgICAgIGlkPSJnMzM3OCIKICAg
ICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjgwMjY3MTksMCwwLDAuMjgwMjY3MTksLTEwNDAuODMy
NSw2MS4yNTQyOTQpIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LWZpbGVuYW1lPSJTOlxsdWNpYVxO
ZXctTG9nby1TeW1ib2xcU3RhbmRhcmQtTG9nb1xQTkdcUHJveG1veF9sb2dvX3N0YW5kYXJkX2hl
eF8zMDBweC5wbmciCiAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iOTAiCiAgICAgICBpbmtz
Y2FwZTpleHBvcnQteWRwaT0iOTAiPgogICAgICA8ZwogICAgICAgICBpZD0iZzMwMTYtOSIKICAg
ICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMCIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC44
NTI4NjU5NCwwLDAsMC44NTI4NjU5NCwtMjIwNC43OTY0LC05NzAuMDY0OTUpIj4KICAgICAgICA8
ZwogICAgICAgICAgIHN0eWxlPSJmb250LXNpemU6MTQ0cHg7Zm9udC1zdHlsZTpub3JtYWw7Zm9u
dC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDts
aW5lLWhlaWdodDoxMjUlO2xldHRlci1zcGFjaW5nOjBweDt3b3JkLXNwYWNpbmc6MHB4O2ZpbGw6
IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtmb250LWZhbWlseTpIZWxpb247LWlu
a3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpIZWxpb24iCiAgICAgICAgICAgaWQ9InRleHQzMDkz
LTUiCiAgICAgICAgICAgY2xpcC1wYXRoPSJ1cmwoI2NsaXBQYXRoMzEwMi00KSIKICAgICAgICAg
ICB0cmFuc2Zvcm09Im1hdHJpeCgtMC45OTc5MTk3OSwwLDAsMC45OTc5MTk3OSwxNDUyLjM1ODYs
NzQ2LjA0Nzg0KSI+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgZD0iTSAyNzYuMzA0NDMs
MjI2LjYyMzEgNDY2Ljg5MjI3LDE3LjAyMDYwNSBDIDQ1OS40OTkwMyw5LjYyODA4NzEgNDUwLjg4
NzYyLDMuODE5NDMyMSA0NDEuMDU3OTYsLTAuNDA1Mzc2OTUgNDMxLjIyNzU2LC00LjYyOTUxNzEg
NDIwLjY2NjQsLTYuNzgyMzcyMSA0MDkuMzc0MzcsLTYuODYzOTQ3OSAzOTcuMzgwOTksLTYuNzcy
MjAzMSAzODYuMzkzMjgsLTQuMzk1OTMyNiAzNzYuNDExMjMsMC4yNjQ4NzA5NiAzNjYuNDI4Niw0
LjkyNjM0MTcgMzU3Ljc1NjIzLDExLjMyMzk4IDM1MC4zOTQxMywxOS40NTc4MDUgTCAyNzYuMzAz
MjcsMTAwLjM3MjgyIDIwMi42OTk4NSwxOS40NTc4MDUgQyAxOTUuMDczMzUsMTEuMzIzOTcgMTg2
LjE5Nzg3LDQuOTI2MzI0OCAxNzYuMDczNDQsMC4yNjQ4NDkzIDE2NS45NDg4MSwtNC4zOTU5NTkg
MTU1LjAwMTc1LC02Ljc3MjIyMjQgMTQzLjIzMjIsLTYuODYzOTQ3OSAxMzEuOTM5NzgsLTYuNzgy
MzYxNiAxMjEuMzc4NiwtNC42Mjk1MDUgMTExLjU0ODYsLTAuNDA1MzY5NTEgMTAxLjcxODU1LDMu
ODE5NDM0NSA5My4xMDcxMjIsOS42MjgwODcxIDg1LjcxNDI4NywxNy4wMjA2MDUgTCAyNzYuMzA3
NjksMjI2LjYxNzUyIgogICAgICAgICAgICAgaWQ9InBhdGgzMDk4LTUiCiAgICAgICAgICAgICBp
bmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgICAgICAgc29kaXBvZGk6bm9k
ZXR5cGVzPSJjY2NjY2NjY2NjY2NjIgogICAgICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtm
aWxsLW9wYWNpdHk6MSIgLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcKICAgICAgICAgICB0cmFu
c2Zvcm09Im1hdHJpeCgwLjk5NzkxOTc5LDAsMCwtMC45OTc5MTk3OSw5MDAuODk2MDQsMTIzMC4z
NTc2KSIKICAgICAgICAgICBjbGlwLXBhdGg9InVybCgjY2xpcFBhdGgzMTAyLTQpIgogICAgICAg
ICAgIGlkPSJnMzE5Ni05IgogICAgICAgICAgIHN0eWxlPSJmb250LXNpemU6MTQ0cHg7Zm9udC1z
dHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1z
dHJldGNoOm5vcm1hbDtsaW5lLWhlaWdodDoxMjUlO2xldHRlci1zcGFjaW5nOjBweDt3b3JkLXNw
YWNpbmc6MHB4O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtmb250LWZh
bWlseTpIZWxpb247LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpIZWxpb24iPgogICAgICAg
ICAgPHBhdGgKICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjEi
CiAgICAgICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjY2NjY2NjY2NjY2MiCiAgICAgICAg
ICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgICAgICAgaWQ9InBh
dGgzMTk4LTEiCiAgICAgICAgICAgICBkPSJNIDI3Ni4zMDQ0MywyMjYuNjIzMSA0NjYuODkyMjcs
MTcuMDIwNjA1IEMgNDU5LjQ5OTAzLDkuNjI4MDg3MSA0NTAuODg3NjIsMy44MTk0MzIxIDQ0MS4w
NTc5NiwtMC40MDUzNzY5NSA0MzEuMjI3NTYsLTQuNjI5NTE3MSA0MjAuNjY2NCwtNi43ODIzNzIx
IDQwOS4zNzQzNywtNi44NjM5NDc5IDM5Ny4zODA5OSwtNi43NzIyMDMxIDM4Ni4zOTMyOCwtNC4z
OTU5MzI2IDM3Ni40MTEyMywwLjI2NDg3MDk2IDM2Ni40Mjg2LDQuOTI2MzQxNyAzNTcuNzU2MjMs
MTEuMzIzOTggMzUwLjM5NDEzLDE5LjQ1NzgwNSBMIDI3Ni4zMDMyNywxMDAuMzcyODIgMjAyLjY5
OTg1LDE5LjQ1NzgwNSBDIDE5NS4wNzMzNSwxMS4zMjM5NyAxODYuMTk3ODcsNC45MjYzMjQ4IDE3
Ni4wNzM0NCwwLjI2NDg0OTMgMTY1Ljk0ODgxLC00LjM5NTk1OSAxNTUuMDAxNzUsLTYuNzcyMjIy
NCAxNDMuMjMyMiwtNi44NjM5NDc5IDEzMS45Mzk3OCwtNi43ODIzNjE2IDEyMS4zNzg2LC00LjYy
OTUwNSAxMTEuNTQ4NiwtMC40MDUzNjk1MSAxMDEuNzE4NTUsMy44MTk0MzQ1IDkzLjEwNzEyMiw5
LjYyODA4NzEgODUuNzE0Mjg3LDE3LjAyMDYwNSBMIDI3Ni4zMDc2OSwyMjYuNjE3NTIiIC8+CiAg
ICAgICAgPC9nPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgc3R5bGU9ImZvbnQtc2l6ZToxMDU5
LjYxMjc5Mjk3cHg7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdl
aWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDtsaW5lLWhlaWdodDoxMjUlO2xldHRlci1z
cGFjaW5nOjBweDt3b3JkLXNwYWNpbmc6MHB4O2ZpbGw6I2U1NzAwMDtmaWxsLW9wYWNpdHk6MTtz
dHJva2U6bm9uZTtmb250LWZhbWlseTpIZWxpb247LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlv
bjpIZWxpb24iCiAgICAgICAgICAgZD0ibSAxMTYwLjYyOTIsOTg4LjIwNTM4IDAsMCAtMTQzLjI2
NjUsLTE1Ny4xMTIzMiBjIC04LjMzMywtOC44ODcyMSAtMTguMDMwNjEsLTE1Ljg3NzU0IC0yOS4w
OTI3OSwtMjAuOTcwNzggLTExLjA2MjUyLC01LjA5MjU1IC0yMy4wMjM2NiwtNy42ODg4OSAtMzUu
ODgzNDMsLTcuNzg5MTQgLTEyLjMzODQzLDAuMDg5MiAtMjMuODc3OTIsMi40NDE0NyAtMzQuNjE4
NDksNy4wNTY4NSAtMTAuNzQwNjIsNC42MTYxMyAtMjAuMTQ5NzIsMTAuOTYyODQgLTI4LjIyNzM2
LDE5LjA0MDE2IEwgMTAzNC45MzgzLDk4OC4yMDc3NyA4ODkuNTQwNjMsMTE0Ny45ODU0IGMgOC4w
Nzc2Miw4LjMzMjkgMTcuNDg2NzQsMTQuODM0OSAyOC4yMjczNiwxOS41MDYyIDEwLjc0MDU3LDQu
NjcxMiAyMi4yODAwNiw3LjA0NTcgMzQuNjE4NDksNy4xMjM0IDEyLjg5MzA4LC0wLjEgMjQuOTIw
NzMsLTIuNjk2MiAzNi4wODMwNywtNy43ODkxIDExLjE2MjIzLC01LjA5MjkgMjAuNzkzMjUsLTEy
LjA4MzMgMjguODkzMTUsLTIwLjk3MDggbCAxNDMuMjY2MiwtMTU3LjY0OTE3IgogICAgICAgICAg
IGlkPSJwYXRoMzI3OC00IgogICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9
IjAiCiAgICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NjY2NzY3NjYyIgLz4KICAg
ICAgICA8cGF0aAogICAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2Njc2NzY2Mi
CiAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICBp
ZD0icGF0aDMyODAtNSIKICAgICAgICAgICBkPSJtIDExOTIuNjIwOCw5ODguMjA1MzggMCwwIDE0
My4yNjY1LC0xNTcuMTEyMzIgYyA4LjMzMywtOC44ODcyMSAxOC4wMzA2LC0xNS44Nzc1NCAyOS4w
OTI4LC0yMC45NzA3OCAxMS4wNjI1LC01LjA5MjU1IDIzLjAyMzcsLTcuNjg4ODkgMzUuODgzNCwt
Ny43ODkxNCAxMi4zMzg1LDAuMDg5MiAyMy44NzgsMi40NDE0NyAzNC42MTg1LDcuMDU2ODUgMTAu
NzQwNyw0LjYxNjEzIDIwLjE0OTgsMTAuOTYyODQgMjguMjI3NCwxOS4wNDAxNiBsIC0xNDUuMzk3
NywxNTkuNzc3NjIgMTQ1LjM5NzcsMTU5Ljc3NzYzIGMgLTguMDc3Niw4LjMzMjkgLTE3LjQ4Njcs
MTQuODM0OSAtMjguMjI3NCwxOS41MDYyIC0xMC43NDA1LDQuNjcxMiAtMjIuMjgsNy4wNDU3IC0z
NC42MTg0LDcuMTIzNCAtMTIuODkzMSwtMC4xIC0yNC45MjA4LC0yLjY5NjIgLTM2LjA4MzEsLTcu
Nzg5MSAtMTEuMTYyMywtNS4wOTI5IC0yMC43OTMzLC0xMi4wODMzIC0yOC44OTMyLC0yMC45NzA4
IEwgMTE5Mi42MjExLDk4OC4yMDU5MyIKICAgICAgICAgICBzdHlsZT0iZm9udC1zaXplOjEwNTku
NjEyNzkyOTdweDtmb250LXN0eWxlOm5vcm1hbDtmb250LXZhcmlhbnQ6bm9ybWFsO2ZvbnQtd2Vp
Z2h0Om5vcm1hbDtmb250LXN0cmV0Y2g6bm9ybWFsO2xpbmUtaGVpZ2h0OjEyNSU7bGV0dGVyLXNw
YWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxO3N0
cm9rZTpub25lO2ZvbnQtZmFtaWx5OkhlbGlvbjstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9u
OkhlbGlvbiIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgICBpZD0iZzMzNjgiPgogICAg
ICAgIDxnCiAgICAgICAgICAgaWQ9InRleHQzMjIzIgogICAgICAgICAgIHN0eWxlPSJmb250LXNp
emU6Mzg3LjUyMjA2NDIxcHg7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtm
b250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWFsaWduOnN0YXJ0O2xp
bmUtaGVpZ2h0OjEyNSU7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7d3JpdGlu
Zy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6
MTtzdHJva2U6bm9uZTtmb250LWZhbWlseTpIZWxpb247LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNh
dGlvbjpIZWxpb24iPgogICAgICAgICAgPHBhdGgKICAgICAgICAgICAgIGlua3NjYXBlOmNvbm5l
Y3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICAgICBpZD0icGF0aDMzNTQiCiAgICAgICAgICAg
ICBkPSJtIC02ODYuMTgxMSwtMjYyLjM4NzM3IC0xNzcuODcwMzQsMCBjIC02Ljk4MzQsMC4xOTQw
MyAtMTIuODc2ODksMi43MTI4OCAtMTcuNjgwNDgsNy41NTY1OCAtNC44MDM2LDQuODQ0MjIgLTcu
MzA2MzEsMTAuODUwNzMgLTcuNTA4MTMsMTguMDE5NTUgbCAwLDI0NS42ODU4MjIzIGMgMTkuMDg1
MiwtMC40NzYzMjg5IDM0Ljk3MzM4LC03LjA4MDI2MiA0Ny42NjQ2LC0xOS44MTE4MTkzIDEyLjY5
MTEyLC0xMi43MzE1MTcgMTkuMjc4OSwtMjguNzMyNzI0IDE5Ljc2MzM3LC00OC4wMDM2NjkgbCAx
MzUuNjMwOTgsMCBjIDE5LjI4NjgyLC0wLjQ3NjI2MSAzNS4zNTI2MSwtNy4wODAxOTQgNDguMTk3
NDIsLTE5LjgxMTgxOSAxMi44NDQzMiwtMTIuNzMxNDUgMTkuNTEyODQsLTI4LjczMjY1NSAyMC4w
MDU1OCwtNDguMDAzNjY1IGwgMCwtNjcuNDI3OTggYyAtMC40OTI3NCwtMTkuMjg2ODIgLTcuMTYx
MjUsLTM1LjM1MjYyIC0yMC4wMDU1NywtNDguMTk3NDQgLTEyLjg0NDgyLC0xMi44NDQzMiAtMjgu
OTEwNjEsLTE5LjUxMjgzIC00OC4xOTc0MywtMjAuMDA1NTYgeiBtIC0xMzUuNjMwOTgsMTQ0LjE1
NjM1IDAsLTc1Ljk1MzM1IDExOC45Njc3NCwwIGMgMC42OTQxMSwtMC4zNDY5NCAzLjQ3MTMxLDAu
MzQ3MzYgOC4zMzE2MSwyLjA4MjkxIDQuODU5OTEsMS43MzU5NSA3LjYzNzEyLDYuNTk2MDUgOC4z
MzE2MywxNC41ODAzMyBsIDAsNDIuMjM5MzYgYyAwLjM0Njk0LDAuNzEwNiAtMC4zNDczNiwzLjU1
MjM4IC0yLjA4MjkxLDguNTI1MzggLTEuNzM1OTUsNC45NzMyNiAtNi41OTYwNiw3LjgxNTA1IC0x
NC41ODAzMyw4LjUyNTM3IHoiIC8+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgaW5rc2Nh
cGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICAgIGlkPSJwYXRoMzM1NiIKICAg
ICAgICAgICAgIGQ9Im0gLTMwOC4wNDUyMSwtMTQzLjQxOTYzIDAsLTUwLjc2NDc0IGMgLTAuNDc2
NiwtMTkuMjg2ODIgLTcuMDgwNTMsLTM1LjM1MjYyIC0xOS44MTE4MiwtNDguMTk3NDQgLTEyLjcz
MTc5LC0xMi44NDQzMiAtMjguNzMzLC0xOS41MTI4MyAtNDguMDAzNjcsLTIwLjAwNTU2IGwgLTE3
Ny44NzAzNCwwIGMgLTcuMTUyOTMsMC4xOTQwMyAtMTMuMDk0ODUsMi43MTI4OCAtMTcuODI1Nzgs
Ny41NTY1OCAtNC43MzA5NSw0Ljg0NDIyIC03LjE4NTIyLDEwLjg1MDczIC03LjM2MjgzLDE4LjAx
OTU1IGwgMCwyNDUuNjg1ODIyMyBjIDE5LjEwMTM1LC0wLjQ3NjMyODkgMzUuMDU0MTIsLTcuMDgw
MjYyIDQ3Ljg1ODM2LC0xOS44MTE4MTkzIDEyLjgwNDE0LC0xMi43MzE1MTcgMTkuNDU2NTEsLTI4
LjczMjcyNCAxOS45NTcxMywtNDguMDAzNjY5IGwgMCwtMTcuMDUwNzUxIDc3LjExNTksMCAzOS4x
MzkyMiw1NS44MDI0NTkgYyA2LjI4MDgyLDkuMDA5Nzk0IDE0LjE2MDMzLDE2LjA4MTk3MzIgMjMu
NjM4NTQsMjEuMjE2NTU5NSA5LjQ3NzgxLDUuMTM0NjAyMSAyMC4wNjk5Myw3Ljc1MDMzOTcgMzEu
Nzc2NDEsNy44NDcyMjA4IDUuNjQyOTYsLTAuMDA4MDggMTEuMTE2NjMsLTAuNjcwMDg3MiAxNi40
MjEwMiwtMS45ODYwMzM3IDUuMzAzODgsLTEuMzE1OTQyNSAxMC4yOTMxNiwtMy4yMzczNzY1IDE0
Ljk2Nzg2LC01Ljc2NDMwNzggbCAtNTQuNjM5OTEsLTc3Ljg5MDkzMTggYyAxNS44Mzk1MiwtMy40
MzEwNTIgMjguODIxMzMsLTExLjE5NzUzNSAzOC45NDU0NiwtMjMuMjk5NDY5IDEwLjEyMzYyLC0x
Mi4xMDE3MiAxNS4zNTUxLC0yNi41NTI4NiAxNS42OTQ0NSwtNDMuMzUzNDcgeiBtIC0yMDMuMDU4
OTUsOC4xMzc4NiAwLC01OC45MDI2IDExOC4xOTI3MSwwIGMgMC43MTAyNiwtMC4zNDY5NCAzLjU1
MjA1LDAuMzQ3MzYgOC41MjUzNywyLjA4MjkxIDQuOTcyOTQsMS43MzU5NSA3LjgxNDczLDYuNTk2
MDUgOC41MjUzOCwxNC41ODAzMyBsIDAsMjUuNTc2MTMgYyAwLjM1NTAyLDAuNjk0NDUgLTAuMzU1
NDMsMy40NzE2NiAtMi4xMzEzNSw4LjMzMTYxIC0xLjc3NjMyLDQuODYwMjUgLTYuNzQ5NDUsNy42
Mzc0NiAtMTQuOTE5NCw4LjMzMTYyIHoiIC8+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAg
aW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICAgIGlkPSJwYXRoMzM1
OCIKICAgICAgICAgICAgIGQ9Im0gLTY2LjI5NzE5MywtMjYyLjM4NzM3IC0xMzUuMjQzNDU3LDAg
YyAtMTkuMjcwOTUsMC40OTI3NSAtMzUuMjcyMTcsNy4xNjEyNiAtNDguMDAzNjgsMjAuMDA1NTgg
LTEyLjczMTU2LDEyLjg0NDgxIC0xOS4zMzU0OSwyOC45MTA2MSAtMTkuODExODEsNDguMTk3NDIg
bCAwLDEzNS4yNDM0NjQgYyAwLjQ3NjMyLDE5LjI3MDk0NSA3LjA4MDI1LDM1LjI3MjE1NCAxOS44
MTE4MSw0OC4wMDM2NzUgMTIuNzMxNTIsMTIuNzMxNTYxIDI4LjczMjczLDE5LjMzNTQ5MjEgNDgu
MDAzNjgsMTkuODExODEzMyBsIDEzNS4yNDM0NTcsMCBDIC00Ny4wMjY1MTksOC4zOTgyNTM0IC0z
MS4wMjUzMSwxLjc5NDMyMDMgLTE4LjI5MzUxOCwtMTAuOTM3MjM3IC01LjU2MjIyNzksLTIzLjY2
ODc1NCAxLjA0MTcwMzMsLTM5LjY2OTk2MSAxLjUxODI5NTMsLTU4Ljk0MDkwNiBsIDAsLTEzNS4y
NDM0NjQgYyAtMC40NzY1OTk3LC0xOS4yODY4MiAtNy4wODA1MzI4LC0zNS4zNTI2MiAtMTkuODEx
ODE5MywtNDguMTk3NDQgLTEyLjczMTc4OCwtMTIuODQ0MzIgLTI4LjczMjk5NSwtMTkuNTEyODMg
LTQ4LjAwMzY2OSwtMjAuMDA1NTYgeiBtIDAsMTg2LjM5NTcxMyBjIDAuMzU1MDIzLDAuNzEwNTM2
IC0wLjM1NTQyNywzLjU1MjMyNSAtMi4xMzEzNSw4LjUyNTM3NiAtMS43NzYzMjQsNC45NzMyMDMg
LTYuNzQ5NDUzLDcuODE0OTkyIC0xNC45MTk0MDEsOC41MjUzNzUgbCAtMTAxLjE0MTk1NiwwIGMg
LTAuNzEwNTMsMC4zNTUyOTQgLTMuNTUyMzIsLTAuMzU1MTU2IC04LjUyNTM4LC0yLjEzMTM1IC00
Ljk3MzIxLC0xLjc3NjA1NCAtNy44MTUsLTYuNzQ5MTgyIC04LjUyNTM3LC0xNC45MTk0MDEgbCAw
LC0xMDEuNTI5NDczIGMgLTAuMzU1MywtMC42OTQxMSAwLjM1NTE1LC0zLjQ3MTMyIDIuMTMxMzQs
LTguMzMxNjIgMS43NzYwNCwtNC44NTk5MiA2Ljc0OTE4LC03LjYzNzEyIDE0LjkxOTQxLC04LjMz
MTYyIGwgMTAxLjE0MTk1NiwwIGMgMC43MTAyNjUsLTAuMzQ2OTQgMy41NTIwNTQsMC4zNDczNiA4
LjUyNTM3NiwyLjA4MjkxIDQuOTcyOTMyLDEuNzM1OTUgNy44MTQ3MjEsNi41OTYwNSA4LjUyNTM3
NSwxNC41ODAzMyB6IiAvPgogICAgICAgICAgPHBhdGgKICAgICAgICAgICAgIGlua3NjYXBlOmNv
bm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICAgICBpZD0icGF0aDMzNjAiCiAgICAgICAg
ICAgICBzdHlsZT0iZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxIgogICAgICAgICAgICAgZD0i
bSAzNDMuMjQ1ODEsLTI0My4wMTE1MiBjIC01Ljg3NzY0LC01Ljg3NzA4IC0xMi43MjM3NywtMTAu
NDk0OTkgLTIwLjUzODQsLTEzLjg1Mzc0IC03LjgxNTIsLTMuMzU4MjEgLTE2LjIxMTQsLTUuMDY5
NzQgLTI1LjE4ODYxLC01LjEzNDU5IC05LjU1MDkzLDAuMDcyOSAtMTguMzUwNzksMS45NjIwOCAt
MjYuMzk5Niw1LjY2NzQ0IC04LjA0OTI4LDMuNzA1ODkgLTE1LjAwODQzLDguNzkyMDUgLTIwLjg3
NzQ5LDE1LjI1ODQ4IGwgLTU4LjUxNTA4LDY0LjMyNzgzIC01OC45MDI1OSwtNjQuMzI3ODMgYyAt
Ni4wMjI3NSwtNi42MzU5OCAtMTIuOTY1NzYsLTExLjc3MDU4IC0yMC44MjkwNSwtMTUuNDAzODEg
LTcuODYzNDMsLTMuNjMyNyAtMTYuNTUwMjYyLC01LjQ3MzQxIC0yNi4wNjA1MTcsLTUuNTIyMTEg
LTguOTc3NTE5LDAuMDY0OSAtMTcuMzczNzE0LDEuNzc2MzkgLTI1LjE4ODYxLDUuMTM0NiAtNy44
MTQ5MzYsMy4zNTg3NCAtMTQuNjYxMDY0LDcuOTc2NjUgLTIwLjUzODQwNSwxMy44NTM3MyBMIDE0
NS45OTk2MiwtMTI2Ljc1NjM5IDQwLjIwNzQ1OCwtMTAuNTAxMjcxIGMgNS44NzczMzMsNi4wNjMw
MzcxIDEyLjcyMzQ2MSwxMC43OTM5NjcwNiAyMC41Mzg0MDUsMTQuMTkyODAzOCA3LjgxNDkwNCwz
LjM5ODg0NyAxNi4yMTEwOTksNS4xMjY1Mjg1IDI1LjE4ODYxLDUuMTgzMDQ5NSA5LjM4MTA5MSwt
MC4wNzI2NTkgMTguMTMyNTA3LC0xLjk2MTgwMzcgMjYuMjU0Mjg3LC01LjY2NzQ0MDEgOC4xMjE2
MywtMy43MDU2MjUwOCAxNS4xMjkyMywtOC43OTE3ODA2IDIxLjAyMjgsLTE1LjI1ODQ4MjIgbCA1
OC41MTUwNywtNjQuMzI3ODM0IDU4LjUxNTA4LDY0LjMyNzgzNCBjIDUuODY5MDYsNi40NjY3MDE2
IDEyLjgyODIxLDExLjU1Mjg1NTE5IDIwLjg3NzQ5LDE1LjI1ODQ3NjQgOC4wNDg4MSwzLjcwNTYz
MjYgMTYuODQ4NjcsNS41OTQ3NzkzIDI2LjM5OTYsNS42Njc0NDU5IDguOTc3MjEsLTAuMDU2NTEz
IDE3LjM3MzQsLTEuNzg0MTkyOSAyNS4xODg2MSwtNS4xODMwNDM4IDcuODE0NjQsLTMuMzk4ODQw
NTIgMTQuNjYwNzcsLTguMTI5NzcyNCAyMC41Mzg0LC0xNC4xOTI4MDk1IEwgMjM3LjQ1MzY1LC0x
MjYuNzU2MzkgeiIgLz4KICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICBpbmtzY2FwZTpjb25u
ZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgICAgICAgaWQ9InBhdGgzMzYyIgogICAgICAgICAg
ICAgZD0ibSA2OTUuODE4MDMsLTI2Mi4zODczNyAtNDIuNjI2ODgsMCBjIC0xMy45NDI4MSwwLjE5
NDAzIC0yNi4zNTk0OSwzLjk3MjMyIC0zNy4yNTAwOCwxMS4zMzQ4NyAtMTAuODkxMDcsNy4zNjMw
OCAtMTkuMTQxOTQsMTcuMTQ3ODcgLTI0Ljc1MjY2LDI5LjM1NDQyIGwgMC4zODc1MiwtMC43NzUw
MyAtMzkuOTE0MjYsODcuNTc4ODYgLTM5LjUyNjc0LC04Ny41Nzg4NiAwLDAuNzc1MDMgYyAtNS40
NDE1MiwtMTIuMjA2NTUgLTEzLjY0Mzk1LC0yMS45OTEzNCAtMjQuNjA3MzQsLTI5LjM1NDQyIC0x
MC45NjM1OSwtNy4zNjI1NiAtMjMuNDI4NzEsLTExLjE0MDg0IC0zNy4zOTUzOSwtMTEuMzM0ODcg
bCAtNDIuMjM5MzYsMCBjIC03LjMzODYyLDAuMTk0MDMgLTEzLjM5MzU3LDIuNzEyODggLTE4LjE2
NDg3LDcuNTU2NTggLTQuNzcxMzEsNC44NDQyMiAtNy4yNDE3MywxMC44NTA3MyAtNy40MTEyNiwx
OC4wMTk1NSBsIDAsMjQ1LjY4NTgyMjMgYyAxOS4xMDEzNSwtMC40NzYzMjg5IDM1LjA1NDExLC03
LjA4MDI2MiA0Ny44NTgzNSwtMTkuODExODE5MyAxMi44MDQxNSwtMTIuNzMxNTE3IDE5LjQ1NjUy
LC0yOC43MzI3MjQgMTkuOTU3MTQsLTQ4LjAwMzY2OSBsIDAsLTEyOS44MTgyMjQgYyAwLjAyNDEs
LTEuNzY3ODQgMC41NTY5OSwtMy4xNzI1OSAxLjU5ODUxLC00LjIxNDI1IDEuMDQxMzgsLTEuMDQx
MjUgMi40NDYxMywtMS41NzQwOCA0LjIxNDI1LC0xLjU5ODUgMS4wMDkwOCwwLjAzMjUgMS45OTQw
MiwwLjM1NTQyIDIuOTU0ODIsMC45Njg3OCAwLjk2MDY0LDAuNjEzNzcgMS42NTQ5NCwxLjMyNDIy
IDIuMDgyOSwyLjEzMTM1IGwgNzUuMTc4MzEsMTY1Ljg1NzMxMyBjIDEuNDIwNzQsMi45NjI5MTkg
My41MTk3OSw1LjM2ODc0OSA2LjI5NzE1LDcuMjE3NDk2IDIuNzc3MDUsMS44NDg4MDMgNS44NDQ4
OSwyLjgwMTQ1MSA5LjIwMzUzLDIuODU3OTQ4IDMuMzM0MDksLTAuMDQwMzQgNi4zNTM0OSwtMC45
MjgzOTQgOS4wNTgyMSwtMi42NjQxNzcgMi43MDQzNiwtMS43MzU3MyA0Ljg1MTg1LC00LjA3Njk3
NyA2LjQ0MjQ4LC03LjAyMzc1IGwgNzUuMTc4MzEsLTE2Ni4yNDQ4MyBjIDAuNTg5MDksLTAuODA3
MTIgMS4zNDc5NywtMS41MTc1NyAyLjI3NjY2LC0yLjEzMTM1IDAuOTI4MTcsLTAuNjEzMzcgMS45
Nzc2OSwtMC45MzYzIDMuMTQ4NTgsLTAuOTY4NzggMS41ODIxLDAuMDI0NCAyLjg3MzgyLDAuNTU3
MjYgMy44NzUxNywxLjU5ODUxIDEuMDAwODEsMS4wNDE2NSAxLjUxNzUsMi40NDY0IDEuNTUwMDcs
NC4yMTQyNCBsIDAsMTI5LjgxODIyNCBjIDAuNTAwMjcsMTkuMjcwOTQ1IDcuMTUyNjQsMzUuMjcy
MTU0IDE5Ljk1NzEyLDQ4LjAwMzY3NSAxMi44MDM5LDEyLjczMTU2MSAyOC43NTY2NywxOS4zMzU0
OTIxIDQ3Ljg1ODM2LDE5LjgxMTgxMzMgbCAwLC0yNDUuNjg1ODIyMyBjIC0wLjE3Nzk0LC03LjE2
ODgyIC0yLjYzMjIxLC0xMy4xNzUzMyAtNy4zNjI4MiwtMTguMDE5NTUgLTQuNzMxMjcsLTQuODQz
NyAtMTAuNjczMTksLTcuMzYyNTUgLTE3LjgyNTc4LC03LjU1NjU4IHoiIC8+CiAgICAgICAgICA8
cGF0aAogICAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAg
ICAgICAgIGlkPSJwYXRoMzM2NCIKICAgICAgICAgICAgIGQ9Im0gOTYzLjA1ODQsLTI2Mi4zODcz
NyAtMTM1LjI0MzQ2LDAgYyAtMTkuMjcwOTUsMC40OTI3NSAtMzUuMjcyMTYsNy4xNjEyNiAtNDgu
MDAzNjgsMjAuMDA1NTggLTEyLjczMTU2LDEyLjg0NDgxIC0xOS4zMzU0OSwyOC45MTA2MSAtMTku
ODExODEsNDguMTk3NDIgbCAwLDEzNS4yNDM0NjQgYyAwLjQ3NjMyLDE5LjI3MDk0NSA3LjA4MDI1
LDM1LjI3MjE1NCAxOS44MTE4MSw0OC4wMDM2NzUgMTIuNzMxNTMsMTIuNzMxNTYxIDI4LjczMjcz
LDE5LjMzNTQ5MjEgNDguMDAzNjgsMTkuODExODEzMyBsIDEzNS4yNDM0NiwwIGMgMTkuMjcwNjcs
LTAuNDc2MzI4OSAzNS4yNzE4OCwtNy4wODAyNjIgNDguMDAzNywtMTkuODExODE5MyAxMi43MzEz
LC0xMi43MzE1MTcgMTkuMzM1MiwtMjguNzMyNzI0IDE5LjgxMTgsLTQ4LjAwMzY2OSBsIDAsLTEz
NS4yNDM0NjQgYyAtMC40NzY2LC0xOS4yODY4MiAtNy4wODA1LC0zNS4zNTI2MiAtMTkuODExOCwt
NDguMTk3NDQgLTEyLjczMTgyLC0xMi44NDQzMiAtMjguNzMzMDMsLTE5LjUxMjgzIC00OC4wMDM3
LC0yMC4wMDU1NiB6IG0gMCwxODYuMzk1NzEzIGMgMC4zNTUwMiwwLjcxMDUzNiAtMC4zNTU0Mywz
LjU1MjMyNSAtMi4xMzEzNSw4LjUyNTM3NiAtMS43NzYzMyw0Ljk3MzIwMyAtNi43NDk0Niw3Ljgx
NDk5MiAtMTQuOTE5NCw4LjUyNTM3NSBsIC0xMDEuMTQxOTYsMCBjIC0wLjcxMDUzLDAuMzU1Mjk0
IC0zLjU1MjMyLC0wLjM1NTE1NiAtOC41MjUzOCwtMi4xMzEzNSAtNC45NzMyMSwtMS43NzYwNTQg
LTcuODE1LC02Ljc0OTE4MiAtOC41MjUzNywtMTQuOTE5NDAxIGwgMCwtMTAxLjUyOTQ3MyBjIC0w
LjM1NTI5LC0wLjY5NDExIDAuMzU1MTUsLTMuNDcxMzIgMi4xMzEzNCwtOC4zMzE2MiAxLjc3NjA0
LC00Ljg1OTkyIDYuNzQ5MTgsLTcuNjM3MTIgMTQuOTE5NDEsLTguMzMxNjIgbCAxMDEuMTQxOTYs
MCBjIDAuNzEwMjYsLTAuMzQ2OTQgMy41NTIwNSwwLjM0NzM2IDguNTI1MzcsMi4wODI5MSA0Ljk3
MjkzLDEuNzM1OTUgNy44MTQ3Miw2LjU5NjA1IDguNTI1MzgsMTQuNTgwMzMgeiIgLz4KICAgICAg
ICAgIDxwYXRoCiAgICAgICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgog
ICAgICAgICAgICAgaWQ9InBhdGgzMzY2IgogICAgICAgICAgICAgc3R5bGU9ImZpbGw6I2U1NzAw
MDtmaWxsLW9wYWNpdHk6MSIKICAgICAgICAgICAgIGQ9Im0gMTM3Mi42MDEzLC0yNDMuMDExNTIg
YyAtNS44Nzc3LC01Ljg3NzA4IC0xMi43MjM4LC0xMC40OTQ5OSAtMjAuNTM4NCwtMTMuODUzNzQg
LTcuODE1MiwtMy4zNTgyMSAtMTYuMjExNCwtNS4wNjk3NCAtMjUuMTg4NiwtNS4xMzQ1OSAtOS41
NTEsMC4wNzI5IC0xOC4zNTA4LDEuOTYyMDggLTI2LjM5OTYsNS42Njc0NCAtOC4wNDkzLDMuNzA1
ODkgLTE1LjAwODUsOC43OTIwNSAtMjAuODc3NSwxNS4yNTg0OCBsIC01OC41MTUxLDY0LjMyNzgz
IC01OC45MDI2LC02NC4zMjc4MyBjIC02LjAyMjcsLTYuNjM1OTggLTEyLjk2NTgsLTExLjc3MDU4
IC0yMC44MjksLTE1LjQwMzgxIC03Ljg2MzUsLTMuNjMyNyAtMTYuNTUwMywtNS40NzM0MSAtMjYu
MDYwNiwtNS41MjIxMSAtOC45Nzc1LDAuMDY0OSAtMTcuMzczNywxLjc3NjM5IC0yNS4xODg2LDUu
MTM0NiAtNy44MTQ5LDMuMzU4NzQgLTE0LjY2MSw3Ljk3NjY1IC0yMC41Mzg0LDEzLjg1MzczIGwg
MTA1Ljc5MjIsMTE2LjI1NTEzIC0xMDUuNzkyMiwxMTYuMjU1MTE5IGMgNS44Nzc0LDYuMDYzMDM3
MSAxMi43MjM1LDEwLjc5Mzk2NzA2IDIwLjUzODQsMTQuMTkyODAzOCA3LjgxNDksMy4zOTg4NDcg
MTYuMjExMSw1LjEyNjUyODUgMjUuMTg4Niw1LjE4MzA0OTUgOS4zODExLC0wLjA3MjY1OSAxOC4x
MzI2LC0xLjk2MTgwMzcgMjYuMjU0MywtNS42Njc0NDAxIDguMTIxNywtMy43MDU2MjUwOCAxNS4x
MjkzLC04Ljc5MTc4MDYgMjEuMDIyOCwtMTUuMjU4NDgyMiBsIDU4LjUxNTEsLTY0LjMyNzgzNCA1
OC41MTUxLDY0LjMyNzgzNCBjIDUuODY5LDYuNDY2NzAxNiAxMi44MjgyLDExLjU1Mjg1NTE5IDIw
Ljg3NzUsMTUuMjU4NDc2NCA4LjA0ODgsMy43MDU2MzI2IDE2Ljg0ODYsNS41OTQ3NzkzIDI2LjM5
OTYsNS42Njc0NDU5IDguOTc3MiwtMC4wNTY1MTMgMTcuMzczNCwtMS43ODQxOTI5IDI1LjE4ODYs
LTUuMTgzMDQzOCA3LjgxNDYsLTMuMzk4ODQwNTIgMTQuNjYwNywtOC4xMjk3NzI0IDIwLjUzODQs
LTE0LjE5MjgwOTUgTCAxMjY2LjgwOTEsLTEyNi43NTYzOSB6IiAvPgogICAgICAgIDwvZz4KICAg
ICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==">
</span><br>Proxmox VE管理ガイド</h1>
<span id="author">Proxmox Server Solutions GmbH</span><br />
<span id="email" class="monospaced"><a href="mailto:support@proxmox.com">&lt;support@proxmox.com&gt;</a></span><br />
<span id="revnumber">バージョン8.3.1</span>
<span id="revdate">2024年11月20日（水）21:19:42 CET</span>
<div id="toc">
  <a href="index.html" style="font-size: 0.8em;">索引</a>
  <div id="toctitle">目次</div>
  <noscript><p><b>目次を表示するには、JavaScriptを有効にする必要があります。</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">
1.はじめに<a class="headerlink" href="#_introduction" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEは、仮想マシンとコンテナを実行するためのプラットフォームです。Debian Linuxベースで、完全にオープンソースです。最大限の柔軟性を実現するために、カーネルベースの仮想マシン（KVM）とコンテナベースの仮想化（LXC）という2つの仮想化技術を実装しています。</p></div>
<div class="paragraph">
<p>主な設計目標の1つは、管理をできるだけ簡単にすることでした。Proxmox VEは単一ノードで使用することも、多数のノードからなるクラスタを構築することもできます。すべての管理タスクはWebベースの管理インターフェイスを使用して行うことができ、初心者ユーザでもProxmox VEのセットアップとインストールを数分で行うことができます。</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img alt="Proxmox Software Stack" src="data:image/svg+xml;base64,
PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjwh
RE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3
LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBi
eSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxl
OiBwdmVfc29mdHdhcmVfc3RhY2sgUGFnZXM6IDEgLS0+Cjxzdmcgd2lkdGg9IjUyNnB0IiBoZWln
aHQ9IjQwMXB0Igogdmlld0JveD0iMC4wMCAwLjAwIDUyNi4wMCA0MDEuMDAiIHhtbG5zPSJodHRw
Oi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5
OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUo
MSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMzk3KSI+Cjx0aXRsZT5wdmVfc29mdHdhcmVfc3Rh
Y2s8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQs
NCAtNCwtMzk3IDUyMiwtMzk3IDUyMiw0IC00LDQiLz4KPCEtLSBzdGFjayAtLT4KPGcgaWQ9Im5v
ZGUxIiBjbGFzcz0ibm9kZSI+PHRpdGxlPnN0YWNrPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iIzAw
NjE3ZiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjEyLC0yODkuNSAxMiwtMzg0LjUgNTA2LC0zODQu
NSA1MDYsLTI4OS41IDEyLC0yODkuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIx
MC41IiB5PSItMzY2LjUiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1z
aXplPSIyMC4wMCIgZmlsbD0id2hpdGUiPlVzZXIgVG9vbHM8L3RleHQ+Cjxwb2x5Z29uIGZpbGw9
IiMwMDYxN2YiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxNCwtMjkxLjUgMTQsLTM1Ni41IDUwNCwt
MzU2LjUgNTA0LC0yOTEuNSAxNCwtMjkxLjUiLz4KPHBvbHlnb24gZmlsbD0iI2ZmOTEwMCIgc3Ry
b2tlPSJub25lIiBwb2ludHM9IjE5LC0zMjYuNSAxOSwtMzUxLjUgMTA5LC0zNTEuNSAxMDksLTMy
Ni41IDE5LC0zMjYuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0IiB5PSItMzM1
LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIg
ZmlsbD0id2hpdGUiPnFtPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBzdHJva2U9Im5v
bmUiIHBvaW50cz0iMTE0LC0zMjYuNSAxMTQsLTM1MS41IDIyNSwtMzUxLjUgMjI1LC0zMjYuNSAx
MTQsLTMyNi41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ5IiB5PSItMzM1LjMi
IGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmls
bD0id2hpdGUiPnB2ZXNtPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBzdHJva2U9Im5v
bmUiIHBvaW50cz0iMjMwLC0zMjYuNSAyMzAsLTM1MS41IDM1MSwtMzUxLjUgMzUxLC0zMjYuNSAy
MzAsLTMyNi41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjY5LjUiIHk9Ii0zMzUu
MyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBm
aWxsPSJ3aGl0ZSI+cHZldW08L3RleHQ+Cjxwb2x5Z29uIGZpbGw9IiNmZjkxMDAiIHN0cm9rZT0i
bm9uZSIgcG9pbnRzPSIzNTYsLTMyNi41IDM1NiwtMzUxLjUgNDk5LC0zNTEuNSA0OTksLTMyNi41
IDM1NiwtMzI2LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIzOTAuNSIgeT0iLTMz
NS4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAi
IGZpbGw9IndoaXRlIj5oYSYjNDU7bWFuYWdlcjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2ZmOTEw
MCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5LC0yOTYuNSAxOSwtMzIxLjUgMTA5LC0zMjEuNSAx
MDksLTI5Ni41IDE5LC0yOTYuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0LjUi
IHk9Ii0zMDUuMyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9
IjE0LjAwIiBmaWxsPSJ3aGl0ZSI+cGN0PC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBz
dHJva2U9Im5vbmUiIHBvaW50cz0iMTE0LC0yOTYuNSAxMTQsLTMyMS41IDIyNSwtMzIxLjUgMjI1
LC0yOTYuNSAxMTQsLTI5Ni41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ5IiB5
PSItMzA1LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIx
NC4wMCIgZmlsbD0id2hpdGUiPnB2ZWNtPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBz
dHJva2U9Im5vbmUiIHBvaW50cz0iMjMwLC0yOTYuNSAyMzAsLTMyMS41IDM1MSwtMzIxLjUgMzUx
LC0yOTYuNSAyMzAsLTI5Ni41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjY0LjUi
IHk9Ii0zMDUuMyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9
IjE0LjAwIiBmaWxsPSJ3aGl0ZSI+cHZlY2VwaDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2ZmOTEw
MCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjM1NiwtMjk2LjUgMzU2LC0zMjEuNSA0OTksLTMyMS41
IDQ5OSwtMjk2LjUgMzU2LC0yOTYuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjM5
MyIgeT0iLTMwNS4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQtc2l6
ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5wdmUmIzQ1O2ZpcmV3YWxsPC90ZXh0Pgo8cG9seWdvbiBm
aWxsPSIjMDA2MTdmIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTIsLTIxOC41IDEyLC0yODMuNSA1
MDYsLTI4My41IDUwNiwtMjE4LjUgMTIsLTIxOC41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFy
dCIgeD0iMjIwLjUiIHk9Ii0yNjUuNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlm
IiBmb250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+U2VydmljZXM8L3RleHQ+Cjxwb2x5Z29u
IGZpbGw9IiMwMDYxN2YiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxNCwtMjIwLjUgMTQsLTI1NS41
IDUwNCwtMjU1LjUgNTA0LC0yMjAuNSAxNCwtMjIwLjUiLz4KPHBvbHlnb24gZmlsbD0iI2U1NzAw
MCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5LC0yMjUuNSAxOSwtMjUwLjUgMTA0LC0yNTAuNSAx
MDQsLTIyNS41IDE5LC0yMjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjM0IiB5
PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIx
NC4wMCIgZmlsbD0id2hpdGUiPnB2ZXByb3h5PC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZTU3MDAw
IiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTA5LC0yMjUuNSAxMDksLTI1MC41IDIxMSwtMjUwLjUg
MjExLC0yMjUuNSAxMDksLTIyNS41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTI0
IiB5PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXpl
PSIxNC4wMCIgZmlsbD0id2hpdGUiPnB2ZWRhZW1vbjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2U1
NzAwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjIxNiwtMjI1LjUgMjE2LC0yNTAuNSAyOTgsLTI1
MC41IDI5OCwtMjI1LjUgMjE2LC0yMjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9
IjIzMSIgeT0iLTIzNC4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQt
c2l6ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5wdmVzdGF0ZDwvdGV4dD4KPHBvbHlnb24gZmlsbD0i
I2U1NzAwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjMwMywtMjI1LjUgMzAzLC0yNTAuNSAzOTgs
LTI1MC41IDM5OCwtMjI1LjUgMzAzLC0yMjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQi
IHg9IjMxNy41IiB5PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIg
Zm9udC1zaXplPSIxNC4wMCIgZmlsbD0id2hpdGUiPnB2ZSYjNDU7aGEmIzQ1O2xybTwvdGV4dD4K
PHBvbHlnb24gZmlsbD0iI2U1NzAwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjQwMywtMjI1LjUg
NDAzLC0yNTAuNSA0OTksLTI1MC41IDQ5OSwtMjI1LjUgNDAzLC0yMjUuNSIvPgo8dGV4dCB0ZXh0
LWFuY2hvcj0ic3RhcnQiIHg9IjQxNy41IiB5PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRp
Y2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0id2hpdGUiPnB2ZSYjNDU7Y2x1
c3RlcjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2FiYmFiYSIgc3Ryb2tlPSJub25lIiBwb2ludHM9
IjIwLC05NS41IDIwLC0yMDQuNSAxMzMsLTIwNC41IDEzMywtOTUuNSAyMCwtOTUuNSIvPgo8dGV4
dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjYxIiB5PSItMTc4LjUiIGZvbnQtZmFtaWx5PSJIZWx2
ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIyMC4wMCIgZmlsbD0id2hpdGUiPlZNPC90ZXh0
Pgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjI1LC0xMzcuNSAy
NSwtMTYyLjUgNzQsLTE2Mi41IDc0LC0xMzcuNSAyNSwtMTM3LjUiLz4KPHRleHQgdGV4dC1hbmNo
b3I9InN0YXJ0IiB4PSIzNyIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMt
U2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4KPHBvbHln
b24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSI3OSwtMTM3LjUgNzksLTE2Mi41
IDEyOCwtMTYyLjUgMTI4LC0xMzcuNSA3OSwtMTM3LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0
YXJ0IiB4PSI5MSIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYi
IGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4KPHBvbHlnb24gZmls
bD0iIzAwNjE3ZiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjI1LC0xMDAuNSAyNSwtMTMyLjUgMTI4
LC0xMzIuNSAxMjgsLTEwMC41IDI1LC0xMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQi
IHg9IjMyLjUiIHk9Ii0xMTEuNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBm
b250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+R3Vlc3QgT1M8L3RleHQ+Cjxwb2x5Z29uIGZp
bGw9IiNhYmJhYmEiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxMzksLTk1LjUgMTM5LC0yMDQuNSAy
NTIsLTIwNC41IDI1MiwtOTUuNSAxMzksLTk1LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0
IiB4PSIxODAiIHk9Ii0xNzguNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBm
b250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+Vk08L3RleHQ+Cjxwb2x5Z29uIGZpbGw9Indo
aXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTQ0LC0xMzcuNSAxNDQsLTE2Mi41IDE5MywtMTYy
LjUgMTkzLC0xMzcuNSAxNDQsLTEzNy41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0i
MTU2IiB5PSItMTQ2LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1z
aXplPSIxNC4wMCIgZmlsbD0iIzAwNjE3ZiI+QXBwPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSJ3aGl0
ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5OCwtMTM3LjUgMTk4LC0xNjIuNSAyNDcsLTE2Mi41
IDI0NywtMTM3LjUgMTk4LC0xMzcuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIx
MCIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQtc2l6
ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iIzAwNjE3
ZiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE0NCwtMTAwLjUgMTQ0LC0xMzIuNSAyNDcsLTEzMi41
IDI0NywtMTAwLjUgMTQ0LC0xMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE1
MS41IiB5PSItMTExLjUiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1z
aXplPSIyMC4wMCIgZmlsbD0id2hpdGUiPkd1ZXN0IE9TPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIj
ZmY5MTAwIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTgsLTY1LjUgMTgsLTkxLjUgMjU0LC05MS41
IDI1NCwtNjUuNSAxOCwtNjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjEwOC41
IiB5PSItNzMuNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9
IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+UUVNVTwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0
IiB4PSIzMjAuNSIgeT0iLTE5Mi44IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYi
IGZvbnQtc2l6ZT0iMTQuMDAiPiA8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0i
MzIwLjUiIHk9Ii0xNzAuOCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250
LXNpemU9IjE0LjAwIj4gPC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjMyMC41
IiB5PSItMTQ5LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXpl
PSIxNC4wMCI+IDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2FiYmFiYSIgc3Ryb2tlPSJub25lIiBw
b2ludHM9IjI2NiwtNjcuNSAyNjYsLTEzOS41IDM3OSwtMTM5LjUgMzc5LC02Ny41IDI2NiwtNjcu
NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjI3OC41IiB5PSItMTEzLjUiIGZvbnQt
ZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIyMC4wMCIgZmlsbD0id2hp
dGUiPkNvbnRhaW5lcjwvdGV4dD4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIg
cG9pbnRzPSIyNzEsLTcyLjUgMjcxLC05Ny41IDMyMCwtOTcuNSAzMjAsLTcyLjUgMjcxLC03Mi41
Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjgzIiB5PSItODEuMyIgZm9udC1mYW1p
bHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDA2MTdm
Ij5BcHA8L3RleHQ+Cjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0i
MzI1LC03Mi41IDMyNSwtOTcuNSAzNzQsLTk3LjUgMzc0LC03Mi41IDMyNSwtNzIuNSIvPgo8dGV4
dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjMzNyIgeT0iLTgxLjMiIGZvbnQtZmFtaWx5PSJIZWx2
ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwNjE3ZiI+QXBwPC90
ZXh0Pgo8cG9seWdvbiBmaWxsPSIjYWJiYWJhIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMzg1LC02
Ny41IDM4NSwtMTM5LjUgNDk4LC0xMzkuNSA0OTgsLTY3LjUgMzg1LC02Ny41Ii8+Cjx0ZXh0IHRl
eHQtYW5jaG9yPSJzdGFydCIgeD0iMzk3LjUiIHk9Ii0xMTMuNSIgZm9udC1mYW1pbHk9IkhlbHZl
dGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+Q29udGFpbmVy
PC90ZXh0Pgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjM5MCwt
NzIuNSAzOTAsLTk3LjUgNDM5LC05Ny41IDQzOSwtNzIuNSAzOTAsLTcyLjUiLz4KPHRleHQgdGV4
dC1hbmNob3I9InN0YXJ0IiB4PSI0MDIiIHk9Ii04MS4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNh
LHNhbnMtU2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4K
PHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSI0NDQsLTcyLjUgNDQ0
LC05Ny41IDQ5MywtOTcuNSA0OTMsLTcyLjUgNDQ0LC03Mi41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9y
PSJzdGFydCIgeD0iNDU2IiB5PSItODEuMyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNl
cmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDA2MTdmIj5BcHA8L3RleHQ+Cjxwb2x5Z29u
IGZpbGw9IiMwMDYxN2YiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxMiwtNy41IDEyLC01My41IDUw
NiwtNTMuNSA1MDYsLTcuNSAxMiwtNy41Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDYxN2YiIHN0cm9r
ZT0ibm9uZSIgcG9pbnRzPSIxNCwtOS41IDE0LC01MS41IDUwNCwtNTEuNSA1MDQsLTkuNSAxNCwt
OS41Ii8+Cjxwb2x5Z29uIGZpbGw9IiNmZjkxMDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxOSwt
MTggMTksLTQzIDY0LC00MyA2NCwtMTggMTksLTE4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFy
dCIgeD0iMjQiIHk9Ii0yNi44IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZv
bnQtc2l6ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5LVk08L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9y
PSJzdGFydCIgeD0iMTUwLjUiIHk9Ii0yNS41IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMt
U2VyaWYiIGZvbnQtc2l6ZT0iMjAuMDAiIGZpbGw9IndoaXRlIj5MaW51eCBLZXJuZWw8L3RleHQ+
Cjxwb2x5Z29uIGZpbGw9IiNmZjkxMDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIzNDksLTE4IDM0
OSwtNDMgNDI0LC00MyA0MjQsLTE4IDM0OSwtMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0
IiB4PSIzNTQiIHk9Ii0yNi44IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZv
bnQtc2l6ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5BcHBBcm1vcjwvdGV4dD4KPHBvbHlnb24gZmls
bD0iI2ZmOTEwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjQyOSwtMTggNDI5LC00MyA0OTksLTQz
IDQ5OSwtMTggNDI5LC0xOCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjQzNCIgeT0i
LTI2LjgiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4w
MCIgZmlsbD0id2hpdGUiPmNncm91cHM8L3RleHQ+CjwvZz4KPC9nPgo8L3N2Zz4K" />
</div>
</div>
<div class="sect2">
<h3 id="intro_central_management">
<span>1.1.中央管理</span> <a class="headerlink" href="#intro_central_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>多くの人はシングルノードから始めますが、Proxmox VEは大規模なクラスタノードにスケールアウトできます。クラスタスタックは完全に統合されており、デフォルトのインストールで出荷されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ユニークなマルチマスター・デザイン</dt>
<dd>
<p>
統合されたWebベースの管理インターフェイスにより、すべてのKVMゲストとLinuxコンテナ、さらにはクラスタ全体の概要を明確に把握できます。GUIからVMやコンテナ、ストレージ、クラスタを簡単に管理できます。複雑で高価な管理サーバを別途インストールする必要はありません。</p>
</dd>
<dt class="hdlist1">
Proxmox クラスタファイルシステム (pmxcfs)</dt>
<dd>
<p>
Proxmox VEは、独自のProxmox Clusterファイルシステム(pmxcfs)を使用しています。pmxcfsは、設定ファイルを格納するためのデータベース駆動型のファイルシステムです。これにより、何千もの仮想マシンの設定を保存できます。corosyncを使用することで、これらのファイルはすべてのクラスタノードでリアルタイムに複製されます。ファイルシステムは、すべてのデータをディスク上の永続データベース内に格納しますが、データのコピーはRAMに存在し、最大30MBのストレージサイズを提供します。</p>
<div class="paragraph">
<p>Proxmox VEは、このユニークなクラスタファイルシステムを使用する唯一の仮想化プラットフォームです。</p></div>
</dd>
<dt class="hdlist1">
ウェブベースの管理インターフェイス</dt>
<dd>
<p>
Proxmox VEの使い方は簡単です。管理タスクは付属のWebベースの管理インターフェイスで実行できます。別の管理ツールをインストールしたり、巨大なデータベースを持つ管理ノードを追加したりする必要はありません。マルチマスターツールにより、クラスタのどのノードからでもクラスタ全体を管理できます。JavaScriptフレームワーク(ExtJS)をベースとしたWebベースの中央管理により、GUIからすべての機能を制御し、各ノードの履歴やシスログを確認することができます。これには、バックアップやリストアジョブの実行、ライブマイグレーションやHAトリガーアクティビティが含まれます。</p>
</dd>
<dt class="hdlist1">
コマンドライン</dt>
<dd>
<p>
UnixシェルやWindows Powershellの快適さに慣れている上級ユーザのために、Proxmox VEは仮想環境のすべてのコンポーネントを管理するコマンドラインインタフェースを提供します。このコマンドラインインタフェースは、インテリジェントなタブ補完とUNIX manページ形式の完全なドキュメントを備えています。</p>
</dd>
<dt class="hdlist1">
REST API</dt>
<dd>
<p>
Proxmox VEはRESTful APIを使用しています。主要なデータ形式としてJSONを選択し、API全体はJSONスキーマを使用して正式に定義されています。これにより、カスタムホスティング環境のようなサードパーティの管理ツールと迅速かつ容易に統合することができます。</p>
</dd>
<dt class="hdlist1">
役割ベースの管理</dt>
<dd>
<p>
ロールベースのユーザ・権限管理を使用することで、すべてのオブジェクト（VM、ストレージ、ノードなど）に対するきめ細かなアクセスを定義できます。これにより、権限を定義し、オブジェクトへのアクセスを制御することができます。この概念はアクセス制御リストとしても知られています：各許可は、特定のパス上のサブジェクト（ユーザまたはグループ）とロール（権限のセット）を指定します。</p>
</dd>
<dt class="hdlist1">
認証領域</dt>
<dd>
<p>
Proxmox VEは、Microsoft Active Directory、LDAP、Linux PAM標準認証、または組み込みのProxmox VE認証サーバなど、複数の認証ソースをサポートしています。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_flexible_storage">
<span>1.2.柔軟なストレージ</span> <a class="headerlink" href="#_flexible_storage" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのストレージモデルは非常に柔軟です。仮想マシンイメージは、1つまたは複数のローカルストレージ、またはNFSやSANのような共有ストレージに保存できます。制限はなく、好きなだけストレージ定義を設定できます。Debian Linux で利用可能なすべてのストレージ技術を使用できます。</p></div>
<div class="paragraph">
<p>共有ストレージにVMを格納する主な利点の1つは、クラスタ内のすべてのノードがVMディスクイメージに直接アクセスできるため、ダウンタイムなしに実行中のマシンをライブマイグレーションできることです。</p></div>
<div class="paragraph">
<p>現在、以下のネットワーク・ストレージ・タイプをサポートしています：</p></div>
<div class="ulist"><ul>
<li>
<p>
LVMグループ（iSCSIターゲットによるネットワークバックアップ）</p>
</li>
<li>
<p>
iSCSIターゲット</p>
</li>
<li>
<p>
NFSシェア</p>
</li>
<li>
<p>
CIFS共有</p>
</li>
<li>
<p>
Ceph RBD</p>
</li>
<li>
<p>
iSCSI LUNの直接使用</p>
</li>
<li>
<p>
GlusterFS</p>
</li>
</ul></div>
<div class="paragraph">
<p>サポートされるローカル・ストレージ・タイプは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
LVMグループ（ブロック・デバイス、FCデバイス、DRBDなどのローカル・バッキング・デバイス）</p>
</li>
<li>
<p>
ディレクトリ（既存のファイルシステム上のストレージ）</p>
</li>
<li>
<p>
ゼットエフエス</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_integrated_backup_and_restore">
<span>1.3.統合バックアップとリストア</span> <a class="headerlink" href="#_integrated_backup_and_restore" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>統合バックアップツール<span class="monospaced">（vzdump</span>）は、実行中のコンテナとKVMゲストの一貫したスナップショットを作成します。基本的には、VM/CT設定ファイルを含むVMまたはCTデータのアーカイブを作成します。</p></div>
<div class="paragraph">
<p>KVMライブバックアップは、NFS、CIFS、iSCSI LUN、Ceph RBD上のVMイメージを含むすべてのストレージタイプで動作します。新しいバックアップフォーマットは、VMバックアップを高速かつ効果的に保存するために最適化されています（疎なファイル、順序のずれたデータ、最小化されたI/O）。</p></div>
</div>
<div class="sect2">
<h3 id="_high_availability_cluster">
<span>1.4.高可用性クラスタ</span> <a class="headerlink" href="#_high_availability_cluster" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>マルチノードのProxmox VE HA Clusterは、可用性の高い仮想サーバの定義を可能にします。Proxmox VE HA Clusterは、実績のあるLinux HAテクノロジに基づいており、安定した信頼性の高いHAサービスを提供します。</p></div>
</div>
<div class="sect2">
<h3 id="_flexible_networking">
<span>1.5.柔軟なネットワーキング</span> <a class="headerlink" href="#_flexible_networking" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはブリッジネットワークモデルを採用しています。各ゲストからの仮想ネットワークケーブルがすべて同じスイッチに接続されているかのように、すべてのVMは1つのブリッジを共有できます。VMを外部に接続するために、ブリッジは物理ネットワークカードに接続され、TCP/IPコンフィギュレーションが割り当てられます。</p></div>
<div class="paragraph">
<p>さらに柔軟性を高めるために、VLAN (IEEE 802.1q)とネットワークボンディング/アグリゲーションが可能です。このようにして、Linuxネットワークスタックのフルパワーを活用して、Proxmox VEホスト用に複雑で柔軟な仮想ネットワークを構築することができます。</p></div>
</div>
<div class="sect2">
<h3 id="_integrated_firewall">
<span>1.6.統合ファイアウォール</span> <a class="headerlink" href="#_integrated_firewall" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>統合されたファイアウォールにより、どのVMやコンテナのインターフェイスでもネットワークパケットをフィルタリングできます。共通のファイアウォールルールセットは、「セキュリティグループ」にグループ化できます。</p></div>
</div>
<div class="sect2">
<h3 id="chapter_hyper_converged_infrastructure">
<span>1.7.ハイパーコンバージドインフラ</span> <a class="headerlink" href="#chapter_hyper_converged_infrastructure" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは、コンピュート、ストレージ、ネットワークリソースを緊密に統合し、可用性の高いクラスタ、バックアップ/リストア、ディザスタリカバリを管理する仮想化プラットフォームです。すべてのコンポーネントはソフトウェアで定義され、互いに互換性があります。</p></div>
<div class="paragraph">
<p>そのため、一元化されたWeb管理インターフェイスを介して、単一のシステムのように管理することが可能です。これらの機能により、Proxmox VEはオープンソースの<a href="https://en.wikipedia.org/wiki/Hyper-converged_infrastructure">ハイパーコンバージドインフラストラクチャの</a>導入と管理に理想的な選択肢となります。</p></div>
<div class="sect3">
<h4 id="_benefits_of_a_hyper_converged_infrastructure_hci_with_proxmox_ve">1.7.1.Proxmox VE によるハイパーコンバージドインフラ (HCI) のメリット<a class="headerlink" href="#_benefits_of_a_hyper_converged_infrastructure_hci_with_proxmox_ve" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ハイパーコンバージドインフラ（HCI）は、高いインフラ需要が低い管理予算に見合う展開、リモートオフィスやブランチオフィス環境などの分散セットアップ、仮想プライベートクラウドやパブリッククラウドに特に有効です。</p></div>
<div class="paragraph">
<p>HCIには次のような利点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
スケーラビリティ：コンピュート、ネットワーク、ストレージデバイスのシームレスな拡張（サーバーとストレージを互いに独立して迅速に拡張すること）。</p>
</li>
<li>
<p>
低コスト：Proxmox VEはオープンソースであり、コンピュート、ストレージ、ネットワーク、バックアップ、管理センターなど必要なコンポーネントをすべて統合しています。高価なコンピュータ/ストレージインフラストラクチャを置き換えることができます。</p>
</li>
<li>
<p>
データ保護と効率化：バックアップやディザスタリカバリなどのサービスが統合されています。</p>
</li>
<li>
<p>
シンプルさ：簡単な設定と集中管理。</p>
</li>
<li>
<p>
オープンソース：ベンダーロックインがありません。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_hyper_converged_infrastructure_storage">1.7.2.ハイパーコンバージドインフラストラクチャストレージ<a class="headerlink" href="#_hyper_converged_infrastructure_storage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEは、ハイパーコンバージドストレージインフラの展開を緊密に統合してサ ポートします。例えば、ウェブインタフェースのみを使用して、以下の2つのストレージテクノロジを展開および管理できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Ceph</strong>: 自己修復と自己管理の両方を備えた、信頼性が高く拡張性の高い共有ストレージシステムです。<a href="#chapter_pveceph">Proxmox VEノードでCephサービスを管理する方法を</a>ご覧ください。</p>
</li>
<li>
<p>
<strong>ZFS</strong>：ファイルシステムと論理ボリュームマネージャを組み合わせたもので、データの破損に対する広範な保護、さまざまなRAIDモード、高速で安価なスナップショットなどの機能を備えています。<a href="#chapter_zfs">Proxmox VEノードでZFSのパワーを活用する方法を</a>ご覧ください。</p>
</li>
</ul></div>
<div class="paragraph">
<p>上記以外にも、Proxmox VEは幅広い追加ストレージテクノロジの統合をサポートしています。これらについては<a href="#chapter_storage">ストレージマネージャの章</a>を参照してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_why_open_source">
<span>1.8.なぜオープンソースなのか</span> <a class="headerlink" href="#_why_open_source" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはLinuxカーネルを使用し、Debian GNU/Linuxディストリビューションをベースにしています。Proxmox VEのソースコードは<a href="https://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public License, version 3の</a>下でリリースされています。つまり、いつでも自由にソースコードを閲覧したり、プロジェクトに貢献することができます。</p></div>
<div class="paragraph">
<p>Proxmoxでは、可能な限りオープンソースソフトウェアを使用することをお約束します。オープンソースソフトウェアを使用することで、すべての機能へのフルアクセスが保証され、高いセキュリティと信頼性が保証されます。私たちは、誰もがソフトウェアのソースコードにアクセスし、それを実行し、ビルドし、プロジェクトに変更を提出する権利を持つべきだと考えています。Proxmoxは、製品が常にプロフェッショナルな品質基準を満たしていることを保証します。</p></div>
<div class="paragraph">
<p>オープンソースソフトウェアはまた、コストを低く抑え、コアインフラを単一のベンダーから独立させるのに役立ちます。</p></div>
</div>
<div class="sect2">
<h3 id="_your_benefits_with_proxmox_ve">
<span>1.9.Proxmox VE</span> <a class="headerlink" href="#_your_benefits_with_proxmox_ve" title="Permalink to this heading"></a><span>のメリット</span></h3>
<div class="ulist"><ul>
<li>
<p>
オープンソースソフトウェア</p>
</li>
<li>
<p>
ベンダーロックインなし</p>
</li>
<li>
<p>
Linuxカーネル</p>
</li>
<li>
<p>
迅速な設置と使いやすさ</p>
</li>
<li>
<p>
ウェブベースの管理インターフェイス</p>
</li>
<li>
<p>
REST API</p>
</li>
<li>
<p>
巨大で活発なコミュニティ</p>
</li>
<li>
<p>
低い管理コストとシンプルな導入</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="getting_help">
<span>1.10.ヘルプを得る</span> <a class="headerlink" href="#getting_help" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_proxmox_ve_wiki">1.10.1.Proxmox VE Wiki<a class="headerlink" href="#_proxmox_ve_wiki" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>主な情報源は<a href="https://pve.proxmox.com/wiki/">Proxmox VE Wiki</a>です。リファレンスドキュメントとユーザー投稿コンテンツが統合されています。</p></div>
</div>
<div class="sect3">
<h4 id="_community_support_forum">1.10.2.コミュニティサポートフォーラム<a class="headerlink" href="#_community_support_forum" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE自体は完全なオープンソースであるため、<a href="https://forum.proxmox.com/">Proxmox VEコミュニティフォーラムを</a>利用したディスカッションや知識の共有を常にユーザーに推奨しています。このフォーラムはProxmoxのサポートチームによって管理されており、世界中から多くのユーザが参加しています。 このような大規模なフォーラムは、言うまでもなく、情報を得るのに最適な場所です。</p></div>
</div>
<div class="sect3">
<h4 id="_mailing_lists">1.10.3.メーリングリスト<a class="headerlink" href="#_mailing_lists" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEコミュニティと電子メールで迅速に連絡を取ることができます。</p></div>
<div class="ulist"><ul>
<li>
<p>
ユーザー向けメーリングリスト:<a href="http://lists.proxmox.com/cgi-bin/mailman/listinfo/pve-user">Proxmox VE ユーザーリスト</a></p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは完全にオープンソースであり、貢献を歓迎します！開発者の主なコミュニケーションチャネルは次のとおりです：</p></div>
<div class="ulist"><ul>
<li>
<p>
開発者向けメーリングリスト:<a href="http://lists.proxmox.com/cgi-bin/mailman/listinfo/pve-devel">Proxmox VE開発ディスカッション</a></p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_commercial_support">1.10.4.コマーシャル・サポート<a class="headerlink" href="#_commercial_support" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox Server Solutions GmbHは、<a href="https://proxmox.com/en/proxmox-virtual-environment/pricing">Proxmox VEサブスクリプションサービスプランとして</a>エンタープライズサポートも提供しています。 サブスクリプションを利用するすべてのユーザは、Proxmox VE<a href="#sysadmin_enterprise_repo">エンタープライズリポジトリに</a>アクセスでき、ベーシック、スタンダード、またはプレミアムサブスクリプションでは、Proxmoxカスタマーポータルにもアクセスできます。カスタマーポータルでは、Proxmox VE開発者による応答時間を保証したヘルプとサポートを提供します。</p></div>
<div class="paragraph">
<p>ボリュームディスカウント、または詳細については、<a href="mailto:sales@proxmox.com">sales@proxmox.com</a> までお問い合わせください。</p></div>
</div>
<div class="sect3">
<h4 id="_bug_tracker">1.10.5.バグトラッカー<a class="headerlink" href="#_bug_tracker" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmoxは<a href="https://bugzilla.proxmox.com">https://bugzilla.proxmox.com</a> で公開バグトラッカーを運営しています。問題が発生したら、そこに報告してください。問題はバグだけでなく、新機能や機能強化の要望でも構いません。バグトラッカーは問題を追跡するのに役立ち、問題が解決されると通知を送信します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="intro_project_history">
<span>1.11.プロジェクト履歴</span> <a class="headerlink" href="#intro_project_history" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>プロジェクトは2007年に始まり、2008年に最初の安定版がリリースされました。当時、コンテナにはOpenVZを、仮想マシンにはKVMを使っていました。クラスタリング機能は限定的で、ユーザーインターフェイスはシンプル（サーバーが生成するウェブページ）でした。</p></div>
<div class="paragraph">
<p>しかし、私たちはすぐに<a href="https://corosync.github.io/corosync/">Corosync</a>クラスタスタックを使用して新機能を開発しました。新しいProxmoxクラスタファイルシステム（pmxcfs）の導入は、クラスタの複雑さをユーザから完全に隠すことができるため、大きな前進でした。16ノードのクラスタを管理するのは、1つのノードを管理するのと同じくらい簡単です。</p></div>
<div class="paragraph">
<p>また、JSON-Schemaで記述された完全な宣言的仕様の新しいREST APIを導入しました。これにより、他の人々がProxmox VEをインフラストラクチャに統合し、追加サービスを簡単に提供できるようになりました。</p></div>
<div class="paragraph">
<p>また、新しいREST APIにより、オリジナルのユーザーインターフェイスをJavaScriptを使ったモダンなHTML5アプリケーションに置き換えることが可能になりました。また、古いJavaベースのVNCコンソールコードを<a href="https://kanaka.github.io/noVNC/">noVNCに</a>置き換えました。そのため、VMを管理するために必要なのはウェブブラウザだけです。</p></div>
<div class="paragraph">
<p>様々なストレージタイプのサポートも大きな課題です。特に、Proxmox VEは2014年にLinux上でZFSをデフォルトで出荷した最初のディストリビューションです。もう1つのマイルストーンは、ハイパーバイザーノード上で<a href="https://ceph.com/">Ceph</a>ストレージを実行・管理できるようになったことです。このようなセットアップは非常に費用対効果が高いです。</p></div>
<div class="paragraph">
<p>KVMの商用サポートを提供する最初の企業のひとつでした。KVMプロジェクト自体は継続的に進化し、今では広く使用されているハイパーバイザーです。リリースのたびに新機能が追加されています。私たちはKVMライブバックアップ機能を開発し、どのようなストレージタイプでもスナップショットバックアップを作成できるようにしました。</p></div>
<div class="paragraph">
<p>バージョン4.0で最も注目すべき変更は、OpenVZから<a href="https://linuxcontainers.org/">LXCへの</a>移行です。コンテナは深く統合され、仮想マシンと同じストレージとネットワーク機能を使用できるようになりました。</p></div>
</div>
<div class="sect2">
<h3 id="howto_improve_pve_docs">
<span>1.12.Proxmox VE ドキュメントの改善</span> <a class="headerlink" href="#howto_improve_pve_docs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEドキュメントへの貢献や改良はいつでも歓迎します。 貢献にはいくつかの方法があります。</p></div>
<div class="paragraph">
<p>このドキュメントに誤りや改善の余地がある場合は、<a href="https://bugzilla.proxmox.com/">Proxmoxのバグトラッカーに</a>バグを報告し、修正を提案してください。</p></div>
<div class="paragraph">
<p>新しいコンテンツを提案したい場合は、以下のオプションのいずれかを選択してください：</p></div>
<div class="ulist"><ul>
<li>
<p>
ウィキ特定のセットアップ、ハウツーガイド、チュートリアルについては、wikiが貢献するのに適したオプションです。</p>
</li>
<li>
<p>
リファレンス・ドキュメントすべてのユーザーに役立つ一般的な内容については、リファレンスドキュメントへの投稿を提案してください。これには、Proxmox VEの機能のインストール、設定、使用、トラブルシューティングの方法に関するすべての情報が含まれます。リファレンスドキュメントは<a href="https://en.wikipedia.org/wiki/AsciiDoc">asciidoc形式で</a>書かれています。ドキュメントを編集するには、git<span class="monospaced">://git.proxmox.com/git/pve-docs.gitに</span>あるgitリポジトリをクローンし、<a href="https://git.proxmox.com/?p=pve-docs.git;a=blob_plain;f=README.adoc;hb=HEAD">README.adoc</a>ドキュメントに従ってください。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEのコードベースに興味がある方は、<a href="https://pve.proxmox.com/wiki/Developer_Documentation">Developer Documentation</a>wikiの記事から始めることができます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="translation">
<span>1.13.Proxmox VEの翻訳</span> <a class="headerlink" href="#translation" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのユーザーインターフェースはデフォルトで英語です。新しい言語の追加、最新機能の翻訳、不完全な翻訳や一貫性のない翻訳の改善などのサポートを歓迎します。</p></div>
<div class="paragraph">
<p>翻訳ファイルの管理には<a href="https://www.gnu.org/software/gettext/">gettextを使って</a>います。<a href="https://poedit.net/">Poeditの</a>ようなツールは翻訳ファイルを編集するのに便利なユーザーインターフェイスを提供しますが、使い慣れたエディタであれば何を使ってもかまいません。翻訳にプログラミングの知識は必要ありません。</p></div>
<div class="sect3">
<h4 id="i18n_with_git">1.13.1.git<a class="headerlink" href="#i18n_with_git" title="Permalink to this heading"></a>を使った翻訳</h4>
<div class="paragraph">
<p>言語ファイルは<a href="https://git.proxmox.com/?p=proxmox-i18n.git">git リポジトリとして</a>公開されています。git に詳しい方は、<a href="https://pve.proxmox.com/wiki/Developer_Documentation">開発者向けドキュメントに従って</a>貢献してください。</p></div>
<div class="paragraph">
<p>次のようにして、新しい翻訳を作成することができます（&lt;LANG&gt;を言語IDに置き換えてください）：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># git clone git://git.proxmox.com/git/proxmox-i18n.git # cd proxmox-i18n # make init-&lt;LANG&gt;.po</pre>
</div></div>
<div class="paragraph">
<p>または、お好みのエディタを使用して、既存の翻訳を編集することができます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># poedit &lt;LANG&gt;.po</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="i18n_without_git">1.13.2.git を使わない翻訳<a class="headerlink" href="#i18n_without_git" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>gitに精通していなくても、Proxmox VEの翻訳を支援することができます。改善したい言語を見つけ、この言語ファイルの「raw」リンクを右クリックし、「<em>名前を付けてリンク先を保存...</em>」を選択してください。ファイルに変更を加え、最終的な翻訳を署名済みの<a href="https://pve.proxmox.com/wiki/Developer_Documentation#Software_License_and_Copyright">コントリビューターライセンス契約書とともに</a>office(at)proxmox.comに直接送ってください。</p></div>
</div>
<div class="sect3">
<h4 id="_testing_the_translation">1.13.3.翻訳のテスト<a class="headerlink" href="#_testing_the_translation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEで翻訳を使用するには、まず<span class="monospaced">.po</span>ファイルを<span class="monospaced">.js</span>ファイルに翻訳する必要があります。これは同じリポジトリにある以下のスクリプトを実行することで可能です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># ./po2js.pl -t pve xx.po &gt;pve-lang-xx.js</pre>
</div></div>
<div class="paragraph">
<p>出来上がった<span class="monospaced">pve-lang-xx.jsは</span>proxmoxサーバーの<span class="monospaced">/usr/share/pve-i18n</span>ディレクトリにコピーしてテストすることができます。</p></div>
<div class="paragraph">
<p>あるいは、リポジトリのルートから以下のコマンドを実行して、deb パッケージをビルドすることもできます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># make deb</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">どちらの方法でも動作させるには、以下のperlパッケージがシステムにインストールされている必要があります。Debian/Ubuntuの場合：</td>
</tr></table>
</div>
<div class="literalblock">
<div class="content monospaced">
<pre># apt-get install perl liblocale-po-perl libjson-perl</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_sending_the_translation">1.13.4.翻訳の送信<a class="headerlink" href="#_sending_the_translation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>完成した翻訳(<span class="monospaced">.po</span>ファイル)は、署名済みのコントリビューターライセンス契約書とともにProxmoxチームのアドレスoffice(at)proxmox.comに送ることができます。 また、開発経験があれば、Proxmox VE開発メーリングリストにパッチとして送ることもできます。<a href="https://pve.proxmox.com/wiki/Developer_Documentation">開発者向けドキュメントを</a>参照してください。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_installation">
2.Proxmox VE<a class="headerlink" href="#chapter_installation" title="Permalink to this heading"></a>のインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEはDebianをベースにしています。そのため、Proxmoxが提供するインストールディスクイメージ(ISOファイル)には、完全なDebianシステムと必要なProxmox VEパッケージが含まれています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE のリリースと Debian のリリースの関係については<a href="#faq-support-table">FAQ のサポート</a>表を参照してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>インストーラは、ローカルディスクのパーティション設定、基本的なシステム設定 (例: タイムゾーン、言語、ネットワーク) の適用、必要なパッケージのインストールなど、セットアップをガイドします。このプロセスは数分もかかりません。提供された ISO を使ってインストールするのが、新規および既存のユーザに推奨される方法です。</p></div>
<div class="paragraph">
<p>あるいは、Proxmox VE を既存の Debian システムの上にインストールすることもできます。Proxmox VEに関する詳細な知識が必要なため、このオプションは上級ユーザにのみお勧めします。</p></div>
<div class="sect2">
<h3 id="_system_requirements">
<span>2.1.システム要件</span> <a class="headerlink" href="#_system_requirements" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEを本番環境で実行する場合は、高品質のサーバーハードウェアを使用することをお勧めします。障害が発生したホストの影響をさらに軽減するために、高可用性（HA）仮想マシンおよびコンテナを使用したクラスタでProxmox VEを実行できます。</p></div>
<div class="paragraph">
<p>Proxmox VEは、ローカルストレージ(DAS)、SAN、NAS、およびCeph RBDのような分散ストレージを使用できます。詳細は<a href="#chapter_storage">ストレージの章を</a>参照してください。</p></div>
<div class="sect3">
<h4 id="install_minimal_requirements">2.1.1.評価に関する最低要件<a class="headerlink" href="#install_minimal_requirements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これらの最小要件は評価のみを目的としており、本番環境では使用しないでください。</p></div>
<div class="ulist"><ul>
<li>
<p>
CPU64ビット（インテル64またはAMD64）</p>
</li>
<li>
<p>
KVM完全仮想化対応のIntel VT/AMD-V対応CPU/マザーボード</p>
</li>
<li>
<p>
RAM: 1 GB RAM、およびゲストに必要な追加RAM</p>
</li>
<li>
<p>
ハードドライブ</p>
</li>
<li>
<p>
ネットワークカード（NIC）1枚</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="install_recommended_requirements">2.1.2.推奨システム要件<a class="headerlink" href="#install_recommended_requirements" title="Permalink to this heading"></a></h4>
<div class="ulist"><ul>
<li>
<p>
Intel 64またはIntel VT/AMD-V CPUフラグを持つAMD64。</p>
</li>
<li>
<p>
メモリOSおよびProxmox VEサービス用に最低2GB、さらにゲスト用に指定されたメモリが必要です。CephとZFSについては、使用するストレージのTBごとに約1GBのメモリが必要です。</p>
</li>
<li>
<p>
高速で冗長性のあるストレージは、SSDで最高の結果が得られます。</p>
</li>
<li>
<p>
OSストレージ：バッテリ保護ライトキャッシュ（「BBU」）付きハードウェアRAIDを使用するか、ZFS（ZIL用オプションSSD）付き非RAIDを使用します。</p>
</li>
<li>
<p>
VMストレージ：</p>
<div class="ulist"><ul>
<li>
<p>
ローカルストレージには、バッテリバックアップライトキャッシュ(BBU)付きのハードウェアRAIDを使用するか、ZFSとCephには非RAIDを使用します。ZFSもCephもハードウェアRAIDコントローラとは互換性がありません。</p>
</li>
<li>
<p>
共有および分散ストレージが可能です。</p>
</li>
<li>
<p>
良好なパフォーマンスを得るためには、Power-Loss-Protection（PLP）付きのSSDを推奨します。 一般消費者向けSSDの使用は推奨されません。</p>
</li>
</ul></div>
</li>
<li>
<p>
冗長(マルチ)Gbit NIC。ご希望のストレージ技術やクラスタ設定に応じてNICを追加できます。</p>
</li>
<li>
<p>
PCI(e)パススルーのためには、CPUがVT-d/AMD-dフラグをサポートしている必要があります。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_simple_performance_overview">2.1.3.簡単なパフォーマンス概要<a class="headerlink" href="#_simple_performance_overview" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>インストールされたProxmox VEシステムのCPUとハードディスクのパフォーマンスの概要を知るには、付属の<span class="monospaced">pveperf</span>ツールを実行します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これは非常に迅速で一般的なベンチマークです。特にシステムのI/O性能については、より詳細なテストをお勧めします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_supported_web_browsers_for_accessing_the_web_interface">2.1.4.ウェブ・インターフェイスにアクセスするためにサポートされているウェブ・ブラウザ<a class="headerlink" href="#_supported_web_browsers_for_accessing_the_web_interface" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ウェブベースのユーザーインターフェイスにアクセスするには、以下のブラウザのいずれかを使用することをお勧めします：</p></div>
<div class="ulist"><ul>
<li>
<p>
Firefox、今年のリリース、または最新の拡張サポートリリース</p>
</li>
<li>
<p>
クローム、今年からのリリース</p>
</li>
<li>
<p>
マイクロソフトが現在サポートしているEdgeのバージョン</p>
</li>
<li>
<p>
サファリ、今年からのリリース</p>
</li>
</ul></div>
<div class="paragraph">
<p>モバイルデバイスからアクセスすると、Proxmox VEは軽量でタッチベースのインターフェースを表示します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="installation_prepare_media">
<span>2.2.インストールメディアの準備</span> <a class="headerlink" href="#installation_prepare_media" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso">https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso</a>からインストーラー ISO イメージをダウンロードしてください。</p></div>
<div class="paragraph">
<p>Proxmox VEのインストールメディアはハイブリッドISOイメージです。2つの方法で動作します：</p></div>
<div class="ulist"><ul>
<li>
<p>
CDやDVDに書き込めるISOイメージファイル。</p>
</li>
<li>
<p>
USBフラッシュドライブ(USBスティック)にコピー可能な生セクタ(IMG)イメージファイル。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEのインストールにはUSBフラッシュドライブを使用することをお勧めします。</p></div>
<div class="sect3">
<h4 id="_prepare_a_usb_flash_drive_as_installation_medium">2.2.1.インストールメディアとしてUSBフラッシュドライブを準備<a class="headerlink" href="#_prepare_a_usb_flash_drive_as_installation_medium" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>フラッシュドライブには、少なくとも1GBのストレージが必要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">UNetbootinは使用しないでください。Proxmox VEのインストールイメージでは動作しません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">USBフラッシュドライブがマウントされておらず、重要なデータが入っていないことを確認してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_instructions_for_gnu_linux">2.2.2.GNU/Linux<a class="headerlink" href="#_instructions_for_gnu_linux" title="Permalink to this heading"></a>。</h4>
<div class="paragraph">
<p>Unix 系 OS では、<span class="monospaced">dd</span>コマンドを使って ISO イメージを USB フラッシュドライブにコピーします。まず、USBフラッシュドライブの正しいデバイス名を見つけてください（下記参照）。次に<span class="monospaced">dd</span>コマンドを実行してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dd bs=1M conv=fdatasync if=./proxmox-ve_*.iso of=/dev/XYZ</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">dev/XYZを正しいデバイス名に置き換え、入力ファイル名<em>（if</em>）のパスを合わせるようにしてください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">間違ったディスクを上書きしないよう、十分注意してください！</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="_find_the_correct_usb_device_name">正しいUSBデバイス名の検索<a class="headerlink" href="#_find_the_correct_usb_device_name" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>USBフラッシュ・ドライブの名前を調べるには、2つの方法があります。1つ目は、フラッシュ・ドライブを接続する前と後の<span class="monospaced">dmesg</span>コマンド出力の最終行を比較する方法です。もう1つは、<span class="monospaced">lsblk</span>コマンドの出力を比較する方法です。ターミナルを開いて実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsblk</pre>
</div></div>
<div class="paragraph">
<p>その後、USBフラッシュ・ドライブを接続し、もう一度コマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsblk</pre>
</div></div>
<div class="paragraph">
<p>新しいデバイスが表示されます。これが使用するデバイスです。念のため、報告されたサイズがお使いのUSBフラッシュドライブと一致しているかどうかを確認してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_instructions_for_macos">2.2.3.macOS<a class="headerlink" href="#_instructions_for_macos" title="Permalink to this heading"></a>。</h4>
<div class="paragraph">
<p>ターミナルを開きます。</p></div>
<div class="paragraph">
<p><span class="monospaced">hdiutilの</span>convertオプションなどを使って、<span class="monospaced">.iso</span>ファイルを<span class="monospaced">.dmg</span>形式に変換します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># hdiutil convert proxmox-ve_*.iso -format UDRW -o proxmox-ve_*.dmg</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">macOSは出力ファイル名に自動的に<em>.dmgを</em>付ける傾向があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>現在のデバイスのリストを取得するには、次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># diskutil list</pre>
</div></div>
<div class="paragraph">
<p>USBフラッシュ・ドライブを挿入し、このコマンドをもう一度実行して、どのデバイス・ノードが割り当てられているかを確認します。(例：/dev/diskX）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># diskutil list # diskutil unmountDisk /dev/diskX</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">を最後のコマンドのディスク番号に置き換えてください。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre># sudo dd if=proxmox-ve_*.dmg bs=1M of=/dev/rdiskX</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最後のコマンドでは、<em>diskX</em> の代わりに<em>rdiskX を</em>指定します。これにより書き込み速度が向上します。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_instructions_for_windows">2.2.4.Windows<a class="headerlink" href="#_instructions_for_windows" title="Permalink to this heading"></a>。</h4>
<div class="sect4">
<h5 id="_using_etcher">エッチャーの使用<a class="headerlink" href="#_using_etcher" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Etcherは箱から出してすぐに使えます。<a href="https://etcher.io">https://etcher.io</a> から Etcher をダウンロードしてください。ISO と USB フラッシュドライブの選択プロセスを案内します。</p></div>
</div>
<div class="sect4">
<h5 id="_using_rufus">ルーファスの使用<a class="headerlink" href="#_using_rufus" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Rufusはより軽量な代替品ですが、動作させるには<strong>DDモードを</strong>使用する必要があります。<a href="https://rufus.ie/">https://rufus.ie/</a> から Rufus をダウンロードしてください<a href="https://rufus.ie/">。</a>インストールするか、ポータブル版を使用してください。インストール先ドライブと Proxmox VE ISO ファイルを選択します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content"><em>開始</em>したら、異なるバージョンのGRUBをダウンロードするよう求めるダイアログで<em>「いいえ」を</em>クリックします。次のダイアログで<em>DD</em>モードを選択します。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installation_installer">
<span>2.3.Proxmox VE インストーラの使用</span> <a class="headerlink" href="#installation_installer" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>インストーラーのISOイメージには以下が含まれています：</p></div>
<div class="ulist"><ul>
<li>
<p>
完全なオペレーティングシステム (Debian Linux, 64-bit)</p>
</li>
<li>
<p>
ローカルディスクをext4、XFS、BTRFS（テクノロジープレビュー）、またはZFSでパーティション分割し、オペレーティングシステムをインストールするProxmox VEインストーラ。</p>
</li>
<li>
<p>
KVMとLXCをサポートするProxmox VE Linuxカーネル</p>
</li>
<li>
<p>
仮想マシン、コンテナ、ホストシステム、クラスタ、および必要なすべてのリソースを管理するための完全なツールセット</p>
</li>
<li>
<p>
ウェブベースの管理インターフェイス</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">選択したドライブ上の既存のデータは、インストール中にすべて削除されます。インストーラは、他のオペレーティングシステムのブートメニューエントリを追加しません。</td>
</tr></table>
</div>
<div class="paragraph">
<p><a href="#installation_prepare_media">用意したインストールメディア</a>（USBフラッシュドライブやCD-ROMなど）を挿入し、そこから起動してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">サーバーのファームウェア設定で、インストールメディア(USBなど)からのブートが有効になっていることを確認してください。Proxmox VEバージョン8.1より前のインストーラを起動する場合は、セキュアブートを無効にする必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-grub-menu.png">
<img src="images/screenshot/pve-grub-menu.png" alt="screenshot/pve-grub-menu.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>正しい項目（例えば、<em>Boot from USB</em>）を選択すると、Proxmox VEメニューが表示され、以下のオプションのいずれかを選択できます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Proxmox VE (グラフィカル)のインストール</dt>
<dd>
<p>
通常のインストールを開始します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">キーボードのみでインストールウィザードを使用することができます。ボタンは、<span class="monospaced">ALT</span>キーと各ボタンの下線文字を組み合わせて押すことでクリックできます。例えば、<span class="monospaced">ALT + N</span>で<span class="monospaced">Next</span>ボタンを押します。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
Proxmox VEのインストール（ターミナルUI）</dt>
<dd>
<p>
ターミナルモードのインストールウィザードを起動します。グラフィカルインストーラと同じ全体的なインストールエクスペリエンスを提供しますが、非常に古いハードウェアや非常に新しいハードウェアとの互換性が一般的に優れています。</p>
</dd>
<dt class="hdlist1">
Proxmox VEのインストール（ターミナルUI、シリアルコンソール）</dt>
<dd>
<p>
ターミナルモードのインストールウィザードを起動し、さらに Linux カーネルがマシンの（最初の）シリアルポートを入出力に使用するように設定します。これは、マシンが完全にヘッドレスで、シリアルコンソールしか利用できない場合に使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-tui-installer.png">
<img src="images/screenshot/pve-tui-installer.png" alt="screenshot/pve-tui-installer.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>どちらのモードでも、実際のインストールプロセスには同じコードベースを使用し、10年以上にわたるバグ修正の恩恵を受け、機能の同等性を確保しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>ターミナル UI</em>オプションは、ドライバの問題などでグラフィカルインストーラが 正しく動作しない場合に使用できます。<a href="#nomodeset_kernel_param"> <span class="monospaced">nomodeset</span>カーネルパラメータの追加も</a>参照してください。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
高度なオプションProxmox VEのインストール (グラフィカル、デバッグモード)</dt>
<dd>
<p>
デバッグモードでインストールを開始します。いくつかのインストールステップでコンソールが開きます。デバッグコンソールを終了するには、<span class="monospaced">CTRL-D を押して</span>ください。このオプションを使用すると、基本的なツールがすべて利用可能なライブシステムを起動できま す。たとえば、<a href="#chapter_zfs">デグレードしたZFS<em>rpoolを</em>修復</a>したり、既存のProxmox VEセットアップの<a href="#sysboot">ブートローダを</a>修正したりする場合に使用できます。</p>
</dd>
<dt class="hdlist1">
高度なオプションProxmox VEのインストール（ターミナルUI、デバッグモード）</dt>
<dd>
<p>
グラフィカルデバッグモードと同じですが、代わりにターミナルベースのインストーラを実行するようにシステムを準備します。</p>
</dd>
<dt class="hdlist1">
詳細オプションProxmox VE（シリアルコンソールデバッグモード）のインストール</dt>
<dd>
<p>
ターミナル・ベースのデバッグ・モードと同じですが、Linuxカーネルがマシンの（最初の）シリアル・ポートを入出力に使うように設定します。</p>
</dd>
<dt class="hdlist1">
高度なオプションProxmox VEのインストール (自動化)</dt>
<dd>
<p>
ISO が自動インストール用に適切に準備されていなくても、無人モードでインストーラを起動します。このオプションは、ハードウェアの詳細を収集したり、自動インストールのセットアップをデバッグするのに便利です。詳細は、<a href="#installation_unattended">無人インストールを</a>参照してください。</p>
</dd>
<dt class="hdlist1">
詳細オプションレスキューブート</dt>
<dd>
<p>
このオプションを使用すると、既存のインストールを起動できます。接続されているすべてのハードディスクを検索します。既存のインストールが見つかると、ISO から Linux カーネルを使ってそのディスクに直接ブートします。これはブートローダ (<span class="monospaced">GRUB/systemd-boot</span>) に問題があったり、BIOS/UEFI がディスクからブートブロックを読み取れない場合に便利です。</p>
</dd>
<dt class="hdlist1">
高度なオプションメモリのテスト (memtest86+)</dt>
<dd>
<p>
<span class="monospaced">memtest86+を</span>実行します。メモリが機能しているか、エラーがないかをチェックするのに便利です。このオプションを実行するには、UEFI ファームウェアセットアップユーティリティで Secure Boot をオフにする必要があります。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>通常は<strong>Proxmox VEのインストール（グラフィカル</strong>）を選択してインストールを開始します。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-select-target-disk.png">
<img src="images/screenshot/pve-select-target-disk.png" alt="screenshot/pve-select-target-disk.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>最初のステップは、EULA (End User License Agreement)を読むことです。続いて、インストール先のハードディスクを選択します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">デフォルトでは、サーバー全体が使用され、既存のデータはすべて削除されます。 インストールを続行する前に、サーバー上に重要なデータがないことを確認してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">オプション]</span>ボタンで、ターゲットファイルシステムを選択できます。デフォルトは<span class="monospaced">ext4</span> です。ファイルシステムとして<span class="monospaced">ext4</span>または<span class="monospaced">xfs を</span>選択した場合、インストーラは LVM を使用し、LVM 領域を制限する追加オプションを提供します (<a href="#advanced_lvm_options">下記</a>参照)。</p></div>
<div class="paragraph">
<p>Proxmox VEはZFSにもインストールできます。ZFSは複数のソフトウェアRAIDレベルを提供しているため、ハードウェアRAIDコントローラを搭載していないシステム向けのオプションです。<span class="monospaced">オプションダイアログで</span>ターゲットディスクを選択する必要があります。ZFS固有の設定は<a href="#advanced_zfs_options"><span class="monospaced">Advanced Optionsで</span></a>変更できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ハードウェアRAID上のZFSはサポートされておらず、データ損失の原因となります。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-select-location.png">
<img src="images/screenshot/pve-select-location.png" alt="screenshot/pve-select-location.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>次のページでは、お住まいの場所、タイムゾーン、キーボードレイアウトなどの基本的な設定オプションを尋ねられます。位置情報は、アップデートの速度を上げるために、近くのダウンロードサーバーを選択するために使用されます。インストーラは通常、これらの設定を自動検出できるので、自動検出に失敗した場合や、あなたの国で一般的に使用されていないキーボードレイアウトを使用したい場合にのみ、稀に設定を変更する必要があります。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-set-password.png">
<img src="images/screenshot/pve-set-password.png" alt="screenshot/pve-set-password.png" width="250" style="padding: 0 10px 0 0;float:left;" /></a>
<p>次に、スーパーユーザー<span class="monospaced">（root</span>）のパスワードとメールアドレスを指定する必要があります。パスワードは少なくとも5文字で構成されていなければなりません。より強力なパスワードを使用することを強くお勧めします。いくつかのガイドラインがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
パスワードの長さは最低12文字以上にしてください。</p>
</li>
<li>
<p>
小文字、大文字のアルファベット、数字、記号。</p>
</li>
<li>
<p>
文字の繰り返し、キーボードのパターン、一般的な辞書の単語、文字や数字の並び、ユーザー名、親戚やペットの名前、恋愛関係（現在または過去）、伝記的な情報（ID番号、先祖の名前や日付など）は避けてください。</p>
</li>
</ul></div>
<div class="paragraph">
<p>電子メールアドレスは、システム管理者に通知を送信するために使用されます。 例えば、以下のようになります：</p></div>
<div class="ulist"><ul>
<li>
<p>
利用可能なパッケージアップデートに関する情報。</p>
</li>
<li>
<p>
定期的な<em>cron</em>ジョブのエラーメッセージ。</p>
</li>
</ul></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-setup-network.png">
<img src="images/screenshot/pve-setup-network.png" alt="screenshot/pve-setup-network.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>これらの通知メールはすべて指定されたメールアドレスに送信されます。</p></div>
<div class="paragraph">
<p>最後のステップはネットワーク設定です。<em>UP</em>されているネットワークインターフェイスは、ドロップダウンメニューの名前の前に塗りつぶされた円が表示されます。インストール中はIPv4アドレスかIPv6アドレスのどちらかを指定できますが、両方を指定することはできません。デュアルスタックノードを設定するには、インストール後にIPアドレスを追加します。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-installation.png">
<img src="images/screenshot/pve-installation.png" alt="screenshot/pve-installation.png" width="250" style="padding: 0 10px 0 0;float:left;" /></a>
<p>次のステップでは、以前に選択したオプションの概要が表示されます。すべての設定を再確認し、設定を変更する必要がある場合は、[<span class="monospaced">前へ]</span>ボタンを使用してください。</p></div>
<div class="paragraph">
<p><span class="monospaced">インストールを</span>クリックすると、インストーラがディスクのフォーマットとターゲットディスクへのパッケージのコピーを開始します。このステップが終了するまで待ち、インストールメディアを取り出してシステムを再起動してください。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-install-summary.png">
<img src="images/screenshot/pve-install-summary.png" alt="screenshot/pve-install-summary.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>パッケージのコピーには通常数分かかりますが、そのほとんどはインストー ルメディアの速度とターゲットディスクの性能に依存します。</p></div>
<div class="paragraph">
<p>パッケージのコピーと設定が終了したら、サーバーを再起動します。デフォルトでは数秒後に自動的に行われます。</p></div>
<div class="paragraph">
<div class="title">インストールの失敗</div><p>インストールに失敗した場合は、2 台目の TTY<em>(CTRL + ALT + F2</em>) で特定のエラーをチェックし、システムが<a href="#install_minimal_requirements">最小要件を満たして</a>いることを確認します。</p></div>
<div class="paragraph">
<p>それでもインストールがうまくいかない場合は、<a href="#getting_help">「ヘルプの入手方法」の章を</a>ご覧ください。</p></div>
<div class="sect3">
<h4 id="_accessing_the_management_interface_post_installation">2.3.1.管理インターフェイスへのアクセス インストール後<a class="headerlink" href="#_accessing_the_management_interface_post_installation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-login-window.png">
<img src="images/screenshot/gui-login-window.png" alt="screenshot/gui-login-window.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>システムのインストールと再起動が完了したら、Proxmox VEのウェブインターフェースを使用してさらに設定を行うことができます。</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
ブラウザを、インストール時に指定されたIPアドレスとポート8006（例<a href="https://youripaddress:8006">：https://youripaddress:800</a>6）に合わせます。</p>
</li>
<li>
<p>
<span class="monospaced">root</span>(realm<em>PAM</em>) のユーザー名と、インストール時に選択したパスワードを使用してログインします。</p>
</li>
<li>
<p>
Enterprise リポジトリにアクセスするには、サブスクリプションキーをアップロードしてください。 そうでない場合は、セキュリティ修正、バグ修正、新機能のアップデートを取得するために、あまりテストされていない公開パッケージリポジトリのいずれかをセットアップする必要があります。</p>
</li>
<li>
<p>
IPコンフィグレーションとホスト名を確認してください。</p>
</li>
<li>
<p>
タイムゾーンを確認してください。</p>
</li>
<li>
<p>
<a href="#chapter_pve_firewall">ファイアウォールの設定を</a>確認してください。</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="advanced_lvm_options">2.3.2.高度なLVM設定オプション<a class="headerlink" href="#advanced_lvm_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>インストーラーは、<span class="monospaced">pve</span> というボリュームグループ（VG）と、<span class="monospaced">ext4</span>または<span class="monospaced">xfs を</span>使用している場合は<span class="monospaced">root</span>、<span class="monospaced">data</span>、<span class="monospaced">swap</span> という追加の論理ボリューム（LV）を作成します。これらのボリュームのサイズを制御するには</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ハードサイズ</span></dt>
<dd>
<p>
使用するハードディスクの合計サイズを定義します。こうすることで、ハードディスク上に空き領域を確保し、さらなるパーティション設定に使用することができます（例えば、同じハードディスク上にPVとVGを追加し、LVMストレージに使用することができます）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スワップサイズ</span></dt>
<dd>
<p>
<span class="monospaced">スワップ</span>ボリュームのサイズを定義します。デフォルトはインストールされているメモリのサイズで、最小 4 GB、最大 8 GB です。結果の値は<span class="monospaced">hdsize/8</span> より大きくすることはできません。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">0に</span>設定すると、<span class="monospaced">スワップ・</span>ボリュームは作成されません。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">マックスルート</span></dt>
<dd>
<p>
オペレーション・システムを格納する<span class="monospaced">ルート・</span>ボリュームの最大サイズを定義します。<span class="monospaced">ルート</span>ボリュームの最大サイズは<span class="monospaced">hdsize/4</span>です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">マックスブズ</span></dt>
<dd>
<p>
<span class="monospaced">データ</span>ボリュームの最大サイズを定義します。<span class="monospaced">データ</span>ボリュームの実際のサイズは</p>
<div class="paragraph">
<p><span class="monospaced">datasize = hdsize - rootsize - swapsize - minfree</span></p></div>
<div class="paragraph">
<p>ここで<span class="monospaced">datasize</span>は<span class="monospaced">maxvz</span> より大きくできません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">LVM thinの場合、<span class="monospaced">データ</span>プールは<span class="monospaced">データサイズが</span>4GBより大きい場合にのみ作成されます。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">0に</span>設定すると、<span class="monospaced">データ</span>ボリュームは作成されず、ストレージ構成はそれに応じて適応されます。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ミンフリー</span></dt>
<dd>
<p>
LVMボリュームグループ<span class="monospaced">pveに</span>残すべき空き容量を定義します。128GB以上のストレージが使用可能な場合、デフォルトは16GBで、そうでない場合は<span class="monospaced">hdsize/8が</span>使用されます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">LVMでは、スナップショットの作成にVG内の空き領域が必要です（lvmthinスナップショットでは必要ありません）。</td>
</tr></table>
</div>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="advanced_zfs_options">2.3.3.高度なZFS設定オプション<a class="headerlink" href="#advanced_zfs_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS を使用する場合、インストーラは ZFS プール<span class="monospaced">rpool を</span>作成します。スワップ領域は作成されませんが、インストールディスク上にスワップ用のパーティション化されていない領域を確保することができます。インストール後に swap zvol を作成することもできますが、これは問題につながる可能性があります (<a href="#zfs_swap">ZFS swap notes を</a>参照)。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">アッシュシフト</span></dt>
<dd>
<p>
作成されるプールの<span class="monospaced">ashift</span>値を定義します。<span class="monospaced">ashift</span>は、少なくとも基礎となるディスクのセクタサイズ (<span class="monospaced">ashift</span>の 2 乗がセクタサイズ) に設定される必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">湿布</span></dt>
<dd>
<p>
<span class="monospaced">rpoolで</span>圧縮を有効にするかどうかを定義します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">チェックサム</span></dt>
<dd>
<p>
<span class="monospaced">rpoolに</span>どのチェックサムアルゴリズムを使用するかを定義します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">コピー</span></dt>
<dd>
<p>
<span class="monospaced">rpool</span> の<span class="monospaced">copies</span>パラメータを定義します。その意味と、なぜこれがディスクレベルの冗長性を置き換えないのかについては、<span class="monospaced">zfs(8) の</span>man ページを確認してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ARC最大サイズ</span></dt>
<dd>
<p>
ARCが成長できる最大サイズを定義し、ZFSが使用するメモリ量を制限します。詳細については、<a href="#sysadmin_zfs_limit_memory_usage">ZFSのメモリ使用量を制限する</a>方法のセクションも参照してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ハードサイズ</span></dt>
<dd>
<p>
使用するハードディスクの合計サイズを定義します。<span class="monospaced">hdsize</span>はブート可能なディスク、つまり RAID0、RAID1、RAID10 の最初のディスクかミラー、RAID-Z[123]の全てのディスクに対してのみ有効です。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="advanced_btrfs_options">2.3.4.高度な BTRFS 設定オプション<a class="headerlink" href="#advanced_btrfs_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>BTRFS を使用する場合、スワップ領域は作成されませんが、スワップ用にインストー ルディスク上のパーティション化されていない領域を確保することができます。<span class="monospaced">btrfs filesystem mkswapfile</span>コマンドを使って、別パーティション、BTRFS サブボリューム、またはスワップファイルを作成できます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">湿布</span></dt>
<dd>
<p>
BTRFS サブボリュームで圧縮を有効にするかどうかを定義します。<em>on</em>（<em>zlibと</em>同等）、<em>zlib</em>、<em>lzo</em>、<em>zstdの</em>異なる圧縮アルゴリズムがサポートされています。デフォルトは<em>off</em>です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ハードサイズ</span></dt>
<dd>
<p>
使用するハードディスクの合計サイズを定義します。これは、ハードディスク上の空き領域を保存して、さらにパーティション分割（例えば、スワップパーティションの作成）を行うのに便利です。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_zfs_performance_tips">2.3.5.ZFSパフォーマンスのヒント<a class="headerlink" href="#_zfs_performance_tips" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSは大容量のメモリで最もよく動作します。ZFSを使用する場合は、十分なRAMを用意してください。TBのRAWディスク容量に対して、4GBと1GBのRAMを追加するのが良い計算です。</p></div>
<div class="paragraph">
<p>ZFSは、ZFS Intent Log (ZIL)と呼ばれる専用ドライブを書き込みキャッシュとして使用できます。 これには高速ドライブ(SSD)を使用します。インストール後に以下のコマンドで追加できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool add &lt;pool-name&gt; log &lt;/dev/path_to_fast_ssd&gt;.</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="nomodeset_kernel_param">2.3.6.<span class="monospaced">nomodeset</span>カーネル・パラメーターの追加<a class="headerlink" href="#nomodeset_kernel_param" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>グラフィックドライバが原因で、非常に古いハードウェアや非常に新しいハードウェアで問題が発生することがあります。ブート中にインストールがハングする場合は、<span class="monospaced">nomodeset</span>パラメータを追加してみてください。これは Linux カーネルがグラフィックドライバをロードしないようにし、BIOS/UEFI が提供するフレームバッファを使い続けるようにします。</p></div>
<div class="paragraph">
<p>Proxmox VE ブートローダのメニューで、[<em>Install Proxmox VE (Terminal UI)</em>] に移動し、<span class="monospaced">e</span>キーを押してエントリを編集します。矢印キーを使用して<span class="monospaced">linux</span> で始まる行に移動し、カーソルをその行の最後に移動して、パラメータ<span class="monospaced">nomodeset</span> を既存の最後のパラメータからスペースで区切って追加します。</p></div>
<div class="paragraph">
<p>次に<span class="monospaced">Ctrl-X</span>または<span class="monospaced">F10</span>を押して設定をブートします。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="installation_unattended">
<span>2.4.無人インストール</span> <a class="headerlink" href="#installation_unattended" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEを無人で自動インストールすることが可能です。これにより、ベアメタル上でのセットアッププロセスを完全に自動化できます。インストールが完了し、ホストが起動したら、Ansible のような自動化ツールを使用してインストールをさらに設定できます。</p></div>
<div class="paragraph">
<p>インストーラに必要なオプションは、アンサーファイルで提供する必要があります。このファイルでは、フィルタルールを使用して、使用するディスクとネットワークカードを決定できます。</p></div>
<div class="paragraph">
<p>自動インストールを使用するには、まずインストール ISO を準備する必要があります。 無人インストールの詳細と情報については、<a href="https://pve.proxmox.com/wiki/Automated_Installation">ウィキをご覧ください</a>。</p></div>
</div>
<div class="sect2">
<h3 id="_install_proxmox_ve_on_debian">
<span>2.5.Debian</span> <a class="headerlink" href="#_install_proxmox_ve_on_debian" title="Permalink to this heading"></a><span>に Proxmox VE をインストール</span></h3>
<div class="paragraph">
<p>Proxmox VEはDebianパッケージのセットとして出荷され、標準的なDebianインストールの上にインストールすることができます。<a href="#sysadmin_package_repositories">リポジトリを設定した後</a>、以下のコマンドを実行する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-get update # apt-get install proxmox-ve</pre>
</div></div>
<div class="paragraph">
<p>既存の Debian インストールの上にインストールするのは簡単そうに見えますが、基本シス テムが正しくインストールされており、ローカルストレージをどのように設定・ 使用したいかがわかっていることが前提です。また、ネットワークを手動で設定する必要もあります。</p></div>
<div class="paragraph">
<p>一般的に、特にLVMやZFSが使用されている場合、これは些細なことではありません。</p></div>
<div class="paragraph">
<p>詳しいステップバイステップのハウツーは<a href="https://pve.proxmox.com/wiki/Install_Proxmox_VE_on_Debian_12_Bookworm">ウィキで</a>ご覧いただけます。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_system_administration">
3.ホストシステム管理<a class="headerlink" href="#chapter_system_administration" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下のセクションでは、一般的な仮想化タスクに焦点を当て、ホストマシンの管理および運営に 関するProxmox VEの仕様について説明します。</p></div>
<div class="paragraph">
<p>Proxmox VEは<a href="https://www.debian.org/">Debian GNU/Linuxを</a>ベースにしており、Proxmox VE関連のパッケージを提供するためのリポジトリが追加されています。Proxmox VEは、Ubuntuカーネルをベースにした独自のLinuxカーネルを提供します。必要な仮想化機能とコンテナ機能がすべて有効になっており、<a href="https://zfsonlinux.org">ZFSと</a>いくつかの追加ハードウェアドライバが含まれています。</p></div>
<div class="paragraph">
<p>以下の節に含まれていないその他の話題については、Debian の文書を参照してください。<a href="https://debian-handbook.info/get">Debian 管理者ハンドブック (Debian Administrator's Handbook)</a>はオンラインで入手可能で、Debian オペレーティングシステムの包括的な入門書を提供しています (<a href="#Hertzog13">[Hertzog13]</a> を参照してください)。</p></div>
<div class="sect2">
<h3 id="sysadmin_package_repositories">
<span>3.1.パッケージ・リポジトリ</span> <a class="headerlink" href="#sysadmin_package_repositories" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE は他の Debian ベースのシステム同様、パッケージ管理ツールとして<a href="http://en.wikipedia.org/wiki/Advanced_Packaging_Tool">APT を</a>使用します。</p></div>
<div class="paragraph">
<p>Proxmox VEはパッケージのアップデートを毎日自動的にチェックします。<span class="monospaced">root@pam</span>ユーザーには、利用可能なアップデートが電子メールで通知されます。GUIから<em>Changelog</em>ボタンを使用すると、選択したアップデートの詳細を見ることができます。</p></div>
<div class="sect3">
<h4 id="_repositories_in_proxmox_ve">3.1.1.Proxmox VE<a class="headerlink" href="#_repositories_in_proxmox_ve" title="Permalink to this heading"></a>のリポジトリ</h4>
<div class="paragraph">
<p>リポジトリはソフトウェアパッケージの集合体であり、新しいソフトウェアをインストールするために使用できますが、新しいアップデートを取得するためにも重要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最新のセキュリティ更新、バグ修正、新機能を入手するには、有効な Debian と Proxmox のリポジトリが必要です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>APTリポジトリは<span class="monospaced">/etc/apt/sources.list</span>ファイルと<span class="monospaced">/etc/apt/sources.list.d/に</span>置かれた<span class="monospaced">.list</span>ファイルで定義されます。</p></div>
<div class="sect4">
<h5 id="_repository_management">リポジトリ管理<a class="headerlink" href="#_repository_management" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-repositories.png">
<img src="images/screenshot/gui-node-repositories.png" alt="screenshot/gui-node-repositories.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VE 7以降、Webインターフェイスでリポジトリの状態を確認できます。 ノードサマリーパネルには、高レベルの状態概要が表示され、独立した<em>リポジトリパネルには</em>、詳細な状態と構成されたすべてのリポジトリのリストが表示されます。</p></div>
<div class="paragraph">
<p>基本的なリポジトリ管理、たとえばリポジトリの有効化・無効化もサポートされています。</p></div>
</div>
<div class="sect4">
<h5 id="_sources_list">ソース.リスト<a class="headerlink" href="#_sources_list" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">sources.list</span>ファイルでは、各行がパッケージ・リポジトリを定義します。優先するソースが最初になければなりません。  空行は無視されます。行のどこかに<span class="monospaced">#</span>文字があると、その行の残りがコメントとしてマークされます。リポジトリから利用可能なパッケージは、<span class="monospaced">apt-get update を</span>実行して取得します。アップデートは<span class="monospaced">apt-get を使って</span>直接インストールすることも、GUI (Node → Updates) を使ってインストールすることもできます。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list</span></div>
<div class="content monospaced">
<pre>deb http://deb.debian.org/debian bookworm main contrib deb http://deb.debian.org/debian bookworm-updates main contrib # セキュリティアップデート deb http://security.debian.org/debian-security bookworm-security main contrib</pre>
</div></div>
<div class="paragraph">
<p>Proxmox VEは3つの異なるパッケージリポジトリを提供します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_enterprise_repo">3.1.2.Proxmox VE Enterprise リポジトリ<a class="headerlink" href="#sysadmin_enterprise_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これは推奨リポジトリで、すべての Proxmox VE サブスクリプションユーザーが利用できます。<span class="monospaced">pve-enterprise</span>リポジトリはデフォルトで有効になっています：</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/pve-enterprise.list</span></div>
<div class="content monospaced">
<pre>deb https://enterprise.proxmox.com/debian/pve 本の虫 pve-enterprise</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">pve-enterprise</span>リポジトリにアクセスするには、有効なサブスクリプションキーが必要です。<a href="https://proxmox.com/en/proxmox-virtual-environment/pricing">https://proxmox.com/en/proxmox-virtual-environment/pricing</a> で詳細をご覧いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">上記の行を<span class="monospaced">#（</span>行頭）でコメントアウトすることで、このリポジトリを無効にすることができます。これにより、ホストにサブスクリプションキーがない場合のエラーメッセージを防ぐことができます。その場合は<span class="monospaced">pve-no-subscription</span>リポジトリを設定してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_no_subscription_repo">3.1.3.Proxmox VE サブスクリプションなしリポジトリ<a class="headerlink" href="#sysadmin_no_subscription_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>名前が示すように、このリポジトリにアクセスするためにサブスクリプションキーは必要ありません。テストや本番環境以外での使用に使用できます。本番サーバーでの使用は推奨されません。なぜなら、これらのパッケージは常に厳重にテスト・検証されているわけではないからです。</p></div>
<div class="paragraph">
<p>このリポジトリは<span class="monospaced">/etc/apt/sources.list</span> で設定することをお勧めします。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list</span></div>
<div class="content monospaced">
<pre>deb http://ftp.debian.org/debian bookworm main contrib deb http://ftp.debian.org/debian bookworm-updates main contrib # Proxmox VE pve-no-subscription repository provided by proxmox.com, # NOT recommended for production use deb http://download.proxmox.com/debian/pve bookworm pve-no-subscription # security updates deb http://security.debian.org/debian-security bookworm-security main contrib</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_test_repo">3.1.4.Proxmox VE テストリポジトリ<a class="headerlink" href="#sysadmin_test_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このリポジトリには最新のパッケージが含まれており、主に開発者が新機能をテストするために使用します。設定するには、<span class="monospaced">/etc/apt/sources.list</span> に以下の行を追加します：</p></div>
<div class="listingblock">
<div class="title"><span class="monospaced">pvetestの</span>sources.listエントリ</div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/pve bookworm pvetest</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">pvetest</span>リポジトリは（その名の通り）新機能やバグ修正のテストにのみ使うべきです。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_package_repositories_ceph">3.1.5.Ceph Squid Enterpriseリポジトリ<a class="headerlink" href="#sysadmin_package_repositories_ceph" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このリポジトリには、エンタープライズ向けProxmox VE Ceph 19.2 Squidパッケージがあります。本番環境に適しています。Proxmox VEでCephクライアントまたは完全なCephクラスタを実行する場合は、このリポジトリを使用してください。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb https://enterprise.proxmox.com/debian/ceph-squid ブックワーム・エンタープライズ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_squid_no_subscription_repository">3.1.6.Ceph Squidサブスクリプションなしリポジトリ<a class="headerlink" href="#_ceph_squid_no_subscription_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このCephリポジトリには、エンタープライズリポジトリに移動する前のCeph 19.2 Squidパッケージと、テストリポジトリに移動した後のCeph 19.2 Squidパッケージが格納されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">本番マシンにはエンタープライズリポジトリを使用することをお勧めします。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/ceph-squid ブックワーム ノーサブスクリプション</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_squid_test_repository">3.1.7.Ceph Squidテストリポジトリ<a class="headerlink" href="#_ceph_squid_test_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このCephリポジトリには、メインリポジトリに移動する前のCeph 19.2 Squidパッケージが格納されています。Proxmox VEでの新しいCephリリースのテストに使用されます。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/ceph-squid ブックワームテスト</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_reef_enterprise_repository">3.1.8.Ceph Reef Enterpriseリポジトリ<a class="headerlink" href="#_ceph_reef_enterprise_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このリポジトリには、エンタープライズ向けProxmox VE Ceph 18.2 Reefパッケージがあります。本番環境に適しています。Proxmox VEでCephクライアントまたは完全なCephクラスタを実行する場合は、このリポジトリを使用します。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb https://enterprise.proxmox.com/debian/ceph-reef ブックワーム・エンタープライズ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_reef_no_subscription_repository">3.1.9.Ceph Reefサブスクリプションなしリポジトリ<a class="headerlink" href="#_ceph_reef_no_subscription_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このCephリポジトリには、エンタープライズリポジトリに移動する前のCeph 18.2 Reefパッケージと、テストリポジトリに移動した後のCeph 18.2 Reefパッケージが格納されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">本番マシンにはエンタープライズリポジトリを使用することをお勧めします。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/ceph-reef ブックワーム ノーサブスクリプション</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_reef_test_repository">3.1.10.Ceph Reefテストリポジトリ<a class="headerlink" href="#_ceph_reef_test_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このCephリポジトリには、メインリポジトリに移動する前のCeph 18.2 Reefパッケージが格納されています。Proxmox VEでの新しいCephリリースのテストに使用されます。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/ceph-reef ブックワームテスト</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_quincy_enterprise_repository">3.1.11.Ceph Quincy Enterpriseリポジトリ<a class="headerlink" href="#_ceph_quincy_enterprise_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このリポジトリには、エンタープライズ向けProxmox VE Ceph Quincyパッケージがあります。本番環境に適しています。Proxmox VEでCephクライアントまたは完全なCephクラスタを実行する場合は、このリポジトリを使用します。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb https://enterprise.proxmox.com/debian/ceph-quincy ブックワーム・エンタープライズ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_quincy_no_subscription_repository">3.1.12.Ceph Quincyサブスクリプションなしリポジトリ<a class="headerlink" href="#_ceph_quincy_no_subscription_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このCephリポジトリには、エンタープライズリポジトリに移動する前のCeph Quincyパッケージと、テストリポジトリに移動した後のCeph Quincyパッケージが格納されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">本番マシンにはエンタープライズリポジトリを使用することをお勧めします。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/ceph-quincy ブックワーム ノーサブスクリプション</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_ceph_quincy_test_repository">3.1.13.Ceph Quincyテストリポジトリ<a class="headerlink" href="#_ceph_quincy_test_repository" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このCephリポジトリには、メインリポジトリに移動する前のCeph Quincyパッケージが格納されています。Proxmox VEでの新しいCephリリースのテストに使用されます。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span></div>
<div class="content monospaced">
<pre>deb http://download.proxmox.com/debian/ceph-quincy ブックワームテスト</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_older_ceph_repositories">3.1.14.古いCephリポジトリ<a class="headerlink" href="#_older_ceph_repositories" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE 8は、Ceph Pacific、Ceph Octopus、またはハイパーコンバージドセットアップ用の古いリリースをサポートしていません。これらのリリースでは、Proxmox VE 8にアップグレードする前に、まずCephを新しいリリースにアップグレードする必要があります。</p></div>
<div class="paragraph">
<p>詳細については、<a href="https://pve.proxmox.com/wiki/Category:Ceph_Upgrade">各アップグレードガイドを</a>参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_debian_firmware_repo">3.1.15.Debian ファームウェアリポジトリ<a class="headerlink" href="#sysadmin_debian_firmware_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Debian Bookworm (Proxmox VE 8) から、(<a href="https://www.debian.org/social_contract#guidelines">DFSG</a> で定義された) non-free ファームウェアは新しく作成された Debian リポジトリの<span class="monospaced">non-free-firmware</span> コンポーネントに移動されました。</p></div>
<div class="paragraph">
<p><a href="#sysadmin_firmware_cpu">Early OS Microcode Updates を</a>セットアップする場合や、プリインストールパッケージ<span class="monospaced">pve-firmware</span> に含まれていない<a href="#sysadmin_firmware_runtime_files">ランタイムファームウェアファイルが</a>必要な場合は、このリポジトリを有効にしてください。</p></div>
<div class="paragraph">
<p>このコンポーネントからパッケージをインストールできるようにするには、<span class="monospaced">/etc/apt/sources.list を編集</span>し、各<span class="monospaced">.debian.org</span>リポジトリの行の最後に<span class="monospaced">non-free-firmware</span>を追加して、<span class="monospaced">apt update を</span>実行してください。</p></div>
</div>
<div class="sect3">
<h4 id="repos_secure_apt">3.1.16.SecureApt<a class="headerlink" href="#repos_secure_apt" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リポジトリ内の<em>Release</em>ファイルは GnuPG で署名されています。APTはこれらの署名を使って、すべてのパッケージが信頼できるソースからのものであることを確認しています。</p></div>
<div class="paragraph">
<p>Proxmox VEを公式ISOイメージからインストールする場合、検証用のキーはすでにインストールされています。</p></div>
<div class="paragraph">
<p>Debianの上にProxmox VEをインストールする場合は、以下のコマンドでキーをダウンロードしてインストールしてください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># wget https://enterprise.proxmox.com/debian/proxmox-release-bookworm.gpg -O /etc/apt/trusted.gpg.d/proxmox-release-bookworm.gpg</pre>
</div></div>
<div class="paragraph">
<p>その後、<span class="monospaced">sha512sum</span>CLIツールでチェックサムを検証します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># sha512sum /etc/apt/trusted.gpg.d/proxmox-release-bookworm.gpg
7da6fe34168adc6e479327ba517796d4702fa2f8b4f0a9833f5ea6e6b48f6507a6da403a274fe201595edc86a84463d50383d07f64bdde2e3658108db7d6dc87 /etc/apt/trusted.gpg.d/proxmox-release-bookworm.gpg</pre>
</div></div>
<div class="paragraph">
<p>または<span class="monospaced">md5sum</span>CLIツール：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># md5sum /etc/apt/trusted.gpg.d/proxmox-release-bookworm.gpg 41558dc019ef90bd0f6067644a51cf5b /etc/apt/trusted.gpg.d/proxmox-release-bookworm.gpg</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="system_software_updates">
<span>3.2.システムソフトウェアアップデート</span> <a class="headerlink" href="#system_software_updates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmoxはすべてのリポジトリに対して定期的にアップデートを提供します。アップデートをインストールするには、WebベースのGUIまたは以下のCLIコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-get update # apt-get dist-upgrade</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">APT パッケージ管理システムは非常に柔軟で、多くの機能を提供しています。詳しくは<span class="monospaced">man apt-get</span> や<a href="#Hertzog13">[Hertzog13]</a>を参照してください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKZUlEQVRoge2aa3BU5RmAn3Pbs7fs
JmwCRGITk0hVLFAtNWoq6pAiU0cKaYfa6ShT+YN4YbQw9F/8QX+UMv6gM3Q6oxMV6TgIbe10Gq2g
cSzDpRaFgmIk4SKB3LP3Pff+SM66m+xuFvEyzvSbeefsbva8+z7nvXzf934RHMfhmzzEr9uAqx3/
B/i6xzceQP6iFDmT1cBxHNzCkFsgBEHIXnNeC1f7u1cN4DiOY9s2rliWhWVZWRDHcbJGC4KAJElI
koQoioii6IiieFUgnxvAtm3HNdg0Tbq6uuju7ubYsWP09vYyMjKCpmmoqkokEqGhoYGFCxfS2tpK
W1sbiqJkRZIkZxLoikGEK50H3CdumiZ9fX3s3LmT3bt3U1V3A0033cKc2nkEQxV4PSqSJOI4Dpqu
k0gkGLx8kZ4T7zF87iSrV69m3bp1NDY2oqoqHo8HWZa5Uo9cEYBt245lWRiGQUdHB9u2beOe1Y8w
/6bFVAT9xJJpYvEUiVSGjG5gmBY4DqIoonoUfF4PoYAfRRE5/8kp3njlD6xfv54tW7YQCATw+Xyu
R8r2RtkAtm07pmly5MgRHn/8cZSaZpbcfjd+n5f+wVEGRqJkdCMv3vME8t77vB6qQn4+OX6YsXPH
2bp1Ky0tLQQCAVRVdb0xI0RZZdQ1ft++fSxbtozrlqzgrnvvI5nRee9UL+f6h9B0A1EQEIsBiOKE
TL7XdJOBkTg1jYtouu1+1qxZw549e4hGo6TTaUzTxLbtGZ/ujEmca/wvHnqYnz/2DLNn19B74TID
I9HPjCvwlLMls4RHdMNC8IRZ8dBmnnp6E7Zts2rVKgB8Ph+yLDulPFEyhBzHcUzT5PDhwyxbtow1
j3YQqanmozOfEk2kChuLQ3x0lGQihmM7qF4vVdWz8fr9hYFyoK30OG/ufpYXXniB1tZWwuEwXq8X
WZaLJnZJAMuyHE3TuPPOO2lcsoLGpmZO9ZzPM37q0x0ZuISla2xY2077j5ZSFargZM9Znt97gE8u
DBb3ziRIfPAcF4/v59VXX6W6uppQKISqqkiSVBCgaA64odPR0YFS00xjUzNnLlwmmkznxbKYI45j
k04mefaZJ3j04VXMqZ6Fx6Pw3QXXs/3Xv6Tp2rnTALL3T8wDBCLz8M2Zz/bt24nFYjPmQ0EAt9b3
9fWxbds2ltxxD0NjMQbdmC+QlIIgIIkSoWCAH971/Wk6PYrCg/f/oHiVmhSP6qWm/gY6Ozvp6ekh
mUyi6zq2bWeXK+UAYFkWO3fu5N72dQT8Pi5cGp6xuoiiiBoMktH0gl5trp87DbqQBEMRbl32U3bt
2kUikUDTtOzypGwAwzDYvXs3316wiEuDoxiGWVaZrAjP4qW/vFUQ4NAHPdlwKQWiqF4qa+ro6uoi
kUiQTqcxDKM8ADd8Xn/9dWZdewMVwSCDo7GicT8NSBTZt/8oT259jgOHThBNpIgmUjy3dz/P7z2Q
r2My7gs9FNUXoPpbN9Ld3Z0FKBRG0+YBN3y6u7tpWnAr8WR6+gxLfr03TYNMMolhGFimiWVbXDzb
x4G3/4XgOIiyTF3DdW45nHG2RhBQfX6q65o5evQoy5cvn9BtWUiSRG5FLQhg2zbHjh3j+tsfKFrv
3R8EGL7UT23NLNraWmi+ro5r5kSYHakiVOHH7/OiyDKxZIonf9NJIpWZMQcEwOPx4vNXcPr0B2Qy
mdxEzrO34ExsWRa9vb3csjzEaP9w1sUFZ1RBQJJk/vjbTdTXzS2kDoBQwI9HmcEDOSJ7PAiiSH9/
P7quY5omlmVN01soB3Ach5GREbyqiqabM8a+NxAglcmvPOf7h9jR+WdOfNQLwNtHTzIeT+XFfdGC
IAiIogSOQzQaxTRNdy4ozwO2baNpGpIkY1j2RAJTeJ0jCAKRmtmcPHORmkglxz48y/5DJ3jrnUPM
b7iGxx7+MZZls/efR0rG/VQPgwMC2eQtZHxRAABVVbM3lEpgV178azcvvfYOgiCgZTJomsbGR9oR
BIHzl4YYGo2VlcCuWOaE5xVFwbbtqVHiCJOZXBQgEomg6zqSKOIUMrqER+LRKItvaubW78wH4NLQ
WNmx7+q1DB1ZkgmFQohifqS7xhcFEEWRhoYGEokEqkeeWPLmurcEiGPbpJJJfvbAPVl95/qHJyYv
mH5/EdG1FA5QW1ubzZvc8pm1deoHroKFCxcycPkiPlWdnmC5iTxlVk2n0wT9Xu69Y3FW51g8OfH3
ye+WnAgnRcukyKQSNDU1Icty7n65NACAJEm0trbSc/zfVAT9JZ/U1NWklslwx/duxqMoWX0Zzcy/
bwr0VCDT0NDTSS6f/ZBFixZlN/ySJJXnAVEUaWtrY6DvOIoiFlx5FhPLsrjl5uvzdPq8nsLfL6I3
FR1FlhUG+v5LS0tLtmtRlgcEYaL5pCgKq1ev5lzPKfxeT8FwKSQA115Tk6eztjpcsubn6rUMnfj4
MLHxIZYuXYrX683rVpQDIIiiiKIorFu3jn+8vIPKCt+0cCkG4m4Bc0fd3OqCoVIIJDo2iCQrvPu3
F1m5cmVeu6VQz6hgDrj1t7GxkfXr1/Px+wdRPcr02C+wmgxVVnLm3KU8ffNmVxX03lSgRHSEVGyc
oYt9tLe3U19fTzAYzAKUVYVyw0hVVbZs2cJw7/uYyZGSIeCCeFWVd499jGGaWX1zq8OfrYOKeC+T
ijM+cBHHsRju/Q9r164lFAoRDAbdPfEVAQiiKOLxeAgEAmzdupW/v/A7RLPEyjTHuGjKYMfLb3B5
eBzdMNl/+CSmZReN+0wqztDFs4iSxIE9O9mwYQPhcJhwOEwgEMhN4GkEZXUlYrEYe/bs4elfbWLF
Q5tQKyJlVaRy+kSJ6AhjA58iihJdf9rBUxufYPny5cyZM6esrkTJxpabzIFAgFWrVmHbNps3b+bu
n6wnVF2H4lHLmlULgZiGTmxkgGR8DNu2efOV3/PUxo20tbURiUSorKwkEAhkk7fYmLE36rZX0uk0
0WiUgwcP0tHRQcW8G5ndsIBgaBYe1TvtyRYDMXWNZGyU+Ngwkiwz+GkfQ73vsWHDBhYvXkwkEmHW
rFmEw2G3M1eyR1pWczcXIh6PMz4+zvbt2+ns7OS2+x6kanYdqjeA1xdAUb3IioIoSjg42JaJaejo
mTRaOoGeTiHJEvGxYd55rZP29nbWrl1LOBymqqqKyspKKioqyjK+bIBcCE3TSCaTxGIxenp62LVr
F11dXdTUL2BO/Xx8/goEUcSxbYSJ2EGS5IlzgnSC/r4PuXzmOEuXLmXlypXU19cTCoUIh8OEQqEr
7k5/7vOBdDpNMpkkkUiQSCTo7u7m6NGjnD59mv7+fqLRKIZhoCgKoVCI2tpampqaWLRoES0tLfh8
Pvx+P8FgkGAw+OWfD7gj94RG13U0TSOdTpNOp8lMbmQ0TcvbArrrK1mW8Xg8eL3e7BLB5/N9dSc0
uSP3jMwwjKy4G3AXwB0ugAsx5YzMndW//DOy3OFMjGwrxrKs7NX9LBfAneFFUcxec6rU5zqpvCqA
qTCT16/0nPgLA/i6xjf+Xw3+B2ll/uiqTaJTAAAAAElFTkSuQmCC" />
</td>
<td class="content">定期的なアップデートは、最新のパッチとセキュリティ関連の修正を取得するために不可欠です。主要なシステムアップグレードは<a href="https://forum.proxmox.com/">Proxmox VEコミュニティフォーラムで</a>発表されます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="chapter_firmware_updates">
<span>3.3.ファームウェア・アップデート</span> <a class="headerlink" href="#chapter_firmware_updates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>本章のファームウェアアップデートは、ベアメタルサーバ上で Proxmox VE を実行する場合に適用してください。デバイス・パススルーを使用している場合など、ゲスト内でファームウェアの更新を構成することが適切かどうかは、セットアップに大きく依存するため、対象外です。</p></div>
<div class="paragraph">
<p>ソフトウェアの定期的なアップデートに加え、ファームウェアのアップデートも信頼性の高い安全な運用のために重要です。</p></div>
<div class="paragraph">
<p>ファームウェア・アップデートを入手し適用する場合は、利用可能なオプションを組み合わせて、可能な限り早期に、またはまったく入手することをお勧めします。</p></div>
<div class="paragraph">
<p>ファームウェアという用語は通常、言語的にはマイクロコード（CPU用）とファームウェア（その他のデバイス用）に分けられます。</p></div>
<div class="sect3">
<h4 id="sysadmin_firmware_persistent">3.3.1.永続的ファームウェア<a class="headerlink" href="#sysadmin_firmware_persistent" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このセクションは全てのデバイスに適しています。通常、BIOS/UEFI アップデートに含まれる更新されたマイクロコードはマザーボードに保存され、その他のファームウェアはそれぞれのデバイスに保存されます。この永続的な方法は、ブート時に更新されたマイクロコードをできるだけ早く定期的にロードできるようにするため、CPUにとって特に重要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">BIOS/UEFIやストレージコントローラなどの一部のアップデートでは、デバイスの設定がリセットされる可能性があります。ベンダーの指示に注意深く従い、現在の設定をバックアップしてください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>どのアップデート方法が利用可能か、ベンダーにご確認ください。</p></div>
<div class="ulist"><ul>
<li>
<p>
サーバーの便利な更新方法には、デルのLifecycle ManagerやHPEのサービスパックがあります。</p>
</li>
<li>
<p>
Linuxユーティリティが利用できる場合もあります。例えば、NVIDIA ConnectX用の<a href="https://network.nvidia.com/support/firmware/mlxup-mft/"><em>mlxupや</em></a>Broadcomネットワークカード用の<a href="https://techdocs.broadcom.com/us/en/storage-and-ethernet-connectivity/ethernet-nic-controllers/bcm957xxx/adapters/software-installation/updating-the-firmware/manually-updating-the-adapter-firmware-on-linuxesx.html"><em>bnxtnvm</em><em>/niccliなど</em></a>です。</p>
</li>
<li>
<p>
<a href="https://fwupd.org/lvfs/vendors/">ハードウェアベンダーとの</a>協力があり、<a href="https://fwupd.org/lvfs/devices/">サポートされているハードウェアが</a>使用されている場合、<a href="https://fwupd.org">LVFS</a>もオプションです。このための技術的条件は、システムが2014年以降に製造され、UEFI経由で起動することです。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VE は、Proxmox 署名キーによるセキュアブートサポートを有効にするため、独自のバージョンの<span class="monospaced">fwupd</span>パッケージを同梱しています。このパッケージは、ハイパーバイザー上での<span class="monospaced">udisks2</span>パッケージの使用に関する問題が確認されているため、 udisks2 パッケージへの依存推奨を意識的に取り除いています。つまり、<span class="monospaced">/etc/fwupd/daemon.conf</span> などで、EFI パーティションの正しいマウントポイントを明示的に設定する必要があります：</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/fwupd/daemon.conf</span></div>
<div class="content monospaced">
<pre># EFIシステムパーティション(ESP)のパスに使用する場所を上書きします。 EspLocation=/boot/efi</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">更新の指示にホストの再起動が必要な場合は、安全に実行できることを確認してください。<a href="#ha_manager_node_maintenance">ノードのメンテナンス</a>」も参照してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_firmware_runtime_files">3.3.2.ランタイム・ファームウェア・ファイル<a class="headerlink" href="#sysadmin_firmware_runtime_files" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このメソッドは Proxmox VE オペレーティングシステムにファームウェアを保存し、<a href="#sysadmin_firmware_persistent">パーシステッド ファームウェアが</a>最新でないデバイスにファームウェアを渡します。ネットワークカードやグラフィックカードなどのデバイスでサポートされていますが、マザーボードやハードディスクなどのパーシステッドファームウェアに依存しているデバイスではサポートされていません。</p></div>
<div class="paragraph">
<p>Proxmox VEでは、<span class="monospaced">pve-firmware</span>パッケージがデフォルトでインストールされています。そのため、通常の<a href="#system_software_updates">システムアップデート(APT)</a>で、一般的なハードウェアのファームウェアは自動的に最新の状態に保たれます。</p></div>
<div class="paragraph">
<p>追加の<a href="#sysadmin_debian_firmware_repo">Debian ファームウェアリポジトリは</a>存在しますが、デフォルトでは設定されていません。</p></div>
<div class="paragraph">
<p>追加のファームウェアパッケージをインストールしようとして競合した場合、APTはインストールを中断します。もしかしたら、そのファームウェアは別の方法で入手できるかもしれません。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_firmware_cpu">3.3.3.CPU マイクロコードアップデート<a class="headerlink" href="#sysadmin_firmware_cpu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>マイクロコードのアップデートは、発見されたセキュリティ脆弱性やその他の深刻な CPU のバグを修正することを目的としています。CPU の性能は影響を受ける可能性がありますが、パッチを適用したマイクロコードは、通常、カーネル自身が緩和策を講じなければならないパッチを適用していないマイクロコードよりも性能が高くなります。CPU の種類によっては、故意に CPU を安全でない状態で動作させなければ、欠陥のある工場出荷状態の性能結果を達成できなくなる可能性があります。</p></div>
<div class="paragraph">
<p>現在のCPUの脆弱性とその緩和策の概要を知るには、<span class="monospaced">lscpuを</span>実行してください。Proxmox VEホストが<a href="#system_software_updates">最新で</a>あり、そのバージョンが<a href="#faq-support-table">終了して</a>おらず、少なくとも最後のカーネル更新以降に再起動されている場合にのみ、現在の現実の既知の脆弱性が表示されます。</p></div>
<div class="paragraph">
<p><a href="#sysadmin_firmware_persistent">永続的な</a>BIOS/UEFIアップデートによる推奨マイクロコードアップデート以外に、<strong>Early OS Microcode Updatesによる</strong>独立した方法もあります。これは便利で、マザーボードベンダーがBIOS/UEFIアップデートを提供しなくなった場合にも役立ちます。いずれの方法を使用する場合でも、マイクロコードアップデートを適用するには必ず再起動が必要です。</p></div>
<div class="sect4">
<h5 id="_set_up_early_os_microcode_updates">早期OSマイクロコードアップデートの設定<a class="headerlink" href="#_set_up_early_os_microcode_updates" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Linuxカーネルによってブート時に早期に適用されるマイクロコード・アップデートを設定するには、次のことが必要です：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<a href="#sysadmin_debian_firmware_repo">Debian ファームウェアリポジトリの</a>有効化</p>
</li>
<li>
<p>
利用可能な最新のパッケージを取得<span class="monospaced">apt update</span>(またはウェブインターフェースの Node → Updates を使用)</p>
</li>
<li>
<p>
CPUベンダー固有のマイクロコードパッケージをインストールします：</p>
<div class="ulist"><ul>
<li>
<p>
インテルCPUの場合：<span class="monospaced">apt install intel-microcode</span></p>
</li>
<li>
<p>
AMD CPUの場合：<span class="monospaced">apt install amd64-microcode</span></p>
</li>
</ul></div>
</li>
<li>
<p>
Proxmox VEホストの再起動</p>
</li>
</ol></div>
<div class="paragraph">
<p>今後マイクロコードのアップデートを行う場合も、ロードのために再起動が必要になります。</p></div>
</div>
<div class="sect4">
<h5 id="_microcode_version">マイクロコードバージョン<a class="headerlink" href="#_microcode_version" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>比較やデバッグの目的で、現在実行中のマイクロコード・リビジョンを取得します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># grep microcode /proc/cpuinfo | uniq microcode : 0xf0</pre>
</div></div>
<div class="paragraph">
<p>マイクロコードパッケージには、さまざまなCPU用のアップデートがあります。しかし、あなたのCPUに特化したアップデートはあまりないかもしれません。そのため、パッケージの日付を見ただけでは、その会社が実際にあなたの特定のCPU用のアップデートをリリースしたのはいつなのかはわかりません。</p></div>
<div class="paragraph">
<p>新しいマイクロコードパッケージをインストールしてProxmox VEホストを再起動した場合、この新しいマイクロコードがCPUに組み込まれたバージョンとマザーボードのファームウェアのバージョンの両方よりも新しい場合、システムログに "microcode updated early "というメッセージが表示されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep microcode [ 0.000000] microcode: microcode updated early to revision 0xf0, date = 2021-11-12 [ 0.896580] microcode：Microcode Update Driver: v2.2.</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_firmware_troubleshooting">トラブルシューティング<a class="headerlink" href="#sysadmin_firmware_troubleshooting" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デバッグの目的で、システム起動時に定期的に適用されるEarly OS Microcode Updateの設定を、以下のように一時的に無効にすることができます：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
ホストが<a href="#ha_manager_node_maintenance">安全に</a>再起動できることを確認してください。</p>
</li>
<li>
<p>
ホストを再起動してGRUBメニューを表示します。</p>
</li>
<li>
<p>
<span class="monospaced">を</span>押します。</p>
</li>
<li>
<p>
<span class="monospaced">linuxで</span>始まる行に行き、スペースで区切って追加<strong><span class="monospaced">dis_ucode_ldr</span></strong></p>
</li>
<li>
<p>
<span class="monospaced">CTRL-Xを押して</span>、Early OS Microcode Updateなしで起動します。</p>
</li>
</ol></div>
<div class="paragraph">
<p>最近のマイクロコードの更新に関連した問題が疑われる場合、パッケージの削除<span class="monospaced">(apt purge &lt;intel-microcode|amd64-microcode&gt;)</span> ではなく、パッケージのダウングレードを考慮すべきです。そうしないと、最新のマイクロコードであれば問題なく実行できるにもかかわらず、古すぎる<a href="#sysadmin_firmware_persistent">永続化された</a>マイクロコードがロードされてしまうかもしれません。</p></div>
<div class="paragraph">
<p>この例で示すように、Debian リポジトリに以前の microcode パッケージバージョンがあれば、ダウングレードは可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt list -a intel-microcode Listing...完了 intel-microcode/stable-security,now 3.20230808.1~deb12u1 amd64 [installed] intel-microcode/stable 3.20230512.1 amd64</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt install intel-microcode=3.202305* ... 'intel-microcode' にバージョン '3.20230512.1' (Debian:12.1/stable [amd64]) を選択 ... dpkg: warning: intel-microcode を 3.20230808.1~deb12u1 から 3.20230512.1 にダウングレード ... intel-microcode: microcode will be updated at next boot ...</pre>
</div></div>
<div class="paragraph">
<p>ホストが<a href="#ha_manager_node_maintenance">安全に</a>再起動できることを（もう一度）確認してください。CPU タイプ用のマイクロコード・パッケージに潜在的に含まれている古いマイクロコードを適用するには、今すぐ再起動してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="paragraph">
<p>ダウングレードしたパッケージをしばらくの間保持し、後日より新しい バージョンを試してみるのは理にかなっています。将来パッケージのバージョンが同じになったとしても、その間にシステムアップデートによって経験した問題が修正されているかもしれません。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-mark hold intel-microcode intel-microcode を保留にします。</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-mark unhold intel-microcode # apt update # apt upgrade</pre>
</div></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sysadmin_network_configuration">
<span>3.4.ネットワーク構成</span> <a class="headerlink" href="#sysadmin_network_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはLinuxネットワークスタックを使用しています。このため、Proxmox VEノードのネットワーク設定に柔軟性があります。設定は、GUIを使用して行うことも、ネットワーク設定全体を含む<span class="monospaced">/etc/network/interfaces</span>ファイルを手動で編集して行うこともできます。<span class="monospaced">interfaces(5)</span>マニュアルページに、完全なフォーマットの説明があります。すべての Proxmox VE ツールは、ユーザが直接修正できるように努力していますが、GUI を使用する方がエラーから保護されるので、まだ好ましいです。</p></div>
<div class="paragraph">
<p>Linuxブリッジ・インターフェース（一般に<em>vmbrXと</em>呼ばれます）は、ゲストを基礎となる物理ネットワークに接続するために必要です。これは、ゲストと物理インターフェースが接続される仮想スイッチと考えることができます。このセクションでは、<a href="#sysadmin_network_bond"><em>ボンドによる</em></a>冗長化、<a href="#sysadmin_network_vlan"><em>VLAN</em></a>、<a href="#sysadmin_network_routed"><em>ルーティングや</em></a><a href="#sysadmin_network_masquerading"><em>NATの</em></a>セットアップなど、さまざまな使用ケースに対応するためにネットワークをどのようにセットアップできるか、いくつかの例を示します。</p></div>
<div class="paragraph">
<p><a href="#chapter_pvesdn">Software Defined Networkは</a>、Proxmox VEクラスタにより複雑な仮想ネットワークを構築するためのオプションです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">従来の Debian ツール<span class="monospaced">ifup</span>と<span class="monospaced">ifdown</span>は、<span class="monospaced">vmbrX の ifdown</span>ですべてのゲストのトラフィックを中断させるが、後で同じブリッジで<span class="monospaced">ifup を</span>実行したときにそれらのゲストを再接続しないといった落とし穴があるので、よくわからない場合は使うのをお勧めしません。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_apply_network_changes">3.4.1.ネットワーク変更の適用<a class="headerlink" href="#_apply_network_changes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEは<span class="monospaced">/etc/network/interfacesに</span>直接変更を書き込みません。代わりに、<span class="monospaced">/etc/network/interfaces.newという</span>一時ファイルに書き込みます。こうすることで、関連する多くの変更を一度に行うことができます。こうすることで、関連する多くの変更を一度に行うことができます。また、間違ったネットワーク設定によってノードにアクセスできなくなる可能性があるため、適用する前に変更が正しいことを確認することができます。</p></div>
<div class="sect4">
<h5 id="_live_reload_network_with_ifupdown2">ifupdown2 によるライブ・リロード・ネットワーク<a class="headerlink" href="#_live_reload_network_with_ifupdown2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>推奨の<em>ifupdown2</em>パッケージ（Proxmox VE 7.0以降の新規インストールのデフォルト）を使用すると、再起動せずにネットワーク構成の変更を適用できます。GUI 経由でネットワーク構成を変更した場合、[<em>Apply Configuration</em>] ボタンをクリックできます。これにより、staging<span class="monospaced">interfaces.new</span>ファイルから<span class="monospaced">/etc/network/interfacesに</span>変更が移動され、ライブで適用されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">etc/network/interfaces</span>ファイルに直接手動で変更を加えた場合は、<span class="monospaced">ifreload -aを</span>実行することで適用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Debian 上に Proxmox VE をインストールした場合、または古い Proxmox VE から Proxmox VE 7.0 にアップグレードした場合は、<span class="monospaced">ifupdown</span> <em>2 が</em>インストールされていることを確認してください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_reboot_node_to_apply">ノードを再起動して<a class="headerlink" href="#_reboot_node_to_apply" title="Permalink to this heading"></a>を適用します。</h5>
<div class="paragraph">
<p>新しいネットワーク・コンフィギュレーションを適用するもう1つの方法は、ノードをリブートすることです。 この場合、<span class="monospaced">ネットワーク・</span>サービスがコンフィギュレーションを適用する前に、systemdサービスの<span class="monospaced">pvenetcommitが</span>staging<span class="monospaced">interfaces.new</span>ファイルをアクティブにします。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_naming_conventions">3.4.2.命名規則<a class="headerlink" href="#_naming_conventions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>現在、デバイス名には以下の命名規則を使用しています：</p></div>
<div class="ulist"><ul>
<li>
<p>
イーサネットデバイス:<span class="monospaced">en*、</span>systemd ネットワークインターフェース名。この命名法はバージョン5.0以降、Proxmox VEの新規インストールに使用されます。</p>
</li>
<li>
<p>
イーサネットデバイス:<span class="monospaced">eth[N]</span>, 0 ≤ N<span class="monospaced">(eth0</span>,<span class="monospaced">eth1</span>, ...) この命名法は、5.0リリース以前にインストールされたProxmox VEホストに使用されます。5.0にアップグレードする場合は、この名前をそのまま使用します。</p>
</li>
<li>
<p>
ブリッジ名：一般的には<span class="monospaced">vmbr[N]</span>で、0≦N≦4094<span class="monospaced">（vmbr0</span>～<span class="monospaced">vmbr4094</span>）ですが、文字で始まり、最大10文字までの英数字の文字列を使用できます。</p>
</li>
<li>
<p>
ボンド：<span class="monospaced">bond[N]</span>, 0 ≤ N<span class="monospaced">(bond0</span>,<span class="monospaced">bond1</span>, ...)</p>
</li>
<li>
<p>
VLAN：デバイス名にVLAN番号をピリオドで区切って追加するだけ<span class="monospaced">です（eno1.50</span>、<span class="monospaced">bond1.30</span>）。</p>
</li>
</ul></div>
<div class="paragraph">
<p>デバイス名がデバイス・タイプを意味するため、ネットワークの問題をデバッグしやすくなります。</p></div>
<div class="sect4">
<h5 id="systemd_network_interface_names">Systemd ネットワークインターフェース名<a class="headerlink" href="#systemd_network_interface_names" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Systemd はネットワークデバイス名のバージョン管理された命名スキームを定義しています。このスキームでは、イーサネットネットワークデバイスには 2 文字の接頭辞<span class="monospaced">en</span>を使用します。次の文字はデバイスドライバやデバイスの場所、その他の属性に依存します。いくつかのパターンが考えられます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">o&lt;index&gt;[n&lt;phys_port_name&gt;|d&lt;dev_port&gt;]</span>- ボード上のデバイス<span class="monospaced">。</span></p>
</li>
<li>
<p>
<span class="monospaced">s&lt;slot&gt;[f&lt;function&gt;][n&lt;phys_port_name&gt;|d&lt;dev_port&gt;]</span>- ホットプラグIDでデバイスを指定します。</p>
</li>
<li>
<p>
[<span class="monospaced">P&lt;domain&gt;]p&lt;bus&gt;s&lt;slot&gt;[f&lt;function&gt;][n&lt;phys_port_name&gt;|d&lt;dev_port&gt;]</span>- バスIDでデバイスを指定します。</p>
</li>
<li>
<p>
<span class="monospaced">x&lt;MAC&gt;</span>- MACアドレスによるデバイス</p>
</li>
</ul></div>
<div class="paragraph">
<p>最も一般的なパターンの例をいくつか挙げましょう：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">eno1</span>- 最初のオンボードNICです。</p>
</li>
<li>
<p>
<span class="monospaced">enp3s0f1</span>- PCIバス3、スロット0上のNICのファンクション1です。</p>
</li>
</ul></div>
<div class="paragraph">
<p>可能なデバイス名のパターンの完全なリストについては、<a href="https://manpages.debian.org/stable/systemd/systemd.net-naming-scheme.7.en.html">systemd.net-naming-scheme(7) man ページを</a>参照してください。</p></div>
<div class="paragraph">
<p>systemd の新しいバージョンは、ネットワークデバイスの命名スキームの新しいバージョンを定義し、それをデフォルトで使用します。そのため、Proxmox VE のメジャーアップグレードなどで systemd を新しいバージョンに更新すると、ネットワークデバイスの名前が変更され、ネットワーク設定の調整が必要になることがあります。新しいバージョンの命名スキームによる名前の変更を避けるには、特定の命名スキームバージョンを手動で固定します（<a href="#network_pin_naming_scheme_version">下記</a>参照）。</p></div>
<div class="paragraph">
<p>ただし、命名スキームを固定したバージョンでも、カーネルやドライバの更新によってネットワークデバイス名が変更される可能性があります。特定のネットワーク・デバイスの名前の変更を完全に避けるには、リンク・ファイルを使用して手動で名前を上書きします（<a href="#network_override_device_names">下記</a>参照）。</p></div>
<div class="paragraph">
<p>ネットワーク・インターフェース名の詳細については、「<a href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">予測可能なネットワーク・インターフェース名</a>」を参照してください。</p></div>
</div>
<div class="sect4">
<h5 id="network_pin_naming_scheme_version">特定のネーミングスキームのバージョンをピン留め<a class="headerlink" href="#network_pin_naming_scheme_version" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインに</a> <span class="monospaced">net.naming-scheme=&lt;version&gt;</span>パラメータを追加することで、ネットワークデバイスの命名スキームの特定のバージョンを固定することができます。命名スキームのバージョンの一覧は<a href="https://manpages.debian.org/stable/systemd/systemd.net-naming-scheme.7.en.html">systemd.net-naming-scheme(7) man ページを</a>参照してください。</p></div>
<div class="paragraph">
<p>たとえば、Proxmox VE 8.0を新規インストールしたときの最新の命名スキーム・バージョンである<span class="monospaced">v252を</span>固定するには、次のカーネル・コマンドライン・パラメータを追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>net.naming-scheme=v252</pre>
</div></div>
<div class="paragraph">
<p>カーネルコマンドラインの編集については<a href="#sysboot_edit_kernel_cmdline">、このセクションも</a>参照してください。変更を有効にするには再起動する必要があります。</p></div>
</div>
<div class="sect4">
<h5 id="network_override_device_names">ネットワークデバイス名の上書き<a class="headerlink" href="#network_override_device_names" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>カスタム<a href="https://manpages.debian.org/stable/udev/systemd.link.5.en.html">systemd.link ファイルを使って</a>、特定のネットワークデバイスに手動で名前を割り当てることができます。これは最新のネットワークデバイス命名スキームに従って割り当てられる名前を上書きします。こうすることで、カーネルのアップデートやドライバのアップデート、命名スキームの新しいバージョンによる名前の変更を避けることができます。</p></div>
<div class="paragraph">
<p>カスタムリンクファイルは<span class="monospaced">/etc/systemd/network/</span>に置き、<span class="monospaced">&lt;n&gt;-&lt;id&gt;.link</span> という名前にします。リンクファイルには2つのセクションがあります：[<span class="monospaced">Match]</span>はファイルが適用されるインターフェースを決定し、<span class="monospaced">[Link]</span>はこれらのインターフェースがどのように設定されるべきかを決定します。</p></div>
<div class="paragraph">
<p>特定のネットワーク・デバイスに名前を割り当てるには、<span class="monospaced">[Match]</span>セクションでそのデバイスを一意的かつ恒久的に識別する方法が必要です。一つの可能性は、<span class="monospaced">MACAddress</span>オプションを使用してデバイスのMACアドレスを一致させることです。</p></div>
<div class="paragraph">
<p><span class="monospaced">Match]</span>セクションには、同じMACアドレスを持つブリッジ/ボンド/VLANインターフェイスではなく、期待される物理インターフェイスだけにマッチするように、<span class="monospaced">Type</span>オプションも含める必要があります。ほとんどのセットアップでは、<span class="monospaced">Type</span>はイーサネットデバイスだけにマッチするように<span class="monospaced">ether</span>に設定されるべきですが、セットアップによっては他の選択が必要になるかもしれません。詳細は<a href="https://manpages.debian.org/stable/udev/systemd.link.5.en.html">systemd.link(5) man ページを</a>参照してください。</p></div>
<div class="paragraph">
<p>次に、<span class="monospaced">[リンク]</span>セクションの<span class="monospaced">[名前]</span>オプションを使用して名前を割り当てることができます。</p></div>
<div class="paragraph">
<p>リンク・ファイルは<span class="monospaced">initramfsに</span>コピーされるため、リンク・ファイルを追加、変更、削除した後は<span class="monospaced">initramfsを</span>リフレッシュすることをお勧めします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-initramfs -u -k all</pre>
</div></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">enwan0</span>という名前を MAC アドレス<span class="monospaced">aa:bb:cc:dd:ee:ff</span> のイーサネットデバイスに割り当てるには、以下の内容の<span class="monospaced">/etc/systemd/network/10-enwan0.link</span>ファイルを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[マッチ] MACアドレス=aa:bb:cc:dd:ee:ff タイプ=エーテル [リンク] 名前=enwan0</pre>
</div></div>
<div class="paragraph">
<p>新しい名前を使用するように<span class="monospaced">/etc/network/interfacesを</span>調整し、前述のように<span class="monospaced">initramfsを</span>リフレッシュすることを忘れないでください。変更を有効にするにはノードを再起動する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEがインターフェイスを物理的なネットワークデバイスとして認識し、GUIで設定できるように、<span class="monospaced">en</span>または<span class="monospaced">ethで</span>始まる名前を割り当てることをお勧めします。また、この名前が将来的に他のインターフェイス名と衝突しないようにする必要があります。上の例では<span class="monospaced">enwan0 の</span>ように、systemd がネットワークインターフェースに使用する名前パターン<a href="#systemd_network_interface_names">(上記参照</a>) にマッチしない名前を割り当てることもできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>リンクファイルの詳細については、<a href="https://manpages.debian.org/stable/udev/systemd.link.5.en.html">systemd.link(5) man ページを</a>参照してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_choosing_a_network_configuration">3.4.3.ネットワーク設定の選択<a class="headerlink" href="#_choosing_a_network_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>現在のネットワーク構成とリソースに応じて、ブリッジ、ルーティング、マスカレードのいずれかのネットワーク設定を選択できます。</p></div>
<div class="sect4">
<h5 id="_proxmox_ve_server_in_a_private_lan_using_an_external_gateway_to_reach_the_internet">プライベート LAN 内の Proxmox VE サーバー、外部ゲートウェイを使用してインターネットに接続<a class="headerlink" href="#_proxmox_ve_server_in_a_private_lan_using_an_external_gateway_to_reach_the_internet" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>この場合、<strong>ブリッジ</strong>モデルが最も理にかなっており、Proxmox VEの新規インストー ル時のデフォルトモードでもあります。 各ゲストシステムには、Proxmox VEブリッジに接続された仮想インターフェイスがあります。これは、ゲストのネットワークカードがLAN上の新しいスイッチに直接接続され、Proxmox VEホストがスイッチの役割を果たすのと同じです。</p></div>
</div>
<div class="sect4">
<h5 id="_proxmox_ve_server_at_hosting_provider_with_public_ip_ranges_for_guests">ホスティングプロバイダのProxmox VEサーバ、ゲスト用パブリックIPレンジ<a class="headerlink" href="#_proxmox_ve_server_at_hosting_provider_with_public_ip_ranges_for_guests" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このセットアップでは、プロバイダーの許可に応じて、<strong>ブリッジ</strong>モデルまたは<strong>ルーティング</strong>モデルのいずれかを使用できます。</p></div>
</div>
<div class="sect4">
<h5 id="_proxmox_ve_server_at_hosting_provider_with_a_single_public_ip_address">ホスティングプロバイダのProxmox VEサーバ、単一のパブリックIPアドレス<a class="headerlink" href="#_proxmox_ve_server_at_hosting_provider_with_a_single_public_ip_address" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>この場合、ゲストシステムの発信ネットワークアクセスを取得する唯一の方法は、<strong>マスカレードを</strong>使用することです。ゲストへの着信ネットワークアクセスには、<strong>ポートフォワーディングを</strong>設定する必要があります。</p></div>
<div class="paragraph">
<p>さらに柔軟性を高めるために、VLAN（IEEE 802.1q）やネットワークボンディング（別名「リンクアグリゲーション」）を設定することができます。これにより、複雑で柔軟な仮想ネットワークを構築することができます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_default_configuration_using_a_bridge">3.4.4.ブリッジを使ったデフォルト設定<a class="headerlink" href="#_default_configuration_using_a_bridge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/default-network-setup-bridge.svg">
<img src="images/default-network-setup-bridge.svg" alt="default-network-setup-bridge.svg" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ブリッジは、ソフトウェアで実装された物理ネットワークスイッチのようなものです。 すべての仮想ゲストは単一のブリッジを共有できますが、複数のブリッジを作成してネットワークドメインを分けることもできます。各ホストは最大 4094 個のブリッジを持つことができます。</p></div>
<div class="paragraph">
<p>インストール・プログラムは<span class="monospaced">vmbr0</span> という名前のブリッジを1つ作成し、最初のイーサネット・ カードに接続します。<span class="monospaced">etc/network/interfacesの</span>対応する設定は以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto lo iface lo inet loopback iface eno1 inet manual auto vmbr0 iface vmbr0 inet static address 192.168.10.2/24 gateway 192.168.10.1 bridge-ports eno1 bridge-stp off bridge-fd 0</pre>
</div></div>
<div class="paragraph">
<p>仮想マシンは、あたかも物理ネットワークに直接接続されているかのように動作します。ネットワークは、すべての仮想マシンをネットワークに接続しているネットワーク・ケーブルが1本しかないにもかかわらず、各仮想マシンを独自のMACを持っていると見なします。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_routed">3.4.5.ルーティングされたコンフィギュレーション<a class="headerlink" href="#sysadmin_network_routed" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ほとんどのホスティングプロバイダーは上記の設定をサポートしていません。セキュリティ上の理由から、1つのインターフェイスで複数のMACアドレスを検出するとすぐにネットワークを無効にします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プロバイダによっては、管理インターフェイスから追加の MAC を登録できるものもあります。これによって問題は回避されますが、VMごとにMACを登録する必要があるため、設定が面倒な場合があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>すべてのトラフィックを1つのインターフェイス経由で「ルーティング」することで、この問題を回避することができます。これにより、すべてのネットワークパケットが同じMACアドレスを使用するようになります。</p></div>
<div class="paragraph">
<a class="image" href="images/default-network-setup-routed.svg">
<img src="images/default-network-setup-routed.svg" alt="default-network-setup-routed.svg" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>一般的なシナリオは、パブリックIP（この例では<span class="monospaced">198.51.100.5と</span>仮定）と、VM用の追加IPブロック<span class="monospaced">（203.0.113.16/28</span>）がある場合です。このような場合、以下のセットアップをお勧めします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto lo iface lo inet loopback auto eno0 iface eno0 inet static address 198.51.100.5/29 gateway 198.51.100.1 post-up echo 1 &gt; /proc/sys/net/ipv4/ip_forward post-up echo 1 &gt; /proc/sys/net/ipv4/conf/eno0/proxy_arp auto vmbr0 iface vmbr0 inet static address 203.0.113.17/28 bridge-ports none bridge-stp off bridge-fd 0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_masquerading">3.4.6.<span class="monospaced">iptables</span>によるマスカレード (NAT)<a class="headerlink" href="#sysadmin_network_masquerading" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>マスカレードは、プライベートIPアドレスしか持たないゲストが、送信トラフィックにホストIPアドレスを使用してネットワークにアクセスすることを可能にします。各送信パケットは<span class="monospaced">iptablesによって</span>ホストから発信されているように書き換えられ、レスポンスもそれに応じて書き換えられ、元の送信者にルーティングされます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto lo iface lo inet loopback auto eno1 #実IPアドレス iface eno1 inet static address 198.51.100.5/24 gateway 198.51.100.1 auto vmbr0 #プライベートサブネットワーク iface vmbr0 inet static address 10.10.10.1/24 bridge-ports none bridge-stp off bridge-fd 0 post-up echo 1 &gt; /proc/sys/net/ipv4/ip_forward post-up iptables -t nat -A POSTROUTING -s '10.10.10.0/24' -o eno1 -j MASQUERADE post-down iptables -t nat -D POSTROUTING -s '10.10.10.0/24' -o eno1 -j MASQUERADE</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイアウォールが有効になっているいくつかのマスカレード・セットアップでは、conntrackゾーンが発信接続に必要な場合があります。そうでなければ、ファイアウォールは（<span class="monospaced">MASQUERADEではなく</span>）VMブリッジの<span class="monospaced">POSTROUTINGを</span>優先するため、発信接続をブロックする可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">etc/network/interfacesに</span>以下の行を追加すると、この問題を解決できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>post-up iptables -t raw -I PREROUTING -i fwbr+ -j CT --zone 1 post-down iptables -t raw -D PREROUTING -i fwbr+ -j CT --zone 1</pre>
</div></div>
<div class="paragraph">
<p>これについては、以下のリンクをご参照ください：</p></div>
<div class="paragraph">
<p><a href="https://commons.wikimedia.org/wiki/File:Netfilter-packet-flow.svg">ネットフィルターのパケットフロー</a></p></div>
<div class="paragraph">
<p><a href="https://lwn.net/Articles/370152/">conntrackゾーンを導入するnetdev-listのパッチ</a></p></div>
<div class="paragraph">
<p><a href="https://web.archive.org/web/20220610151210/https://blog.lobraun.de/2019/05/19/prox/">生テーブルでTRACEを使用することで良い説明があるブログ記事</a></p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_bond">3.4.7.Linuxボンド<a class="headerlink" href="#sysadmin_network_bond" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ボンディング（NICチーミングまたはリンクアグリゲーションとも呼ばれる）は、複数のNICを1つのネットワークデバイスにバインドする技術です。  ネットワークのフォールトトレラント化、パフォーマンスの向上、またはその両方など、さまざまな目的を達成することができます。</p></div>
<div class="paragraph">
<p>ファイバーチャネルのような高速ハードウェアと関連するスイッチングハードウェアは、かなり高価になります。リンクアグリゲーションを行うことで、2つのNICを1つの論理インターフェイスとして表示することができ、結果として2倍の速度が得られます。これはLinuxカーネルのネイティブ機能で、ほとんどのスイッチでサポートされています。ノードに複数のイーサネットポートがある場合、異なるスイッチにネットワークケーブルを接続することで、障害箇所を分散させることができます。</p></div>
<div class="paragraph">
<p>集約リンクは、ライブマイグレーションの遅延を改善し、Proxmox VE Clusterノード間のデータのレプリケーション速度を向上させることができます。</p></div>
<div class="paragraph">
<p>ボンディングには7つのモードがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ラウンドロビン（balance-rr）：</strong>利用可能な最初のネットワークインターフェイス（NIC）スレーブから最後のスレーブまで、順次ネットワークパケットを送信します。このモードは負荷分散とフォールトトレランスを提供します。</p>
</li>
<li>
<p>
<strong>アクティブバックアップ（active-backup）：</strong>ボンド内の1つのNICスレーブのみがアクティブになります。アクティブスレーブに障害が発生した場合のみ、別のスレーブがアクティブになります。単一の論理ボンディングインターフェイスのMACアドレスは、ネットワークスイッチの歪みを避けるために、1つのNIC（ポート）のみで外部に表示されます。このモードはフォールトトレランスを提供します。</p>
</li>
<li>
<p>
<strong>XOR (balance-xor)：</strong>送信元MACアドレスと送信先MACアドレスのXOR）モジュロNICスレーブ数]に基づいてネットワークパケットを送信します。これは、各宛先MACアドレスに対して同じNICスレーブを選択します。このモードは負荷分散とフォールトトレランスを提供します。</p>
</li>
<li>
<p>
<strong>ブロードキャスト（放送）：</strong>すべてのスレーブ・ネットワーク・インタフェースでネットワーク・パケットを送信します。このモードはフォールトトレランスを提供します。</p>
</li>
<li>
<p>
<strong>IEEE 802.3ad ダイナミックリンクアグリゲーション(802.3ad)(LACP)：</strong>同じ速度とデュプレックス設定を共有するアグリゲーショングループを作成します。802.3ad仕様に従って、アクティブアグリゲーターグループ内のすべてのスレーブネットワークインターフェースを使用します。</p>
</li>
<li>
<p>
<strong>アダプティブ・トランスミッション・ロードバランシング(balance-tlb)：</strong>特別なネットワークスイッチのサポートを必要としない Linux のボンディングドライバモード。発信ネットワークパケットトラフィックは、各ネットワークインターフェイススレーブの現在の負荷（速度に対して計算される）に従って分配されます。着信トラフィックは、現在指定されている1つのスレーブ・ネットワーク・インターフェースで受信されます。この受信スレーブが故障した場合、別のスレーブが故障した受信スレーブのMACアドレスを引き継ぎます。</p>
</li>
<li>
<p>
<strong>適応型ロードバランシング（balance-alb）：</strong>balance-tlbにIPV4トラフィックの受信負荷分散(rlb)を加えたもので、特別なネットワークスイッチのサポートは必要ありません。受信負荷分散はARPネゴシエーションによって達成されます。ボンディングドライバは、ローカルシステムから送信されるARPリプライをインターセプトし、異なるネットワークピアがネットワークパケットトラフィックに異なるMACアドレスを使用するように、単一の論理ボンディングインターフェース内のNICスレーブの1つの固有のハードウェアアドレスでソースハードウェアアドレスを上書きします。</p>
</li>
</ul></div>
<div class="paragraph">
<p>お使いのスイッチがLACP（IEEE 802.3ad）プロトコルをサポートしている場合は、対応するボンディングモード（802.3ad）を使用することをお勧めします。そうでない場合は、通常アクティブバックアップモードを使用してください。</p></div>
<div class="paragraph">
<p>クラスタネットワーク（Corosync）については、複数のネットワークで構成することをお勧めします。Corosyncはネットワークの冗長化のためのボンドを必要としません。</p></div>
<div class="paragraph">
<p>以下のボンド構成は、分散/共有ストレージネットワークとして使用できます。利点は、より高速になり、ネットワークがフォールトトレラントになることです。</p></div>
<div class="listingblock">
<div class="title">例固定IPアドレスでボンドを使用</div>
<div class="content monospaced">
<pre>auto lo iface lo inet loopback iface eno1 inet manual iface eno2 inet manual iface eno3 inet manual auto bond0 iface bond0 inet static bond-slaves eno1 eno2 address 192.168.1.2/24 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3 auto vmbr0 iface vmbr0 inet static address 10.10.10.2/24 gateway 10.10.10.1 bridge-ports eno3 bridge-stp off bridge-fd 0</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/default-network-setup-bond.svg">
<img src="images/default-network-setup-bond.svg" alt="default-network-setup-bond.svg" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>もう1つの可能性は、ブリッジポートとしてボンドを直接使用することです。 これは、ゲストネットワークをフォールトトレラントにするために使用できます。</p></div>
<div class="listingblock">
<div class="title">例ブリッジポートとしてボンドを使用</div>
<div class="content monospaced">
<pre>auto lo iface lo inet loopback iface eno1 inet manual iface eno2 inet manual auto bond0 iface bond0 inet manual bond-slaves eno1 eno2 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3 auto vmbr0 iface vmbr0 inet static address 10.10.10.2/24 gateway 10.10.10.1 bridge-ports bond0 bridge-stp off bridge-fd 0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_vlan">3.4.8.VLAN 802.1Q<a class="headerlink" href="#sysadmin_network_vlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想LAN(VLAN)はブロードキャスト・ドメインで、レイヤ2のネットワーク内で分割・分離されます。  そのため、物理ネットワーク内に複数のネットワーク（4096）を持つことができ、それぞれが他のネットワークから独立しています。</p></div>
<div class="paragraph">
<p>各VLANネットワークは、しばしば<em>タグと</em>呼ばれる番号で識別されます。 ネットワークパッケージは、どの仮想ネットワークに属するかを識別するために<em>タグ付けさ</em>れます。</p></div>
<div class="sect4">
<h5 id="_vlan_for_guest_networks">ゲストネットワーク用VLAN<a class="headerlink" href="#_vlan_for_guest_networks" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEはこの設定をすぐにサポートします。VMの作成時にVLANタグを指定できます。VLAN タグはゲストネットワーク設定の一部です。ネットワーキング・レイヤは、ブリッジ構成に応じて、VLANを実装するためのさまざまなモードをサポートします：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Linux ブリッジで VLAN を認識:</strong>この場合、各ゲストの仮想ネットワークカードには VLAN タグが割り当てられ、Linux ブリッジによって透過的にサポートされます。 トランクモードも可能ですが、その場合はゲストでの設定が必要になります。</p>
</li>
<li>
<p>
<strong>Linux ブリッジ上の "伝統的な" VLAN:</strong>VLAN を認識する方法とは対照的に、この方法は透過的ではなく、各 VLAN に関連するブリッジと VLAN デバイスを作成します。 つまり、例えば VLAN 5 にゲストを作成すると、2 つのインターフェース eno1.5 と vmbr0v5 が作成され、再起動が発生するまで残ります。</p>
</li>
<li>
<p>
<strong>Open vSwitch VLAN：</strong>このモードでは、OVS VLAN機能を使用します。</p>
</li>
<li>
<p>
<strong>ゲスト設定 VLAN:</strong>VLAN はゲスト内部で割り当てられます。この場合、設定は完全にゲスト内部で行われ、外部から影響を受けることはありません。利点は、1 つの仮想 NIC で複数の VLAN を使用できることです。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_vlan_on_the_host">ホスト上のVLAN<a class="headerlink" href="#_vlan_on_the_host" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>隔離されたネットワークとのホスト通信を許可するため。任意のネットワークデバイス（NIC、ボンド、ブリッジ）にVLANタグを適用することが可能です。一般的に、それ自身と物理 NIC の間の抽象化レイヤーが最も少ないインターフェースに VLAN を設定する必要があります。</p></div>
<div class="paragraph">
<p>たとえば、ホスト管理アドレスを別のVLANに配置したいデフォルトの構成では、次のようになります。</p></div>
<div class="listingblock">
<div class="title">例従来の Linux ブリッジで Proxmox VE 管理 IP に VLAN 5 を使用します。</div>
<div class="content monospaced">
<pre>auto lo iface lo inet loopback iface eno1 inet manual iface eno1.5 inet manual auto vmbr0v5 iface vmbr0v5 inet static address 10.10.10.2/24 gateway 10.10.10.1 bridge-ports eno1.5 bridge-stp off bridge-fd 0 auto vmbr0 iface vmbr0 inet manual bridge-ports eno1 bridge-stp off bridge-fd 0</pre>
</div></div>
<div class="listingblock">
<div class="title">例VLAN を認識する Linux ブリッジで Proxmox VE 管理 IP に VLAN 5 を使用します。</div>
<div class="content monospaced">
<pre>auto lo iface lo inet loopback iface eno1 inet manual auto vmbr0.5 iface vmbr0.5 inet static address 10.10.10.2/24 gateway 10.10.10.1 auto vmbr0 iface vmbr0 inet manual bridge-ports eno1 bridge-stp off bridge-fd 0 bridge-vlan-aware yes bridge-vids 2-4094</pre>
</div></div>
<div class="paragraph">
<p>次の例は同じセットアップですが、このネットワークをフェイルセーフにするためにボンドが使われています。</p></div>
<div class="listingblock">
<div class="title">例従来の Linux ブリッジで Proxmox VE 管理 IP に Bond0 を使用して VLAN 5 を使用します。</div>
<div class="content monospaced">
<pre>auto lo iface lo inet loopback iface eno1 inet manual iface eno2 inet manual auto bond0 iface bond0 inet manual bond-slaves eno1 eno2 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3 iface bond0.5 inet manual auto vmbr0v5 iface vmbr0v5 inet static address 10.10.10.2/24 gateway 10.10.10.1 bridge-ports bond0.5 bridge-stp off bridge-fd 0 auto vmbr0 iface vmbr0 inet manual bridge-ports bond0 bridge-stp off bridge-fd 0</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_disabling_ipv6_on_the_node">3.4.9.ノードでIPv6を無効にする<a class="headerlink" href="#_disabling_ipv6_on_the_node" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEは、IPv6の導入の有無にかかわらず、すべての環境で正しく動作します。すべての設定はデフォルトのままにしておくことをお勧めします。</p></div>
<div class="paragraph">
<p>それでもノードのIPv6サポートを無効にする必要がある場合は、適切な<span class="monospaced">sysctl.conf (5)</span>スニペットファイルを作成し、適切な<a href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt">sysctlsを</a>設定します。例えば、<span class="monospaced">/etc/sysctl.d/disable-ipv6.confに</span>内容を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>net.ipv6.conf.all.disable_ipv6 = 1 net.ipv6.conf.default.disable_ipv6 = 1</pre>
</div></div>
<div class="paragraph">
<p>この方法は、<a href="https://www.kernel.org/doc/Documentation/networking/ipv6.rst">カーネルのコマンド</a>ラインでIPv6モジュールのロードを無効にするよりも好ましい。</p></div>
</div>
<div class="sect3">
<h4 id="_disabling_mac_learning_on_a_bridge">3.4.10.ブリッジでの MAC 学習の無効化<a class="headerlink" href="#_disabling_mac_learning_on_a_bridge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、仮想ゲストとそのネットワークをスムーズに使用できるように、ブリッジでMAC学習が有効になっています。</p></div>
<div class="paragraph">
<p>しかし、環境によってはこれが望ましくないこともあります。Proxmox VE 7.3以降では、ブリッジの'bridge-disable-mac-learning 1`設定を`/etc/network/interfaces'などで設定することで、ブリッジのMAC学習を無効にできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ... auto vmbr0 iface vmbr0 inet static address 10.10.10.2/24 gateway 10.10.10.1 bridge-ports ens18 bridge-stp off bridge-fd 0 bridge-disable-mac-learning 1</pre>
</div></div>
<div class="paragraph">
<p>有効化されると、Proxmox VEはVMとコンテナから設定されたMACアドレスをブリッジ転送データベースに手動で追加し、ゲストが実際のMACアドレスを使用している場合のみネットワークを使用できるようにします。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_time_synchronization">
<span>3.5.時刻同期</span> <a class="headerlink" href="#_time_synchronization" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEクラスタスタック自体は、すべてのノードの時刻が正確に同期していることに大きく依存しています。Cephのような他のコンポーネントも、すべてのノードのローカル時刻が同期していないと正しく動作しません。</p></div>
<div class="paragraph">
<p>ノード間の時刻同期は、"Network Time Protocol"<span class="monospaced">(NTP</span>)を使用して実現できます。Proxmox VE 7では、デフォルトのNTPデーモンとして<span class="monospaced">chronyが</span>使用され、Proxmox VE 6では<span class="monospaced">systemd-timesyncdが</span>使用されます。どちらも、一連のパブリックサーバーを使用するように事前に設定されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">システムをProxmox VE 7にアップグレードする場合は、<span class="monospaced">chrony</span>、<span class="monospaced">ntp</span>、<span class="monospaced">openntpdの</span>いずれかを手動でインストールすることをお勧めします。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_using_custom_ntp_servers">3.5.1.カスタムNTPサーバーの使用<a class="headerlink" href="#_using_custom_ntp_servers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>場合によっては、デフォルト以外のNTPサーバを使用したいことがあります。たとえば、Proxmox VEノードが制限されたファイアウォールルールのためにパブリックインターネットにアクセスできない場合、ローカルNTPサーバをセットアップして、NTPデーモンにそれを使用するように指示する必要があります。</p></div>
<div class="sect4">
<h5 id="_for_systems_using_chrony">クロニーを使用するシステムの場合:<a class="headerlink" href="#_for_systems_using_chrony" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">etc/chrony/chrony.confで</span> <span class="monospaced">chronyが</span>使用するサーバーを指定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サーバ ntp1.example.com iburst サーバ ntp2.example.com iburst サーバ ntp3.example.com iburst</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">クロニーを</span>再起動してください：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># systemctl restart chronyd</pre>
</div></div>
<div class="paragraph">
<p>ジャーナルをチェックして、新しく設定したNTPサーバーが使用されていることを確認します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># journalctl --since -1h -u chrony</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre>... Aug 26 13:00:09 node1 systemd[1]：8/26 13:00:15 node1 chronyd[4873]：8/26 13:00:15 node1 chronyd[4873]: ソース 10.0.0.1 (ntp1.example.com) を選択しました：システムクロックTAIオフセットを37秒に設定 ...</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_for_systems_using_systemd_timesyncd">systemd-timesyncd を使用しているシステムの場合:<a class="headerlink" href="#_for_systems_using_systemd_timesyncd" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">etc/systemd/timesyncd.conf</span> で<span class="monospaced">systemd-timesyncd が</span>使用するサーバを指定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[時刻] NTP=ntp1.example.com ntp2.example.com ntp3.example.com ntp4.example.com</pre>
</div></div>
<div class="paragraph">
<p>その後、同期サービスを再起動し<span class="monospaced">(systemctl restart systemd-timesyncd</span>)、ジャーナルをチェックする<span class="monospaced">(journalctl --since -1h -u systemd-timesyncd</span>) ことで、新しく設定した NTP サーバーが使用されていることを確認します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>... Oct 07 14:58:36 node1 systemd[1]：ネットワーク時刻同期を停止しています... Oct 07 14:58:36 node1 systemd[1]：ネットワーク時刻同期を開始しました... Oct 07 14:58:36 node1 systemd[1]：Oct 07 14:58:36 node1 systemd-timesyncd[13514]：ネットワーク時刻同期を開始しました：Oct 07 14:58:36 node1 systemd-timesyncd[13514]: interval/delta/delay/jitter/drift 64s/-0.002s/0.020s/0.000s/-31ppm ...</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="external_metric_server">
<span>3.6.外部メトリック・サーバー</span> <a class="headerlink" href="#external_metric_server" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-metric-server-list.png">
<img src="images/screenshot/gui-datacenter-metric-server-list.png" alt="screenshot/gui-datacenter-metric-server-list.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEでは、ホスト、仮想ゲスト、ストレージに関する様々な統計情報を定期的に受け取る外部メトリックサーバを定義できます。</p></div>
<div class="paragraph">
<p>現在サポートされているのは</p></div>
<div class="ulist"><ul>
<li>
<p>
グラファイト (<a href="https://graphiteapp.org">https://graphiteapp.org</a>を参照)</p>
</li>
<li>
<p>
InfluxDB (<a href="https://www.influxdata.com/time-series-platform/influxdb/">https://www.influxdata.com/time-series-platform/influxdb/ を参照</a>)</p>
</li>
</ul></div>
<div class="paragraph">
<p>外部メトリックサーバ定義は<em>/etc/pve/status.cfgに</em>保存され、ウェブインタフェースで編集できます。</p></div>
<div class="sect3">
<h4 id="metric_server_graphite">3.6.1.Graphite サーバー構成<a class="headerlink" href="#metric_server_graphite" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-metric-server-graphite.png">
<img src="images/screenshot/gui-datacenter-metric-server-graphite.png" alt="screenshot/gui-datacenter-metric-server-graphite.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>デフォルトのポートは<strong>2003に</strong>設定されており、デフォルトのグラファイトパスは<strong>proxmox</strong>です。</p></div>
<div class="paragraph">
<p>デフォルトでは、Proxmox VEはUDPでデータを送信するため、グラファイトサーバーはこれを受け入れるように設定する必要があります。標準の<strong>1500</strong>MTUを使用しない環境では、ここで最大伝送単位(MTU)を設定することができます。</p></div>
<div class="paragraph">
<p>TCPを使用するようにプラグインを設定することもできます。重要な<span class="monospaced">pvestatd</span>統計収集デーモンをブロックしないために、ネットワークの問題に対処するためのタイムアウトが必要です。</p></div>
</div>
<div class="sect3">
<h4 id="metric_server_influxdb">3.6.2.Influxdb プラグイン設定<a class="headerlink" href="#metric_server_influxdb" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-metric-server-influxdb.png">
<img src="images/screenshot/gui-datacenter-metric-server-influxdb.png" alt="screenshot/gui-datacenter-metric-server-influxdb.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEはUDPでデータを送信するので、influxdbサーバーはこのように設定する必要があります。必要に応じてMTUもここで設定できます。</p></div>
<div class="paragraph">
<p>以下は influxdb (influxdb サーバー) の設定例です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[udp]]有効 = true バインドアドレス = "0.0.0.0:8089" データベース = "proxmox" バッチサイズ = 1000 バッチタイムアウト = "1s"</pre>
</div></div>
<div class="paragraph">
<p>この設定では、サーバーはポート8089ですべてのIPアドレスをリッスンし、<strong>proxmox</strong>データベースにデータを書き込みます。</p></div>
<div class="paragraph">
<p>InfluxDB 1.8.x には、この v2 API と互換性のある API エンドポイントが含まれています。</p></div>
<div class="paragraph">
<p>デフォルトでは、Proxmox VEはorganization<em>proxmoxと</em>bucket/<em>db</em> <em>proxmoxを</em>使用します(<em>organizationと</em> <em>bucketは</em>それぞれ設定で設定できます)。</p></div>
<div class="paragraph">
<p>InfluxDBのv2 APIは認証がないと使えないので、正しいバケットに書き込めるトークンを生成して設定する必要があります。</p></div>
<div class="paragraph">
<p>1.8.xのv2互換APIでは、トークンとして<em>user:passwordを</em>使用することができます（必要な場合）。</p></div>
<div class="paragraph">
<p>また、<em>timeout</em>設定でHTTPタイムアウト（デフォルトは1秒）を、<em>max-body-size</em>設定で最大バッチサイズ（デフォルトは25000000バイト）を設定できます（これは同名のInfluxDBの設定に対応します）。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_disk_health_monitoring">
<span>3.7.ディスクヘルス監視</span> <a class="headerlink" href="#_disk_health_monitoring" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>堅牢で冗長性のあるストレージを推奨しますが、ローカルディスクの健全性を監視することは非常に有用です。</p></div>
<div class="paragraph">
<p>Proxmox VE 4.3から、smartmontools<span class="footnote"><br>[smartmontools homepage<a href="https://www.smartmontools.org">https://www.smartmontools.org]</a><br></span>パッケージがインストールされ、必須となりました。これは、ローカルハードディスクのS.M.A.R.T.システムを監視および制御するためのツールセットです。</p></div>
<div class="paragraph">
<p>ディスクのステータスは、以下のコマンドで取得できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># smartctl -a /dev/sdX</pre>
</div></div>
<div class="paragraph">
<p>dev/sdXはローカルディスクのパスです。</p></div>
<div class="paragraph">
<p>と出力されたら</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>SMARTのサポートは無効</pre>
</div></div>
<div class="paragraph">
<p>コマンドで有効にできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># smartctl -s on /dev/sdX</pre>
</div></div>
<div class="paragraph">
<p>smartctlの使い方については、<span class="monospaced">man smartctlを</span>参照してください。</p></div>
<div class="paragraph">
<p>デフォルトでは、smartmontoolsデーモンsmartdがアクティブで有効になっており、/dev/sdXおよび/dev/hdX下のディスクを30分ごとにスキャンしてエラーや警告を表示し、問題を検出するとrootに電子メールを送信します。</p></div>
<div class="paragraph">
<p>smartdの設定方法の詳細については、<span class="monospaced">man smartd</span>および<span class="monospaced">man smartd.confを</span>参照してください。</p></div>
<div class="paragraph">
<p>ハードディスクをハードウェア raid コントローラーで使用している場合、ほとんどの場合 raid アレイ内のディスクとアレイ自体を監視するツールがあります。これに関する詳細については、ご使用の raid コントローラーのベンダーにお問い合わせください。</p></div>
</div>
<div class="sect2">
<h3 id="chapter_lvm">
<span>3.8.論理ボリュームマネージャ (LVM)</span> <a class="headerlink" href="#chapter_lvm" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ほとんどの場合、Proxmox VEはローカルディスクに直接インストールされます。Proxmox VEのインストールCDには、ローカルディスク管理のためのいくつかのオプションが用意されており、現在のデフォルトのセットアップではLVMが使用されています。インストーラでは、このようなセットアップに使用するディスクを 1 つ選択でき、そのディスクを<strong>ボリューム</strong> <strong>グループ</strong>(VG)<span class="monospaced">pve</span> の物理ボリュームとして使用します。以下の出力は、8GB の小型ディスクを使用したテストインストールによるものです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvs PV VG Fmt Attr PSize PFree /dev/sda3 pve lvm2 a-- 7.87g 876.00m # vgs VG #PV #LV #SN Attr VSize VFree pve 1 3 0 wz--n- 7.87g 876.00m</pre>
</div></div>
<div class="paragraph">
<p>インストーラはこの VG 内に 3 つの<strong>論理</strong> <strong>ボリューム</strong>（LV）を割り当てます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lvs LV VG Attr LSize Pool Origin Data% Meta% data pve twi-a-tz-- 4.38g 0.00 0.63 root pve -wi-ao---- 1.75g swap pve -wi-ao---- 896.00m</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ルート</dt>
<dd>
<p>
フォーマット形式は<span class="monospaced">ext4で</span>、オペレーティングシステムが入っています。</p>
</dd>
<dt class="hdlist1">
スワップ</dt>
<dd>
<p>
スワップ・パーティション</p>
</dd>
<dt class="hdlist1">
データ</dt>
<dd>
<p>
このボリュームはLVM-thinを使用し、VMイメージの保存に使用されます。LVM-thinは、スナップショットとクローンを効率的にサポートするため、このタスクに適しています。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>Proxmox VEのバージョン4.1までの場合、インストーラは「data」という標準論理ボリュームを作成し、<span class="monospaced">/var/lib/vzに</span>マウントします。</p></div>
<div class="paragraph">
<p>バージョン4.2から、論理ボリューム「data」はLVM-thinプールで、ブロックベースのゲストイメージを格納するために使用され、<span class="monospaced">/var/lib/vzは</span>単にルートファイルシステム上のディレクトリです。</p></div>
<div class="sect3">
<h4 id="_hardware">3.8.1.ハードウェア<a class="headerlink" href="#_hardware" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このようなセットアップには、ハードウェアRAIDコントローラ（BBU付き）の使用を強くお勧めします。これにより、パフォーマンスが向上し、冗長性が確保され、ディスク交換が容易になります（ホットプラグ対応）。</p></div>
<div class="paragraph">
<p>LVM自体は特別なハードウェアを必要とせず、メモリ要件も非常に低くなっています。</p></div>
</div>
<div class="sect3">
<h4 id="_bootloader">3.8.2.ブートローダー<a class="headerlink" href="#_bootloader" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトで2つのブートローダをインストールします。最初のパーティションには標準的な GRUB ブートローダが含まれています。2番目のパーティションは<strong>EFI</strong><strong>システムパーティション</strong>(<strong>ESP</strong>)で、EFIシステムでのブートと、ユーザースペースからの<a href="#sysadmin_firmware_persistent">永続的なファームウェアアップデートの</a>適用を可能にします。</p></div>
</div>
<div class="sect3">
<h4 id="_creating_a_volume_group">3.8.3.ボリュームグループの作成<a class="headerlink" href="#_creating_a_volume_group" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>空のディスク<span class="monospaced">/dev/sdbが</span>あり、そこに "vmdata "という名前のボリュームグループを作成するとします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">以下のコマンドは、<span class="monospaced">/dev/sdb</span>上の既存のデータをすべて破壊することに注意してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まずパーティションを作成します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># sgdisk -N 1 /dev/sdb</pre>
</div></div>
<div class="paragraph">
<p>確認なしで<strong>物理</strong> <strong>ボリューム</strong>（PV）を作成し、メタデータサイズを250Kにします。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvcreate --metadatasize 250k -y -ff /dev/sdb1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">dev/sdb</span>1に "vmdata "というボリュームグループを作成します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vgcreate vmdata /dev/sdb1</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_creating_an_extra_lv_for_span_class_monospaced_var_lib_vz_span">3.8.4.<span class="monospaced">var/lib/vz</span>用の追加LVの作成<a class="headerlink" href="#_creating_an_extra_lv_for_span_class_monospaced_var_lib_vz_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これは新しい薄いLVを作成することで簡単にできます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvcreate -n &lt;名前&gt; -V &lt;サイズ[M,G,T]&gt; &lt;VG&gt;/&lt;LVThin_pool&gt;.</pre>
</div></div>
<div class="paragraph">
<p>実例です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvcreate -n vz -V 10G pve/data</pre>
</div></div>
<div class="paragraph">
<p>ここで、LV上にファイルシステムを作成する必要があります。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># mkfs.ext4 /dev/pve/vz</pre>
</div></div>
<div class="paragraph">
<p>ついにこれを搭載しなければなりません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">var/lib/vzが</span>空であることを確認してください。デフォルトのインストールではそうではありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>常にアクセスできるようにするには、<span class="monospaced">/etc/fstabに</span>以下の行を追加します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># echo '/dev/pve/vz /var/lib/vz ext4 defaults 0 2' &gt;&gt; /etc/fstab</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_resizing_the_thin_pool">3.8.5.シンプール<a class="headerlink" href="#_resizing_the_thin_pool" title="Permalink to this heading"></a>のサイズ変更</h4>
<div class="paragraph">
<p>以下のコマンドでLVとメタデータプールのサイズを変更します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvresize --size +&lt;size[˶M,G,T]&gt; --poolmetadatasize +&lt;size[˶M,G]&gt; &lt;VG&gt;/&lt;LVThin_pool</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">データ・プールを拡張する場合は、メタデータ・プールも拡張する必要があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_lvm_thin_pool">3.8.6.LVM-thinプールの作成<a class="headerlink" href="#_create_a_lvm_thin_pool" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>シンプールは、ボリュームグループの上に作成する必要があります。 ボリュームグループの作成方法は、セクションLVMを参照してください。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvcreate -L 80G -T -n vmstore vmdata</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="chapter_zfs">
<span>3.9.Linux上のZFS</span> <a class="headerlink" href="#chapter_zfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ZFSは、Sun Microsystemsによって設計されたファイルシステムと論理ボリュームマネージャを組み合わせたものです。Proxmox VE 3.4から、ZFSファイルシステムのネイティブLinuxカーネルポートがオプションのファイルシステムとして導入され、ルートファイルシステムの追加選択も可能です。ZFSモジュールを手動でコンパイルする必要はありません。</p></div>
<div class="paragraph">
<p>ZFSを使用することで、低予算のハードウェアで最大限のエンタープライズ機能を実現するだけでなく、SSDキャッシングやSSDのみのセットアップを活用することで、高性能なシステムを実現することも可能です。ZFSは、CPUとメモリ負荷の軽減と容易な管理を組み合わせることで、コスト高なハードウェアレイドカードを置き換えることができます。</p></div>
<div class="ulist"><div class="title">ZFSの一般的な利点</div><ul>
<li>
<p>
Proxmox VEのGUIとCLIで簡単な設定と管理。</p>
</li>
<li>
<p>
信頼できる</p>
</li>
<li>
<p>
データ破損からの保護</p>
</li>
<li>
<p>
ファイルシステムレベルでのデータ圧縮</p>
</li>
<li>
<p>
スナップ写真</p>
</li>
<li>
<p>
コピーオンライトクローン</p>
</li>
<li>
<p>
様々なレイドレベルRAID0、RAID1、RAID10、RAIDZ-1、RAIDZ-2、RAIDZ-3、dRAID、dRAID2、dRAID3</p>
</li>
<li>
<p>
キャッシュにSSDを使用可能</p>
</li>
<li>
<p>
セルフヒーリング</p>
</li>
<li>
<p>
継続的な完全性チェック</p>
</li>
<li>
<p>
大容量収納に対応した設計</p>
</li>
<li>
<p>
ネットワーク経由の非同期レプリケーション</p>
</li>
<li>
<p>
オープンソース</p>
</li>
<li>
<p>
暗号化</p>
</li>
<li>
<p>
...</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_hardware_2">3.9.1.ハードウェア<a class="headerlink" href="#_hardware_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSはメモリに大きく依存するので、少なくとも8GBは必要です。実際には、ハードウェア/予算に見合うだけの量を使用してください。データの破損を防ぐため、高品質のECC RAMの使用をお勧めします。</p></div>
<div class="paragraph">
<p>専用のキャッシュおよび/またはログディスクを使用する場合は、エンタープライズクラスのSSDを使用する必要があります。これにより、全体的なパフォーマンスが大幅に向上します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">独自のキャッシュ管理を持つハードウェアRAIDコントローラの上でZFSを使用しないでください。ZFSはディスクと直接通信する必要があります。HBAアダプタか、「IT」モードでフラッシュされたLSIコントローラのようなものがより適切です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>VM(入れ子仮想化)内にProxmox VEをインストールして実験している場合、VMのディスクに<span class="monospaced">virtioを</span>使用しないでください。代わりに IDE または SCSI を使用してください (<span class="monospaced">virtio</span>SCSI コントローラタイプでも動作します)。</p></div>
</div>
<div class="sect3">
<h4 id="_installation_as_root_file_system">3.9.2.ルートファイルシステムとしてのインストール<a class="headerlink" href="#_installation_as_root_file_system" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEインストーラを使用してインストールする場合、ルートファイルシステムにZFSを選択できます。インストール時にRAIDタイプを選択する必要があります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
RAID0<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ストライピング」とも呼ばれます。このようなボリュームの容量は、すべてのディスクの容量の合計です。しかし、RAID0 は冗長性を追加しないので、1 台のドライブが故障するとボリュームは使用できなくなります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID1<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ミラーリング」とも呼ばれます。データはすべてのディスクに同じように書き込まれます。このモードでは、同じサイズのディスクが少なくとも 2 台必要です。その結果、容量は 1 台のディスクの容量になります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID10<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID0 と RAID1 の組み合わせ。少なくとも 4 台のディスクが必要です。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAIDZ-1<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID-5 のバリエーション、シングルパリティ。少なくとも 3 台のディスクが必要です。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAIDZ-2<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID-5 のバリエーション、ダブルパリティ。少なくとも 4 台のディスクが必要です。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAIDZ-3<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID-5 のバリエーション、トリプルパリティ。少なくとも 5 台のディスクが必要です。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>インストーラーは自動的にディスクをパーティション分割し、<span class="monospaced">rpool</span> という ZFS プールを作成し、ZFS サブボリューム<span class="monospaced">rpool/ROOT/pve-1</span> にルートファイルシステムをインストールします。</p></div>
<div class="paragraph">
<p>VM イメージを格納するために、<span class="monospaced">rpool/data</span>という別のサブボリュームが作成されます。これをProxmox VEツールで使用するために、インストーラは<span class="monospaced">/etc/pve/storage.cfgに</span>以下の設定エントリを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>zfspool: local-zfs pool rpool/data sparse content images,rootdir</pre>
</div></div>
<div class="paragraph">
<p>インストール後、<span class="monospaced">zpool</span>コマンドを使用してZFSプールのステータスを表示できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool status pool: rpool state：ONLINE scan: none requested config: NAME STATE READ WRITE CKSUM rpool ONLINE 0 0 mirror-0 ONLINE 0 0 sda2 ONLINE 0 0 sdb2 ONLINE 0 0 mirror-1 ONLINE 0 0 0 sdc ONLINE 0 0 0 sdd ONLINE 0 0 0 エラー：既知のデータエラーなし</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">zfs</span>コマンドは、ZFS ファイルシステムの設定と管理に使用します。次のコマンドは、インストール後のすべてのファイルシステムを一覧表示します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># rpool/ROOT 702M 7.68T 96K /rpool/ROOT rpool/ROOT/pve-1 702M 7.68T 702M / rpool/data 96K 7.68T 96K /rpool/data rpool/swap 4.25G 7.69T 64K - 。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_raid_considerations">3.9.3.ZFS RAIDレベルの考察<a class="headerlink" href="#sysadmin_zfs_raid_considerations" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSプールのレイアウトを選択する際に考慮すべき要素がいくつかあります。ZFSプールの基本的な構成要素は仮想デバイス（<span class="monospaced">vdev）</span>です。プール内のすべてのvdevは等しく使用され、データはそれらの間でストライプされます(RAID0)。vdev の詳細については、<span class="monospaced">zpoolconcepts(7)</span>man ページを確認してください。</p></div>
<div class="sect4">
<h5 id="sysadmin_zfs_raid_performance">パフォーマンス<a class="headerlink" href="#sysadmin_zfs_raid_performance" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各<span class="monospaced">vdev</span>タイプは、それぞれ異なるパフォーマンス動作をします。注目すべき 2 つのパラメータは、IOPS (Input/Output Operations per Second) と、データを書き込んだり読み込んだりできる帯域幅です。</p></div>
<div class="paragraph">
<p><em>ミラー</em>vdev (RAID1) は、データを書き込む場合、両方のパラメータに関して、ほぼシングルディスクのように動作します。データを読み込む場合、性能はミラーディスクの数に比例します。</p></div>
<div class="paragraph">
<p>一般的な状況は、4 つのディスクを持つことです。それを 2 つのミラー vdev (RAID10) としてセットアップすると、プールは IOPS と帯域幅に関して 2 つの単一ディスクとして書き込み特性を持ちます。読み取り操作では、4 つの単一ディスクのようになります。</p></div>
<div class="paragraph">
<p>どの冗長レベルの<em>RAIDZでも</em>、IOPSに関してはシングルディスクのように動作し、帯域幅は多くなります。どの程度の帯域幅になるかは、RAIDZ vdevのサイズと冗長レベルに依存します。</p></div>
<div class="paragraph">
<p><em>dRAID</em>プールは同等の<em>RAIDZ</em>プールのパフォーマンスと同等であるべきです。</p></div>
<div class="paragraph">
<p>実行中のVMでは、ほとんどの状況でIOPSがより重要な指標となります。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_raid_size_space_usage_redundancy">サイズ、スペース使用量、冗長性<a class="headerlink" href="#sysadmin_zfs_raid_size_space_usage_redundancy" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><em>ミラー</em>vdev で構成されるプールは最高のパフォーマンス特性を持ちますが、使用可能なスペースは使用可能なディスクの 50% になります。3 ウェイミラーなど、ミラー vdev が 2 台以上のディスクで構成されている場合は、それ以下になります。プールが機能し続けるためには、ミラーごとに少なくとも 1 つの健全なディスクが必要です。</p></div>
<div class="paragraph">
<p>N 台のディスクからなる<em>RAIDZ</em>タイプの vdev の使用可能領域はおおよそ N-P で、P は RAIDZ レベルです。RAIDZ レベルは、データを失うことなく故障できる任意のディスクの数を示します。特別なケースは、RAIDZ2 の 4 ディスクプールです。このような状況では、使用可能領域が同じになるため、通常、2 つのミラー vdev を使用した方がパフォーマンスが向上します。</p></div>
<div class="paragraph">
<p>RAIDZレベルを使用する際のもう1つの重要な要素は、VMディスクに使用されるZVOLデータセットの動作です。各データ・ブロックに対して、プールは、プールの<span class="monospaced">ashift</span>値で定義された最小ブロック・サイズ以上のパリティ・データを必要とします。ashift が 12 の場合、プールのブロックサイズは 4k です。  ZVOLのデフォルトのブロックサイズは8kです。したがって、RAIDZ2では、8kのブロックが書き込まれるごとに4kのパリティ・ブロックが2つ追加され、8k + 4k + 4k = 16kとなります。  もちろん、これは単純化したアプローチであり、メタデータや圧縮などはこの例では考慮されていないため、実際の状況は若干異なります。</p></div>
<div class="paragraph">
<p>この動作は、ZVOLの以下のプロパティをチェックすると確認できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ヴォルサイズ</span></p>
</li>
<li>
<p>
<span class="monospaced">リザベーション</span>（プールがシンプロビジョニングされていない場合）</p>
</li>
<li>
<p>
<span class="monospaced">使用されます</span>（プールがシン・プロビジョニングされ、スナップショットが存在しない場合）。</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs get volsize,refreservation,used &lt;pool&gt;/vm-&lt;vmid&gt;-disk-X</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">volsize</span>は、VM に表示されるディスクのサイズであり、<span class="monospaced">refreshervation</span>は、パリティ・データに必要な予期されるスペースを含むプールの予約スペースを示します。プールがシン・プロビジョニングされている場合、<span class="monospaced">refreshervation</span>は 0 に設定されます。動作を観察する別の方法は、VM 内の使用済みディスク領域と<span class="monospaced">使用済み</span>プロパティを比較することです。スナップショットによって値が歪むことに注意してください。</p></div>
<div class="paragraph">
<p>スペースの増加に対抗するために、いくつかの選択肢があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
データ/パリティ比を改善するために<span class="monospaced">volblocksizeを</span>大きくします。</p>
</li>
<li>
<p>
<em>RAIDZの</em>代わりに<em>ミラー</em>vdevを使用</p>
</li>
<li>
<p>
<span class="monospaced">ashift=9を</span>使用（ブロックサイズは512バイト）</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">volblocksize</span>プロパティは、ZVOLの作成時にのみ設定できます。デフォルト値はストレージ設定で変更できます。これを行う場合、ゲストはそれに応じて調整する必要があり、ユースケースによっては、書き込み増幅の問題が ZFS レイヤーからゲストに移動するだけです。</p></div>
<div class="paragraph">
<p>プールの作成時に<span class="monospaced">ashift=9 を</span>使用すると、下のディスクによってはパフォーマンスが低下することがあり、後で変更することはできません。</p></div>
<div class="paragraph">
<p>ミラーVdev (RAID1、RAID10)はVMワークロードに有利な動作をします。RAIDZのパフォーマンス特性が許容できるような特殊なニーズや特性を持つ環境でない限り、これらを使用してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_zfs_draid">3.9.4.ZFS dRAID<a class="headerlink" href="#_zfs_draid" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS dRAID (declustered RAID)では、ホットスペアドライブがRAIDに参加します。 スペア容量は予約され、1台のドライブが故障したときの再構築に使用されます。 これにより、構成によっては、ドライブ故障時の再構築がRAIDZよりも高速になります。詳細については、OpenZFSの公式ドキュメントを参照してください。<span class="footnote"><br>[OpenZFS dRAID<a href="https://openzfs.github.io/openzfs-docs/Basic%20Concepts/dRAID%20Howto.html">https://openzfs.github.io/openzfs-docs/Basic%20Concepts/dRAID%20Howto.html] を</a>参照してください。<br></span></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">dRAID は 10-15 台以上のディスクを想定しています。RAIDZ セットアップの方が、ほとんどのユースケースにおいて、より少量のディスクに適しています。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">GUI は最小値より 1 台多いディスクを必要とします(つまり dRAID1 は 3 台必要)。スペアディスクも追加されることを期待します。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">dRAID1</span>または<span class="monospaced">dRAID</span>: 少なくとも2台のディスクが必要。</p>
</li>
<li>
<p>
<span class="monospaced">dRAID2</span>: 少なくとも3台のディスクが必要。</p>
</li>
<li>
<p>
<span class="monospaced">dRAID3</span>: 少なくとも4台のディスクが必要で、データが失われる前に3台が故障する可能性があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>その他の情報はマニュアルのページをご覧ください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># man zpoolconcepts</pre>
</div></div>
<div class="sect4">
<h5 id="_spares_and_data">スペアとデータ<a class="headerlink" href="#_spares_and_data" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">スペアの</span>数は、ディスク障害が発生した場合に備えて、システムが準備しておくディスクの数を示します。デフォルト値は 0<span class="monospaced">スペア</span>です。スペアがないと、再構築の速度が向上しません。</p></div>
<div class="paragraph">
<p><span class="monospaced">データは</span>、冗長グループ内のデバイス数を定義します。デフォルト値は 8 です。<span class="monospaced">ディスク - パリティ - スペアが</span>8 より小さい場合を除き、小さい方の数が使用されます。一般に、<span class="monospaced">データ・</span>デバイスの数が少ないほど、IOPS が高くなり、圧縮率が向上し、復元が速くなりますが、データ・デバイスの数を少なく定義すると、プールの利用可能なストレージ容量が減少します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_bootloader_2">3.9.5.ブートローダー<a class="headerlink" href="#_bootloader_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE は<a href="#sysboot_proxmox_boot_tool"><span class="monospaced">proxmox-boot-tool を</span></a>使用してブートローダの設定を管理します。 詳細は<a href="#sysboot">Proxmox VE ホスト・ブートローダの</a>章を参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="_zfs_administration">3.9.6.ZFS管理<a class="headerlink" href="#_zfs_administration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このセクションでは、一般的なタスクの使用例を紹介します。ZFS自体は本当に強力で、多くのオプションを提供しています。ZFSを管理する主なコマンドは<span class="monospaced">zfsと</span> <span class="monospaced">zpool</span>です。どちらのコマンドにも素晴らしいマニュアルページが付属しています：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># man zpool # man zfs</pre>
</div></div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool">新しいzpoolの作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>新しいプールを作成するには、少なくとも1つのディスクが必要です。<span class="monospaced">ashift</span>は、基礎となるディスクと同じセクタサイズ (<span class="monospaced">ashift</span> の 2 乗) 以上でなければなりません。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;pool&gt; &lt;device&gt;.</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="paragraph">
<p>プール名は以下の規則に従わなければなりません：</p></div>
<div class="ulist"><ul>
<li>
<p>
頭文字 (a-z または A-Z)</p>
</li>
<li>
<p>
英数字、<span class="monospaced">-、_、</span> <span class="monospaced">.</span>、<span class="monospaced">:</span>または ` ` (スペース) 文字のみを含みます。</p>
</li>
<li>
<p>
<span class="monospaced">mirror</span>、<span class="monospaced">raidz</span>、<span class="monospaced">draid</span>、<span class="monospaced">spareの</span> <strong>いずれかで始まっては</strong>いけません。</p>
</li>
<li>
<p>
<span class="monospaced">ログ</span>であってはなりません</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
<div class="paragraph">
<p>圧縮を有効にするには（「<a href="#zfs_compression">ZFSの圧縮</a>」セクションを参照）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs set compression=lz4 &lt;pool&gt;.</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raid0">RAID-0 で新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raid0" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ディスク1枚以上</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;プール&gt; &lt;デバイス1&gt; &lt;デバイス2</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raid1">RAID-1 で新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raid1" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最低2ディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;pool&gt; mirror &lt;device1&gt; &lt;device2&gt;.</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raid10">RAID-10<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raid10" title="Permalink to this heading"></a>で新しいプールを作成します。</h5>
<div class="paragraph">
<p>最低4ディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;プール&gt; ミラー &lt;デバイス1&gt; &lt;デバイス2&gt; ミラー &lt;デバイス3&gt; &lt;デバイス4</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raidz1">RAIDZ-1 で新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raidz1" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ディスク3枚以上</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;プール&gt; raidz1 &lt;デバイス1&gt; &lt;デバイス2&gt; &lt;デバイス3</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_create_a_new_pool_with_raidz_2">RAIDZ-2<a class="headerlink" href="#_create_a_new_pool_with_raidz_2" title="Permalink to this heading"></a>で新しいプールを作成します。</h5>
<div class="paragraph">
<p>最低4ディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;プール&gt; raidz2 &lt;デバイス1&gt; &lt;デバイス2&gt; &lt;デバイス3&gt; &lt;デバイス4</pre>
</div></div>
<div class="paragraph">
<p>特にRAID-Zモードを使用したい場合は、プールをセットアップする前に、IOPSと帯域幅の期待値の概算を知るために、<a href="#sysadmin_zfs_raid_considerations">ZFS RAIDレベルの考慮事項の</a>セクションをお読みください。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_with_cache">キャッシュ(L2ARC)で新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_with_cache" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>第2レベルキャッシュとして専用デバイスまたはパーティションを使用することで、パフォーマンスを向上させることができます。このようなキャッシュ・デバイスは、ほとんどが静的なデータのランダム・リード・ワークロードに特に役立ちます。キャッシュ・デバイスは、実際のストレージとインメモリARCの間の追加キャッシュ層として機能するため、メモリ制約のためにARCを削減しなければならない場合にも役立ちます。</p></div>
<div class="listingblock">
<div class="title">オンディスク・キャッシュ付きZFSプールの作成</div>
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;pool&gt; &lt;device&gt; cache &lt;cache-device&gt;.</pre>
</div></div>
<div class="paragraph">
<p>ここでは、単一の<span class="monospaced">&lt;device&gt;と</span>単一の<span class="monospaced">&lt;cache-device&gt;のみが</span>使用されていますが、<a href="#sysadmin_zfs_create_new_zpool_raid0">RAIDを使用した新しいプールの作成で</a>示されているように、より多くのデバイスを使用することも可能です。</p></div>
<div class="paragraph">
<p>キャッシュ・デバイスにはミラーやレイド・モディが存在せず、それらはすべて単純に累積されることに注意してください。</p></div>
<div class="paragraph">
<p>キャッシュ・デバイスが読み取り時にエラーを発生させた場合、ZFSは透過的にそのリクエストを基礎となるストレージ層に迂回させます。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_with_log">ログ(ZIL)で新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_with_log" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ZFS Intent Log (ZIL) 専用ドライブまたはパーティションを使用することも可能です。ZIL は主に安全な同期トランザクションを提供するために使用され、データベースなどのパフォーマンスが重要なパスや、<span class="monospaced">fsync</span>操作を頻繁に発行するその他のプログラムでよく使用されます。</p></div>
<div class="paragraph">
<p>プールはデフォルトのZILロケーションとして使用され、ZIL IO負荷を別のデバイスに振り向けることで、トランザクションの待ち時間を短縮すると同時にメイン・プールを解放し、全体的なパフォーマンスを向上させることができます。</p></div>
<div class="paragraph">
<p>ディスクを直接、またはパーティションを通してログ・デバイスとして使用する場合は、次のことをお勧めします：</p></div>
<div class="ulist"><ul>
<li>
<p>
停電保護機能付きの高速SSDを使用すると、コミット・レイテンシが非常に小さくなります。</p>
</li>
<li>
<p>
パーティション（またはデバイス全体）には少なくとも数GBを使用しますが、インストールされているメモリの半分以上を使用しても、実際の利点は得られません。</p>
</li>
</ul></div>
<div class="listingblock">
<div class="title">個別のログデバイスを持つZFSプールを作成</div>
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;pool&gt; &lt;device&gt; log &lt;log-device&gt;.</pre>
</div></div>
<div class="paragraph">
<p>上記の例では、単一の<span class="monospaced">&lt;device&gt;と</span>単一の<span class="monospaced">&lt;log-device&gt;が</span>使用されていますが、<a href="#sysadmin_zfs_create_new_zpool_raid0">RAIDを使用して新しいプールを作成する</a>セクションで説明されているように、これを他のRAIDバリエーションと組み合わせることもできます。</p></div>
<div class="paragraph">
<p>また、ログデバイスを複数のデバイスにミラーリングすることもできます。これは主に、1つのログデバイスに障害が発生した場合に、パフォーマンスが直ちに低下しないようにするために便利です。</p></div>
<div class="paragraph">
<p>すべてのログデバイスが故障した場合、ログデバイスが交換されるまで、ZFSメインプール自体が再び使用されます。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_add_cache_and_log_dev">既存のプールにキャッシュとログを追加<a class="headerlink" href="#sysadmin_zfs_add_cache_and_log_dev" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>キャッシュとログがないプールがあっても、いつでもその両方、または片方だけを追加することができます。</p></div>
<div class="paragraph">
<p>たとえば、プールの全体的なパフォーマンスを向上させるために、電源損失保護機能を備えた優れたエンタープライズSSDを入手したとします。</p></div>
<div class="paragraph">
<p>ログデバイスの最大サイズは、インストールされている物理メモリの約半分である必要があるため、ZILはSSDの比較的小さな部分しか占有しない可能性が高く、残りの領域はキャッシュとして使用できます。</p></div>
<div class="paragraph">
<p>まず、<span class="monospaced">parted</span>または<span class="monospaced">gdiskを使って</span>SSDにGPTパーティションを2つ作成します。</p></div>
<div class="paragraph">
<p>プールに入れる準備ができました：</p></div>
<div class="listingblock">
<div class="title">独立したログ・デバイスと第2レベル・キャッシュの両方を既存のプールに追加します。</div>
<div class="content monospaced">
<pre># zpool add -f &lt;pool&gt; log &lt;device-part1&gt; cache &lt;device-part2&gt;.</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&lt;pool</span> <span class="monospaced">&gt;、&lt;device-part1</span> <span class="monospaced">&gt;、&lt;device-part2&gt;を</span>プール名とパーティションへの2つの<span class="monospaced">/dev/disk/by-id/</span>パスに置き換えるだけです。</p></div>
<div class="paragraph">
<p>ZILとキャッシュを別々に追加することもできます。</p></div>
<div class="listingblock">
<div class="title">既存のZFSプールへのログデバイスの追加</div>
<div class="content monospaced">
<pre># zpool add &lt;pool&gt; log &lt;log-device&gt;.</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_change_failed_dev">故障したデバイスの変更<a class="headerlink" href="#sysadmin_zfs_change_failed_dev" title="Permalink to this heading"></a></h5>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool replace -f &lt;pool&gt; &lt;old-device&gt; &lt;new-device&gt;.</pre>
</div></div>
<div class="paragraph">
<div class="title">失敗したブータブルデバイスの変更</div><p>Proxmox VEがどのようにインストールされたかによって、<span class="monospaced">systemd-boot</span>または<span class="monospaced">proxmox-boot-tool</span> <span class="footnote"><br>[Proxmox VE 6.4以降でインストールされたシステム、Proxmox VE 5.4以降でインストールされたEFIシステム]<br></span>またはプレーンなGRUBがブートローダとして使用されています(<a href="#sysboot">ホストブートローダを</a>参照)。を実行して確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool status</pre>
</div></div>
<div class="paragraph">
<p>パーティションテーブルのコピー、GUID の再発行、ZFS パーティションの交換という最初のステップは同じです。新しいディスクからシステムを起動可能にするには、使用するブートローダによって異なる手順が必要です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># sgdisk &lt;健康なブータブルデバイス&gt; -R &lt;新しいデバイス&gt; # sgdisk -G &lt;新しいデバイス&gt; # zpool replace -f &lt;pool&gt; &lt;古いzfsパーティション&gt; &lt;新しいzfsパーティション</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">zpool status -v</span>コマンドを使用して、新しいディスクの resilvering プロセスがどの程度進んでいるかを監視します。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title"><span class="monospaced">proxmox-boot-toolを</span>使用します：</div>
<div class="content monospaced">
<pre># proxmox-boot-tool format &lt;新しいディスクのESP&gt; # proxmox-boot-tool init &lt;新しいディスクのESP&gt; [grub］</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">ESPは</span>EFIシステムパーティションの略で、バージョン5.4以降のProxmox VEインストーラを使用する場合、ブータブルディスクのパーティション#2として設定されます。詳細については、<a href="#sysboot_proxmox_boot_setup">同期されたESPとして使用するための新しいパーティションの設定を</a>参照してください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">proxmox-boot-tool のステータスが</span>現在のディスクが GRUB を使っていることを示している場合、特にセキュアブートが有効になっている場合は、<span class="monospaced">proxmox-boot-tool init</span>にモードとして<em>grub を</em>渡すようにしてください！</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">プレーンなGRUBで：</div>
<div class="content monospaced">
<pre># grub-install &lt;新しいディスク</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">プレーン GRUB は Proxmox VE 6.3 以前でインストールされ、<span class="monospaced">proxmox-boot-tool を</span>使用するように手動で移行されていないシステムでのみ使用されます。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_e_mail_notification">3.9.7.電子メール通知の設定<a class="headerlink" href="#_configure_e_mail_notification" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSには、ZFSカーネルモジュールによって生成されたイベントを監視するイベントデーモン<span class="monospaced">ZEDが</span>付属しています。新しいZFSパッケージでは、このデーモンは別の<span class="monospaced">zfs-zed</span>パッケージとして出荷されており、Proxmox VEではデフォルトでインストールされているはずです。</p></div>
<div class="paragraph">
<p>デーモンの設定は、<span class="monospaced">/etc/zfs/zed.d/zed.rc</span>ファイルからお好みのエディタで行えます。電子メール通知に必要な設定は<span class="monospaced">ZED_EMAIL_ADDRで</span>、デフォルトでは<span class="monospaced">rootに</span>設定されています。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ZED_EMAIL_ADDR="root"</pre>
</div></div>
<div class="paragraph">
<p>Proxmox VEは<span class="monospaced">root</span>宛のメールをrootユーザに設定されたメールアドレスに転送しますのでご注意ください。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_limit_memory_usage">3.9.8.ZFS メモリ使用量の制限<a class="headerlink" href="#sysadmin_zfs_limit_memory_usage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSは、デフォルトでホストメモリの<em>50 %を</em> <strong>Adaptive</strong> <strong>Replacement</strong><strong>Cache</strong>(ARC)に使用します。Proxmox VE 8.1からの新規インストールでは、ARCの使用制限はインストールされた物理メモリの<em>10%に</em>設定され、最大<span class="monospaced">16GiBに</span>クランプされます。この値は<span class="monospaced">/etc/modprobe.d/zfs.confに</span>書き込まれます。</p></div>
<div class="paragraph">
<p>ARCに十分なメモリを割り当てることは、IOパフォーマンスにとって非常に重要なので、注意して減らしてください。一般的な経験則として、少なくとも<span class="monospaced">2GiB Base + 1GiB/TiB-Storageを</span>割り当てます。たとえば、利用可能なストレージ容量が<span class="monospaced">8TiBの</span>プールがある場合、ARCには<span class="monospaced">10GiBの</span>メモリを使用する必要があります。</p></div>
<div class="paragraph">
<p>また、ZFSは最小値<span class="monospaced">64MBを</span>強制します。</p></div>
<div class="paragraph">
<p><span class="monospaced">zfs_arc_max</span>モジュール・パラメータに直接書き込むことで、現在のブートのARC使用制限を変更できます（再起動すると、この変更は再びリセットされます）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "$[10 * 1024*1024*1024]" &gt;/sys/module/zfs/parameters/zfs_arc_max</pre>
</div></div>
<div class="paragraph">
<p>ARC制限を<strong>恒久的に変更</strong>するには、<span class="monospaced">/etc/modprobe.d/zfs.confに</span>以下の行を追加します（すでにある場合は変更します）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>オプション zfs zfs_arc_max=8589934592</pre>
</div></div>
<div class="paragraph">
<p>この設定例では、使用量を8GiB<em>（8 *<sup>230</sup></em>）に制限しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">希望する<span class="monospaced">zfs_arc_max</span>値が<span class="monospaced">zfs_arc_min</span>（デフォルトはシステム・メモリの1/32）以下である場合、<span class="monospaced">zfs_arc_minも</span>最大で<span class="monospaced">zfs_arc_max - 1に</span>設定しない限り、<span class="monospaced">zfs_arc_maxは</span>無視されます。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "$[8 * 1024*1024*1024 - 1]" &gt;/sys/module/zfs/parameters/zfs_arc_min echo "$[8 * 1024*1024*1024]" &gt;/sys/module/zfs/parameters/zfs_arc_max</pre>
</div></div>
<div class="paragraph">
<p>この設定例では（一時的に）、総メモリ量が256GiBを超えるシステムでの使用量を8GiB<em>（8 *<sup>230</sup></em>）に制限しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="paragraph">
<p>ルートファイルシステムがZFSの場合、この値が変更されるたびにinitramfsを更新する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-initramfs -u -k all</pre>
</div></div>
<div class="paragraph">
<p>これらの変更を有効にするには、<strong>再起動する必要が</strong>あります。</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="zfs_swap">3.9.9.ZFSのSWAP<a class="headerlink" href="#zfs_swap" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>zvol上に作成されたスワップスペースは、サーバーをブロックしたり、外部ストレージへのバックアップを開始するときによく見られる高いIO負荷を発生させるなど、いくつかの問題を発生させる可能性があります。</p></div>
<div class="paragraph">
<p>メモリ不足に陥らないよう、十分なメモリを使用することを強くお勧めします。スワップを追加したい場合は、物理ディスク上にパーティションを作成し、スワップデバイ スとして使用するのが望ましいでしょう。 インストーラの詳細オプションで、この目的のために空き領域を残すことができます。さらに、"swappiness" 値を下げることもできます。サーバに適した値は 10 です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># sysctl -w vm.swappiness=10</pre>
</div></div>
<div class="paragraph">
<p>スワップを永続的にするには、<span class="monospaced">/etc/sysctl.confを</span>お好みのエディターで開き、以下の行を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>vm.swappiness = 10</pre>
</div></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表1.Linuxカーネルの<span class="monospaced">スワッピネス・パラメータ</span>値</caption>
<col style="width:33%;" />
<col style="width:66%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">価値      </th>
<th class="tableblock halign-left valign-top">戦略</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">カーネルがスワップを行うのは、<em>メモリ不足の</em>状態を回避するためだけです。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">スワッピングを完全に無効にすることなく、最小限のスワッピング。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">この値は、システムに十分なメモリがある場合に、パフォーマンスを向上させるために推奨されることがあります。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">デフォルト値。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">カーネルは積極的にスワップを行います。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="zfs_encryption">3.9.10.暗号化されたZFSデータセット<a class="headerlink" href="#zfs_encryption" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">Proxmox VEのネイティブZFS暗号化は実験的なものです。既知の制限と問題には、暗号化されたデータセットでのレプリケーション<span class="footnote"><br><a href="https://bugzilla.proxmox.com/show_bug.cgi?id=2350">[https://bugzilla.proxmox.com/show_bug.cgi?id=2350]</a><br></span> 、スナップショットやZVOL使用時のチェックサムエラーがあります。<span class="footnote"><br><a href="https://github.com/openzfs/zfs/issues/11688">[https://github.com/openzfs/zfs/issues/11688]</a><br></span></td>
</tr></table>
</div>
<div class="paragraph">
<p>ZFS on Linux バージョン 0.8.0 では、データセットのネイティブ暗号化がサポートされました。以前の ZFS on Linux バージョンからアップグレードすると、プールごとに暗号化機能を有効にできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool get feature@encryption tank NAME PROPERTY VALUE SOURCE tank feature@encryption disabled local # zpool set feature@encryption=enabled # zpool get feature@encryption tank NAME PROPERTY VALUE SOURCE tank feature@encryption enabled local</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">暗号化されたデータセットを持つプールから GRUB を使ってブートすることは現在サポートされていません。暗号化をサポートしていない古いバージョンの ZFS では、保存されたデータを復号化することはできません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">起動後に手動でストレージデータセットのロックを解除するか、起動時のロック解除に必要なキー素材を<span class="monospaced">zfs load-keyに</span>渡すカスタムユニットを作成することをお勧めします。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">本番データの暗号化を有効にする前に、バックアップ手順を確立し、テストしてください。関連するキーマテリアル/パスフレーズ/キーファイルを紛失した場合、暗号化されたデータへのアクセスは不可能になります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化はデータセット/zvols の作成時に設定する必要があり、デフォルトで子データセットに継承されます。例えば、暗号化データセット<span class="monospaced">tank/encrypted_dataを</span>作成し、Proxmox VEのストレージとして設定するには、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs create -o encryption=on -o keyformat=passphrase tank/encrypted_data パスフレーズの入力： パスフレーズの再入力： # pvesm add zfspool encrypted_zfs -pool tank/encrypted_data</pre>
</div></div>
<div class="paragraph">
<p>このストレージ上に作成されたすべてのゲストボリューム/ディスクは、親データセットの共有鍵マテリアルで暗号化されます。</p></div>
<div class="paragraph">
<p>ストレージを実際に使用するには、関連するキーマテリアルをロードし、データセットをマウントする必要があります。これは</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs mount -l tank/encrypted_data 'tank/encrypted_data'のパスフレーズを入力してください：</pre>
</div></div>
<div class="paragraph">
<p>また、作成時または既存のデータセットで<span class="monospaced">zfs change-keyを</span>使用して、<span class="monospaced">keylocationと</span> <span class="monospaced">keyformat</span>プロパティを設定することで、パスフレーズのプロンプトの代わりに(ランダムな)キーファイルを使用することも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dd if=/dev/urandom of=/path/to/keyfile bs=32 count=1 # zfs change-key -o keyformat=raw -o keylocation=file:///path/to/keyfile tank/encrypted_data</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">キーファイルを使用する場合は、不正アクセスや偶発的な紛失からキーファイルを保護するために特別な注意が必要です。キーファイルがなければ、平文データにアクセスすることはできません！</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化データセットの下に作成されたゲストボリュームは、それに応じて<span class="monospaced">encryptionroot</span>プロパティが設定されます。鍵マテリアルは、encryptionrootごとに1回だけロードする必要があり、その下にあるすべての暗号化データセットで使用できるようになります。</p></div>
<div class="paragraph">
<p>詳細と高度な使用法については、<span class="monospaced">encryptionroot</span>、<span class="monospaced">encryption</span>、<span class="monospaced">keylocation</span>、<span class="monospaced">keyformat</span>、<span class="monospaced">keystatus</span>プロパティ、<span class="monospaced">zfs load-key</span>、<span class="monospaced">zfs unload-key</span>、<span class="monospaced">zfs change-key</span>コマンド、および<span class="monospaced">man zfsの</span> <span class="monospaced">暗号化</span>セクションを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="zfs_compression">3.9.11.ZFS<a class="headerlink" href="#zfs_compression" title="Permalink to this heading"></a>における圧縮</h4>
<div class="paragraph">
<p>データセットで圧縮を有効にすると、ZFSは<strong>新しい</strong>ブロックをすべて圧縮してから書き込み、読み込み時に解凍しようとします。既に存在するデータは遡って圧縮されません。</p></div>
<div class="paragraph">
<p>で圧縮を有効にできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs set compression=&lt;algorithm&gt; &lt;dataset&gt;.</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">lz4</span>アルゴリズムを使用することをお勧めします。<span class="monospaced">lzjb</span>や<span class="monospaced">gzip-N</span>(<span class="monospaced">N</span>は<span class="monospaced">1</span>(最速) から<span class="monospaced">9</span>(最高の圧縮率) までの整数) のような他のアルゴリズムも利用可能です。アルゴリズムと圧縮可能なデータによっては、圧縮を有効にすることでI/O性能が向上することもあります。</p></div>
<div class="paragraph">
<p>でいつでも圧縮を無効にできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs set compression=off &lt;データセット</pre>
</div></div>
<div class="paragraph">
<p>繰り返しますが、この変更の影響を受けるのは新しいブロックだけです。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_special_device">3.9.12.ZFS 特殊デバイス<a class="headerlink" href="#sysadmin_zfs_special_device" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バージョン0.8.0以降、ZFSは<span class="monospaced">特殊</span>デバイスをサポートしています。プール内の<span class="monospaced">特別な</span>デバイスは、メタデータ、重複排除テーブル、およびオプションで小さなファイルブロックを格納するために使用されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">特別な</span>デバイスは、メタデータの変更が多い低速回転のハードディスクで構成されるプールの速度を向上させることができます。例えば、大量のファイルを作成、更新、または削除するようなワークロードでは、<span class="monospaced">特別な</span>デバイスがあると便利です。ZFSデータセットは、<span class="monospaced">特別な</span>デバイスに小さなファイル全体を保存するように設定することもでき、パフォーマンスをさらに向上させることができます。<span class="monospaced">特殊</span>デバイスには高速SSDを使用してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">特殊</span>デバイスはプール全体の障害点となるため、<span class="monospaced">特殊</span>デバイスの冗長性はプールの冗長性と一致させる必要があります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">プールに<span class="monospaced">特別な</span>デバイスを追加すると、元に戻すことはできません！</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title"><span class="monospaced">特別な</span>デバイスとRAID-1でプールを作成します：</div>
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &lt;pool&gt; mirror &lt;device1&gt; &lt;device2&gt; special mirror &lt;device3&gt; &lt;device4</pre>
</div></div>
<div class="listingblock">
<div class="title">既存のRAID-1プールに<span class="monospaced">特別な</span>デバイスを追加します：</div>
<div class="content monospaced">
<pre># zpool add &lt;pool&gt; special mirror &lt;device1&gt; &lt;device2&gt;.</pre>
</div></div>
<div class="paragraph">
<p>ZFSデータセットでは、<span class="monospaced">special_small_blocks=&lt;size&gt;</span>プロパティを公開しています。<span class="monospaced">sizeには</span>、小さなファイル・ブロックを<span class="monospaced">特殊</span>デバイスに保存しないようにする<span class="monospaced">0</span>、または<span class="monospaced">512Bから</span> <span class="monospaced">1Mの</span>範囲の2のべき乗を指定します。このプロパティを設定すると、<span class="monospaced">size</span>よりも小さなファイル・ブロックが<span class="monospaced">特別な</span>デバイスに割り当てられます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">special_small_blocksの</span>値がデータセットの<span class="monospaced">レコードサイズ</span>（デフォルト<span class="monospaced">128K</span>）以上である場合、<strong>すべての</strong>データが<span class="monospaced">特別な</span>デバイスに書き込まれるので注意が必要です！</td>
</tr></table>
</div>
<div class="paragraph">
<p>プールで<span class="monospaced">special_small_blocks</span>プロパティを設定すると、すべての子ZFSデータセットでそのプロパティのデフォルト値が変更されます（たとえば、プール内のすべてのコンテナは小さなファイルブロックを選択します）。</p></div>
<div class="listingblock">
<div class="title">プール全体で4Kブロックより小さいファイルすべてにオプトインします：</div>
<div class="content monospaced">
<pre># zfs set special_small_blocks=4K &lt;pool&gt;.</pre>
</div></div>
<div class="listingblock">
<div class="title">単一のデータセットに対して小さなファイルブロックを選択します：</div>
<div class="content monospaced">
<pre># zfs set special_small_blocks=4K &lt;pool&gt;/&lt;filesystem&gt;.</pre>
</div></div>
<div class="listingblock">
<div class="title">単一のデータセットに対する小さなファイルブロックからオプトアウトします：</div>
<div class="content monospaced">
<pre># zfs set special_small_blocks=0 &lt;pool&gt;/&lt;filesystem&gt;.</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_features">3.9.13.ZFSプールの機能<a class="headerlink" href="#sysadmin_zfs_features" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSのオンディスクフォーマットへの変更は、メジャーバージョン変更の間でのみ行われ、<strong>featuresを通して</strong>指定されます。すべての機能と一般的なメカニズムは、<span class="monospaced">zpool-features(5)</span>man ページで十分に文書化されています。</p></div>
<div class="paragraph">
<p>新しい機能を有効にすると、古いバージョンの ZFS ではプールがインポートできなくなる可能性があるため、これは、管理者がプール上で<span class="monospaced">zpool upgrade を</span>実行して、積極的に行う必要があります (<span class="monospaced">zpool-upgrade(8)</span>man ページを参照)。</p></div>
<div class="paragraph">
<p>新機能を使う必要がない限り、これらを有効にしても何のメリットもありません。</p></div>
<div class="paragraph">
<p>実際、新しい機能を有効にすることにはデメリットもあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
GRUBでZFSの互換性のない実装のため、GRUBを使用してブートしているZFS上のrootを持つシステムは、rpoolで新しい機能がアクティブになるとブートできなくなります。</p>
</li>
<li>
<p>
古い ZFS モジュールが同梱されている古いカーネルで起動すると、システムはアップグレードされたプールをインポートできません。</p>
</li>
<li>
<p>
起動しないシステムを修復するために古いProxmox VE ISOを起動しても同様に動作しません。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">システムがまだ GRUB で起動している場合は、rpool をアップグレード<strong>しないで</strong>ください。これには Proxmox VE 5.4 より前にインストールされたシステムや、レガシー BIOS ブートで起動するシステムも含まれます (<a href="#sysboot_determine_bootloader_used">ブートローダの判別方法を</a>参照)。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ZFSプールの新機能を有効にします：</div>
<div class="content monospaced">
<pre># zpool upgrade &lt;pool&gt;</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="chapter_btrfs">
<span>3.10.BTRFS</span> <a class="headerlink" href="#chapter_btrfs" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">BTRFS の統合は現在 Proxmox VE の<strong>テクノロジープレビュー</strong>です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>BTRFSは、Linuxカーネルがネイティブにサポートする最新のコピーオンライトファイルシステムで、スナップショット、ビルトインRAID、データとメタデータのチェックサムによるセルフヒーリングなどの機能を実装しています。Proxmox VE 7.0から、BTRFSはルートファイルシステムのオプション選択として導入されました。</p></div>
<div class="ulist"><div class="title">BTRFSの一般的な利点</div><ul>
<li>
<p>
メインシステムのセットアップは、従来のext4ベースのセットアップとほぼ同じです。</p>
</li>
<li>
<p>
スナップ写真</p>
</li>
<li>
<p>
ファイルシステムレベルでのデータ圧縮</p>
</li>
<li>
<p>
コピーオンライトクローン</p>
</li>
<li>
<p>
RAID0、RAID1、RAID10</p>
</li>
<li>
<p>
データ破損からの保護</p>
</li>
<li>
<p>
セルフヒーリング</p>
</li>
<li>
<p>
Linuxカーネルがネイティブにサポート</p>
</li>
</ul></div>
<div class="ulist"><div class="title">注意事項</div><ul>
<li>
<p>
RAIDレベル5/6は実験的で危険です。</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_installation_as_root_file_system_2">3.10.1.ルートファイルシステムとしてのインストール<a class="headerlink" href="#_installation_as_root_file_system_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEインストーラを使用してインストールする場合、ルートファイルシステムにBTRFSを選択できます。インストール時にRAIDタイプを選択する必要があります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
RAID0<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ストライピング」とも呼ばれます。このようなボリュームの容量は、すべてのディスクの容量の合計です。しかし、RAID0 は冗長性を追加しないので、1 台のドライブが故障するとボリュームは使用できなくなります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID1<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ミラーリング」とも呼ばれます。データはすべてのディスクに同じように書き込まれます。このモードでは、同じサイズのディスクが少なくとも 2 台必要です。その結果、容量は 1 台のディスクの容量になります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID10<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID0 と RAID1 の組み合わせ。少なくとも 4 台のディスクが必要です。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>インストーラは自動的にディスクをパーティション分割し、<span class="monospaced">/var/lib/pve/local-btrfs</span> に追加のサブボリュームを作成します。  これを Proxmox VE ツールで使用するために、インストーラは<span class="monospaced">/etc/pve/storage.cfg</span> に以下の構成エントリを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>dir: local path /var/lib/vz content iso,vztmpl,backup disable btrfs: local-btrfs path /var/lib/pve/local-btrfs content iso,vztmpl,backup,images,rootdir</pre>
</div></div>
<div class="paragraph">
<p>これは、デフォルトの<span class="monospaced">ローカル・</span>ストレージを明示的に無効にして、追加サブボリューム上のBTRFS固有のストレージ・エントリーを優先します。</p></div>
<div class="paragraph">
<p><span class="monospaced">btrfs</span>コマンドは、BTRFSファイルシステムの設定と管理に使用します。インストール後、次のコマンドで追加のサブボリュームをすべて一覧表示します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs サブボリュームリスト / ID 256 gen 6 トップレベル 5 パス var/lib/pve/local-btrfs</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_btrfs_administration">3.10.2.BTRFS 管理<a class="headerlink" href="#_btrfs_administration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このセクションでは、一般的なタスクの使用例を紹介します。</p></div>
<div class="sect4">
<h5 id="_creating_a_btrfs_file_system">BTRFS ファイルシステムの作成<a class="headerlink" href="#_creating_a_btrfs_file_system" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>BTRFSファイルシステムを作成するには、<span class="monospaced">mkfs.btrfsを</span>使用します。<span class="monospaced">d</span>パラメーターと<span class="monospaced">-m</span>パラメーターは、それぞれメタデータとデータのプロファイルを設定するために使用します。オプションの<span class="monospaced">-L</span>パラメータを使用すると、ラベルを設定できます。</p></div>
<div class="paragraph">
<p>一般的に、以下のモードがサポートされています：<span class="monospaced">シングル</span>、<span class="monospaced">raid0</span>、<span class="monospaced">raid1</span>、<span class="monospaced">raid10</span>。</p></div>
<div class="paragraph">
<p>単一ディスク<span class="monospaced">/dev/sdb</span>上に、<span class="monospaced">My-Storage</span>ラベルを付けてBTRFSファイルシステムを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mkfs.btrfs -m single -d single -L My-Storage /dev/sdb</pre>
</div></div>
<div class="paragraph">
<p>または、2つのパーティション<span class="monospaced">/dev/sdb</span>1と<span class="monospaced">/dev/sdc</span>1にRAID1を作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mkfs.btrfs -m raid1 -d raid1 -L My-Storage /dev/sdb1 /dev/sdc1</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_mounting_a_btrfs_file_system">BTRFS ファイルシステムのマウント<a class="headerlink" href="#_mounting_a_btrfs_file_system" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>新しいファイルシステムは、例えば手動でマウントすることができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mkdir /my-storage # mount /dev/sdb /my-storage</pre>
</div></div>
<div class="paragraph">
<p>BTRFS は、他のマウントポイントと同様に<span class="monospaced">/etc/fstab</span>に追加して、起動時に自動的にマウントすることもできます。ブロック・デバイス・パスの使用は避け、<span class="monospaced">mkfs.btrfs</span>コマンドが出力する<span class="monospaced">UUID</span>値を使用することをお勧めします。</p></div>
<div class="paragraph">
<p>例えば</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/fstab</span></div>
<div class="content monospaced">
<pre># UUID=e2c0c3ff-2114-4f54-b767-3a203e49f6f3 /my-storage btrfs defaults 0 0</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">UUIDが利用できなくなった場合は、<span class="monospaced">blkid</span>ツールを使ってブロックデバイスのすべてのプロパティをリストアップできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>その後、最初のマウントを実行することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>マウント /my-storage</pre>
</div></div>
<div class="paragraph">
<p>次回のリブート後は、ブート時にシステムによって自動的に実行されます。</p></div>
</div>
<div class="sect4">
<h5 id="_adding_a_btrfs_file_system_to_proxmox_ve">Proxmox VE<a class="headerlink" href="#_adding_a_btrfs_file_system_to_proxmox_ve" title="Permalink to this heading"></a>への BTRFS ファイルシステムの追加</h5>
<div class="paragraph">
<p>既存のBTRFSファイルシステムをProxmox VEに追加するには、WebインターフェイスやCLIなどを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvesm add btrfs my-storage --path /my-storage</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_creating_a_subvolume">サブボリュームの作成<a class="headerlink" href="#_creating_a_subvolume" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>サブボリュームを作成すると、BTRFSファイルシステム内のパスにリンクされ、通常のディレクトリとして表示されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs サブボリューム作成 /some/path</pre>
</div></div>
<div class="paragraph">
<p>その後、<span class="monospaced">/some/pathは</span>通常のディレクトリのように動作します。</p></div>
</div>
<div class="sect4">
<h5 id="_deleting_a_subvolume">サブボリュームの削除<a class="headerlink" href="#_deleting_a_subvolume" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">rmdir</span> で削除されるディレクトリとは逆に、サブボリュームは<span class="monospaced">btrfs</span>コマンドで削除するために空である必要はありません。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs サブボリューム削除 /some/path</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_creating_a_snapshot_of_a_subvolume">サブボリュームのスナップショットの作成<a class="headerlink" href="#_creating_a_snapshot_of_a_subvolume" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>BTRFSはスナップショットと通常のサブボリュームを実際には区別しないため、スナップショットの作成はサブボリュームの任意のコピーの作成と見なすこともできます。 慣例により、Proxmox VEはゲストディスクまたはサブボリュームのスナップショットを作成するときに読み取り専用フラグを使用しますが、このフラグは後で変更することもできます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs subvolume snapshot -r /some/path /a/new/path</pre>
</div></div>
<div class="paragraph">
<p>これにより、<span class="monospaced">/some/path</span>上のサブボリュームの読み取り専用の「クローン」が<span class="monospaced">/a/new/path</span> に作成されます。今後<span class="monospaced">/some/path</span>を変更すると、変更前のデータがコピーされます。</p></div>
<div class="paragraph">
<p>読み取り専用<span class="monospaced">（-r</span>）オプションを省略すると、両方のサブボリュームが書き込み可能になります。</p></div>
</div>
<div class="sect4">
<h5 id="_enabling_compression">圧縮の有効化<a class="headerlink" href="#_enabling_compression" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デフォルトでは、BTRFSはデータを圧縮しません。圧縮を有効にするには、<span class="monospaced">compress</span>mount オプションを追加します。すでに書き込まれたデータは後から圧縮されないことに注意してください。</p></div>
<div class="paragraph">
<p>デフォルトでは、rootfsは<span class="monospaced">/etc/fstabに</span>以下のようにリストされます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>UUID=&lt;ルートファイルシステムのUUID&gt; / btrfsのデフォルト 0 1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">compress=zstd</span>、<span class="monospaced">compress=lzo</span>、または<span class="monospaced">compress=zlibを</span>上記の<span class="monospaced">デフォルトに</span>追加するだけです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>UUID=&lt;ルートファイルシステムのUUID&gt; / btrfs defaults,compress=zstd 0 1</pre>
</div></div>
<div class="paragraph">
<p>この変更は再起動後に有効になります。</p></div>
</div>
<div class="sect4">
<h5 id="_checking_space_usage">スペースの使用状況の確認<a class="headerlink" href="#_checking_space_usage" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>古典的な<span class="monospaced">df</span>ツールは、BTRFSのセットアップによっては紛らわしい値を出力することがあります。 より正確な見積もりには、例えば<span class="monospaced">btrfs filesystem usage /PATH</span>コマンドを使用してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs fi usage /my-storage</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proxmox_node_management">
<span>3.11.Proxmox ノード管理</span> <a class="headerlink" href="#proxmox_node_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEノード管理ツール<span class="monospaced">(pvenode</span>)を使用すると、ノード固有の設定やリソースを制御できます。</p></div>
<div class="paragraph">
<p>現在<span class="monospaced">pvenode</span>では、ノードの説明を設定したり、ノードのゲストに対して様々な一括操作を実行したり、ノードのタスク履歴を表示したり、ノードの SSL 証明書を管理したりすることができます。</p></div>
<div class="sect3">
<h4 id="_wake_on_lan">3.11.1.ウェイクオンLAN<a class="headerlink" href="#_wake_on_lan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Wake-on-LAN (WoL) は、マジックパケットを送信することで、ネットワーク内でスリープしているコンピュータの電源を入れることができます。少なくとも1つのNICがこの機能をサポートし、コンピュータのファームウェア（BIOS/UEFI）設定でそれぞれのオプションを有効にする必要があります。オプションの名前は<em>Enable Wake-on-Lan</em>から<em>Power On By PCIE Device</em> まで様々です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ettool &lt;interface&gt; | grep Wake-on</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">pvenodeを</span>使用すると、WoL経由でクラスタのスリープ・メンバーをスリープ解除できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode wakeonlan &lt;ノード&gt;。</pre>
</div></div>
<div class="paragraph">
<p>これは、<span class="monospaced">wakeonlan</span>プロパティから取得した<span class="monospaced">&lt;node&gt;</span>の MAC アドレスを含む WoL magic パケットを UDP ポート 9 にブロードキャストします。ノード固有の<span class="monospaced">wakeonlan</span>プロパティは、以下のコマンドで設定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set -wakeonlan XX:XX:XX:XX:XX:XX</pre>
</div></div>
<div class="paragraph">
<p>WoLパケットを送信するインターフェースは、デフォルト・ルートから決定されます。以下のコマンドで<span class="monospaced">bind-interface</span>を設定することで上書きできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set -wakeonlan XX:XX:XX:XX:XX:XX,bind-interface=&lt;iface-name&gt;を設定します。</pre>
</div></div>
<div class="paragraph">
<p>WoLパケットを送信する際に使用されるブロードキャストアドレス（デフォルトは<span class="monospaced">255.255.255.255</span>）は、以下のコマンドを使用して<span class="monospaced">ブロードキャストアドレスを</span>明示的に設定することでさらに変更できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set -wakeonlan XX:XX:XX:XX:XX,broadcast-address=&lt;broadcast-address&gt;.</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_task_history">3.11.2.タスク履歴<a class="headerlink" href="#_task_history" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックアップジョブの失敗など、サーバーの問題をトラブルシューティングする場合、以前に実行したタスクのログがあると役立つことがよくあります。Proxmox VEでは、<span class="monospaced">pvenode task</span>コマンドでノードのタスク履歴にアクセスできます。</p></div>
<div class="paragraph">
<p><span class="monospaced">list</span>サブコマンドを使用すると、ノードの終了したタスクのフィルタリングされたリストを取得できます。例えば、エラーで終了したVM<em>100に</em>関連するタスクのリストを取得するには、次のようにコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode タスクリスト --エラー --vmid 100</pre>
</div></div>
<div class="paragraph">
<p>タスクのログは、そのUPIDを使って印刷できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode task log UPID:pve1:00010D94:001CA6EA:6124E1B9:vzdump:100:root@pam：</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_bulk_guest_power_management">3.11.3.一括ゲスト電源管理<a class="headerlink" href="#_bulk_guest_power_management" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>多数のVM/コンテナがある場合、ゲストの起動と停止は<span class="monospaced">pvenodeの</span> <span class="monospaced">startallと</span> <span class="monospaced">stopall</span>サブコマンドで一括操作できます。  デフォルトでは、<span class="monospaced">pvenode startallは</span>ブート時に自動的に起動するように設定されたVM/コンテナのみを起動します（<a href="#qm_startup_and_shutdown">仮想マシンの自動起動とシャットダウン</a>参照）。両コマンドには<span class="monospaced">--vms</span>オプションもあり、停止/起動されるゲストを指定されたVMIDに制限します。</p></div>
<div class="paragraph">
<p>例えば、VM<em>100</em>、<em>101</em>、<em>102を</em>起動するには、<span class="monospaced">オンブートセットの</span>有無に関係なく、次のようにします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode startall --vms 100,101,102 --force</pre>
</div></div>
<div class="paragraph">
<p>これらのゲスト（および実行中の他のゲスト）を停止するには、コマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>プベノードストップオール</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">stopallコマンドはまずクリーンシャットダウンを試み、すべてのゲストが正常にシャットダウンされるか、オーバーライド可能なタイムアウト（デフォルトでは3分）が切れるまで待機します。これが発生し、force-stopパラメーターが明示的に0（false）に設定されないと、まだ実行中のすべての仮想ゲストがハード停止されます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="first_guest_boot_delay">3.11.4.ファーストゲストブートディレイ<a class="headerlink" href="#first_guest_boot_delay" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VM/コンテナがNFSサーバなどの起動の遅い外部リソースに依存している場合、Proxmox VEが起動してから、自動起動に設定されている最初のVM/コンテナが起動するまでの遅延をノードごとに設定することもできます（<a href="#qm_startup_and_shutdown">仮想マシンの自動起動とシャットダウンを</a>参照）。</p></div>
<div class="paragraph">
<p>以下のように設定することで実現できます（ここで<span class="monospaced">10は</span>秒単位の遅延を表します）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set --startall-onboot-delay 10</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_bulk_guest_migration">3.11.5.一括ゲスト移行<a class="headerlink" href="#_bulk_guest_migration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>アップグレードの状況で、すべてのゲストをあるノードから別のノードに移行する必要がある場合、<span class="monospaced">pvenodeには</span>一括移行用の<span class="monospaced">migrateall</span>サブコマンドも用意されています。デフォルトでは、このコマンドはシステム上のすべてのゲストをターゲットノードに移行します。しかし、ゲストのセットだけを移行するように設定することもできます。</p></div>
<div class="paragraph">
<p>例えば、ローカル・ディスクのライブ・マイグレーションを有効にして、VM<em>100</em>、<em>101</em>、<em>102を</em>ノード<em>pve</em>2に移行するには、次のように実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode migrateall pve2 --vms 100,101,102 --ローカルディスクあり</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="sysadmin_certificate_management">
<span>3.12.証明書管理</span> <a class="headerlink" href="#sysadmin_certificate_management" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_certificates_for_intra_cluster_communication">3.12.1.クラスタ内通信用証明書<a class="headerlink" href="#_certificates_for_intra_cluster_communication" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各Proxmox VEクラスタはデフォルトで独自の(自己署名の)認証局(CA)を作成し、前述のCAによって署名される各ノードの証明書を生成します。これらの証明書はクラスタの<span class="monospaced">pveproxy</span>サービスおよびSPICEが使用されている場合のシェル/コンソール機能との暗号化通信に使用されます。</p></div>
<div class="paragraph">
<p>CA証明書と鍵は<a href="#chapter_pmxcfs">Proxmox Cluster File System (pmxcfs)</a>に保存されます。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_api_gui">3.12.2.API および Web GUI 用の証明書<a class="headerlink" href="#sysadmin_certs_api_gui" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>REST APIとWeb GUIは、各ノードで実行される<span class="monospaced">pveproxy</span>サービスによって提供されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">pveproxy</span> が使用する証明書には、以下のオプションがあります：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
既定では、<span class="monospaced">/etc/pve/nodes/NODENAME/pve-ssl.pem</span>にあるノード固有の証明書が使用されます。この証明書はクラスタ CA によって署名されているため、ブラウザおよびオペレーティング システムからは自動的に信頼されません。</p>
</li>
<li>
<p>
外部から提供された証明書（商用CAによって署名されたものなど）を使用します。</p>
</li>
<li>
<p>
ACME（Let'sEncrypt）を使用して、自動更新付きの信頼できる証明書を取得してください。</p>
</li>
</ol></div>
<div class="paragraph">
<p>オプシ ョ ン 2 と 3 では<span class="monospaced">/etc/pve/local/pveproxy-ssl.pem</span>（お よ び<span class="monospaced">/etc/pve/local/pveproxy-ssl.key</span> はパ ス ワー ド な し で） を用います。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">etc/pve/local</span>は<span class="monospaced">/etc/pve/nodes/NODENAME</span> へのノード固有のシンボリックリンクであることに注意してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>証明書は Proxmox VE Node 管理コマンドで管理します（<span class="monospaced">pvenode(1)</span>man ページを参照）。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">etc/pve/local/pve-ssl.pem</span>および<span class="monospaced">/etc/pve/local/pve-ssl.key</span>にある自動生成ノード証明書ファイル、または<span class="monospaced">/etc/pve/pve-root-ca.pem</span>および<span class="monospaced">/etc/pve/priv/pve-root-ca.key</span> にあるクラスタ CA ファイルを置き換えたり、手動で変更したりしないでください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_upload_custom">3.12.3.カスタム証明書のアップロード<a class="headerlink" href="#sysadmin_certs_upload_custom" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEノードに使用する証明書をすでにお持ちの場合は、Webインターフェイスから簡単にアップロードできます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-certs-upload-custom.png">
<img src="images/screenshot/gui-node-certs-upload-custom.png" alt="screenshot/gui-node-certs-upload-custom.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>証明書の鍵ファイルが提供される場合、パスワードで保護されてはならないことに注意してください。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_get_trusted_acme_cert">3.12.4.Let's Encrypt (ACME) による信頼できる証明書<a class="headerlink" href="#sysadmin_certs_get_trusted_acme_cert" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEには、<strong>自動</strong> <strong>証明書</strong><strong>管理</strong> <strong>環境</strong> <strong>ACME</strong>プロトコルの実装が含まれており、Proxmox VEの管理者は、Let's EncryptのようなACMEプロバイダを使用して、最新のオペレーティングシステムやWebブラウザで受け入れられ、信頼されるTLS証明書を簡単にセットアップすることができます。</p></div>
<div class="paragraph">
<p>現在、実装されている ACME エンドポイントは、<a href="https://letsencrypt.org">Let's Encrypt (LE) の</a>本番環境とそのステージング環境の 2 つです。私たちのACMEクライアントは、組み込みのWebサーバーを使用した<span class="monospaced">http-01</span>チャレンジの検証と、<a href="https://acme.sh">acme.shが</a>行うすべてのDNS APIエンドポイントをサポートするDNSプラグインを使用した<span class="monospaced">dns-01</span>チャレンジの検証をサポートしています。</p></div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_account">ACME アカウント<a class="headerlink" href="#sysadmin_certs_acme_account" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-acme-register-account.png">
<img src="images/screenshot/gui-datacenter-acme-register-account.png" alt="screenshot/gui-datacenter-acme-register-account.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>クラスタごとに、使用するエンドポイントに ACME アカウントを登録する必要があります。そのアカウントに使用される電子メールアドレスは、ACMEエンドポイントからの更新期限切れまたは同様の通知の連絡先として機能します。</p></div>
<div class="paragraph">
<p>ACME アカウントの登録と停止は、Web インターフェース<span class="monospaced">Datacenter -&gt; ACME</span>または<span class="monospaced">pvenode</span>コマンドラインツールを使用して行うことができます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode acme アカウント登録 アカウント名 mail@example.com</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><a href="https://letsencrypt.org/docs/rate-limits/">レート制限の</a>ため、実験やACMEを初めて使用する場合はLE<span class="monospaced">ステージングを</span>使用する必要があります。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_plugins">ACME プラグイン<a class="headerlink" href="#sysadmin_certs_acme_plugins" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ACMEプラグインのタスクは、あなた、ひいてはあなたの運用下にあるProxmox VEクラスタがドメインの真の所有者であることを自動的に検証することです。これは、自動証明書管理の基礎となるビルディングブロックです。</p></div>
<div class="paragraph">
<p>たとえば、<span class="monospaced">http-01では</span>、ウェブサーバーがドメインを管理していることを証明するために、特定の内容のファイルを提供します。技術的な制限や、レコードのアドレスが公共のインターネットから到達できない場合など、これが不可能なこともあります。<span class="monospaced">dns-01</span>チャレンジは、このような場合に使用できます。  このチャレンジは、ドメインのゾーンに特定のDNSレコードを作成することで実行されます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-acme-overview.png">
<img src="images/screenshot/gui-datacenter-acme-overview.png" alt="screenshot/gui-datacenter-acme-overview.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEは、これらのチャレンジタイプの両方をサポートしており、Webインターフェイスの<span class="monospaced">Datacenter -&gt; ACMEで</span>プラグインを設定するか、<span class="monospaced">pvenode acme plugin add</span>コマンドを使用してプラグインを設定できます。</p></div>
<div class="paragraph">
<p>ACMEプラグインの設定は<span class="monospaced">/etc/pve/priv/acme/plugins.cfgに</span>保存されます。 プラグインはクラスタ内のすべてのノードで使用できます。</p></div>
</div>
<div class="sect4">
<h5 id="_node_domains">ノードドメイン<a class="headerlink" href="#_node_domains" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各ドメインはノード固有です。新しいドメインエントリを追加したり、既存のドメインエントリを管理したりするには、<span class="monospaced">ノード -&gt; 証明書</span>、または<span class="monospaced">pvenode config</span>コマンドを使用します。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-certs-add-domain.png">
<img src="images/screenshot/gui-node-certs-add-domain.png" alt="screenshot/gui-node-certs-add-domain.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ノードの希望するドメインを設定し、希望する ACME アカウントが選択されていることを確認した後、Web インターフェースで新しい証明書を注文できます。成功すると、インターフェイスは10秒後にリロードされます。</p></div>
<div class="paragraph">
<p>更新は<a href="#sysadmin_certs_acme_automatic_renewal">自動的に</a>行われます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_acme_http_challenge">3.12.5.ACME HTTP チャレンジプラグイン<a class="headerlink" href="#sysadmin_certs_acme_http_challenge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ポート80で生成された組み込みのウェブサーバを経由して<span class="monospaced">http-01</span>チャレンジを検証するために、常に暗黙的に設定された<span class="monospaced">スタンドアロンプラグインが</span>あります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">スタンドアロンという</span>名前は、サードパーティのサービスを使わずに、このプラグインだけで検証を行うことができるという意味です。そのため、このプラグインはクラスタノードでも動作します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Let's Encrypts ACMEでの証明書管理に使用するには、いくつかの前提条件があります。</p></div>
<div class="ulist"><ul>
<li>
<p>
アカウントを登録するには、Let's EncryptのToSに同意する必要があります。</p>
</li>
<li>
<p>
ノードの<strong>ポート80は</strong>インターネットから到達可能である必要があります。</p>
</li>
<li>
<p>
ポート80には他のリスナーがいては<strong>いけません</strong>。</p>
</li>
<li>
<p>
要求された（サブ）ドメインはノードのパブリックIPに解決する必要があります。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_acme_dns_challenge">3.12.6.ACME DNS API チャレンジプラグイン<a class="headerlink" href="#sysadmin_certs_acme_dns_challenge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">http-01</span>メソッドによる検証のための外部アクセスが不可能または望ましいシステム上では、<span class="monospaced">dns-01</span>検証メソッドを使用することが可能です。 この検証メソッドは、APIを介して<span class="monospaced">TXT</span>レコードのプロビジョニングを可能にするDNSサーバーを必要とします。</p></div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_dns_api_config">検証用ACME DNS APIの設定<a class="headerlink" href="#sysadmin_certs_acme_dns_api_config" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEは、<span class="monospaced">acme.sh</span><span class="footnote"><br>[acme.sh<a href="https://github.com/acmesh-official/acme.sh">https://github.com/acmesh-official/acme.sh]</a><br></span>プロジェクトのために開発されたDNSプラグインを再利用します。特定のAPIの設定の詳細については、そのドキュメントを参照してください。</p></div>
<div class="paragraph">
<p>DNS APIを使用して新しいプラグインを設定する最も簡単な方法は、Webインターフェース<span class="monospaced">（Datacenter -&gt; ACME</span>）を使用することです。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-acme-add-dns-plugin.png">
<img src="images/screenshot/gui-datacenter-acme-add-dns-plugin.png" alt="screenshot/gui-datacenter-acme-add-dns-plugin.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>チャレンジタイプとして<span class="monospaced">DNS</span>を選択します。検証遅延は、DNSレコードを設定してからACMEプロバイダに検証を促すまでの時間を秒単位で決定します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プロバイダのAPI認証情報の取得に関する詳細情報については、acme.sh<a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi#how-to-use-dns-api">How to use DNS API</a>wikiを参照してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>多くのDNSプロバイダとAPIエンドポイントがあるため、Proxmox VEはいくつかのプロバイダの認証情報用のフォームを自動的に生成します。その他のプロバイダについては、大きなテキストエリアが表示されますので、そこにすべての認証情報の<span class="monospaced">KEY</span><span class="monospaced">=</span> <span class="monospaced">VALUE</span>ペアをコピーしてください。</p></div>
</div>
<div class="sect4">
<h5 id="_dns_validation_through_cname_alias">CNAMEエイリアスによるDNS検証<a class="headerlink" href="#_dns_validation_through_cname_alias" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>プライマリ/リアルDNSがAPI経由のプロビジョニングをサポートしていない場合、特別な<span class="monospaced">エイリアスモードを</span>使用して、別のドメイン/DNSサーバで検証を処理できます。手動で<span class="monospaced">_acme-challenge.domain</span> <span class="monospaced">2.exampleを</span>指す<span class="monospaced">_acme-challenge.domain1.exampleの</span>永続的な<span class="monospaced">CNAME</span>レコードを設定し、Proxmox VEノード構成ファイルの対応する<span class="monospaced">acmedomainX</span>キーの<span class="monospaced">エイリアスの</span>プロパティを<span class="monospaced">domain2.exampleに</span>設定して、<span class="monospaced">domain2.exampleの</span>DNSサーバーが<span class="monospaced">domain1.exampleの</span>すべてのチャレンジを検証できるようにします。</p></div>
</div>
<div class="sect4">
<h5 id="_combination_of_plugins">プラグインの組み合わせ<a class="headerlink" href="#_combination_of_plugins" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">http-01と</span> <span class="monospaced">dns-01の</span>検証を組み合わせることは、異なる要件/DNSプロビジョニング機能を持つ複数のドメイン経由でノードに到達可能な場合に可能です。ドメインごとに異なるプラグインインスタンスを指定することで、複数のプロバイダやインスタンスからのDNS APIを混在させることも可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKZUlEQVRoge2aa3BU5RmAn3Pbs7fs
JmwCRGITk0hVLFAtNWoq6pAiU0cKaYfa6ShT+YN4YbQw9F/8QX+UMv6gM3Q6oxMV6TgIbe10Gq2g
cSzDpRaFgmIk4SKB3LP3Pff+SM66m+xuFvEyzvSbeefsbva8+z7nvXzf934RHMfhmzzEr9uAqx3/
B/i6xzceQP6iFDmT1cBxHNzCkFsgBEHIXnNeC1f7u1cN4DiOY9s2rliWhWVZWRDHcbJGC4KAJElI
koQoioii6IiieFUgnxvAtm3HNdg0Tbq6uuju7ubYsWP09vYyMjKCpmmoqkokEqGhoYGFCxfS2tpK
W1sbiqJkRZIkZxLoikGEK50H3CdumiZ9fX3s3LmT3bt3U1V3A0033cKc2nkEQxV4PSqSJOI4Dpqu
k0gkGLx8kZ4T7zF87iSrV69m3bp1NDY2oqoqHo8HWZa5Uo9cEYBt245lWRiGQUdHB9u2beOe1Y8w
/6bFVAT9xJJpYvEUiVSGjG5gmBY4DqIoonoUfF4PoYAfRRE5/8kp3njlD6xfv54tW7YQCATw+Xyu
R8r2RtkAtm07pmly5MgRHn/8cZSaZpbcfjd+n5f+wVEGRqJkdCMv3vME8t77vB6qQn4+OX6YsXPH
2bp1Ky0tLQQCAVRVdb0xI0RZZdQ1ft++fSxbtozrlqzgrnvvI5nRee9UL+f6h9B0A1EQEIsBiOKE
TL7XdJOBkTg1jYtouu1+1qxZw549e4hGo6TTaUzTxLbtGZ/ujEmca/wvHnqYnz/2DLNn19B74TID
I9HPjCvwlLMls4RHdMNC8IRZ8dBmnnp6E7Zts2rVKgB8Ph+yLDulPFEyhBzHcUzT5PDhwyxbtow1
j3YQqanmozOfEk2kChuLQ3x0lGQihmM7qF4vVdWz8fr9hYFyoK30OG/ufpYXXniB1tZWwuEwXq8X
WZaLJnZJAMuyHE3TuPPOO2lcsoLGpmZO9ZzPM37q0x0ZuISla2xY2077j5ZSFargZM9Znt97gE8u
DBb3ziRIfPAcF4/v59VXX6W6uppQKISqqkiSVBCgaA64odPR0YFS00xjUzNnLlwmmkznxbKYI45j
k04mefaZJ3j04VXMqZ6Fx6Pw3QXXs/3Xv6Tp2rnTALL3T8wDBCLz8M2Zz/bt24nFYjPmQ0EAt9b3
9fWxbds2ltxxD0NjMQbdmC+QlIIgIIkSoWCAH971/Wk6PYrCg/f/oHiVmhSP6qWm/gY6Ozvp6ekh
mUyi6zq2bWeXK+UAYFkWO3fu5N72dQT8Pi5cGp6xuoiiiBoMktH0gl5trp87DbqQBEMRbl32U3bt
2kUikUDTtOzypGwAwzDYvXs3316wiEuDoxiGWVaZrAjP4qW/vFUQ4NAHPdlwKQWiqF4qa+ro6uoi
kUiQTqcxDKM8ADd8Xn/9dWZdewMVwSCDo7GicT8NSBTZt/8oT259jgOHThBNpIgmUjy3dz/P7z2Q
r2My7gs9FNUXoPpbN9Ld3Z0FKBRG0+YBN3y6u7tpWnAr8WR6+gxLfr03TYNMMolhGFimiWVbXDzb
x4G3/4XgOIiyTF3DdW45nHG2RhBQfX6q65o5evQoy5cvn9BtWUiSRG5FLQhg2zbHjh3j+tsfKFrv
3R8EGL7UT23NLNraWmi+ro5r5kSYHakiVOHH7/OiyDKxZIonf9NJIpWZMQcEwOPx4vNXcPr0B2Qy
mdxEzrO34ExsWRa9vb3csjzEaP9w1sUFZ1RBQJJk/vjbTdTXzS2kDoBQwI9HmcEDOSJ7PAiiSH9/
P7quY5omlmVN01soB3Ach5GREbyqiqabM8a+NxAglcmvPOf7h9jR+WdOfNQLwNtHTzIeT+XFfdGC
IAiIogSOQzQaxTRNdy4ozwO2baNpGpIkY1j2RAJTeJ0jCAKRmtmcPHORmkglxz48y/5DJ3jrnUPM
b7iGxx7+MZZls/efR0rG/VQPgwMC2eQtZHxRAABVVbM3lEpgV178azcvvfYOgiCgZTJomsbGR9oR
BIHzl4YYGo2VlcCuWOaE5xVFwbbtqVHiCJOZXBQgEomg6zqSKOIUMrqER+LRKItvaubW78wH4NLQ
WNmx7+q1DB1ZkgmFQohifqS7xhcFEEWRhoYGEokEqkeeWPLmurcEiGPbpJJJfvbAPVl95/qHJyYv
mH5/EdG1FA5QW1ubzZvc8pm1deoHroKFCxcycPkiPlWdnmC5iTxlVk2n0wT9Xu69Y3FW51g8OfH3
ye+WnAgnRcukyKQSNDU1Icty7n65NACAJEm0trbSc/zfVAT9JZ/U1NWklslwx/duxqMoWX0Zzcy/
bwr0VCDT0NDTSS6f/ZBFixZlN/ySJJXnAVEUaWtrY6DvOIoiFlx5FhPLsrjl5uvzdPq8nsLfL6I3
FR1FlhUG+v5LS0tLtmtRlgcEYaL5pCgKq1ev5lzPKfxeT8FwKSQA115Tk6eztjpcsubn6rUMnfj4
MLHxIZYuXYrX683rVpQDIIiiiKIorFu3jn+8vIPKCt+0cCkG4m4Bc0fd3OqCoVIIJDo2iCQrvPu3
F1m5cmVeu6VQz6hgDrj1t7GxkfXr1/Px+wdRPcr02C+wmgxVVnLm3KU8ffNmVxX03lSgRHSEVGyc
oYt9tLe3U19fTzAYzAKUVYVyw0hVVbZs2cJw7/uYyZGSIeCCeFWVd499jGGaWX1zq8OfrYOKeC+T
ijM+cBHHsRju/Q9r164lFAoRDAbdPfEVAQiiKOLxeAgEAmzdupW/v/A7RLPEyjTHuGjKYMfLb3B5
eBzdMNl/+CSmZReN+0wqztDFs4iSxIE9O9mwYQPhcJhwOEwgEMhN4GkEZXUlYrEYe/bs4elfbWLF
Q5tQKyJlVaRy+kSJ6AhjA58iihJdf9rBUxufYPny5cyZM6esrkTJxpabzIFAgFWrVmHbNps3b+bu
n6wnVF2H4lHLmlULgZiGTmxkgGR8DNu2efOV3/PUxo20tbURiUSorKwkEAhkk7fYmLE36rZX0uk0
0WiUgwcP0tHRQcW8G5ndsIBgaBYe1TvtyRYDMXWNZGyU+Ngwkiwz+GkfQ73vsWHDBhYvXkwkEmHW
rFmEw2G3M1eyR1pWczcXIh6PMz4+zvbt2+ns7OS2+x6kanYdqjeA1xdAUb3IioIoSjg42JaJaejo
mTRaOoGeTiHJEvGxYd55rZP29nbWrl1LOBymqqqKyspKKioqyjK+bIBcCE3TSCaTxGIxenp62LVr
F11dXdTUL2BO/Xx8/goEUcSxbYSJ2EGS5IlzgnSC/r4PuXzmOEuXLmXlypXU19cTCoUIh8OEQqEr
7k5/7vOBdDpNMpkkkUiQSCTo7u7m6NGjnD59mv7+fqLRKIZhoCgKoVCI2tpampqaWLRoES0tLfh8
Pvx+P8FgkGAw+OWfD7gj94RG13U0TSOdTpNOp8lMbmQ0TcvbArrrK1mW8Xg8eL3e7BLB5/N9dSc0
uSP3jMwwjKy4G3AXwB0ugAsx5YzMndW//DOy3OFMjGwrxrKs7NX9LBfAneFFUcxec6rU5zqpvCqA
qTCT16/0nPgLA/i6xjf+Xw3+B2ll/uiqTaJTAAAAAElFTkSuQmCC" />
</td>
<td class="content">同じサービスに複数のドメインでアクセスすることは複雑さを増すので、可能であれば避けるべきです。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_acme_automatic_renewal">3.12.7.ACME 証明書の自動更新<a class="headerlink" href="#sysadmin_certs_acme_automatic_renewal" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノードが ACME 提供の証明書で正しく設定されている場合（pvenode 経由または GUI 経由）、証明書は<span class="monospaced">pve-daily-update.service</span> によって自動的に更新されます。現在、証明書の有効期限が既に切れている場合、または今後30日以内に期限が切れる場合に更新が試みられます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">短命の証明書を発行するカスタム・ディレクトリを使用している場合は、再起動後に証明書の更新が行われないように、<span class="monospaced">pve-daily-update.timer</span>ユニットのランダム遅延を無効にすることをお勧めします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_acme_examples_with_span_class_monospaced_pvenode_span">3.12.8.<span class="monospaced">pvenode を</span>使用した ACME の例<a class="headerlink" href="#_acme_examples_with_span_class_monospaced_pvenode_span" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_example_sample_span_class_monospaced_pvenode_span_invocation_for_using_let_8217_s_encrypt_certificates">例Let's Encrypt 証明書を使用するための<span class="monospaced">pvenode</span>呼び出しのサンプル<a class="headerlink" href="#_example_sample_span_class_monospaced_pvenode_span_invocation_for_using_let_8217_s_encrypt_certificates" title="Permalink to this heading"></a></h5>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# pvenode acme account register default mail@example.invalid Directory endpoints: 0) Let's Encrypt V2 (https://acme-v02.api.letsencrypt.org/directory) 1) Let's Encrypt V2 Staging (https://acme-staging-v02.api.letsencrypt.org/directory) 2) Custom Enter selection：1 利用規約: https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf 上記の規約に同意しますか？[y|N]y ... タスク OK root@proxmox:~# pvenode config set --acme domains=example.invalid root@proxmox:~# pvenode acme cert order ACMEアカウントの詳細をロード ACME注文を行う ... ステータスは「有効」です！ すべてのドメインが有効です！ ... 証明書をダウンロード pveproxy証明書と鍵を設定 pveproxyを再起動 タスク OK</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_example_setting_up_the_ovh_api_for_validating_a_domain">例<a class="headerlink" href="#_example_setting_up_the_ovh_api_for_validating_a_domain" title="Permalink to this heading"></a>ドメインを検証するための OVH API の設定</h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">アカウント登録の手順はどのプラグインを使用しても同じですので、ここでは繰り返しません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">OVH_AK</span>および<span class="monospaced">OVH_ASは</span>、OVH APIドキュメントに従ってOVHから取得する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まず、あなたとProxmox VEがAPIにアクセスできるように、すべての情報を取得する必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# cat /path/to/api-token
OVH_AK=XXXXXXXXXXXXXXXX
OVH_AS=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
root@proxmox:~# source /path/to/api-token root@proxmox:~# curl -XPOST -H "X-Ovh-Application: $OVH_AK" -H "Content-type: application/json"  \ https://eu.api.ovh.com/1.0/auth/credential -d '{ "accessRules"：[ {"method"："GET", "path"："/auth/time"}, {"method"："GET", "path"："/domain"}, {"method": "GET", "path": "/auth/time"}："GET", "path"："/domain/zone/*"}, {"method"："GET", "path"："/domain/zone/*/record"}, {"method"："POST", "path"："/domain/zone/*/record"}, {"method"："POST", "path"："/domain/zone/*/refresh"}, {"method"："PUT", "path"："/domain/zone/*/record/"}, {"method"："DELETE", "path"："/domain/zone/*/record/*"}
]
}'
{"consumerKey":"ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ","state":"pendingValidation","validationUrl":"https://eu.api.ovh.com/auth/?credentialToken=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}

(open validation URL and follow instructions to link Application Key with account/Consumer Key)

root@proxmox:~# echo "OVH_CK=ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ" &gt;&gt; /path/to/api-token</pre>
</div></div>
<div class="paragraph">
<p>これでACMEプラグインを設定することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# pvenode acme plugin add dns example_plugin --api ovh --data /path/to/api_token root@proxmox：~# pvenode acme plugin config example_plugin
┌────────┬──────────────────────────────────────────┐
│ key    │ value                                    │
╞════════╪══════════════════════════════════════════╡
│api    │ ovh                                      │
├────────┼──────────────────────────────────────────┤
│data   │ OVH_AK=XXXXXXXXXXXXXXXX                  │
│        │ OVH_AS=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY  │
│        │ OVH_CK=ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ  │
├────────┼──────────────────────────────────────────┤
│ digest │ 867fcf556363ca1bea866863093fcab83edf47a1 │
├────────┼──────────────────────────────────────────┤
│ plugin │ example_plugin                           │
├────────┼──────────────────────────────────────────┤
│ type   │ dns                                      │
└────────┴──────────────────────────────────────────┘</pre>
</div></div>
<div class="paragraph">
<p>最後に、証明書を取得したいドメインを設定し、そのドメインの証明書を注文します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# pvenode config set -acmedomain0 example.proxmox.com,plugin=example_plugin root@proxmox:~# pvenode acme cert order Loading ACME account details Placing ACME order URL: https://acme-staging-v02.api.letsencrypt.org/acme/order/11111111/22222222 Getting authorization details from 'https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/33333333' The validation for example.proxmox.com is pending! [Wed Apr 22 09:25:30 CEST 2020] Using OVH endpoint: ovh-eu [Wed Apr 22 09:25:30 CEST 2020] Checking authentication [Wed Apr 22 09:25:30 CEST 2020] Consumer key is ok. [Wed Apr 22 09:25:31 CEST 2020] Adding record [Wed Apr 22 09:25:32 CEST 2020] Added, sleep 10 seconds. Add TXT record：[Wed Apr 22 09:25:48 CEST 2020] OVHエンドポイントの使用: ovh-eu [Wed Apr 22 09:25:48 CEST 2020] 認証の確認 [Wed Apr 22 09:25:48 CEST 2020] コンシューマーキーはOKです。 TXTレコードを削除します：_acme-challenge.example.proxmox.comすべてのドメインが認証されました！ CSRの作成 注文ステータスの確認 注文の準備ができました、注文を確定します 有効です！ 証明書のダウンロード pveproxy証明書とキーの設定 pveproxyタスクの再起動 OK</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_switch_from_staging">例<span class="monospaced">ステージングから</span>通常の ACME ディレクトリへの切り替え<a class="headerlink" href="#sysadmin_certs_acme_switch_from_staging" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>アカウントのACMEディレクトリを変更することはサポートされていませんが、Proxmox VEは複数のアカウントをサポートしているため、本番(信頼済み)ACMEディレクトリをエンドポイントとして新しいアカウントを作成することができます。  また、ステージングアカウントを非アクティブにして再作成することもできます。</p></div>
<div class="listingblock">
<div class="title">例<span class="monospaced">pvenode を</span>使用して<span class="monospaced">、デフォルトの</span>ACME アカウントを<span class="monospaced">ステージングから</span>ディレクトリに変更します。</div>
<div class="content monospaced">
<pre>root@proxmox:~# pvenode acme account deactivate default アカウントファイルの名前を '/etc/pve/priv/acme/default' から '/etc/pve/priv/acme/_deactivated_default_4' に変更 タスク OK root@proxmox:~# pvenode acme account register default example@proxmox.com ディレクトリエンドポイント: 0) Let's Encrypt V2 (https://acme-v02.api.letsencrypt.org/directory) 1) Let's Encrypt V2 Staging (https://acme-staging-v02.api.letsencrypt.org/directory) 2) Custom Enter 選択：0 利用規約: https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf 上記の規約に同意しますか？[y|N]y ... タスクOK</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sysboot">
<span>3.13.ホスト・ブートローダ</span> <a class="headerlink" href="#sysboot" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは現在、インストーラで選択されたディスクセットアップに応じて、2つのブートローダのいずれかを使用します。</p></div>
<div class="paragraph">
<p>ZFS をルートファイルシステムとしてインストールした EFI システムでは、Secure Boot が有効になっていない限り、<span class="monospaced">systemd-boot が</span>使用されます。それ以外の展開では、標準の GRUB ブートローダを使用します (これは通常、Debian 上にインストールされたシステムにも当てはまります)。</p></div>
<div class="sect3">
<h4 id="sysboot_installer_part_scheme">3.13.1.インストーラーが使用するパーティション方式<a class="headerlink" href="#sysboot_installer_part_scheme" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEのインストーラは、インストール用に選択されたすべてのディスクに3つのパーティションを作成します。</p></div>
<div class="paragraph">
<p>作成されたパーティションは</p></div>
<div class="ulist"><ul>
<li>
<p>
1 MBのBIOSブートパーティション（gdiskタイプEF02）</p>
</li>
<li>
<p>
512 MB EFI システムパーティション (ESP、gdisk タイプ EF00)</p>
</li>
<li>
<p>
設定された<span class="monospaced">hdsize</span>パラメータまたは選択されたストレージタイプに使用される残りのスペースにまたがる第3のパーティション</p>
</li>
</ul></div>
<div class="paragraph">
<p>ルートファイルシステムとしてZFSを使用するシステムは、512MBのEFIシステムパーティションに保存されたカーネルとinitrdイメージで起動します。レガシー BIOS システム、およびセキュアブートが有効な EFI システムでは GRUB が使用され、セキュアブートのない EFI システムでは<span class="monospaced">systemd-boot</span>が使用されます。どちらもインストールされ、ESPを指すように設定されます。</p></div>
<div class="paragraph">
<p>BIOSモードのGRUB<span class="monospaced">(--target i386-pc</span>)は、GRUBで起動した全てのシステム上の選択されたディスクのBIOSブートパーティションにインストールされます<span class="footnote"><br>[これらは、<span class="monospaced">ext4や</span> <span class="monospaced">xfs</span>上のrootによる全てのインストールと、非EFIシステム上のZFS上のrootによるインストールです]<br></span>.</p></div>
</div>
<div class="sect3">
<h4 id="sysboot_proxmox_boot_tool">3.13.2.<span class="monospaced">proxmox-boot-tool</span>で ESP の内容を同期<a class="headerlink" href="#sysboot_proxmox_boot_tool" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-tool</span>は EFI システムパーティションの内容を適切に設定し、同期させるためのユーティリティです。特定のカーネルバージョンを全ての ESP にコピーし、<span class="monospaced">vfat</span>フォーマットの ESP からブートするようにそれぞれのブートローダを設定します。ルートファイルシステムとしての ZFS の文脈では、これは GRUB の ZFS 実装にも存在するサブセットや、個別の小さなブートプールを作成する代わりに、ルートプールですべてのオプション機能を使用できることを意味<span class="footnote">します<br>[Booting ZFS on root with GRUB<a href="https://github.com/zfsonlinux/zfs/wiki/Debian-Stretch-Root-on-ZFS">https://github.com/zfsonlinux/zfs/wiki/Debian-Stretch-Root-on-ZFS]</a><br></span>.</p></div>
<div class="paragraph">
<p>冗長性のあるセットアップでは、インストーラによってすべてのディスクがESPでパーティション設定されます。これにより、最初のブートデバイスが故障したり、BIOS が特定のディスクからしかブートできない場合でも、システムが確実に起動します。</p></div>
<div class="paragraph">
<p>通常の操作では、ESP はマウントされたままにはなりません。これにより、システムがクラッシュした場合に<span class="monospaced">vfat</span>フォーマットされた ESP のファイルシステムが破壊されるのを防ぎ、プライマリブートデバイスが故障した場合に<span class="monospaced">/etc/fstab を</span>手動で変更する必要がなくなります。</p></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-toolは</span>以下のタスクを処理します：</p></div>
<div class="ulist"><ul>
<li>
<p>
新しいパーティションのフォーマットと設定</p>
</li>
<li>
<p>
新しいカーネル・イメージと initrd イメージをリストされたすべての ESP にコピーし、設定します。</p>
</li>
<li>
<p>
カーネル・アップグレードやその他のメンテナンス作業時の設定の同期</p>
</li>
<li>
<p>
同期されているカーネルバージョンのリスト管理</p>
</li>
<li>
<p>
特定のカーネルバージョンをブートするようにブートローダを設定（ピン留め）</p>
</li>
</ul></div>
<div class="paragraph">
<p>を実行すると、現在設定されているESPとその状態を表示できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool status</pre>
</div></div>
<div class="paragraph" id="sysboot_proxmox_boot_setup">
<div class="title">同期ESPとして使用するための新しいパーティションの設定</div><p>パーティションを同期された ESP としてフォーマットして初期化するには、例えば rpool で故障した vdev を交換した後や、同期メカニズム以前の既存のシステムを変換する場合、<span class="monospaced">proxmox-kernel-helper</span>の<span class="monospaced">proxmox-boot-tool</span>を使うことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">format</span>コマンドは<span class="monospaced">&lt;パーティション&gt;を</span>フォーマットします！</td>
</tr></table>
</div>
<div class="paragraph">
<p>例えば、空のパーティション<span class="monospaced">/dev/sda</span>2をESPとしてフォーマットするには、以下を実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool format /dev/sda2</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">dev/sda</span>2にある既存のマウントされていないESPをProxmox VEのカーネル更新同期メカニズムに含めるように設定するには、以下を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool init /dev/sda2</pre>
</div></div>
<div class="paragraph">
<p>または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool init /dev/sda2 grub</pre>
</div></div>
<div class="paragraph">
<p>を使うと、例えばセキュアブートをサポートするために、<span class="monospaced">systemd-boot ではなく</span> GRUB で初期化するように強制できます。</p></div>
<div class="paragraph">
<p>その後、<span class="monospaced">/etc/kernel/proxmox-boot-uuidsに</span>新しく追加されたパーティションのUUIDの行が追加されるはずです。<span class="monospaced">init</span>コマンドは、設定されているすべてのESPのリフレッシュも自動的に行います。</p></div>
<div class="paragraph" id="sysboot_proxmox_boot_refresh">
<div class="title">すべてのESPでの設定の更新</div><p>すべてのブータブルカーネルをコピーして設定し、<span class="monospaced">/etc/kernel/proxmox-boot-uuidsに</span>リストされているすべてのESPを同期させておくには、次のコマンドを実行するだけです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool refresh</pre>
</div></div>
<div class="paragraph">
<p>(rootで<span class="monospaced">ext4</span>または<span class="monospaced">xfsで</span> <span class="monospaced">update-grub</span>システムを実行するのと同じです)。</p></div>
<div class="paragraph">
<p>これは、カーネルコマンドラインに変更を加えたり、すべてのカーネルとinitrdsを同期させたい場合に必要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">update-initramfsも</span> <span class="monospaced">aptも</span>（必要であれば）自動的にリフレッシュを起動します。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title"><span class="monospaced">proxmox-boot-tool</span>が考慮するカーネルバージョン</div><p>以下のカーネルバージョンがデフォルトで設定されています：</p></div>
<div class="ulist"><ul>
<li>
<p>
現在実行中のカーネル</p>
</li>
<li>
<p>
パッケージ更新時に新しくインストールされるバージョン</p>
</li>
<li>
<p>
インストール済みの最新カーネル</p>
</li>
<li>
<p>
該当する場合は、最後から2番目のカーネルシリーズの最新バージョン（5.0、5.3など</p>
</li>
<li>
<p>
手動で選択したカーネル</p>
</li>
</ul></div>
<div class="paragraph">
<div class="title">手動でカーネルをブート可能に</div><p>特定のカーネルと initrd イメージをブート可能なカーネルのリストに追加したい場合は<span class="monospaced">proxmox-boot-tool kernel add</span> を使ってください。</p></div>
<div class="paragraph">
<p>たとえば、以下を実行して、ABIバージョン<span class="monospaced">5.0.15-1-pveの</span>カーネルを、すべてのESPにインストールして同期しておくカーネルのリストに追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel add 5.0.15-1-pve</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-tool kernel list</span>は現在起動用に選択されている全てのカーネルバージョンを一覧表示します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel list 手動で選択されたカーネル: 5.0.15-1-pve 自動で選択されたカーネル: 5.0.12-1-pve 4.15.18-18-pve</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-tool kernel remove</span>を実行して、手動で選択したカーネルのリストからカーネルを削除してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel remove 5.0.15-1-pve</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">手動でカーネルを追加または削除した後、すべてのEFIシステムパーティション(ESP)を更新するために<span class="monospaced">proxmox-boot-tool refreshを</span>実行する必要があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysboot_determine_bootloader_used">3.13.3.使用されるブートローダーの決定<a class="headerlink" href="#sysboot_determine_bootloader_used" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/boot-grub.png">
<img src="images/screenshot/boot-grub.png" alt="screenshot/boot-grub.png" width="250" style="padding: 0 10px 0 0;float:left;" /></a>
<p>どのブートローダが使用されているかを判断する最も簡単で確実な方法は、Proxmox VEノードのブートプロセスを見ることです。</p></div>
<div class="paragraph">
<p>GRUBの青いボックスか、白地に黒のシンプルな<span class="monospaced">systemd-bootが</span>表示されます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/boot-systemdboot.png">
<img src="images/screenshot/boot-systemdboot.png" alt="screenshot/boot-systemdboot.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>実行中のシステムからブートローダを判断するのは100％正確とは限りません。最も安全な方法は、以下のコマンドを実行することです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># efibootmgr -v</pre>
</div></div>
<div class="paragraph">
<p>EFI変数がサポートされていないというメッセージを返した場合、GRUBはBIOS/Legacyモードで使用されます。</p></div>
<div class="paragraph">
<p>出力に以下のような行がある場合、GRUBはUEFIモードで使用されています。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Boot0005* proxmox [...] File(￤proxmox￤grubx64.efi)</pre>
</div></div>
<div class="paragraph">
<p>出力に以下のような行が含まれる場合、<span class="monospaced">systemd-bootが</span>使用されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Boot0006* Linux Boot Manager [...] File(￤￤￤￤￤bootx64.efi)</pre>
</div></div>
<div class="paragraph">
<p>走ることによって：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool status</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-toolが</span>設定されているかどうかを調べることができます。</p></div>
</div>
<div class="sect3">
<h4 id="sysboot_grub">3.13.4.GRUB<a class="headerlink" href="#sysboot_grub" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GRUBは長年Linuxシステムをブートするためのデファクトスタンダードであり、<span class="footnote"><br>[GRUB Manual<a href="https://www.gnu.org/software/grub/manual/grub/grub.html">https://www.gnu.org/software/grub/manual/grub/grub.html]</a><br></span> 。</p></div>
<div class="sect4">
<h5 id="_configuration">コンフィギュレーション<a class="headerlink" href="#_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>GRUBコンフィギュレーションの変更は、defaultsファイル<span class="monospaced">/etc/default/grub</span>または<span class="monospaced">/etc/default/grub.dの</span>config snippetsを介して行われます。コンフィギュレーションの変更後にコンフィギュレーションファイルを再生成するには、以下を実行します:<span class="footnote"><br>[<span class="monospaced">proxmox-boot-toolを</span>使用しているシステムは、<span class="monospaced">update-grub</span>時に<span class="monospaced">proxmox-boot-tool refreshを</span>呼び出します]。<br></span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-grub</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="sysboot_systemd_boot">3.13.5.Systemd-boot<a class="headerlink" href="#sysboot_systemd_boot" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">systemd-boot</span>は軽量な EFI ブートローダです。カーネルと initrd イメージをインストールされている EFI サービスパーティション (ESP) から直接読み込みます。 ESP から直接カーネルを読み込む主な利点は、ストレージにアクセスするためのドライバを再実装する必要がないことです。Proxmox VEでは<a href="#sysboot_proxmox_boot_tool"><span class="monospaced">proxmox-boot-toolを</span></a>使用してESP上の設定を同期させています。</p></div>
<div class="sect4">
<h5 id="sysboot_systemd_boot_config">コンフィギュレーション<a class="headerlink" href="#sysboot_systemd_boot_config" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">systemd-bootは</span>、EFIシステムパーティション(ESP)のルートディレクトリにある<span class="monospaced">loader/loader.conf</span>ファイルで設定します。詳細は<span class="monospaced">loader.conf(5)</span>man ページを参照してください。</p></div>
<div class="paragraph">
<p>各ブートローダ・エントリは、<span class="monospaced">loader/entries/</span>ディレクトリにあるそれ自身のファイルに置かれます。</p></div>
<div class="paragraph">
<p>entry.confの例は以下のようになります<span class="monospaced">（/は</span>ESPのルートを指します）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>タイトル Proxmox バージョン 5.0.15-1-pve オプション root=ZFS=rpool/ROOT/pve-1 boot=zfs linux /EFI/proxmox/5.0.15-1-pve/vmlinuz-5.0.15-1-pve initrd /EFI/proxmox/5.0.15-1-pve/initrd.img-5.0.15-1-pve</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="sysboot_edit_kernel_cmdline">3.13.6.カーネル・コマンドラインの編集<a class="headerlink" href="#sysboot_edit_kernel_cmdline" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>カーネルコマンドラインは、使用するブートローダに応じて以下の箇所で変更できます：</p></div>
<div class="paragraph">
<div class="title">グルッブ</div><p>カーネルコマンドラインは<span class="monospaced">/etc/default/grub</span>ファイルの変数<span class="monospaced">GRUB_CMDLINE_LINUX_DEFAULTに</span>置く必要があります。<span class="monospaced">update-grubを</span>実行すると、その内容が<span class="monospaced">/boot/grub/grub.cfgの</span>すべての<span class="monospaced">linux</span>エントリに追加されます。</p></div>
<div class="paragraph">
<div class="title">システムブート</div><p>変更を適用するには、<span class="monospaced">proxmox-boot-tool refresh</span> を実行して、<span class="monospaced">loader/entries/proxmox-*.conf</span> のすべての設定<span class="monospaced">ファイルのオプション</span>行として設定します。</p></div>
<div class="paragraph">
<p>カーネルパラメータの完全なリストは、<em>https://www.kernel.org/doc/html/v&lt;YOUR-KERNEL-VERSION&gt;/admin-guide/kernel-parameters.html</em> にあります。&lt;YOUR-KERNEL-VERSION&gt; をメジャーバージョンとマイナーバージョンに置き換えてください。例えば、バージョン 6.5 ベースのカーネルの場合、URL は次のようになります: https:<a href="https://www.kernel.org/doc/html/v6.5/admin-guide/kernel-parameters.html">//www.kernel.org/doc/html/v6.5/admin-guide/kernel-parameters.html</a></p></div>
<div class="paragraph">
<p>カーネルのバージョンは、ウェブインターフェイス<em>（Node → Summary</em>）をチェックするか、次のコマンドを実行することで確認できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># uname -r</pre>
</div></div>
<div class="paragraph">
<p>出力の最初の2つの数字を使用してください。</p></div>
</div>
<div class="sect3">
<h4 id="sysboot_kernel_pin">3.13.7.次のBootのKernel-Versionをオーバーライド<a class="headerlink" href="#sysboot_kernel_pin" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>現在デフォルトでないカーネルを選択するには、以下のいずれかの方法があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ブートプロセスの最初に表示されるブートローダーメニューを使用します。</p>
</li>
<li>
<p>
<span class="monospaced">proxmox-boot-tool を使って</span>システムをカーネルバージョンに<span class="monospaced">固定</span>します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>これは、新しいカーネルバージョンとハードウェア間の非互換性を回避するのに役立つはずです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このようなピンはできるだけ早く取り外し、最新のカーネルのセキュリティパッチがすべてシステムに適用されるようにしてください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>例えばバージョン<span class="monospaced">5.15.30-1-pveを</span>恒久的に選択して起動するには、次のように実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel pin 5.15.30-1-pve</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKZUlEQVRoge2aa3BU5RmAn3Pbs7fs
JmwCRGITk0hVLFAtNWoq6pAiU0cKaYfa6ShT+YN4YbQw9F/8QX+UMv6gM3Q6oxMV6TgIbe10Gq2g
cSzDpRaFgmIk4SKB3LP3Pff+SM66m+xuFvEyzvSbeefsbva8+z7nvXzf934RHMfhmzzEr9uAqx3/
B/i6xzceQP6iFDmT1cBxHNzCkFsgBEHIXnNeC1f7u1cN4DiOY9s2rliWhWVZWRDHcbJGC4KAJElI
koQoioii6IiieFUgnxvAtm3HNdg0Tbq6uuju7ubYsWP09vYyMjKCpmmoqkokEqGhoYGFCxfS2tpK
W1sbiqJkRZIkZxLoikGEK50H3CdumiZ9fX3s3LmT3bt3U1V3A0033cKc2nkEQxV4PSqSJOI4Dpqu
k0gkGLx8kZ4T7zF87iSrV69m3bp1NDY2oqoqHo8HWZa5Uo9cEYBt245lWRiGQUdHB9u2beOe1Y8w
/6bFVAT9xJJpYvEUiVSGjG5gmBY4DqIoonoUfF4PoYAfRRE5/8kp3njlD6xfv54tW7YQCATw+Xyu
R8r2RtkAtm07pmly5MgRHn/8cZSaZpbcfjd+n5f+wVEGRqJkdCMv3vME8t77vB6qQn4+OX6YsXPH
2bp1Ky0tLQQCAVRVdb0xI0RZZdQ1ft++fSxbtozrlqzgrnvvI5nRee9UL+f6h9B0A1EQEIsBiOKE
TL7XdJOBkTg1jYtouu1+1qxZw549e4hGo6TTaUzTxLbtGZ/ujEmca/wvHnqYnz/2DLNn19B74TID
I9HPjCvwlLMls4RHdMNC8IRZ8dBmnnp6E7Zts2rVKgB8Ph+yLDulPFEyhBzHcUzT5PDhwyxbtow1
j3YQqanmozOfEk2kChuLQ3x0lGQihmM7qF4vVdWz8fr9hYFyoK30OG/ufpYXXniB1tZWwuEwXq8X
WZaLJnZJAMuyHE3TuPPOO2lcsoLGpmZO9ZzPM37q0x0ZuISla2xY2077j5ZSFargZM9Znt97gE8u
DBb3ziRIfPAcF4/v59VXX6W6uppQKISqqkiSVBCgaA64odPR0YFS00xjUzNnLlwmmkznxbKYI45j
k04mefaZJ3j04VXMqZ6Fx6Pw3QXXs/3Xv6Tp2rnTALL3T8wDBCLz8M2Zz/bt24nFYjPmQ0EAt9b3
9fWxbds2ltxxD0NjMQbdmC+QlIIgIIkSoWCAH971/Wk6PYrCg/f/oHiVmhSP6qWm/gY6Ozvp6ekh
mUyi6zq2bWeXK+UAYFkWO3fu5N72dQT8Pi5cGp6xuoiiiBoMktH0gl5trp87DbqQBEMRbl32U3bt
2kUikUDTtOzypGwAwzDYvXs3316wiEuDoxiGWVaZrAjP4qW/vFUQ4NAHPdlwKQWiqF4qa+ro6uoi
kUiQTqcxDKM8ADd8Xn/9dWZdewMVwSCDo7GicT8NSBTZt/8oT259jgOHThBNpIgmUjy3dz/P7z2Q
r2My7gs9FNUXoPpbN9Ld3Z0FKBRG0+YBN3y6u7tpWnAr8WR6+gxLfr03TYNMMolhGFimiWVbXDzb
x4G3/4XgOIiyTF3DdW45nHG2RhBQfX6q65o5evQoy5cvn9BtWUiSRG5FLQhg2zbHjh3j+tsfKFrv
3R8EGL7UT23NLNraWmi+ro5r5kSYHakiVOHH7/OiyDKxZIonf9NJIpWZMQcEwOPx4vNXcPr0B2Qy
mdxEzrO34ExsWRa9vb3csjzEaP9w1sUFZ1RBQJJk/vjbTdTXzS2kDoBQwI9HmcEDOSJ7PAiiSH9/
P7quY5omlmVN01soB3Ach5GREbyqiqabM8a+NxAglcmvPOf7h9jR+WdOfNQLwNtHTzIeT+XFfdGC
IAiIogSOQzQaxTRNdy4ozwO2baNpGpIkY1j2RAJTeJ0jCAKRmtmcPHORmkglxz48y/5DJ3jrnUPM
b7iGxx7+MZZls/efR0rG/VQPgwMC2eQtZHxRAABVVbM3lEpgV178azcvvfYOgiCgZTJomsbGR9oR
BIHzl4YYGo2VlcCuWOaE5xVFwbbtqVHiCJOZXBQgEomg6zqSKOIUMrqER+LRKItvaubW78wH4NLQ
WNmx7+q1DB1ZkgmFQohifqS7xhcFEEWRhoYGEokEqkeeWPLmurcEiGPbpJJJfvbAPVl95/qHJyYv
mH5/EdG1FA5QW1ubzZvc8pm1deoHroKFCxcycPkiPlWdnmC5iTxlVk2n0wT9Xu69Y3FW51g8OfH3
ye+WnAgnRcukyKQSNDU1Icty7n65NACAJEm0trbSc/zfVAT9JZ/U1NWklslwx/duxqMoWX0Zzcy/
bwr0VCDT0NDTSS6f/ZBFixZlN/ySJJXnAVEUaWtrY6DvOIoiFlx5FhPLsrjl5uvzdPq8nsLfL6I3
FR1FlhUG+v5LS0tLtmtRlgcEYaL5pCgKq1ev5lzPKfxeT8FwKSQA115Tk6eztjpcsubn6rUMnfj4
MLHxIZYuXYrX683rVpQDIIiiiKIorFu3jn+8vIPKCt+0cCkG4m4Bc0fd3OqCoVIIJDo2iCQrvPu3
F1m5cmVeu6VQz6hgDrj1t7GxkfXr1/Px+wdRPcr02C+wmgxVVnLm3KU8ffNmVxX03lSgRHSEVGyc
oYt9tLe3U19fTzAYzAKUVYVyw0hVVbZs2cJw7/uYyZGSIeCCeFWVd499jGGaWX1zq8OfrYOKeC+T
ijM+cBHHsRju/Q9r164lFAoRDAbdPfEVAQiiKOLxeAgEAmzdupW/v/A7RLPEyjTHuGjKYMfLb3B5
eBzdMNl/+CSmZReN+0wqztDFs4iSxIE9O9mwYQPhcJhwOEwgEMhN4GkEZXUlYrEYe/bs4elfbWLF
Q5tQKyJlVaRy+kSJ6AhjA58iihJdf9rBUxufYPny5cyZM6esrkTJxpabzIFAgFWrVmHbNps3b+bu
n6wnVF2H4lHLmlULgZiGTmxkgGR8DNu2efOV3/PUxo20tbURiUSorKwkEAhkk7fYmLE36rZX0uk0
0WiUgwcP0tHRQcW8G5ndsIBgaBYe1TvtyRYDMXWNZGyU+Ngwkiwz+GkfQ73vsWHDBhYvXkwkEmHW
rFmEw2G3M1eyR1pWczcXIh6PMz4+zvbt2+ns7OS2+x6kanYdqjeA1xdAUb3IioIoSjg42JaJaejo
mTRaOoGeTiHJEvGxYd55rZP29nbWrl1LOBymqqqKyspKKioqyjK+bIBcCE3TSCaTxGIxenp62LVr
F11dXdTUL2BO/Xx8/goEUcSxbYSJ2EGS5IlzgnSC/r4PuXzmOEuXLmXlypXU19cTCoUIh8OEQqEr
7k5/7vOBdDpNMpkkkUiQSCTo7u7m6NGjnD59mv7+fqLRKIZhoCgKoVCI2tpampqaWLRoES0tLfh8
Pvx+P8FgkGAw+OWfD7gj94RG13U0TSOdTpNOp8lMbmQ0TcvbArrrK1mW8Xg8eL3e7BLB5/N9dSc0
uSP3jMwwjKy4G3AXwB0ugAsx5YzMndW//DOy3OFMjGwrxrKs7NX9LBfAneFFUcxec6rU5zqpvCqA
qTCT16/0nPgLA/i6xjf+Xw3+B2ll/uiqTaJTAAAAAElFTkSuQmCC" />
</td>
<td class="content">もしあなたのシステムが<span class="monospaced">proxmox-boot-tool を</span>同期に使っていなければ、最後に<span class="monospaced">proxmox-boot-tool のリフレッシュ</span>コールをスキップすることもできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>また、カーネルバージョンを次のシステムブート時にのみブートするように設定することもできます。 これは例えば、最初にバージョンを<span class="monospaced">固定</span>する原因となった問題が、更新されたカーネルによって解決されたかどうかをテストするのに便利です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel pin 5.15.30-1-pve --next-boot</pre>
</div></div>
<div class="paragraph">
<p>固定されているバージョン設定を削除するには、<span class="monospaced">unpin</span>サブコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel unpin</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">unpinには</span> <span class="monospaced">--next-boot</span>オプションもありますが、これは<span class="monospaced">--next-bootで</span>設定したpinされたバージョンをクリアするために使用します。これはブート時に自動的に行われるため、手動で実行してもほとんど意味がありません。</p></div>
<div class="paragraph">
<p>ピン留めされたバージョンを設定またはクリアした後は、<span class="monospaced">refresh</span>サブコマンドを実行してESPのコンテンツと設定を同期させる必要もあります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">proxmox-boot-toolが</span>管理されているシステムで、対話的にツールを呼び出すと、自動的にプロンプトが表示されます。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool refresh</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysboot_secure_boot">3.13.8.セキュアブート<a class="headerlink" href="#sysboot_secure_boot" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE 8.1 以降、署名付きパッケージと<span class="monospaced">proxmox-boot-tool</span> の統合により、セキュアブートがすぐにサポートされます。</p></div>
<div class="paragraph">
<p>セキュアブートの動作には以下のパッケージが必要です。proxmox-secure-boot-support' メタパッケージを使えば一度にインストールできます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">shim-signed</span>（Microsoftによって署名されたshimブートローダ）</p>
</li>
<li>
<p>
<span class="monospaced">shim-helpers-amd64-signed</span>(フォールバックブートローダと MOKManager、Proxmox により署名済み)</p>
</li>
<li>
<p>
<span class="monospaced">grub-efi-amd64-signed</span>(GRUB EFI ブートローダ、Proxmox により署名済み)</p>
</li>
<li>
<p>
<span class="monospaced">proxmox-kernel-6.X.Y-Z-pve-signed</span>(Proxmox により署名されたカーネルイメージ)</p>
</li>
</ul></div>
<div class="paragraph">
<p>他のブートローダは現在セキュアブートコード署名の対象になっていないため、GRUBのみがブートローダとしてサポートされています。</p></div>
<div class="paragraph">
<p>Proxmox VEを新規インストールすると、自動的に上記のパッケージがすべて含まれます。</p></div>
<div class="paragraph">
<p>セキュアブートの仕組みやセットアップのカスタマイズ方法の詳細については、<a href="https://pve.proxmox.com/wiki/Secure_Boot_Setup">wikiを</a>ご覧ください。</p></div>
<div class="sect4">
<h5 id="_switching_an_existing_installation_to_secure_boot">既存のインストールをセキュアブートに切り替える<a class="headerlink" href="#_switching_an_existing_installation_to_secure_boot" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">これは、正しく行われないと、場合によっては起動不能なインストールにつながる可能性があります。ホストを再インストールすると、セキュアブートが利用可能であれば、余分な操作なしに自動的にセットアップが行われます。<strong>Proxmox VEホストのバックアップが正常に動作し、テスト済みであることを確認してください！</strong></td>
</tr></table>
</div>
<div class="paragraph">
<p>Proxmox VE をゼロから再インストールしなくても、必要に応じて既存の UEFI インストールをセキュアブートに切り替えることができます。</p></div>
<div class="paragraph">
<p>まず、システムがすべて最新であることを確認してください。次に<span class="monospaced">proxmox-secure-boot-support を</span>インストールします。GRUB はデフォルトの shim 経由で起動するために必要な EFI ブートエントリーを自動的に作成します。</p></div>
<div class="paragraph">
<div class="title">システムドブート</div><p><span class="monospaced">systemd-bootが</span>ブートローダとして使用されている場合(<a href="#sysboot_determine_bootloader_used">どのブートローダが使用されているかを判断するを</a>参照)、いくつかの追加設定が必要です。これはProxmox VEがZFS-on-rootでインストールされた場合のみです。</p></div>
<div class="paragraph">
<p>後者を確認するには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># findmnt /</pre>
</div></div>
<div class="paragraph">
<p>ホストが本当にルートファイルシステムとしてZFSを使用している場合、<span class="monospaced">FSTYPE</span>列には<span class="monospaced">zfsが</span>含まれるはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>TARGET SOURCE FSTYPE OPTIONS / rpool/ROOT/pve-1 zfs rw,relatime,xattr,noacl,casesensitive</pre>
</div></div>
<div class="paragraph">
<p>次に、適切なESP（EFIシステムパーティション）を見つけなければなりません。これは<span class="monospaced">lsblk</span>コマンドを使って次のように実行できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsblk -o +FSTYPE</pre>
</div></div>
<div class="paragraph">
<p>出力は次のようになるはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS FSTYPE sda 8:0 0 32G 0 disk ├─sda1 8:1 0 1007K 0 part ├─sda2 8:2 0 512M 0 part vfat └─sda3 8:3 0 31.5G 0 part zfs_member sdb 8:16 0 32G 0 disk ├─sdb1 8:17 0 1007K 0 part ├─sdb2 8:18 0 512M 0 part vfat └─sdb3 8:19 0 31.5G 0 part zfs_member</pre>
</div></div>
<div class="paragraph">
<p>この場合、パーティション<span class="monospaced">sda</span>2と<span class="monospaced">sdb2が</span>ターゲットです。パーティションのサイズは512Mで、<span class="monospaced">FSTYPEは</span> <span class="monospaced">vfat</span>です。</p></div>
<div class="paragraph">
<p>これらのパーティションは、<span class="monospaced">proxmox-boot-tool を使って</span> GRUB で起動するように適切に設定する必要があります。このコマンド(例として<span class="monospaced">sda2 を</span>使用)は個々の ESP に対して個別に実行する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool init /dev/sda2 grub</pre>
</div></div>
<div class="paragraph">
<p>その後、以下のコマンドを実行して、セットアップの正常性をチェックできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># efibootmgr -v</pre>
</div></div>
<div class="paragraph">
<p>このリストには、次のようなエントリーが含まれているはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[...] Boot0009* proxmox HD(2,GPT,...,0x800,0x100000)/File(￤proxmox￤shimx64.efi[...])</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">古い<span class="monospaced">systemd-boot</span>ブートローダは維持されますが、GRUB が優先されます。こうすることで、セキュアブートモードで GRUB を使って起動しても何らかの理由でうまくいかない場合でも、セキュアブートをオフにした<span class="monospaced">systemd-boot を使って</span>システムを起動することができます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>これでホストを再起動し、UEFI ファームウェアセットアップユーティリティでセキュアブートを有効にすることができます。</p></div>
<div class="paragraph">
<p>再起動すると、<span class="monospaced">proxmox</span>という新しいエントリが UEFI ファームウェアブートメニューで選択できるようになっていて、署名済みの EFI shim を使って起動するようになっているはずです。</p></div>
<div class="paragraph">
<p>何らかの理由で UEFI ブートメニューに<span class="monospaced">proxmox</span>エントリが見つからない場合、(ファームウェアでサポートされていれば) カスタムブートエントリとしてファイル<span class="monospaced"> ￤proxmox￤shimx64.efi</span>を追加することで、手動で追加してみることができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">いくつかの UEFI ファームウェアは再起動時に<span class="monospaced">proxmox</span>ブートオプションを落とすことが知られています。 これは<span class="monospaced">proxmox</span>ブートエントリがディスク上の GRUB インストールを指していて、ディスク自体がブートオプションになっていない場合に起こります。可能であれば、UEFI ファームウェアセットアップユーティリティでディスクをブートオプションに追加して<span class="monospaced">proxmox-boot-tool を</span>もう一度実行してみてください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">カスタムキーを登録するには、付属の<a href="https://pve.proxmox.com/wiki/Secure_Boot_Setup#Setup_instructions_for_db_key_variant">Secure Boot wiki ページを</a>参照してください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_using_dkms_third_party_modules_with_secure_boot">セキュアブートでの DKMS/サードパーティーモジュールの使用<a class="headerlink" href="#_using_dkms_third_party_modules_with_secure_boot" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>セキュアブートが有効になっているシステムでは、カーネルは信頼できる鍵で署名されていないモジュールのロードを拒否します。カーネルパッケージとともに出荷されるデフォルトのモジュールセットは、カーネルイメージに埋め込まれたエフェメラルキーで署名されており、特定のバージョンのカーネルイメージで信頼されています。</p></div>
<div class="paragraph">
<p>DKMS または手動でビルドしたモジュールなど、他のモジュールをロードするには、セキュアブートスタックに信頼された鍵で署名する必要があります。これを実現する最も簡単な方法は、<span class="monospaced">mokutil</span> を使用してそれらをマシンオーナーキー<span class="monospaced">(MOK</span>) として登録することです。</p></div>
<div class="paragraph">
<p><span class="monospaced">dkms</span>ツールは、<span class="monospaced">/var/lib/dkms/mok.keyと</span> <span class="monospaced">/var/lib/dkms/mok.pubに</span>キーペアと証明書を自動的に生成し、ビルドとインストールを行うカーネルモジュールの署名に使用します。</p></div>
<div class="paragraph">
<p>証明書の内容は</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># openssl x509 -in /var/lib/dkms/mok.pub -noout -text</pre>
</div></div>
<div class="paragraph">
<p>を作成し、以下のコマンドを使用してシステムに登録します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mokutil --import /var/lib/dkms/mok.pub input password: input password again：</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">mokutil</span>コマンドは(一時的な)パスワードを2回要求しますので、このパスワードはプロセスの次のステップでもう1回入力する必要があります！システムを再起動すると、自動的に<span class="monospaced">MOKManager</span>EFIバイナリが起動し、<span class="monospaced">mokutilを</span>使用して登録を開始するときに選択したパスワードを使用して、キー/証明書を検証し、登録を確認することができます。その後、カーネルは（登録された<span class="monospaced">MOKで</span>署名された）DKMSでビルドされたモジュールのロードを許可するはずです。必要であれば、<span class="monospaced">MOKは</span>カスタムEFIバイナリやカーネルイメージに署名するためにも使用できます。</p></div>
<div class="paragraph">
<p>DKMSで管理されていないカスタム/サードパーティモジュールにも同じ手順を使用できますが、その場合は鍵/証明書の生成と署名の手順を手動で行う必要があります。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kernel_samepage_merging">
<span>3.14.カーネル・サメページ・マージング (KSM)</span> <a class="headerlink" href="#kernel_samepage_merging" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Kernel Samepage Merging (KSM)はLinuxカーネルが提供するオプションのメモリ重複排除機能で、Proxmox VEではデフォルトで有効になっています。KSMは、物理メモリページの範囲をスキャンして同一のコンテンツを探し、それらにマップされている仮想ページを特定することで機能します。同一のページが見つかった場合、対応する仮想ページはすべて同じ物理ページを指すように再マップされ、古いページは解放されます。仮想ページは "コピーオンライト "としてマークされ、それへの書き込みはメモリの新しい領域に書き込まれ、共有された物理ページはそのまま残されます。</p></div>
<div class="sect3">
<h4 id="_implications_of_ksm">3.14.1.KSMの意味<a class="headerlink" href="#_implications_of_ksm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>KSMは、仮想化環境におけるメモリ使用量を最適化することができます。これは、同様のオペレーティング・システムやワークロードを実行する複数のVMが、多くの共通メモリ・ページを共有する可能性があるためです。</p></div>
<div class="paragraph">
<p>しかし、KSMはメモリ使用量を削減できる一方で、VMをサイドチャネル攻撃にさらす可能性があるため、セキュリティ上のリスクも伴います。研究では、KSMの特定の特性を悪用することで、同じホスト上の2つ目のVMを介して、実行中のVMに関する情報を推測することが可能であることが示されています。</p></div>
<div class="paragraph">
<p>したがって、ホスティングサービスを提供するためにProxmox VEを使用している場合は、ユーザーに追加のセキュリティを提供するために、KSMを無効にすることを検討する必要があります。 さらに、KSMを無効にすることが法律で義務付けられている場合がありますので、お住まいの国の規制を確認してください。</p></div>
</div>
<div class="sect3">
<h4 id="_disabling_ksm">3.14.2.KSM<a class="headerlink" href="#_disabling_ksm" title="Permalink to this heading"></a>の無効化</h4>
<div class="paragraph">
<p>KSMがアクティブかどうかを確認するには、以下の出力をチェックします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># systemctl status ksmtuned</pre>
</div></div>
<div class="paragraph">
<p>もしそうなら、すぐに無効にできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># systemctl disable --now ksmtuned</pre>
</div></div>
<div class="paragraph">
<p>最後に、現在マージされているすべてのページをアンマージするには、以下を実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># echo 2 &gt; /sys/kernel/mm/ksm/run</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_gui">
4.グラフィカル・ユーザー・インターフェース<a class="headerlink" href="#chapter_gui" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEはシンプルです。別の管理ツールをインストールする必要はなく、すべてウェブブラウザ（最新のFirefoxまたはGoogle Chromeが望ましい）から行うことができます。ゲストコンソールへのアクセスには、組み込みのHTML5コンソールが使用されます。別の方法として、<a href="https://www.spice-space.org/">SPICE を</a>使用することもできます。</p></div>
<div class="paragraph">
<p>Proxmoxクラスタファイルシステム(pmxcfs)を使用しているため、任意のノードに接続してクラスタ全体を管理することができます。各ノードはクラスタ全体を管理できます。専用のマネージャノードは必要ありません。</p></div>
<div class="paragraph">
<p>ウェブベースの管理インターフェイスは、最新のブラウザで使用できます。Proxmox VEがモバイルデバイスからの接続を検出すると、よりシンプルなタッチベースのユーザーインターフェースにリダイレクトされます。</p></div>
<div class="paragraph">
<p>ウェブインターフェイスには、<a href="https://youripaddress:8006">https://youripaddress:800</a>6（デフォルトログインは<em>rootで</em>、パスワードはインストールプロセス中に指定されます）を介してアクセスできます。</p></div>
<div class="sect2">
<h3 id="_features">
<span>4.1.特徴</span> <a class="headerlink" href="#_features" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
Proxmox VEクラスタのシームレスな統合と管理</p>
</li>
<li>
<p>
リソースの動的更新のためのAJAX技術</p>
</li>
<li>
<p>
SSL暗号化(https)によるすべての仮想マシンとコンテナへのセキュアなアクセス</p>
</li>
<li>
<p>
数百から数千のVMを処理できる高速な検索主導型インターフェース</p>
</li>
<li>
<p>
セキュアな HTML5 コンソールまたは SPICE</p>
</li>
<li>
<p>
すべてのオブジェクト（VM、ストレージ、ノードなど）に対するロールベースの権限管理</p>
</li>
<li>
<p>
複数の認証ソースのサポート（ローカル、MS ADS、LDAPなど</p>
</li>
<li>
<p>
二要素認証（OATH、Yubikey）</p>
</li>
<li>
<p>
ExtJS 7.x JavaScriptフレームワークをベースにしています。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_login">
<span>4.2.ログイン</span> <a class="headerlink" href="#_login" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-login-window.png">
<img src="images/screenshot/gui-login-window.png" alt="screenshot/gui-login-window.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>サーバに接続すると、まずログインウィンドウが表示されます。 Proxmox VEは様々な認証バックエンド<em>(Realm</em>)をサポートしており、ここで言語を選択することができます。GUIは20以上の言語に翻訳されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">下部のチェックボックスを選択すると、クライアント側でユーザー名を保存できます。これにより、次回ログイン時に入力の手間が省けます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_gui_overview">
<span>4.3.GUIの概要</span> <a class="headerlink" href="#_gui_overview" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-summary.png">
<img src="images/screenshot/gui-datacenter-summary.png" alt="screenshot/gui-datacenter-summary.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEのユーザーインターフェースは4つの領域から構成されています。</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
ヘッダー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
上部。ステータス情報が表示され、最も重要なアクションのボタンがあります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
リソースツリー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
左側。特定のオブジェクトを選択できるナビゲーションツリー。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
コンテンツパネル<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
中央の領域。選択されたオブジェクトは、ここに設定オプションとステータスを表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ログパネル<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
下部にあります。最近のタスクのログエントリが表示されます。これらのログエントリをダブルクリックして詳細を表示したり、実行中のタスクを中止したりできます。</p>
</td>
</tr>
</table></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">リソースツリーとログパネルのサイズを縮小・拡大したり、ログパネルを完全に非表示にすることができます。これは、小さなディスプレイで作業していて、他のコンテンツを表示するためのスペースが欲しい場合に便利です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_header">4.3.1.ヘッダー<a class="headerlink" href="#_header" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>左上にはProxmoxのロゴがあります。その隣には現在稼働中のProxmox VEのバージョンが表示されます。近くの検索バーでは、特定のオブジェクト（VM、コンテナ、ノードなど）を検索できます。これはリソースツリーでオブジェクトを選択するよりも速い場合があります。</p></div>
<div class="paragraph">
<p>ヘッダーの右側には4つのボタンがあります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
ドキュメンテーション<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
リファレンスドキュメントを表示する新しいブラウザウィンドウを開きます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
VMの作成<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
仮想マシンの作成ウィザードを開きます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
CT作成<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
コンテナ作成ウィザードを開きます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ユーザーメニュー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
現在ログインしているユーザーのIDが表示され、クリックするとユーザー固有のオプションメニューが開きます。</p>
<div class="paragraph">
<p>ユーザーメニューには、ローカルUI設定を提供する「<em>マイ設定」</em>ダイアログがあります。その下には、<em>TFA</em>（二要素認証）と<em>パスワード</em>セルフサービスのショートカットがあります。また、<em>言語と</em> <em>カラーテーマを</em>変更するオプションもあります。最後に、メニューの一番下に<em>ログアウト</em>オプションがあります。</p></div>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="gui_my_settings">4.3.2.マイセッティング<a class="headerlink" href="#gui_my_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-my-settings.png">
<img src="images/screenshot/gui-my-settings.png" alt="screenshot/gui-my-settings.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><em>マイ設定］</em>ウィンドウでは、ローカルに保存された設定を設定できます。これには<em>ダッシュボード・ストレージが</em>含まれ、データセンター・サマリーで表示される合計量にカウントする特定のストレージを有効または無効にできます。どのストレージにもチェックが入っていない場合は、すべてのストレージの合計になります。</p></div>
<div class="paragraph">
<p>ダッシュボード設定の下には、保存されたユーザー名とそれをクリアするボタン、GUI内のすべてのレイアウトをデフォルトにリセットするボタンがあります。</p></div>
<div class="paragraph">
<p>右側には<em>xterm.js Settings</em> があります。これらには以下のオプションがあります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
フォントファミリー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
xterm.jsで使用するフォント（例：Arial）。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
フォントサイズ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
使用するフォントサイズ。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
文字間隔<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
テキストの文字間隔を増減します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ラインの高さ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
線の絶対高さを指定します。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="_resource_tree">4.3.3.リソースツリー<a class="headerlink" href="#_resource_tree" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これがメインのナビゲーションツリーです。ツリーの上部では、いくつかの定義済みビューを選択することができます。デフォルトのビューは<strong>サーバビューで</strong>、以下のオブジェクトタイプが表示されます：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
データセンター<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
クラスタ全体の設定を含みます（すべてのノードに関連します）。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ノード<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ゲストが実行されるクラスタ内のホストを表します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ゲスト<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
VM、コンテナ、テンプレート。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ストレージ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
データ保管。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
プール<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
プールを使用してゲストをグループ化し、管理を簡素化することが可能です。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>以下のビュータイプが利用可能です：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
サーバービュー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
あらゆる種類のオブジェクトをノード別に表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
フォルダ表示<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
あらゆる種類のオブジェクトを、オブジェクトの種類ごとに分類して表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
プールビュー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
プールごとにグループ化されたVMとコンテナを表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
タグ ビュー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
タグでグループ化されたVMとコンテナを表示します。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="_log_panel">4.3.4.ログパネル<a class="headerlink" href="#_log_panel" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ログパネルの主な目的は、クラスタで現在何が行われているかを表示することです。新しいVMを作成するようなアクションはバックグラウンドで実行され、このようなバックグラウンドジョブを<em>タスクと</em>呼びます。</p></div>
<div class="paragraph">
<p>このようなタスクからの出力はすべて別のログファイルに保存されます。タスクログエントリーをダブルクリックするだけで、そのログを見ることができます。そこで実行中のタスクを中止することもできます。</p></div>
<div class="paragraph">
<p>ここではすべてのクラスタノードから最新のタスクが表示されることに注意してください。そのため、誰かが他のクラスタノードで作業しているのをリアルタイムで確認することができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">リストを短くするために、古いタスクと終了したタスクをログパネルから削除します。しかし、ノードパネル内の<em>タスク履歴で</em>これらのタスクを見つけることができます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>短時間で実行されるアクションの中には、すべてのクラスタメンバにログを送信するだけのものもあります。これらのメッセージは<em>クラスタログパネルで</em>見ることができます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_content_panels">
<span>4.4.コンテンツパネル</span> <a class="headerlink" href="#_content_panels" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>リソースツリーから項目を選択すると、対応するオブジェクトの設定とステータス情報がコンテンツパネルに表示されます。以下のセクションでは、この機能の概要を説明します。より詳細な情報については、リファレンス・ドキュメントの対応する章を参照してください。</p></div>
<div class="sect3">
<h4 id="_datacenter">4.4.1.データセンター<a class="headerlink" href="#_datacenter" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-search.png">
<img src="images/screenshot/gui-datacenter-search.png" alt="screenshot/gui-datacenter-search.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>データセンター・レベルでは、クラスタ全体の設定と情報にアクセスできます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>検索：</strong>ノード、VM、コンテナ、ストレージデバイス、プールをクラスタ全体で検索します。</p>
</li>
<li>
<p>
<strong>Summary：</strong>クラスタの健全性とリソースの使用状況の概要を示します。</p>
</li>
<li>
<p>
<strong>クラスタ:</strong>クラスタの作成または参加に必要な機能と情報を提供します。</p>
</li>
<li>
<p>
<strong>オプション：</strong>クラスタ全体のデフォルト設定を表示および管理します。</p>
</li>
<li>
<p>
<strong>ストレージ:</strong>クラスタストレージを管理するためのインターフェイスを提供します。</p>
</li>
<li>
<p>
<strong>バックアップ：</strong>バックアップジョブをスケジュールします。これはクラスタ全体で動作するので、スケジューリング時にVM/コンテナがクラスタ上のどこにあるかは関係ありません。</p>
</li>
<li>
<p>
<strong>レプリケーション：</strong>レプリケーションジョブの表示と管理。</p>
</li>
<li>
<p>
<strong>権限：</strong>ユーザー、グループ、APIトークンの権限、LDAP、MS-AD、2要素認証を管理します。</p>
</li>
<li>
<p>
<strong>HA:</strong>Proxmox VE High Availability を管理します。</p>
</li>
<li>
<p>
<strong>ACME：</strong>サーバーノードにACME（Let's Encrypt）証明書を設定します。</p>
</li>
<li>
<p>
<strong>ファイアウォール:</strong>Proxmoxファイアウォールのクラスタ全体の設定とテンプレートの作成。</p>
</li>
<li>
<p>
<strong>メトリックサーバ:</strong>Proxmox VEの外部メトリックサーバを定義します。</p>
</li>
<li>
<p>
<strong>通知:</strong>Proxmox VEの通知動作とターゲットを設定します。</p>
</li>
<li>
<p>
<strong>サポート：</strong>サポート契約に関する情報を表示します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_nodes">4.4.2.ノード<a class="headerlink" href="#_nodes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-summary.png">
<img src="images/screenshot/gui-node-summary.png" alt="screenshot/gui-node-summary.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>クラスタ内のノードは、このレベルで個別に管理できます。</p></div>
<div class="paragraph">
<p>トップヘッダには、<em>Reboot</em>、<em>Shutdown</em>、<em>Shell</em>、<em>Bulk Actions</em>、<em>Helpなどの</em>便利なボタンがあります。<em>Shellには</em>、<em>noVNC</em>、<em>SPICE</em>、<em>xterm.jsの</em>オプションがあります。<em>Bulk Actionsには</em>、<em>Bulk Start</em>、<em>Bulk Shutdown</em>、<em>Bulk Migrateの</em>オプションがあります。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>検索：</strong>ノードのVM、コンテナ、ストレージデバイス、プールを検索します。</p>
</li>
<li>
<p>
<strong>Summary:</strong>ノードのリソース使用状況の概要を表示します。</p>
</li>
<li>
<p>
<strong>注釈:</strong> <a href="#markdown_basics">Markdown構文で</a>カスタムコメントを記述します。</p>
</li>
<li>
<p>
<strong>シェル：</strong>ノードのシェル・インターフェースへのアクセス。</p>
</li>
<li>
<p>
<strong>システム：</strong>ネットワーク、DNS、時刻の設定、シスログへのアクセス。</p>
</li>
<li>
<p>
<strong>アップデート：</strong>システムをアップグレードし、利用可能な新しいパッケージを表示します。</p>
</li>
<li>
<p>
<strong>ファイアウォール：</strong>特定のノードのProxmoxファイアウォールを管理します。</p>
</li>
<li>
<p>
<strong>ディスク：</strong>接続されているディスクの概要を把握し、その使用方法を管理します。</p>
</li>
<li>
<p>
<strong>Ceph:</strong>は、ホストにCephサーバをインストールしている場合にのみ使用します。この場合、ここでCephクラスタを管理し、ステータスを確認できます。</p>
</li>
<li>
<p>
<strong>レプリケーション：</strong>レプリケーションジョブの表示と管理。</p>
</li>
<li>
<p>
<strong>タスク履歴：</strong>過去のタスクのリストを見ることができます。</p>
</li>
<li>
<p>
<strong>サブスクリプション：</strong>サブスクリプションキーをアップロードし、サポートケースで使用するためのシステムレポートを生成します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_guests">4.4.3.ゲスト<a class="headerlink" href="#_guests" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-summary.png">
<img src="images/screenshot/gui-qemu-summary.png" alt="screenshot/gui-qemu-summary.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ゲストには2種類あり、どちらもテンプレートに変換することができます。 1つはカーネルベースの仮想マシン（KVM）で、もう1つはLinuxコンテナ（LXC）です。 これらのナビゲーションはほとんど同じで、一部のオプションだけが異なります。</p></div>
<div class="paragraph">
<p>さまざまなゲスト管理インターフェイスにアクセスするには、左側のメニューからVMまたはコンテナを選択します。</p></div>
<div class="paragraph">
<p>ヘッダには、電源管理、マイグレーション、コンソールへのアクセスとタイプ、クローニング、HA、ヘルプなどのコマンドを含んでいます。 これらのボタンの中にはドロップダウンメニューを含んでいるものもあります。例えば、<em>Shutdown</em>には他の電源オプションも含まれていますし、<em>Console</em>には<em>SPICE</em>、<em>noVNC</em>、<em>xterm.js</em> といった異なるコンソールタイプが含まれています。</p></div>
<div class="paragraph">
<p>右側のパネルには、左側のメニューから選択された項目のインターフェイスが含まれています。</p></div>
<div class="paragraph">
<p>使用可能なインターフェースは以下の通り。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Summary：</strong>VMのアクティビティの簡単な概要と、<a href="#markdown_basics">Markdown構文</a>コメント用の<span class="monospaced">Notes</span>フィールドを提供します。</p>
</li>
<li>
<p>
<strong>コンソール：</strong>VM/コンテナの対話型コンソールにアクセスできます。</p>
</li>
<li>
<p>
<strong>(KVM)Hardware:</strong>KVM VMで使用可能なハードウェアを定義します。</p>
</li>
<li>
<p>
<strong>(LXC)Resources：</strong>LXCで使用可能なシステムリソースを定義します。</p>
</li>
<li>
<p>
<strong>(LXC)Network：</strong>コンテナのネットワーク設定を行います。</p>
</li>
<li>
<p>
<strong>(LXC)DNS：</strong>コンテナのDNS設定を構成します。</p>
</li>
<li>
<p>
<strong>オプション：</strong>ゲストのオプションを管理します。</p>
</li>
<li>
<p>
<strong>タスク履歴：</strong>選択したゲストに関連する過去のすべてのタスクを表示します。</p>
</li>
<li>
<p>
<strong>(KVM）モニタ：</strong>KVMプロセスへの対話型通信インタフェース。</p>
</li>
<li>
<p>
<strong>バックアップ：</strong>システムバックアップの作成と復元。</p>
</li>
<li>
<p>
<strong>レプリケーション：</strong>選択したゲストのレプリケーションジョブを表示および管理します。</p>
</li>
<li>
<p>
<strong>スナップショット：</strong>VMスナップショットの作成とリストア。</p>
</li>
<li>
<p>
<strong>ファイアウォール：</strong>VMレベルでファイアウォールを設定します。</p>
</li>
<li>
<p>
<strong>権限：</strong>選択したゲストの権限を管理します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_storage">4.4.4.ストレージ<a class="headerlink" href="#_storage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-storage-summary-local.png">
<img src="images/screenshot/gui-storage-summary-local.png" alt="screenshot/gui-storage-summary-local.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ゲストインターフェイスと同様に、ストレージ用のインターフェイスは、左側にある特定のストレージ要素用のメニューと、右側にあるこれらの要素を管理するためのインターフェイスで構成されています。</p></div>
<div class="paragraph">
<p>このビューでは、2つのパーティションに分割されたビューがあります。 左側にはストレージオプションがあり、右側には選択したオプションの内容が表示されます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>概要：</strong>ストレージの種類、使用状況、保存されているコンテンツなど、ストレージに関する重要な情報が表示されます。</p>
</li>
<li>
<p>
<strong>コンテンツ：</strong>バックアップ、ISOイメージ、CTテンプレートなど、ストレージが保存する各コンテンツタイプのメニュー項目。</p>
</li>
<li>
<p>
<strong>権限：</strong>ストレージの権限を管理します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_pools">4.4.5.プール<a class="headerlink" href="#_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-pool-summary-development.png">
<img src="images/screenshot/gui-pool-summary-development.png" alt="screenshot/gui-pool-summary-development.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>繰り返しますが、プールビューは2つのパーティションで構成されています：左側にメニュー、右側に各メニュー項目に対応するインターフェース。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>概要：</strong>プールの説明を表示します。</p>
</li>
<li>
<p>
<strong>Members：</strong>プールメンバー（ゲストとストレージ）の表示と管理。</p>
</li>
<li>
<p>
<strong>Permissions:</strong>プールの権限を管理します。</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="gui_tags">
<span>4.5.タグ</span> <a class="headerlink" href="#gui_tags" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-summary-tags-edit.png">
<img src="images/screenshot/gui-qemu-summary-tags-edit.png" alt="screenshot/gui-qemu-summary-tags-edit.png" width="250" style="padding: 0 10px 0 0;float:left;" /></a>
<p>組織的な目的のために、ゲストに<span class="monospaced">タグを</span>設定することができます。 現在のところ、これらはユーザーに情報価値を提供するだけです。 タグは、ウェブインターフェイスの2つの場所に表示されます:<span class="monospaced">リソースツリーと</span>、ゲストが選択されたときのステータス行です。</p></div>
<div class="paragraph">
<p>タグは、<span class="monospaced">鉛筆の</span>アイコンをクリックして、ゲストのステータスラインで追加、編集、削除できます。ボタンを押すと複数のタグを追加でき、<span class="monospaced">-</span>ボタンを押すと削除できます。変更を保存またはキャンセルするには、それぞれ<span class="monospaced">✓</span>ボタンと<span class="monospaced">x</span>ボタンを使用します。</p></div>
<div class="paragraph">
<p>タグはCLIでも設定でき、複数のタグはセミコロンで区切られます。 例えば、以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set ID --tags myfirsttag;mysecondtag</pre>
</div></div>
<div class="sect3">
<h4 id="_style_configuration">4.5.1.スタイル設定<a class="headerlink" href="#_style_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-tag-style.png">
<img src="images/screenshot/gui-datacenter-tag-style.png" alt="screenshot/gui-datacenter-tag-style.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>デフォルトでは、タグの色は決定論的な方法でテキストから取得されます。 色、リソースツリーでの形状、大文字と小文字の区別、およびタグのソート方法は、カスタマイズできます。こ れは、 Web イ ン タ フ ェース の<em>Datacenter → Options → Tag Style Override</em> で実行で き ます。または、CLI を使用して行うこともできます。たとえば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh set /cluster/options --tag-style color-map=example:000000:FFFFFF</pre>
</div></div>
<div class="paragraph">
<p>タグ<span class="monospaced">例の</span>背景色を黒 (#000000) に、文字色を白 (#FFFFFF) に設定します。</p></div>
</div>
<div class="sect3">
<h4 id="_permissions">4.5.2.パーミッション<a class="headerlink" href="#_permissions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-options.png">
<img src="images/screenshot/gui-datacenter-options.png" alt="screenshot/gui-datacenter-options.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>デフォルトでは、ゲスト<span class="monospaced">(/vms/ID)</span> の<span class="monospaced">VM.Config.Options</span>権限を持つユーザーは、任意のタグを設定できます (<a href="#pveum_permission_management">権限管理を</a>参照)。この動作を制限したい場合は、<em>Datacenter → Options → User Tag Access</em> で適切な権限を設定できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">free</span>: ユーザーはタグの設定を制限されません (デフォルト)</p>
</li>
<li>
<p>
<span class="monospaced">リスト</span>: ユーザーは事前に定義されたタグのリストに基づいてタグを設定できます。</p>
</li>
<li>
<p>
<span class="monospaced">既存</span>: リストのようなものですが、既存のタグを使用することもできます。</p>
</li>
<li>
<p>
<span class="monospaced">none</span>: ユーザーはタグの使用を制限されます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>CLIでも同じことができます。</p></div>
<div class="paragraph">
<p>登録タグのリストは、[Datacenter] → [Options] → [Registered Tags] で編集できます。登録された<span class="monospaced">タグの</span>リストは、<em>Datacenter → Options → Registered Tags</em>または CLI で編集できます。</p></div>
<div class="paragraph">
<p>正確なオプションとCLIでの呼び出し方法の詳細については、「<a href="#datacenter_configuration_file">データセンターの構成</a>」を参照してください。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pvecm">
5.クラスタマネージャ<a class="headerlink" href="#chapter_pvecm" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEクラスタマネージャ<span class="monospaced">pvecmは</span>、物理サーバのグループを作成するためのツールです。このようなグループを<strong>クラスタと</strong>呼びます。信頼性の高いグループ通信には<a href="http://www.corosync.org">Corosync Cluster Engineを</a>使用します。クラスタ内のノード数に明確な制限はありません。 実際には、ホストとネットワークのパフォーマンスによって、実際に可能なノード数が制限されることがあります。現在（2021年）、50ノードを超えるクラスタ（ハイエンドのエンタープライズハードウェアを使用）が稼働しているという報告があります。</p></div>
<div class="paragraph">
<p><span class="monospaced">pvecmは</span>、新しいクラスタの作成、クラスタへのノードの参加、クラスタからの離脱、ステータス情報の取得、およびその他の様々なクラスタ関連タスクの実行に使用できます。<strong>Proxmox</strong> <strong>Cluster</strong> <strong>File</strong> <strong>System</strong>("pmxcfs") は、クラスタ設定をすべてのクラスタノードに透過的に配布するために使用されます。</p></div>
<div class="paragraph">
<p>ノードをクラスタにグループ化すると、次のような利点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ウェブベースの集中管理</p>
</li>
<li>
<p>
マルチマスタークラスター：各ノードがすべての管理タスクを実行可能</p>
</li>
<li>
<p>
データベース駆動型ファイルシステム<span class="monospaced">pmxcfsを</span>設定ファイルの保存に使用し、<span class="monospaced">corosyncを</span>使用して全ノードでリアルタイムにレプリケートされます。</p>
</li>
<li>
<p>
物理ホスト間での仮想マシンとコンテナの容易な移行</p>
</li>
<li>
<p>
迅速な展開</p>
</li>
<li>
<p>
ファイアウォールやHAなどのクラスタ全体のサービス</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_requirements">
<span>5.1.要件</span> <a class="headerlink" href="#_requirements" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
corosyncが動作するためには、すべてのノードがUDPポート5405-5412を介して相互に接続できる必要があります。</p>
</li>
<li>
<p>
日付と時刻は同期していなければなりません。</p>
</li>
<li>
<p>
ノード間でTCPポート22のSSHトンネルが必要です。</p>
</li>
<li>
<p>
高可用性に興味がある場合は、信頼できるクォーラムのために少なくとも3つのノードが必要です。すべてのノードが同じバージョンである必要があります。</p>
</li>
<li>
<p>
特に共有ストレージを使用する場合は、クラスタ・トラフィック用に専用のNICを使用することをお勧めします。</p>
</li>
<li>
<p>
ノードを追加するには、クラスタ・ノードのルート・パスワードが必要です。</p>
</li>
<li>
<p>
仮想マシンのオンラインマイグレーションは、ノードに同じベンダーのCPUが搭載されている場合にのみサポートされます。それ以外の場合は動作する可能性がありますが、保証はされません。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE 3.x以前とProxmox VE 4.Xのクラスタノードを混在させることはできません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE 4.4とProxmox VE 5.0のノードを混在させることは可能ですが、本番構成としてはサポートされていません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE 6.xのクラスタを以前のバージョンで実行することはできません。Proxmox VE 6.xとそれ以前のバージョンのクラスタプロトコル(corosync)が根本的に変更されました。Proxmox VE 5.4用のcorosync 3パッケージは、Proxmox VE 6.0へのアップグレード手順のみを対象としています。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_preparing_nodes">
<span>5.2.ノードの準備</span> <a class="headerlink" href="#_preparing_nodes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>まず、すべてのノードにProxmox VEをインストールします。各ノードが最終的なホスト名とIP設定でインストールされていることを確認してください。クラスタ作成後にホスト名とIPを変更することはできません。</p></div>
<div class="paragraph">
<p><span class="monospaced">etc/hostsで</span>すべてのノード名とそのIPを参照するのが一般的ですが（あるいは他の手段で名前を解決できるようにする）、これはクラスタを動作させるために必要なことではありません。というのも、あるノードから別のノードにSSHで接続する場合、覚えやすいノード名を使うことができるからです（<a href="#pvecm_corosync_addresses">リンクアドレスの種類も</a>参照してください）。クラスタ構成では常にIPアドレスでノードを参照することをお勧めします。</p></div>
</div>
<div class="sect2">
<h3 id="pvecm_create_cluster">
<span>5.3.クラスタの作成</span> <a class="headerlink" href="#pvecm_create_cluster" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタの作成は、コンソール上で行うか（<span class="monospaced">sshで</span>ログイン）、Proxmox VEのWebインタフェース<em>（Datacenter → Cluster</em>）を使用してAPIから行うことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">クラスタには一意の名前を付けます。クラスタ名はノード名と同じ規則に従います。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="pvecm_cluster_create_via_gui">5.3.1.ウェブGUIで作成<a class="headerlink" href="#pvecm_cluster_create_via_gui" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-create.png">
<img src="images/screenshot/gui-cluster-create.png" alt="screenshot/gui-cluster-create.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><em>Datacenter → Cluster］で</em>、［<strong>Create Cluster</strong>］をクリックします。クラスタ名を入力し、ドロップダウン・リストからメインのクラスタ・ネットワーク（リンク0）として使用するネットワーク接続を選択します。デフォルトは、ノードのホスト名で解決されたIPです。</p></div>
<div class="paragraph">
<p>Proxmox VE 6.2では、クラスタに最大8つのフォールバックリンクを追加できます。冗長リンクを追加するには、<em>Add</em>ボタンをクリックし、それぞれのフィールドからリンク番号とIPアドレスを選択します。Proxmox VE 6.2以前では、フォールバックとして2つ目のリンクを追加するには、<em>Advanced</em>チェックボックスを選択し、追加のネットワークインターフェース（リンク1、<a href="#pvecm_redundancy">Corosyncの冗長</a>性も参照）を選択します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">クラスタ通信用に選択したネットワークが、ネットワークストレージやライブマイグレーションなど、トラフィックの多い目的で使用されていないことを確認してください。 クラスタネットワーク自体は少量のデータを生成しますが、レイテンシに非常に敏感です。<a href="#pvecm_cluster_network_requirements">クラスタネットワーク要件の</a>詳細を確認してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_cluster_create_via_cli">5.3.2.コマンドラインによる作成<a class="headerlink" href="#pvecm_cluster_create_via_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最初のProxmox VEノードに<span class="monospaced">ssh</span>経由でログインし、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm create CLUSTERNAME</pre>
</div></div>
<div class="paragraph">
<p>新しいクラスタの状態を確認するには、次のコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm ステータス</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_multiple_clusters_in_the_same_network">5.3.3.同一ネットワーク内の複数のクラスタ<a class="headerlink" href="#_multiple_clusters_in_the_same_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>同じ物理ネットワークまたは論理ネットワークに複数のクラスタを作成することができます。この場合、クラスタ通信スタックでの衝突を避けるため、各クラスタに一意の名前を付ける必要があります。さらに、クラスタを明確に区別できるようにすることで、人間の混乱を避けることができます。</p></div>
<div class="paragraph">
<p>corosyncクラスタの帯域幅要件は比較的低いものの、パッケージのレイテンシと1秒あたりのパッケージ（PPS）レートが制限要因となります。同じネットワーク内の異なるクラスタは、これらのリソースをめぐって互いに競合する可能性があるため、大規模なクラスタには別の物理ネットワークインフラを使用することが理にかなっている場合があります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pvecm_join_node_to_cluster">
<span>5.4.クラスタへのノードの追加</span> <a class="headerlink" href="#pvecm_join_node_to_cluster" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">クラスタに参加すると、<span class="monospaced">/etc/pveに</span>ある既存の設定はすべて上書きされます。特に、ゲストIDが衝突する可能性があるため、参加ノードはゲストを保持できず、ノードはクラスタのストレージ構成を継承します。既存のゲストを持つノードに参加するには、回避策として各ゲストのバックアップを作成し(<span class="monospaced">vzdumpを</span>使用)、参加後に異なるIDでリストアします。ノードのストレージレイアウトが異なる場合は、ノードのストレージを再追加し、ストレージが実際に利用可能なノードに反映されるように各ストレージのノード制限を適応させる必要があります。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_join_node_to_cluster_via_gui">5.4.1.GUIによるクラスタへのノードの参加<a class="headerlink" href="#_join_node_to_cluster_via_gui" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-join-information.png">
<img src="images/screenshot/gui-cluster-join-information.png" alt="screenshot/gui-cluster-join-information.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>既存のクラスタ・ノードでWebインタフェースにログインします。<em>Datacenter → Clusterで</em>、上部の<strong>Join Information</strong>ボタンをクリックします。次に、［<strong>情報をコピー</strong>］ボタンをクリックします。または、［<em>情報］</em>フィールドの文字列を手動でコピーします。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-join.png">
<img src="images/screenshot/gui-cluster-join.png" alt="screenshot/gui-cluster-join.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>次に、追加するノードのWebインタフェースにログインします。<em>Datacenter → Clusterで</em>、<strong>Join Clusterを</strong>クリックします。<em>情報]</em>フィールドに、先ほどコピーした[<em>参加情報]</em>テキストを入力します。 クラスタへの参加に必要なほとんどの設定が自動的に入力されます。セキュリティ上の理由から、クラスタのパスワードは手動で入力する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なデータをすべて手動で入力するには、<em>Assisted Join</em>チェックボックスを無効にします。</td>
</tr></table>
</div>
<div class="paragraph">
<p><strong>Join</strong>ボタンをクリックすると、クラスタ参加プロセスが直ちに開始されます。ノードがクラスタに参加すると、現在のノード証明書はクラスタ認証局(CA)から署名されたものに置き換えられます。 つまり、現在のセッションは数秒後に機能しなくなります。この場合、Webインタフェースを強制的にリロードし、クラスタ認証情報を使用して再度ログインする必要があります。</p></div>
<div class="paragraph">
<p>これで、<em>Datacenter → Clusterに</em>ノードが表示されるはずです。</p></div>
</div>
<div class="sect3">
<h4 id="_join_node_to_cluster_via_command_line">5.4.2.コマンドラインによるクラスタへのノードの参加<a class="headerlink" href="#_join_node_to_cluster_via_command_line" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>既存のクラスタに参加させたいノードに<span class="monospaced">sshで</span>ログインします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm add IP-ADDRESS-CLUSTER</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">IP-ADDRESS-CLUSTERには</span>、既存のクラスタ・ノードのIPまたはホスト名を使用します。 IPアドレスを使用することをお勧めします(「<a href="#pvecm_corosync_addresses">リンク・アドレスの種類</a>」を参照)。</p></div>
<div class="paragraph">
<p>クラスタの状態を確認するには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm ステータス</pre>
</div></div>
<div class="listingblock">
<div class="title">4ノード追加後のクラスタステータス</div>
<div class="content monospaced">
<pre># pvecm status Cluster information ~~~~~~~~~~~~~~~~ Name: prod-central Config Version: 3 Transport: knet Secure auth: on Quorum information ~~~~~~~~~~~~~~~~~ Date：             Date: Tue Sep 14 11:06:47 2021 Quorum provider: corosync_votequorum Nodes：            4 Node ID: 0x00000001 Ring ID: 1.1a8 Quorate：          Yes Votequorum information ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 期待される投票数：   4 予想最高得票数4 総得票数      4 定数           3 フラグ            Quorate メンバー情報 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ノード ID 投票数 名前 0x00000001 1 192.168.15.91 0x00000002 1 192.168.15.92 (local) 0x00000003 1 192.168.15.93 0x00000004 1 192.168.15.94</pre>
</div></div>
<div class="paragraph">
<p>全ノードのリストだけが必要な場合は、次のようにします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm ノード</pre>
</div></div>
<div class="listingblock">
<div class="title">クラスタ内のノードを一覧表示</div>
<div class="content monospaced">
<pre># pvecm ノード メンバー情報 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ノードID 投票数 名前 1 1 hp1 2 1 hp2 (ローカル) 3 1 hp3 4 1 hp4</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvecm_adding_nodes_with_separated_cluster_network">5.4.3.分離されたクラスタ・ネットワークを持つノードの追加<a class="headerlink" href="#pvecm_adding_nodes_with_separated_cluster_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタ・ネットワークが分離されているクラスタにノードを追加する場合は、<em>link0</em>パラメータを使用してそのネットワーク上のノードのアドレスを設定する必要があります：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># pvecm add IP-ADDRESS-CLUSTER --link0 LOCAL-IP-ADDRESS-LINK0</span></span></tt></pre></div></div>
<div class="paragraph">
<p>クロノスネットのトランスポート・レイヤーに内蔵されている<a href="#pvecm_redundancy">冗長性を</a>使用したい場合は、<em>link1</em>パラメータも使用してください。</p></div>
<div class="paragraph">
<p>GUIを使用して、<strong>Cluster Join</strong>ダイアログの対応する<em>Link X</em>フィールドから正しいインターフェイスを選択できます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_a_cluster_node">
<span>5.5.クラスタノードの削除</span> <a class="headerlink" href="#_remove_a_cluster_node" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">手続きを進める前に注意深くお読みください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノードからすべての仮想マシンを移動します。ローカル データまたはバックアップのコピーが作成されていることを確認します。さらに、削除するノードへのスケジュールされたレプリケーション ジョブをすべて削除してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ノードを削除する前にそのノードへのレプリケーションジョブを削除しないと、レプリケーションジョブが削除できなくなります。特に、レプリケートされたVMがマイグレーションされるとレプリケーションの方向が自動的に切り替わるため、削除するノードからレプリケートされたVMをマイグレーションすることで、そのノードへのレプリケーションジョブが自動的に設定されることに注意してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>次の例では、クラスタからノードhp4を削除します。</p></div>
<div class="paragraph">
<p><strong>別の</strong>クラスタ・ノード（hp4ではない）にログインし、<span class="monospaced">pvecm nodes</span>コマンドを実行して削除するノードIDを特定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm nodes

Membership information
~~~~~~~~~~~~~~~~~~~~~~
    Nodeid      Votes Name
         1          1 hp1 (local)
         2          1 hp2
         3          1 hp3
         4          1 hp4</pre>
</div></div>
<div class="paragraph">
<p>この時点でhp4の電源を切り、現在の設定のまま（ネットワーク内で）再び電源が入らないようにする必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">上述したように、ノードを取り外す<strong>前に</strong>電源を切り、現在の構成で（既存のクラスタネットワーク内で）再び電源が<strong>入らない</strong>ことを確認することが重要です。 そのままノードの電源を入れると、クラスタが壊れてしまい、機能する状態に復元するのが困難になる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノードhp4の電源を切ったら、安全にクラスタから削除できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm delnode hp4 ノード4をキル</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この時点で、<span class="monospaced">Could not kill node (error = CS_ERR_NOT_EXIST)</span>というエラー・メッセージが表示される可能性があります。これはノードの削除に失敗したのではなく、オフラインのノードを kill しようとした corosync に失敗したことを意味します。したがって、これは安全に無視できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">pvecm nodes</span>または<span class="monospaced">pvecm status</span>を使ってノードのリストをもう一度確認してください。以下のようになるはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm status

...

Votequorum information
~~~~~~~~~~~~~~~~~~~~~~
Expected votes:   3 予想最高得票数3 投票総数: 2      3 定数: 2 フラグ：            Quorate メンバー情報 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ノード ID 投票数 名前 0x00000001 1 192.168.15.90 (local) 0x00000002 1 192.168.15.91 0x00000003 1 192.168.15.92</pre>
</div></div>
<div class="paragraph">
<p>何らかの理由で、このサーバーを再び同じクラスタに参加させたい場合は、そうしなければなりません：</p></div>
<div class="ulist"><ul>
<li>
<p>
Proxmox VEを新規インストールしてください、</p>
</li>
<li>
<p>
そして、前のセクションで説明したように、それを結合します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>削除されたノードの設定ファイルはまだ<em>/etc/pve/nodes/hp4</em> に存在します。まだ必要な設定を回復してから、ディレクトリを削除してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ノードの削除後も、その SSH フィンガープリントは他のノードの<em>known_hosts</em>に残っています。同じ IP またはホスト名を持つノードに再参加した後に SSH エラーが発生した場合は、再参加したノードで<span class="monospaced">pvecm updatecerts を</span>1 回実行してフィンガープリントをクラスタ全体で更新します。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="pvecm_separate_node_without_reinstall">5.5.1.<a class="headerlink" href="#pvecm_separate_node_without_reinstall" title="Permalink to this heading"></a>を再インストールせずにノードを分離します。</h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">これは推奨される方法では<strong>ありません</strong>。不安な場合は、前の方法を使用してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノードを最初から再インストールせずに、クラスタからノードを分離することもできます。ただし、クラスタからノードを削除した後も、そのノードは共有ストレージにアクセスできます。これは、クラスタからノードの削除を開始する前に解決しておく必要があります。Proxmox VEクラスタは他のクラスタとまったく同じストレージを共有することはできません。さらに、VMIDの競合につながる可能性もあります。</p></div>
<div class="paragraph">
<p>分離したいノードだけがアクセスできる新しいストレージを作成することをお勧めします。例えば、NFS上の新しいエクスポートや新しいCephプールなどです。まったく同じストレージが複数のクラスタからアクセスされないようにすることが重要です。このストレージを設定したら、すべてのデータとVMをノードからそのストレージに移動します。これで、クラスタからノードを分離する準備が整いました。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">すべての共有リソースがきれいに分離されていることを確認してください！そうしないと、コンフリクトや問題が発生します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まず、ノードのcorosyncとpve-clusterサービスを停止します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl stop pve-cluster systemctl stop corosync</tt></pre></div></div>
<div class="paragraph">
<p>クラスタファイルシステムをローカルモードで再度起動します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pmxcfs -l</tt></pre></div></div>
<div class="paragraph">
<p>corosync設定ファイルを削除します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm /etc/pve/corosync<span style="color: #990000">.</span>conf rm -r<span style="color: #990000">/etc/corosync/*</span></tt></pre></div></div>
<div class="paragraph">
<p>これで、ファイルシステムを通常のサービスとして再開できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>killall pmxcfs systemctl start pve-cluster</tt></pre></div></div>
<div class="paragraph">
<p>これでノードはクラスタから切り離されました。クラスタの残りのノードから削除するには</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm delnode oldnode</tt></pre></div></div>
<div class="paragraph">
<p>残りのノードのクォーラムが失われたためにコマンドが失敗した場合、回避策として予想得票数を1に設定することができます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm 予想<span style="color: #993399">1</span></tt></pre></div></div>
<div class="paragraph">
<p>そして<em>pvecm delnode</em>コマンドを繰り返します。</p></div>
<div class="paragraph">
<p>次に、分離したノードに戻り、そのノードに残っているクラスタファイルをすべて削除します。これにより、ノードを問題なく別のクラスタに追加できるようになります。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm<span style="color: #990000">/var/lib/corosync/*</span></tt></pre></div></div>
<div class="paragraph">
<p>他のノードの設定ファイルがまだクラスタ ファイル システムに残っているため、それらもクリーンアップします。ノード名が正しいことを確認したら、<em>/etc/pve/nodes/NODENAMEから</em>ディレクトリ全体を再帰的に削除します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ノードのSSH鍵は<em>authorized_key</em>ファイルに残ります。これは、ノードがまだ公開鍵認証で互いに接続できることを意味します。これを修正するには、<em>/etc/pve/priv/authorized_keys</em>ファイルからそれぞれの鍵を削除します。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quorum">
<span>5.6.定足数</span> <a class="headerlink" href="#_quorum" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは、クォーラムベースの技術を使用して、すべてのクラスタノード間で一貫性のある状態を提供します。</p></div>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>クォーラム（定足数）とは、分散システムにおいて分散トランザクションが操作を実行するために最低限必要な投票数のことです。</p></div>
</div>
<div class="attribution">
<em>クォーラム（分散コンピューティング）</em><br>
- ウィキペディアより</div></div>
<div class="paragraph">
<p>ネットワーク・パーティショニングの場合、状態の変更には過半数のノードがオンラインであることが必要です。クォーラムを失うと、クラスタは読み取り専用モードに切り替わります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEはデフォルトで各ノードに1票を割り当てます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_cluster_network">
<span>5.7.クラスター・ネットワーク</span> <a class="headerlink" href="#_cluster_network" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタネットワークはクラスタの中核です。これを介して送信されるすべてのメッセージは、それぞれの順序ですべてのノードに確実に配信されなければなりません。Proxmox VEでは、この部分は高性能、低オーバーヘッド、高可用性の開発ツールキットの実装であるcorosyncによって行われます。これは分散型設定ファイルシステム<span class="monospaced">(pmxcfs</span>)に対応しています。</p></div>
<div class="sect3">
<h4 id="pvecm_cluster_network_requirements">5.7.1.ネットワーク要件<a class="headerlink" href="#pvecm_cluster_network_requirements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEクラスタスタックを安定して動作させるには、全ノード間のレイテンシが5ミリ秒（LANパフォーマンス）以下の信頼性の高いネットワークが必要です。ノード数が少ないセットアップでは、より高いレイテンシのネットワークでも動作する<em>可能性が</em>ありますが、これは保証されておらず、ノード数が3つ以上、レイテンシが約10ミリ秒を超えると、むしろ可能性が低くなります。</p></div>
<div class="paragraph">
<p>corosyncはあまり帯域幅を使用しませんが、レイテンシのジッターの影響を受けやすいので、ネットワークは他のメンバーによって多用されるべきではありません。  特に、corosyncとストレージに共有ネットワークを使わないでください（<a href="#pvecm_redundancy">冗長</a>構成で優先順位の低いフォールバックの可能性を除いて）。</p></div>
<div class="paragraph">
<p>クラスタをセットアップする前に、ネットワークがその目的に適しているかどうかを確認することは良い習慣です。クラスタ・ネットワーク上でノードが互いに接続できることを確認するには、<span class="monospaced">ping</span>ツールでノード間の接続性をテストします。</p></div>
<div class="paragraph">
<p>Proxmox VEファイアウォールが有効な場合、corosyncのACCEPTルールが自動的に生成されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Corosyncは、バージョン3.0 (Proxmox VE 6.0で導入)以前はMulticastを使用していました。 最新のバージョンでは、クラスタ通信に<a href="https://kronosnet.org/">Kronosnetを</a>使用していますが、現時点では通常のUDPユニキャストのみをサポートしています。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content"><a href="#pvecm_edit_corosync_conf">corosync.confで</a>トランスポートを<span class="monospaced">udp</span>または<span class="monospaced">udpuに</span>設定することで、マルチキャストまたはレガシーユニキャストを有効にすることはできますが、暗号化および冗長性サポートがすべて無効になることに注意してください。 したがって、これは推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_separate_cluster_network">5.7.2.個別のクラスタ・ネットワーク<a class="headerlink" href="#_separate_cluster_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>パラメータなしでクラスタを作成する場合、corosyncクラスタのネットワークは通常、WebインタフェースおよびVMのネットワークと共有されます。セットアップによっては、ストレージトラフィックも同じネットワーク上で送信されるかもしれません。corosyncはタイムクリティカルでリアルタイムなアプリケーションなので、これを変更することをお勧めします。</p></div>
<div class="sect4">
<h5 id="_setting_up_a_new_network">新しいネットワークの設定<a class="headerlink" href="#_setting_up_a_new_network" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>まず、新しいネットワークインターフェイスをセットアップする必要があります。これは物理的に別のネットワーク上にある必要があります。ネットワークが<a href="#pvecm_cluster_network_requirements">クラスタ・ネットワークの要件を満たして</a>いることを確認してください。</p></div>
</div>
<div class="sect4">
<h5 id="_separate_on_cluster_creation">クラスタ作成時の分離<a class="headerlink" href="#_separate_on_cluster_creation" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>これは、新しいクラスタの作成に使用される<em>pvecm create</em>コマンドの<em>linkX</em>パラメータで可能です。</p></div>
<div class="paragraph">
<p>10.10.10.1/25の静的アドレスで追加のNICをセットアップし、すべてのクラスタ通信をこのインターフェイスで送受信したい場合は、次のように実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm create<span style="font-weight: bold"><span style="color: #0000FF">test</span></span> <span style="color: #993399">--link0</span> <span style="color: #993399">10.10</span><span style="color: #990000">.</span><span style="color: #993399">10.1</span></tt></pre></div></div>
<div class="paragraph">
<p>すべてが正しく機能しているかどうかを確認するには、以下を実行してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl status corosync</tt></pre></div></div>
<div class="paragraph">
<p>その後、上記の手順に従って、<a href="#pvecm_adding_nodes_with_separated_cluster_network">クラスタ・ネットワークを分離したノードを追加</a>します。</p></div>
</div>
<div class="sect4">
<h5 id="pvecm_separate_cluster_net_after_creation">クラスタ作成後の分離<a class="headerlink" href="#pvecm_separate_cluster_net_after_creation" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>既にクラスタを作成していて、クラスタ全体を再構築することなく、その通信を別のネットワークに切り替えたい場合にこの方法が使えます。 この変更により、ノードがcorosyncを再起動して新しいネットワーク上で次々に立ち上がる必要があるため、クラスタのクォーラムが短時間失われる可能性があります。</p></div>
<div class="paragraph">
<p>まず、<a href="#pvecm_edit_corosync_conf">corosync.confファイルの編集</a>方法を確認してください。 次に、そのファイルを開くと、以下のようなファイルがあるはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>logging { debug: off to_syslog: yes } nodelist { node { name: due nodeid: 2 quorum_votes：1 ring0_addr: due } node { name: tre nodeid: 3 quorum_votes：1 ring0_addr: tre } node { name: uno nodeid: 1 quorum_votes：1 ring0_addr: uno } } quorum { provider: corosync_votequorum } totem { cluster_name: testcluster config_version: 3 ip_version: ipv4-6 secauth: on version: 2 interface { linknumber: 0 } } }.</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">ringX_addr</span>は実際には corosync<strong>リンクアドレスを</strong>指定します。ring "という名前は、古いバージョンの corosync の名残で、後方互換性のために残されています。</td>
</tr></table>
</div>
<div class="paragraph">
<p>最初に行うことは、もしまだ表示されていなければ、ノード・エントリーに<em>名前</em>プロパティを追加することです。これらはノード名と一致して<strong>いなければなりません</strong>。</p></div>
<div class="paragraph">
<p>次に、すべてのノードの<em>ring0_addr</em>プロパティからすべてのアドレスを新しいアドレスに置き換えます。ここでは、プレーンIPアドレスまたはホスト名を使用できます。ホスト名を使用する場合は、すべてのノードから解決可能であることを確認してください（<a href="#pvecm_corosync_addresses">リンクアドレスの種類も</a>参照してください）。</p></div>
<div class="paragraph">
<p>この例では、クラスタ通信を10.10.10.0/25ネットワークに切り替えたいので、各ノードの<em>ring0_addrを</em>それぞれ変更します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">全く同じ手順で、他の<em>ringX_addr</em>値も変更できます。ただし、一度に1つのリンクアドレスだけを変更することをお勧めします。</td>
</tr></table>
</div>
<div class="paragraph">
<p><em>config_version</em>プロパティを増やすと、新しいコンフィギュレーション・ファイルは次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>logging { debug: off to_syslog: yes } nodelist { node { name: due nodeid: 2 quorum_votes：1 ring0_addr: 10.10.10.2 } node { name: tre nodeid: 3 quorum_votes：1 ring0_addr: 10.10.10.3 } node { name: uno nodeid: 1 quorum_votes：1 ring0_addr: 10.10.10.1 } } quorum { provider: corosync_votequorum } totem { cluster_name: testcluster config_version：4
  ip_version: ipv4-6
  secauth: on
  version: 2
  interface {
    linknumber: 0
  }

}</pre>
</div></div>
<div class="paragraph">
<p>そして、変更した情報がすべて正しいことを最終確認した後、保存し、もう一度、<a href="#pvecm_edit_corosync_conf">corosync.confファイルの編集</a>セクションに従って、有効にします。</p></div>
<div class="paragraph">
<p>変更はライブで適用されるので、corosyncの再起動は厳密には必要ありません。他の設定も変更した場合や、corosync が文句を言っているのに気づいた場合は、オプションで再起動をトリガーできます。</p></div>
<div class="paragraph">
<p>単一ノードで実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl restart corosync</tt></pre></div></div>
<div class="paragraph">
<p>では、問題がないか確認してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl status corosync</tt></pre></div></div>
<div class="paragraph">
<p>corosyncが再び動作し始めたら、他の全てのノードでもcorosyncを再起動してください。 その後、新しいネットワーク上でクラスタ・メンバーシップに1つずつ参加します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_corosync_addresses">5.7.3.Corosync アドレス<a class="headerlink" href="#pvecm_corosync_addresses" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>corosyncリンクアドレス（後方互換性のため、<span class="monospaced">corosync.confでは</span> <em>ringX_addrと</em>表記）は、2つの方法で指定できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>IPv4/v6アドレスは</strong>直接使用できます。これらは静的で、通常は不用意に変更されることがないため、推奨されます。</p>
</li>
<li>
<p>
<strong>ホスト名は</strong> <span class="monospaced">getaddrinfoを</span>使用して解決されます。つまり、デフォルトでは、IPv6アドレスが利用可能であれば最初に使用されます（<span class="monospaced">man gai.confも</span>参照してください）。特に既存のクラスタをIPv6にアップグレードする場合は、この点に注意してください。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ホスト名の解決先アドレスは、corosyncやそれが動作しているノードに触れることなく変更することができるため、注意して使用する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ホスト名を優先する場合は、corosync専用の別個の静的ホスト名を推奨します。また、クラスタ内のすべてのノードがすべてのホスト名を正しく解決できることを確認してください。</p></div>
<div class="paragraph">
<p>Proxmox VE 5.1以降、サポートされている間は、ホスト名は入力時に解決されます。解決されたIPのみが設定に保存されます。</p></div>
<div class="paragraph">
<p>以前のバージョンでクラスタに参加したノードは、<span class="monospaced">corosync.confで</span>未解決のホスト名をまだ使用している可能性があります。上記のように、IPまたは別のホスト名で置き換えるのが良いかもしれません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pvecm_redundancy">
<span>5.8.Corosync 冗長性</span> <a class="headerlink" href="#pvecm_redundancy" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Corosyncは、統合されたKronosnetレイヤーを介した冗長ネットワークをデフォルトでサポートしています（レガシーなudp/udpuトランスポートではサポートされていません）。これは、<span class="monospaced">pvecmの</span> <em>-linkX</em>パラメータ、GUIの<strong>リンク1</strong>（クラスタ作成中または新規ノード追加中）、または<span class="monospaced">corosync.confで</span>複数の<em>ringX_addrを</em>指定することで、複数のリンクアドレスを指定して有効にすることができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">有用なフェイルオーバーを提供するためには、すべてのリンクが独自の物理ネットワーク接続上にある必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>リンクは優先度の設定に従って使用されます。この優先順位は、<span class="monospaced">corosync.conf</span> の対応する interface セクションで<em>knet_link_priority</em>を設定するか、<span class="monospaced">pvecm</span> でクラスタを作成するときに<em>priority</em>パラメータを使うことで設定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm create CLUSTERNAME --link0 10.10.10.1,priority=15 --link1 10.20.20.1,priority=20</pre>
</div></div>
<div class="paragraph">
<p>この場合、優先順位が高い<em>link1が</em>先に使われることになります。</p></div>
<div class="paragraph">
<p>優先順位が手動で設定されていない場合（または2つのリンクの優先順位が同じ場合）、リンクは番号順に使用され、番号の小さい方が優先順位が高くなります。</p></div>
<div class="paragraph">
<p>すべてのリンクが動作していても、最も優先度の高いリンクだけがコロシンク・トラフィックを見ることになります。リンクの優先度を混在させることはできません。つまり、優先度の異なるリンクは互いに通信することができません。</p></div>
<div class="paragraph">
<p>優先順位の低いリンクは、優先順位の高いリンクがすべて故障しない限りトラフィックが発生しないため、他のタスク（VM、ストレージなど）に使用するネットワークを優先順位の低いリンクに指定することは有効な戦略になります。最悪の場合、待ち時間が長かったり混雑していたりする接続の方が、全く接続しないよりはましかもしれません。</p></div>
<div class="sect3">
<h4 id="_adding_redundant_links_to_an_existing_cluster">5.8.1.既存のクラスタへの冗長リンクの追加<a class="headerlink" href="#_adding_redundant_links_to_an_existing_cluster" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>実行中のコンフィギュレーションに新しいリンクを追加するには、まず<a href="#pvecm_edit_corosync_conf">corosync.confファイルの編集</a>方法を確認してください。</p></div>
<div class="paragraph">
<p>次に、<span class="monospaced">nodelist</span>セクションのすべてのノードに新しい<em>ringX_addr を</em>追加します。<em>Xは</em>どのノードに追加しても同じで、各ノードで一意であることを確認してください。</p></div>
<div class="paragraph">
<p>最後に、<em>Xを</em>上記で選択したリンク番号に置き換えて、下図のような新しい<em>インターフェイスを</em> <span class="monospaced">トーテム</span>セクションに追加します。</p></div>
<div class="paragraph">
<p>1番のリンクを追加したと仮定すると、新しい設定ファイルは次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>logging { debug: off to_syslog: yes } nodelist { node { name: due nodeid: 2 quorum_votes：1 ring0_addr: 10.10.10.2 ring1_addr: 10.20.20.2 } node { name: tre nodeid: 3 quorum_votes：1 ring0_addr: 10.10.10.3 ring1_addr: 10.20.20.3 } node { name: uno nodeid: 1 quorum_votes：1 ring0_addr: 10.10.10.1 ring1_addr: 10.20.20.1 } } quorum { provider: corosync_votequorum } totem { cluster_name: testcluster config_version：4 ip_version: ipv4-6 secauth: on version: 2 interface { linknumber: 0 } interface { linknumber: 1 } }.</pre>
</div></div>
<div class="paragraph">
<p>最後の手順で<a href="#pvecm_edit_corosync_conf">corosync.confファイルを編集</a>すると、すぐに新しいリンクが有効になります。再起動は必要ありません。corosyncが新しいリンクを読み込んだかどうかは、次のようにして確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>journalctl -b -u corosync</pre>
</div></div>
<div class="paragraph">
<p>1つのノードで古いリンクを一時的に切断し、切断中もステータスがオンラインであることを確認して、新しいリンクをテストするのがよいでしょう：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvecmステータス</pre>
</div></div>
<div class="paragraph">
<p>健全なクラスタ状態が表示された場合は、新しいリンクが使用されていることを意味します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_role_of_ssh_in_proxmox_ve_clusters">
<span>5.9.Proxmox VEクラスタにおけるSSHの役割</span> <a class="headerlink" href="#_role_of_ssh_in_proxmox_ve_clusters" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは様々な機能にSSHトンネルを利用しています。</p></div>
<div class="ulist"><ul>
<li>
<p>
コンソール/シェルセッションのプロキシ（ノードとゲスト）</p>
<div class="paragraph">
<p>ノードAに接続している状態でノードBのシェルを使用する場合、ノードAのターミナルプロキシに接続し、そのターミナルプロキシは非インタラクティブSSHトンネルを介してノードBのログインシェルに接続します。</p></div>
</li>
<li>
<p>
<em>セキュアモードでの</em>VMおよびCTのメモリとローカルストレージのマイグレーション。</p>
<div class="paragraph">
<p>移行中、移行情報を交換し、メモリとディスクの内容を転送するために、1つ以上のSSHトンネルが移行元と移行先のノード間で確立されます。</p></div>
</li>
<li>
<p>
ストレージのレプリケーション</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_ssh_setup">5.9.1.SSHセットアップ<a class="headerlink" href="#_ssh_setup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEシステムでは、SSH設定/セットアップに以下の変更が行われます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">root</span>ユーザーのSSHクライアントが<span class="monospaced">ChaCha20よりも</span> <span class="monospaced">AESを</span>優先するように設定されている場合。</p>
</li>
<li>
<p>
<span class="monospaced">root</span>ユーザの<span class="monospaced">authorized_keys</span>ファイルは<span class="monospaced">/etc/pve/priv/authorized_keysに</span>リンクされます。</p>
</li>
<li>
<p>
<span class="monospaced">sshdは</span>パスワードを使ってrootとしてログインできるように設定されています。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">古いシステムでは、<span class="monospaced">/etc</span> <span class="monospaced">/pve/priv/known_hosts</span> を指すシンボリックリンクとして<span class="monospaced">/etc/ssh/ssh_known_hosts</span>が設定されている場合があります。このシステムは<span class="monospaced">pve-cluster &lt;&lt;INSERT VERSION&gt;&gt;</span> で明示的なホスト鍵の固定に置き換えられ<span class="monospaced">、</span>シンボリックリンクは<span class="monospaced">pvecm updatecerts --unmerge-known-hosts</span> を実行することで解除できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_pitfalls_due_to_automatic_execution_of_span_class_monospaced_bashrc_span_and_siblings">5.9.2.<span class="monospaced">.bashrcと</span>兄弟ファイルの自動実行による落とし穴<a class="headerlink" href="#_pitfalls_due_to_automatic_execution_of_span_class_monospaced_bashrc_span_and_siblings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>カスタム<span class="monospaced">.bashrc</span> や、設定されたシェルによってログイン時に実行される同様のファイル がある場合、<span class="monospaced">ssh は</span>セッションが正常に確立されると、自動的にそれを実行します。これは予期せぬ動作を引き起こす可能性があります。 なぜなら、これらのコマンドは上記のどの操作に対しても root 権限で実行される可能性があるからです。これは問題となる副作用を引き起こす可能性があります！</p></div>
<div class="paragraph">
<p>このようなややこしいことを避けるためには、<span class="monospaced">/root/.bashrcに</span>、セッションが対話型であることを確認するチェックを追加し、その上で<span class="monospaced">.bashrc</span>コマンドを実行することをお勧めします。</p></div>
<div class="paragraph">
<p>このスニペットを<span class="monospaced">.bashrc</span>ファイルの先頭に追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># 副作用を避けるために対話的に実行していない場合は早期終了！ case $- in *i*) ;; *) return;; esac</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_corosync_external_vote_support">
<span>5.10.Corosync 外部投票サポート</span> <a class="headerlink" href="#_corosync_external_vote_support" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このセクションでは、Proxmox VEクラスタに外部ボータを配置する方法について説明します。 このように構成すると、クラスタ通信の安全特性に違反することなく、より多くのノード障害に耐えることができます。</p></div>
<div class="paragraph">
<p>これが機能するためには、2つのサービスが必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
各Proxmox VEノードで実行されるQDeviceデーモン</p>
</li>
<li>
<p>
独立したサーバー上で動作する外部投票デーモン</p>
</li>
</ul></div>
<div class="paragraph">
<p>その結果、小規模なセットアップ（例えば2+1ノード）でも高い可用性を実現できます。</p></div>
<div class="sect3">
<h4 id="_qdevice_technical_overview">5.10.1.QDevice技術概要<a class="headerlink" href="#_qdevice_technical_overview" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Corosync Quorum Device (QDevice)は、各クラスタノード上で動作するデーモンです。外部で実行されるサードパーティのアービトレーターの決定に基づいて、クラスタのクォーラムサブシステムに設定された投票数を提供します。 このデバイスの主な用途は、標準のクォーラムルールが許容するよりも多くのノード障害をクラスタが維持できるようにすることです。外部デバイスはすべてのノードを見ることができるため、これは安全に行うことができます。 これは、サードパーティの投票を受け取った後、そのノードのセットがクォーラムを（再び）持つことができる場合にのみ行われます。</p></div>
<div class="paragraph">
<p>現在、<em>QDevice Netのみが</em>サードパーティ・アービトレーターとしてサポートされています。これは、ネットワーク経由でパーティションメンバーに到達できる場合、クラスタのパーティションに投票を提供するデーモンです。複数のクラスタをサポートするように設計されており、設定やステートはほとんど不要です。新しいクラスタは動的に処理され、QDeviceを実行しているホスト上に設定ファイルは必要ありません。</p></div>
<div class="paragraph">
<p>外部ホストの唯一の要件は、クラスタへのネットワークアクセスが必要であることと、corosync-qnetdパッケージが利用可能であることです。私たちはDebianベースのホスト用のパッケージを提供していますが、他のLinuxディストリビューションでもそれぞれのパッケージマネージャから利用可能なパッケージがあるはずです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">corosync自体とは異なり、QDeviceはTCP/IP経由でクラスタに接続します。 デーモンはクラスタのLAN外でも実行でき、corosyncの低レイテンシ要件に制限されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_supported_setups">5.10.2.対応セットアップ<a class="headerlink" href="#_supported_setups" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>偶数ノード数のクラスタではQDeviceをサポートし、2ノードクラスタではより高い可用性を提供する場合に推奨しています。 奇数ノード数のクラスタでは、現在のところQDeviceの使用を推奨していません。その理由は、クラスタタイプごとにQDeviceが提供する投票数に差があるためです。偶数のクラスタには追加の票が1票入りますが、これは可用性を高めるだけで、QDevice自体に障害が発生した場合は、QDeviceをまったく使用しない場合と同じ状態になるからです。</p></div>
<div class="paragraph">
<p>一方、クラスタサイズが奇数の場合、QDeviceは<em>(N-1)</em>票を提供します。この代替動作は理にかなっています。もしQDeviceに1票しか追加の票がなかったら、クラスタが分裂してしまう可能性があります。このアルゴリズムでは、1つのノード（当然QDevice自体も）を除くすべてのノードが失敗することができます。しかし、これには2つの欠点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
QNetデーモン自体に障害が発生した場合、他のノードに障害が発生するか、クラスタが直ちにクォーラムを失います。たとえば、15台のノードを持つクラスタでは、クラスタがクォーラムを失う前に7台が故障する可能性があります。この場合、QDeviceはほぼ単一障害点として機能します。</p>
</li>
<li>
<p>
1つのノードとQDeviceを除くすべてのノードに障害が発生する可能性があるという事実は、最初は有望に聞こえますが、その結果、HAサービスが大量に復旧し、残りの1つのノードに過負荷がかかる可能性があります。さらに、<em>((N-1)/2)</em>ノード以下しかオンラインでない場合、Cephサーバはサービスの提供を停止します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>欠点とその意味を理解すれば、奇数クラスタのセットアップでこの技術を使うかどうかを自分で決めることができます。</p></div>
</div>
<div class="sect3">
<h4 id="_qdevice_net_setup">5.10.3.QDevice-Netセットアップ<a class="headerlink" href="#_qdevice_net_setup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>corosync-qdeviceへの投票を提供するデーモンは、非特権ユーザーとして実行することをお勧めします。Proxmox VEとDebianにはそのように設定されたパッケージが用意されています。 Proxmox VEにQDeviceを安全かつセキュアに統合するには、デーモンとクラスタ間のトラフィックを暗号化する必要があります。</p></div>
<div class="paragraph">
<p>まず、外部サーバーに<em>corosync-qnetd</em>パッケージをインストールします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>外部# apt install corosync-qnetd</pre>
</div></div>
<div class="paragraph">
<p>と<em>corosync-qdevice</em>パッケージを全クラスタノードにインストールします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# apt install corosync-qdevice</pre>
</div></div>
<div class="paragraph">
<p>これを実行した後、クラスタ内のすべてのノードがオンラインであることを確認します。</p></div>
<div class="paragraph">
<p>Proxmox VEノードの1つで以下のコマンドを実行して、QDeviceをセットアップできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# pvecm qdevice setup &lt;QDEVICE-IP&gt; 。</pre>
</div></div>
<div class="paragraph">
<p>クラスタのSSHキーが自動的にQDeviceにコピーされます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この段階で「<em>Host key verification failed.」などの</em>エラーが表示された場合は、<span class="monospaced">pvecm updatecertsを</span>実行すると問題が解決する可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>すべてのステップが正常に完了すると、「完了」と表示されます。でQDeviceがセットアップされたことを確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# pvecm status ... 投票数情報 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 予想投票数です：   3 予想最高得票数3 投票総数: 2      3 定数: 2 フラグ：            Quorate Qdevice Membership information ~~~~~~~~~~~~~~~~~ Nodeid Votes Qdevice Name 0x00000001 1 A,V,NMW 192.168.22.180 (local) 0x00000002 1 A,V,NMW 192.168.22.181 0x00000000 1 Qdevice</pre>
</div></div>
<div class="sect4">
<h5 id="pvecm_qdevice_status_flags">QDevice Status Flags<a class="headerlink" href="#pvecm_qdevice_status_flags" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>上記のように、QDeviceのステータス出力には通常3つの列が含まれます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">A</span>/<span class="monospaced">NA</span>: Alive または Not Alive。外部<span class="monospaced">corosync-qnetd</span>デーモンとの通信が機能しているかどうかを示します。</p>
</li>
<li>
<p>
<span class="monospaced">V</span>/<span class="monospaced">NV</span>: QDeviceがノードに投票する場合。ノード間のcorosync接続がダウンしているが、両方のノードが外部の<span class="monospaced">corosync-qnetd</span>デーモンとまだ通信できるようなスプリットブレインの状況では、1つのノードだけが投票権を得ます。</p>
</li>
<li>
<p>
<span class="monospaced">MW</span>/<span class="monospaced">NMW</span>: マスターが勝つ<span class="monospaced">(MV</span>)かどうか<span class="monospaced">(NMW</span>)。デフォルトは<span class="monospaced">NMW</span>、<span class="footnote"><br><span class="monospaced">[votequorum_qdevice_master_wins</span>マニュアルページ</span> <span class="footnote"> <a href="https://manpages.debian.org/bookworm/libvotequorum-dev/votequorum_qdevice_master_wins.3.en.html">https://manpages.debian.org/bookworm/libvotequorum-dev/votequorum_qdevice_master_wins.3.en.html]</a><br></span> を参照してください。</p>
</li>
<li>
<p>
<span class="monospaced">NR</span>：QDeviceが登録されていません。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">QDeviceが<span class="monospaced">Not Alive</span><span class="monospaced">（</span>上記の出力で<span class="monospaced">NA</span>）と表示されている場合は、外部サーバーのポート<span class="monospaced">5403</span>（qnetdサーバーのデフォルトポート）がTCP/IP経由で到達可能であることを確認してください！</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frequently_asked_questions">5.10.4.よくある質問<a class="headerlink" href="#_frequently_asked_questions" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_tie_breaking">タイブレーク<a class="headerlink" href="#_tie_breaking" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>2つの同じ大きさのクラスターパーティションが互いに見えないがQDeviceは見えるという同点の場合、QDeviceはそれらのパーティションの1つをランダムに選び、そのパーティションに票を提供します。</p></div>
</div>
<div class="sect4">
<h5 id="_possible_negative_implications">ネガティブな影響の可能性<a class="headerlink" href="#_possible_negative_implications" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ノード数が偶数であるクラスタでは、QDeviceを使用してもマイナスの影響はありません。QDeviceが機能しない場合は、QDeviceがないのと同じです。</p></div>
</div>
<div class="sect4">
<h5 id="_adding_deleting_nodes_after_qdevice_setup">QDevice セットアップ後のノードの追加/削除<a class="headerlink" href="#_adding_deleting_nodes_after_qdevice_setup" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QDeviceが設定されたクラスタに新しいノードを追加したり、既存のノードを削除したりする場合は、まずQDeviceを削除する必要があります。その後、普通にノードを追加または削除できます。ノード数が均等なクラスタに戻ったら、前述の方法でQDeviceを再度セットアップできます。</p></div>
</div>
<div class="sect4">
<h5 id="_removing_the_qdevice">QDevice<a class="headerlink" href="#_removing_the_qdevice" title="Permalink to this heading"></a>の取り外し</h5>
<div class="paragraph">
<p>公式の<span class="monospaced">pvecm</span>ツールを使ってQDeviceを追加した場合は、それを削除することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# pvecm qdevice remove</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_corosync_configuration">
<span>5.11.Corosyncコンフィギュレーション</span> <a class="headerlink" href="#_corosync_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">etc/pve/corosync.conf</span>ファイルはProxmox VEクラスタで中心的な役割を果たします。corosync.confの詳細については、corosync.confのマニュアルページを参照してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>man corosync<span style="color: #990000">.</span>conf</tt></pre></div></div>
<div class="paragraph">
<p>ノード・メンバーシップについては、Proxmox VEが提供する<span class="monospaced">pvecm</span>ツールを常に使用する必要があります。 その他の変更については、設定ファイルを手動で編集する必要があるかもしれません。 以下に、これを行うためのベスト・プラクティスのヒントをいくつか示します。</p></div>
<div class="sect3">
<h4 id="pvecm_edit_corosync_conf">5.11.1.corosync.conf<a class="headerlink" href="#pvecm_edit_corosync_conf" title="Permalink to this heading"></a>を編集します。</h4>
<div class="paragraph">
<p>corosync.confファイルの編集は必ずしも簡単ではありません。各クラスタ・ノードに2つあり、1つは<span class="monospaced">/etc/pve/corosync.confに</span>、もう1つは<span class="monospaced">/etc/corosync/corosync.confに</span>あります。クラスタ・ファイル・システムにあるものを編集すると、ローカルのものに変更が伝搬しますが、その逆はできません。</p></div>
<div class="paragraph">
<p>ファイルが変更されるとすぐに、設定は自動的に更新されます。 つまり、実行中のcorosyncに統合できる変更は、即座に反映されます。従って、編集中にファイルを保存する際に意図しない変更を引き起こさないように、常にコピーを作成し、代わりにそれを編集する必要があります。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cp /etc/pve/corosync<span style="color: #990000">.</span>conf /etc/pve/corosync<span style="color: #990000">.</span>conf<span style="color: #990000">.</span>new</tt></pre></div></div>
<div class="paragraph">
<p>次に、すべてのProxmox VEノードにプリインストールされている<span class="monospaced">nanoや</span><span class="monospaced">vim.tinyなどの</span>お気に入りのエディタで設定ファイルを開きます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンフィギュレーションを変更した後は、必ず<em>config_version</em>番号をインクリメントしてください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>必要な変更を行った後、現在の作業用設定ファイルのコピーをもう1つ作成します。これは、新しい設定の適用に失敗したり、その他の問題が発生した場合のバックアップとして機能します。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cp /etc/pve/corosync<span style="color: #990000">.</span>conf /etc/pve/corosync<span style="color: #990000">.</span>conf<span style="color: #990000">.</span>bak</tt></pre></div></div>
<div class="paragraph">
<p>そして、古い設定ファイルを新しいものに置き換えます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>mv /etc/pve/corosync<span style="color: #990000">.</span>conf<span style="color: #990000">.</span>new /etc/pve/corosync<span style="color: #990000">.</span>conf</tt></pre></div></div>
<div class="paragraph">
<p>変更が自動的に適用されるかどうかは、以下のコマンドで確認できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl status corosync journalctl -b -u corosync</tt></pre></div></div>
<div class="paragraph">
<p>変更が自動的に適用されない場合は、corosyncサービスを再起動する必要があります：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl restart corosync</tt></pre></div></div>
<div class="paragraph">
<p>エラーについては、以下のトラブルシューティングのセクションを確認してください。</p></div>
</div>
<div class="sect3">
<h4 id="_troubleshooting">5.11.2.トラブルシューティング<a class="headerlink" href="#_troubleshooting" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_issue_em_quorum_expected_votes_must_be_configured_em">問題：<em>quorum.expected_votes は</em> <a class="headerlink" href="#_issue_em_quorum_expected_votes_must_be_configured_em" title="Permalink to this heading"></a><em>に設定する必要があります</em>。</h5>
<div class="paragraph">
<p>corosyncが失敗し始め、システムログに以下のメッセージが表示された場合：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>corosync[1647]: [QUORUM] 定数プロバイダ: corosync_votequorum の初期化に失敗しました：  [QUORUM] クォーラムプロバイダ: corosync_votequorum の初期化に失敗しました。 corosync[1647]: [SERV ] サービスエンジン 'corosync_quorum' のロードに失敗しました：  [SERV ] サービスエンジン 'corosync_quorum' が 'configuration error: nodelist or quorum.expected_votes must be configured!' の理由でロードに失敗しました。</pre>
</div></div>
<div class="paragraph">
<p>これは、コンフィギュレーションでcorosync<em>ringX_addrに</em>設定したホスト名が解決できなかったことを意味します。</p></div>
</div>
<div class="sect4">
<h5 id="_write_configuration_when_not_quorate">クォーレートされていないときにコンフィギュレーションを書き込む<a class="headerlink" href="#_write_configuration_when_not_quorate" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>クォーラムのないノードで<em>/etc/pve/corosync.conf を</em>変更する必要があり、自分が何をしているかを理解している場合は、これを使用します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm 予想<span style="color: #993399">1</span></tt></pre></div></div>
<div class="paragraph">
<p>これで予想される投票数が1に設定され、クラスタがクォーレートになります。その後、設定を修正したり、最後に動作したバックアップに戻したりすることができます。</p></div>
<div class="paragraph">
<p>corosyncが起動できなくなった場合は、これだけでは不十分です。この場合、<em>/etc/corosync/corosync.confに</em>あるcorosync設定のローカルコピーを編集し、corosyncが再び起動できるようにするのが最善です。スプリットブレインの状況を避けるために、すべてのノードでこのコンフィギュレーションが同じ内容であることを確認してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_corosync_conf_glossary">5.11.3.Corosync設定用語集<a class="headerlink" href="#pvecm_corosync_conf_glossary" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
リングXアドレス</dt>
<dd>
<p>
これは、ノード間のクロノスネット接続のための異なるリンクアドレスに名前を付けます。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_cluster_cold_start">
<span>5.12.クラスターコールドスタート</span> <a class="headerlink" href="#_cluster_cold_start" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>すべてのノードがオフラインの場合、クラスタがクォーレートでないことは明らかです。これは停電後によくあるケースです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">無停電電源装置（"UPS"、"バッテリー・バックアップ "とも呼ばれます）を使ってこのような状態にならないようにするのは、特にHAを望む場合には常に良い考えです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノードの起動時に<span class="monospaced">pve-guests</span>サービスが開始され、クォーラムを待ちます。定足数が満たされると、<span class="monospaced">onboot</span>フラグが設定されているすべてのゲストが起動します。</p></div>
<div class="paragraph">
<p>ノードの電源を入れたとき、または停電後に電源が回復したとき、一部のノードが他のノードよりも速く起動する可能性があります。クォーラムに達するまでゲストの起動が遅れることを覚えておいてください。</p></div>
</div>
<div class="sect2">
<h3 id="pvecm_next_id_range">
<span>5.13.ゲストVMID自動選択</span> <a class="headerlink" href="#pvecm_next_id_range" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>新しいゲストを作成する際、ウェブインターフェースは自動的にバックエンドに空いているVMIDを尋ねます。デフォルトの検索範囲は<span class="monospaced">100</span>から<span class="monospaced">1000000</span>(スキーマによって強制される最大許容 VMID より低い) です。</p></div>
<div class="paragraph">
<p>例えば、一時的なVMと手動でVMIDを選択するVMを簡単に分けたい場合などです。 また、安定した長さのVMIDを提供したい場合もあり、その場合は下限を例えば<span class="monospaced">100000に</span>設定することで、より余裕を持たせることができます。</p></div>
<div class="paragraph">
<p>このユースケースに対応するために、<em>datacenter</em> <span class="monospaced">.cfg</span>設定ファイルを使用して、下限、上限、または両方の境界を設定することができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この範囲はnext-id API呼び出しにのみ使用されるので、厳しい制限ではありません。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_guest_migration">
<span>5.14.ゲストマイグレーション</span> <a class="headerlink" href="#_guest_migration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>仮想ゲストを他のノードに移行することは、クラスタにおいて便利な機能です。このようなマイグレーションの動作を制御する設定があります。これは設定ファイル<span class="monospaced">datacenter.cfgを介して</span>、またはAPIまたはコマンドラインパラメータを介して特定のマイグレーションに対して行うことができます。</p></div>
<div class="paragraph">
<p>ゲストがオンラインかオフラインか、またはローカルリソース（ローカルディスクなど）を持っているかどうかの違いがあります。</p></div>
<div class="paragraph">
<p>仮想マシンのマイグレーションの詳細については、<a href="#qm_migration">QEMU/KVMマイグレーションの章を</a>参照してください。</p></div>
<div class="paragraph">
<p>コンテナ移行の詳細については、<a href="#pct_migration">コンテナ移行の章を</a>参照してください。</p></div>
<div class="sect3">
<h4 id="_migration_type">5.14.1.マイグレーション・タイプ<a class="headerlink" href="#_migration_type" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>移行タイプは、移行データを暗号化された<span class="monospaced">(安全な</span>) チャネルで送信するか、暗号化されていない<span class="monospaced">(安全でない</span>) チャネルで送信するかを定義します。 移行タイプを<span class="monospaced">安全でないに</span>設定すると、仮想ゲストの RAM コンテンツも暗号化されずに転送されることになり、ゲスト内部の重要なデータ (パスワードや暗号化キーなど) の情報漏えいにつながる可能性があります。</p></div>
<div class="paragraph">
<p>従って、ネットワークを完全に制御できず、誰にも盗聴されていないことを保証できない場合は、安全なチャネルを使用することを強くお勧めします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージの移行はこの設定に従いません。現在、ストレージコンテンツは常に安全なチャネルで送信されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化には多くの計算パワーが必要なため、この設定はパフォーマンスを向上させるためにしばしば<span class="monospaced">安全でない</span>設定に変更されます。最近のシステムはハードウェアでAES暗号化を実装しているため、その影響は小さくなっています。パフォーマンスへの影響は、10Gbps以上の転送が可能な高速ネットワークで特に顕著です。</p></div>
</div>
<div class="sect3">
<h4 id="_migration_network">5.14.2.マイグレーション・ネットワーク<a class="headerlink" href="#_migration_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、Proxmox VEはクラスタ通信が行われるネットワークを使用して移行トラフィックを送信します。これは、機密性の高いクラスタトラフィックが中断される可能性があることと、このネットワークがノードで利用可能な最良の帯域幅を持たない可能性があるため、いずれも最適ではありません。</p></div>
<div class="paragraph">
<p>移行ネットワークパラメータを設定すると、すべての移行トラフィックに専用ネットワークを使用できます。メモリに加えて、これはオフライン移行のストレージトラフィックにも影響します。</p></div>
<div class="paragraph">
<p>移行ネットワークはCIDR表記を使用したネットワークとして設定されます。これには、各ノードに個別のIPアドレスを設定する必要がないという利点があります。Proxmox VEは、CIDR形式で指定されたネットワークから移行先ノードの実アドレスを判断できます。これを有効にするには、各ノードがそれぞれのネットワークで正確に1つのIPを持つようにネットワークを指定する必要があります。</p></div>
<div class="sect4">
<h5 id="_example">例<a class="headerlink" href="#_example" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ここでは、3つのノードがあり、3つのネットワークがあると仮定します。1つはインターネットとのパブリック通信用、もう1つはクラスタ通信用、そしてもう1つはマイグレーション用の専用ネットワークとして使いたい非常に高速なものです。</p></div>
<div class="paragraph">
<p>このようなセットアップのネットワーク構成は以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>iface eno1 inet manual # public network auto vmbr0 iface vmbr0 inet static address 192.X.Y.57/24 gateway 192.X.Y.1 bridge-ports eno1 bridge-stp off bridge-fd 0 # cluster network auto eno2 iface eno2 inet static address 10.1.1.1/24 # fast network auto eno3 iface eno3 inet static address 10.1.2.1/24</pre>
</div></div>
<div class="paragraph">
<p>ここでは、移行ネットワークとしてネットワーク10.1.2.0/24を使用します。1回の移行では、コマンドラインツールの<span class="monospaced">migration_network</span>パラメータを使ってこれを行うことができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm migrate 106 tre --online --migration_network 10.1.2.0/24</pre>
</div></div>
<div class="paragraph">
<p>クラスタ内のすべての移行用のデフォルト ネットワークとしてこれを設定するには、<span class="monospaced">/etc/pve/datacenter.cfg</span>ファイルの<span class="monospaced">移行</span>プロパティを設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># use dedicated migration network migration: secure,network=10.1.2.0/24</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">移行タイプは、<span class="monospaced">/etc/pve/datacenter.cfg</span> で移行ネットワークを設定する際に必ず設定する必要があります。</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pmxcfs">
6.Proxmox クラスタファイルシステム (pmxcfs)<a class="headerlink" href="#chapter_pmxcfs" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox Clusterファイルシステム("pmxcfs")は、設定ファイルを保存するためのデータベース駆動型のファイルシステムで、<span class="monospaced">corosyncを</span>使用してすべてのクラスタノードにリアルタイムでレプリケートされます。Proxmox VEに関連するすべての設定ファイルを保存するために使用します。</p></div>
<div class="paragraph">
<p>ファイルシステムはすべてのデータをディスク上の永続データベース内に格納しますが、データのコピーはRAMに存在します。このため、最大サイズには制限があり、現在は128メガバイトです。これでも数千台の仮想マシンの設定を保存するには十分です。</p></div>
<div class="paragraph">
<p>このシステムには次のような利点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
すべての設定をリアルタイムで全ノードにシームレスにレプリケーション</p>
</li>
<li>
<p>
VM IDの重複を避けるための強力な一貫性チェックを提供します。</p>
</li>
<li>
<p>
ノードがクォーラムを失った場合の読み取り専用</p>
</li>
<li>
<p>
全ノードへのcorosyncクラスタ構成の自動更新</p>
</li>
<li>
<p>
分散ロック機構付き</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_posix_compatibility">
<span>6.1.POSIX互換性</span> <a class="headerlink" href="#_posix_compatibility" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイルシステムはFUSEをベースにしているので、動作はPOSIXライクです。しかし、いくつかの機能は単に実装されていません：</p></div>
<div class="ulist"><ul>
<li>
<p>
通常のファイルやディレクトリは生成できますが、シンボリックリンクは生成できません。</p>
</li>
<li>
<p>
空でないディレクトリの名前は変更できません（この方がVMIDが一意であることを保証しやすくなるからです）。</p>
</li>
<li>
<p>
ファイルのパーミッションは変更できません。</p>
</li>
<li>
<p>
<span class="monospaced">O_EXCLの</span>作成は（古いNFSのように）アトミックではありませんでした。</p>
</li>
<li>
<p>
<span class="monospaced">O_TRUNCの</span>作成はアトミックではありません（FUSEの制限）。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_file_access_rights">
<span>6.2.ファイルアクセス権</span> <a class="headerlink" href="#_file_access_rights" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>すべてのファイルとディレクトリはユーザー<span class="monospaced">rootによって</span>所有され、グループ<span class="monospaced">www-dataを持って</span>います。書き込みパーミッションを持っているのはrootだけですが、グループ<span class="monospaced">www-dataは</span>ほとんどのファイルを読むことができます。以下のパス以下のファイルは、rootによってのみアクセス可能です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/priv//etc/pve/nodes/${NAME}/priv/。</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_technology">
<span>6.3.テクノロジー</span> <a class="headerlink" href="#_technology" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタ通信には<a href="https://www.corosync.org">Corosync Cluster Engineを</a>、データベースファイルには<a href="https://www.sqlite.org">SQliteを</a>使用しています。ファイルシステムは<a href="https://github.com/libfuse/libfuse">FUSEを</a>使用してユーザ空間に実装されています。</p></div>
</div>
<div class="sect2">
<h3 id="_file_system_layout">
<span>6.4.ファイルシステムのレイアウト</span> <a class="headerlink" href="#_file_system_layout" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイルシステムは</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve</pre>
</div></div>
<div class="sect3">
<h4 id="_files">6.4.1.ファイル<a class="headerlink" href="#_files" title="Permalink to this heading"></a></h4>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">authkey.pub</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">チケットシステムで使用される公開鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ceph.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph構成ファイル(注意: /etc/ceph/ceph.confはこれへのシンボリックリンクです)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">corosync.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corosyncクラスタ設定ファイル(Proxmox VE 4.x以前はcluster.conf)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">datacenter.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VEのデータセンター全体の設定（キーボードレイアウト、プロキシ、...）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">domains.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE認証ドメイン</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ファイアウォール/クラスタ.fw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのノードに適用されるファイアウォール設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ファイアウォール/&lt;NAME&gt;.fw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">各ノードのファイアウォール設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ファイアウォール/&lt;VMID&gt;.fw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMとコンテナのファイアウォール設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/crm_commands</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRM が現在実行している HA オペレーションを表示します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/manager_status</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ上のHAサービスに関するJSON形式の情報</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/resources.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">高可用性によって管理されるリソースとその現在の状態</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/config</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ノード固有の設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/lxc/&lt;VMID&gt;.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LXCコンテナのVM構成データ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/openvz/です。</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 4.0以前では、コンテナ設定データに使用されていました。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/pve-ssl.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">pve-ssl.pemの</span>SSL秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/pve-ssl.pem</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ウェブサーバ用のパブリックSSL証明書（クラスタCAによって署名されたもの）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/pveproxy-ssl.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">pveproxy-ssl.pem</span>の SSL 秘密鍵 (オプション)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/pveproxy-ssl.pem</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ウェブサーバの公開SSL証明書（チェーン）（<span class="monospaced">pve-ssl.pemの</span>オーバーライドはオプション）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;NAME&gt;/qemu-server/&lt;VMID&gt;.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KVMのVM設定データ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/authkey.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">チケットシステムで使用される秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/authorized_keys</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">認証用クラスタメンバーのSSHキー</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/ceph*</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph認証キーと関連機能</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/known_hosts</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">検証用クラスタ・メンバーのSSH鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/lock/*</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ全体の安全な運用を保証するために、さまざまなサービスで使用されるファイルをロックします。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/pve-root-ca.key。</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタCAの秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/shadow.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PVE Realmユーザー用シャドウパスワードファイル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/storage/&lt;ストレージID&gt;.pw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ストレージのパスワードがプレーンテキストで格納されています。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/tfa.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base64 エンコードされた二要素認証設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/token.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのAPIトークンの秘密</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">pve-root-ca.pem</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ CA のパブリック証明書</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">pve-www.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSRF トークンの生成に使用される秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">sdn/*</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ソフトウェア・デファインド・ネットワーキング（SDN）のための共有設定ファイル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ステータス.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VEの外部メトリクス・サーバー構成</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">storage.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VEのストレージ構成</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ユーザー設定</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VEのアクセス制御設定(ユーザー/グループ/...)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">仮想ゲスト/cpu-models.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">カスタムCPUモデル保存用</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">vzdump.cron</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ全体のvzdumpバックアップジョブスケジュール</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_symbolic_links">6.4.2.シンボリックリンク<a class="headerlink" href="#_symbolic_links" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタ・ファイル・システム内の特定のディレクトリは、ノード独自の設定ファイルを指すためにシンボリックリンクを使用します。したがって、以下の表で指すファイルはクラスタの各ノードで異なるファイルを指します。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ローカル</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ノード/&lt;LOCAL_HOST_NAME</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">エルエックス</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;LOCAL_HOST_NAME&gt;/lxc/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">オープンベッツ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;LOCAL_HOST_NAME&gt;/openvz/</span>(非推奨、近日削除)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">qemu-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&lt;LOCAL_HOST_NAME&gt;/qemu-server/ です。</span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_special_status_files_for_debugging_json">6.4.3.デバッグ用の特別なステータス・ファイル (JSON)<a class="headerlink" href="#_special_status_files_for_debugging_json" title="Permalink to this heading"></a></h4>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">バージョン</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイルのバージョン（ファイルの変更を検出）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">メンバー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタメンバーに関する情報</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.vmlist</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのVMのリスト</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">クラスタログ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスターログ（直近50件）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.rrd</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RRDデータ（最新のもの）</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_enable_disable_debugging">6.4.4.デバッグの有効/無効<a class="headerlink" href="#_enable_disable_debugging" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>で冗長なsyslogメッセージを有効にできます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>echo "1" &gt;/etc/pve/.debug</pre>
</div></div>
<div class="paragraph">
<p>で、冗長なsyslogメッセージを無効にします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>echo "0" &gt;/etc/pve/.debug</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_recovery">
<span>6.5.リカバリー</span> <a class="headerlink" href="#_recovery" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ハードウェアの問題など、Proxmox VEホストに大きな問題がある場合、pmxcfsデータベースファイル<span class="monospaced">/var/lib/pve-cluster/config.dbを</span>コピーして、新しいProxmox VEホストに移動すると便利です。新しいホスト (何も実行していない状態) では、<span class="monospaced">pve-cluster</span>サービスを停止して<span class="monospaced">config.db</span>ファイルを置き換える必要があります (必要なパーミッションは<span class="monospaced">0600</span>)。この後、<span class="monospaced">/etc/hostnameと</span> <span class="monospaced">/etc/hostsを</span>失ったProxmox VEホストに合わせ、再起動して確認します（VM/CTデータも忘れずに）。</p></div>
<div class="sect3">
<h4 id="_remove_cluster_configuration">6.5.1.クラスタ構成の削除<a class="headerlink" href="#_remove_cluster_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>推奨される方法は、クラスタからノードを削除した後にノードを再インストールすることです。これにより、すべての秘密クラスタ/sshキーと共有設定データが確実に破棄されます。</p></div>
<div class="paragraph">
<p>場合によっては、<a href="#pvecm_separate_node_without_reinstall">再インストール</a>せずにノードをローカルモードに戻したいこともあります。</p></div>
</div>
<div class="sect3">
<h4 id="_recovering_moving_guests_from_failed_nodes">6.5.2.失敗したノードからのゲストの回復/移動<a class="headerlink" href="#_recovering_moving_guests_from_failed_nodes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">nodes/&lt;NAME&gt;/qemu-server/</span>(VM)および<span class="monospaced">nodes/&lt;NAME&gt;/lxc/</span>(コンテナ)内のゲスト設定ファイルについて、Proxmox VEはそれぞれのゲストの所有者として含まれるノード<span class="monospaced">&lt;NAME&gt;を</span>認識します。このコンセプトにより、ゲスト設定の同時変更を防止するために、高価なクラスタ全体のロックの代わりにローカルロックを使用できます。</p></div>
<div class="paragraph">
<p>その結果、ゲストの所有ノードに障害が発生した場合(たとえば、停電、フェンシングイベントなど)、(オフラインの)所有ノードのローカルロックが取得できないため、(すべてのディスクが共有ストレージにある場合でも)通常のマイグレーションはできません。Proxmox VEの高可用性スタックには、フェンスで保護されたノードからのゲストの正しい自動回復を保証するために必要な（クラスタ全体の）ロックとウォッチドッグ機能が含まれているため、これはHA管理されたゲストの問題ではありません。</p></div>
<div class="paragraph">
<p>HA管理されていないゲストが共有ディスクのみを持つ場合 (そして、障害ノードでのみ利用可能な他のローカルリソースがない場合)<span class="monospaced">、/etc/pve/</span>内の障害ノードのディレクトリからオンラインノードのディレクトリにゲスト設定ファイルを移動するだけで、手動での復旧が可能です (これにより、ゲストの論理的な所有者または場所が変更されます)。</p></div>
<div class="paragraph">
<p>たとえば、ID<span class="monospaced">100の</span>VMをオフラインの<span class="monospaced">ノード</span>1から別のノード<span class="monospaced">node</span>2にリカバリするには、クラスタの任意のメンバーノードでrootとして次のコマンドを実行します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>mv /etc/pve/nodes/node1/qemu-server/100.conf /etc/pve/nodes/node2/qemu-server/</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このようにゲストを手動でリカバリする前に、障害が発生したソースノードが本当に電源オフ/フェンスされていることを絶対に確認してください。そうしないと、Proxmox VE のロックの原則が<span class="monospaced">mv</span>コマンドによって破られ、予期しない結果を招く可能性があります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ローカルディスク(またはオフラインノードでのみ利用可能なその他のローカルリソース)を持つゲストは、この方法では復旧できません。障害が発生したノードがクラスタに再参加するのを待つか、バックアップからそのようなゲストをリストアしてください。</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_storage">
7.Proxmox VE ストレージ<a class="headerlink" href="#chapter_storage" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEのストレージモデルは非常に柔軟です。仮想マシンイメージは、1つまたは複数のローカルストレージ、またはNFSやiSCSI（NAS、SAN）などの共有ストレージに保存できます。制限はなく、好きなだけストレージプールを構成できます。Debian Linux で利用可能なすべてのストレージ技術を使用できます。</p></div>
<div class="paragraph">
<p>VMを共有ストレージに格納する主な利点の1つは、クラスタ内のすべてのノードがVMディスクイメージに直接アクセスできるため、ダウンタイムなしに稼働中のマシンをライブマイグレーションできることです。VMイメージ・データをコピーする必要がないため、ライブ・マイグレーションは非常に高速です。</p></div>
<div class="paragraph">
<p>ストレージライブラリ(<span class="monospaced">libpve-storage-perl</span> パッケージ)は、柔軟なプラグインシステムを 使用し、全てのストレージタイプに共通のインターフェースを提供します。これは、将来さらなるストレージタイプを追加するために簡単に採用できます。</p></div>
<div class="sect2">
<h3 id="_storage_types">
<span>7.1.ストレージの種類</span> <a class="headerlink" href="#_storage_types" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージには基本的に2つのタイプがあります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ファイルレベルのストレージ</dt>
<dd>
<p>
ファイル・レベル・ベースのストレージ技術では、完全な機能を備えた（POSIX）ファイル・システムにアクセスできます。  一般的に、ブロックレベルのストレージ（下記参照）よりも柔軟性が高く、あらゆるタイプのコンテンツを保存できます。ZFSはおそらく最も先進的なシステムで、スナップショットとクローンを完全にサポートしています。</p>
</dd>
<dt class="hdlist1">
ブロックレベルのストレージ</dt>
<dd>
<p>
大きな<em>RAW</em>画像を保存できます。通常、このようなストレージに他のファイル（ISO、バックアップなど）を保存することはできません。RADOSとGlusterFSは分散システムで、ストレージデータを異なるノードに複製します。</p>
</dd>
</dl></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 2.利用可能なストレージタイプ</caption>
<col style="width:28%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">説明    </th>
<th class="tableblock halign-left valign-top">プラグインタイプ </th>
<th class="tableblock halign-left valign-top">レベル  </th>
<th class="tableblock halign-left valign-top">共有</th>
<th class="tableblock halign-left valign-top">スナップ写真</th>
<th class="tableblock halign-left valign-top">安定</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZFS（ローカル）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">ゼットスプール</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>両1</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">監督</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>ノーツー</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ビーティーアールエフエス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">ビットトランフ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">テクノロジープレビュー</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ネットワークファイルシステム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">エヌエフエス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>ノーツー</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">cifs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>ノーツー</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmoxバックアップ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">pbs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">どちらも</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlusterFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">グロスタフ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>ノーツー</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">セフエフエス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">ケフフ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">エルブイエム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">エルブイエム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>ノー</sup>スリー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LVMシン</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">ラヴムティン</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI/カーネル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イッシ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI/libiscsi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">アイソシダイレクト</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph/RBD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">アールブイ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI上のZFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">zfs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><sup>1</sup>：VMのディスクイメージは、ブロックデバイス機能を提供するZFSボリューム（zvol）データセットに格納されます。</p></div>
<div class="paragraph">
<p><sup>2</sup>: ファイルベースのストレージでは、<em>qcow2</em>フォーマットでスナップショットが可能です。</p></div>
<div class="paragraph">
<p><sup>3</sup>: iSCSIまたはFCベースのストレージの上でLVMを使用することが可能です。 そうすることで、LVMストレージを<span class="monospaced">共有する</span>ことができます。</p></div>
<div class="sect3">
<h4 id="_thin_provisioning">7.1.1.シンプロビジョニング<a class="headerlink" href="#_thin_provisioning" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>多くのストレージと QEMU イメージフォーマット<span class="monospaced">qcow2</span> は<em>シンプロビジョニングを</em>サポートしています。  シンプロビジョニングを有効にすると、ゲストシステムが実際に使用するブロックのみがストレージに書き込まれます。</p></div>
<div class="paragraph">
<p>例えば、32GBのハードディスクでVMを作成し、ゲストシステムOSをインストールした後、VMのルートファイルシステムに3GBのデータが含まれているとします。  この場合、ゲストVMが32GBのハードディスクを見ていたとしても、ストレージには3GBしか書き込まれません。このように、シンプロビジョニングでは、現在利用可能なストレージブロックよりも大きなディスクイメージを作成することができます。VMのために大きなディスクイメージを作成し、必要性が生じたときに、VMのファイルシステムのサイズを変更することなく、ストレージにディスクを追加することができます。</p></div>
<div class="paragraph">
<p>スナップショット」機能を持つすべてのストレージタイプは、シンプロビジョニングもサポートしています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージがいっぱいになると、そのストレージ上のボリュームを使用しているすべてのゲストが IO エラーを受け取ります。これはファイルシステムの不整合を引き起こし、データを破損する可能性があります。そのため、ストレージリソースの過剰なプロビジョニングを避けるか、空き領域を注意深く観察して、このような状態を回避することをお勧めします。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_storage_configuration">
<span>7.2.ストレージ構成</span> <a class="headerlink" href="#_storage_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEに関連するストレージ設定はすべて<span class="monospaced">/etc/pve/storage.cfgの</span>1つのテキストファイルに保存されます。このファイルは<span class="monospaced">/etc/pve/</span> 内にあるため、すべてのクラスタノードに自動的に配布されます。そのため、すべてのノードで同じストレージ構成が共有されます。</p></div>
<div class="paragraph">
<p>共有ストレージの構成は、すべてのノードから同じ「共有」ストレージにアクセスできるため、共有ストレージでは完全に理にかなっています。しかし、ローカルストレージタイプにも有効です。この場合、そのようなローカルストレージはすべてのノードで利用できますが、物理的に異なり、まったく異なるコンテンツを持つことができます。</p></div>
<div class="sect3">
<h4 id="_storage_pools">7.2.1.ストレージプール<a class="headerlink" href="#_storage_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各ストレージプールは<span class="monospaced">&lt;type&gt;を</span>持ち、<span class="monospaced">&lt;STORAGE_ID&gt;で</span>一意に識別されます<span class="monospaced">。</span>プール構成は次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&lt;type&gt;: &lt;STORAGE_ID&gt; &lt;property&gt; &lt;value&gt; &lt;property&gt; ...</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&lt;type&gt;: &lt;STORAGE_ID&gt;</span>行がプール定義を開始し、その後にプロパティのリストが続きます。ほとんどのプロパティは値を必要とします。いくつかのプロパティは、妥当なデフォルトを持ち、その場合、値を省略することができます。</p></div>
<div class="paragraph">
<p>具体的には、インストール後のデフォルトのストレージ構成を見てください。<span class="monospaced">local</span> という名前の特別なローカルストレージプールが 1 つ含まれており、これは<span class="monospaced">/var/lib/vz</span>ディレクトリを参照し、常に使用可能です。Proxmox VEのインストーラは、インストール時に選択したストレージタイプに応じて、追加のストレージエントリを作成します。</p></div>
<div class="listingblock">
<div class="title">デフォルトのストレージ設定<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>dir: ローカルパス /var/lib/vz content iso,vztmpl,backup # LVM ベースのデフォルトイメージストア lvmthin: local-lvm thinpool data vgname pve content rootdir,images # ZFS ベースのデフォルトイメージストア zfspool: local-zfs pool rpool/data sparse content images,rootdir</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">全く同じ基礎となるストレージを指す複数のストレージ構成があることは問題です。このような<em>エイリアスされた</em>ストレージ構成では、2つの異なるボリュームID<em>(volid</em>) がまったく同じディスクイメージを指すことになります。Proxmox VEは、イメージのボリュームIDが一意であることを期待します。<em>エイリアスされた</em>ストレージ構成に異なるコンテンツタイプを選択することは問題ありませんが、推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_common_storage_properties">7.2.2.共通ストレージ・プロパティ<a class="headerlink" href="#_common_storage_properties" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>いくつかのストレージ特性は、異なるストレージタイプ間で共通です。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
このストレージが使用可能/アクセス可能なクラスタ・ノード名のリスト。このプロパティを使用して、ストレージへのアクセスを限られたノードに制限できます。</p>
</dd>
<dt class="hdlist1">
内容</dt>
<dd>
<p>
例えば、仮想ディスクイメージ、CDROM ISOイメージ、コンテナテンプレート、コンテナルートディレクトリなどです。すべてのストレージタイプがすべてのコンテンツタイプをサポートするわけではありません。このプロパティを設定して、このストレージが何に使用されるかを選択できます。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
イメージ</dt>
<dd>
<p>
QEMU/KVM VMイメージ。</p>
</dd>
<dt class="hdlist1">
ルートディレクトリ</dt>
<dd>
<p>
コンテナデータの保存を許可します。</p>
</dd>
<dt class="hdlist1">
vztmpl</dt>
<dd>
<p>
コンテナテンプレート。</p>
</dd>
<dt class="hdlist1">
バックアップ</dt>
<dd>
<p>
バックアップファイル<span class="monospaced">（vzdump</span>）。</p>
</dd>
<dt class="hdlist1">
アイソ</dt>
<dd>
<p>
ISOイメージ</p>
</dd>
<dt class="hdlist1">
スニペット</dt>
<dd>
<p>
スニペットファイル（ゲストフックスクリプトなど</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
シェアード</dt>
<dd>
<p>
すべてのノード（または<em>nodes</em>オプションにリストされているすべて）で同じ内容を持つ単一のストレージであることを示します。ローカルストレージの内容が自動的に他のノードからアクセスできるようになるわけではなく、すでに共有されているストレージをそのようにマークするだけです！</p>
</dd>
<dt class="hdlist1">
無効にする</dt>
<dd>
<p>
このフラグを使うと、ストレージを完全に無効にすることができます。</p>
</dd>
<dt class="hdlist1">
マックスファイル</dt>
<dd>
<p>
非推奨。代わりに<span class="monospaced">prune-backups</span>を使用してください。VMごとのバックアップ・ファイルの最大数。無制限の場合は<span class="monospaced">0を</span>使用してください。</p>
</dd>
<dt class="hdlist1">
バックアップの削除</dt>
<dd>
<p>
バックアップの保持オプション。詳細については、「<a href="#vzdump_retention">バックアップの保持</a>」を参照してください。</p>
</dd>
<dt class="hdlist1">
フォーマット</dt>
<dd>
<p>
デフォルトの画像フォーマット<span class="monospaced">(raw|qcow2|vmdk</span>)</p>
</dd>
<dt class="hdlist1">
プレアロケーション</dt>
<dd>
<p>
ファイルベース ストレージ上の<span class="monospaced">raw</span>および<span class="monospaced">qcow2</span>画像に対するプリアロケーションモード<span class="monospaced">（off|metadata|falloc|full</span>）。デフォルトは<span class="monospaced">メタデータで</span>、<span class="monospaced">raw</span>画像では<span class="monospaced">off</span>と同じように扱われます。大きな<span class="monospaced">qcow2</span>イメージと組み合わせてネットワークストレージを使用する場合、<span class="monospaced">off を</span>使用するとタイムアウトを回避できます。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">異なるProxmox VEクラスタで同じストレージプールを使用することはお勧めできません。ストレージ操作によってはストレージへの排他的なアクセスが必要なため、適切なロックが必要です。これはクラスタ内では実装されていますが、異なるクラスタ間では機能しません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_volumes">
<span>7.3.ボリューム</span> <a class="headerlink" href="#_volumes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージ・データのアドレス指定には特別な記法を使用します。ストレージ・プールからデータを割り当てると、このようなボリューム識別子が返されます。ボリュームは、<span class="monospaced">&lt;STORAGE_ID&gt;の</span>後に、コロンで区切られたストレージタイプに依存するボリューム名で識別されます。有効な<span class="monospaced">&lt;VOLUME_ID&gt;は</span>次のようになります：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>local:230/サンプル画像.raw</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>local:iso/debian-501-amd64-netinst.iso</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>local:vztmpl/debian-5.0-joomla_1.5.9-1_i386.tar.gz</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>iscsi-storage:0.0.2.scsi-14f504e46494c4500494b5042546d2d646744372d31616d61</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&lt;VOLUME_ID&gt;の</span>ファイルシステム・パスを取得するには、次のようにします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesmパス &lt;VOLUME_ID</pre>
</div></div>
<div class="sect3">
<h4 id="_volume_ownership">7.3.1.ボリュームの所有権<a class="headerlink" href="#_volume_ownership" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">イメージ・</span>タイプのボリュームには所有関係が存在します。このようなボリュームは、それぞれVMまたはコンテナによって所有されます。例えば、ボリューム<span class="monospaced">local:230/example-image.raw</span>は VM 230 が所有します。ほとんどのストレージバックエンドは、この所有者情報をボリューム名にエンコードします。</p></div>
<div class="paragraph">
<p>VMまたはコンテナを削除すると、そのVMまたはコンテナが所有する関連ボリュームもすべて削除されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_command_line_interface">
<span>7.4.コマンドライン・インターフェイスの使用</span> <a class="headerlink" href="#_using_the_command_line_interface" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージ・プールやボリューム識別子の概念に慣れておくことをお勧めしますが、実際の運用では、コマンドラインでそのような低レベルの操作を行う必要はありません。通常、ボリュームの割り当てと削除はVMとコンテナの管理ツールによって行われます。</p></div>
<div class="paragraph">
<p>とはいえ、<span class="monospaced">pvesm</span>（「Proxmox VE Storage Manager」）と呼ばれるコマンドラインツールがあり、一般的なストレージ管理タスクを実行できます。</p></div>
<div class="sect3">
<h4 id="_examples">7.4.1.例<a class="headerlink" href="#_examples" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ストレージプールの追加</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm add &lt;TYPE&gt; &lt;STORAGE_ID&gt; &lt;OPTIONS&gt; pvesm add dir &lt;STORAGE_ID&gt; --path &lt;PATH&gt; pvesm add nfs &lt;STORAGE_ID&gt; --path &lt;PATH--server &lt;SERVER&gt; --export &lt;EXPORT&gt; pvesm add lvm &lt;STORAGE_ID&gt; --vgname &lt;VGNAME&gt; pvesm add iscsi &lt;STORAGE_ID&gt; --portal &lt;HOST[：PORT]&gt; --ターゲット &lt;TARGET</pre>
</div></div>
<div class="paragraph">
<p>ストレージプールの無効化</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm set &lt;STORAGE_ID&gt; --disable 1</pre>
</div></div>
<div class="paragraph">
<p>ストレージプールの有効化</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm set &lt;STORAGE_ID&gt; --disable 0</pre>
</div></div>
<div class="paragraph">
<p>ストレージオプションの変更/設定</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm set &lt;STORAGE_ID&gt; &lt;OPTIONS&gt; pvesm set &lt;STORAGE_ID&gt; --shared 1 pvesm set local --format qcow2 pvesm set &lt;STORAGE_ID&gt; --content iso</pre>
</div></div>
<div class="paragraph">
<p>ストレージプールを削除します。これはいかなるデータも削除しませんし、何かを切断したりアンマウントしたりもしません。ストレージ構成を削除するだけです。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm remove &lt;STORAGE_ID&gt; です。</pre>
</div></div>
<div class="paragraph">
<p>ボリュームの割り当て</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm alloc &lt;STORAGE_ID&gt; &lt;VMID&gt; &lt;name&gt; &lt;size&gt; [--format &lt;raw|qcow2&gt;].</pre>
</div></div>
<div class="paragraph">
<p>ローカル・ストレージに4Gボリュームを割り当てます。<span class="monospaced">&lt;name&gt;に</span>空の文字列を渡すと、名前が自動生成されます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm alloc local &lt;VMID&gt; '' 4G</pre>
</div></div>
<div class="paragraph">
<p>全巻無料</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm フリー &lt;VOLUME_ID</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">これは本当にすべてのボリュームデータを破壊します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>保管状況一覧</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesmステータス</pre>
</div></div>
<div class="paragraph">
<p>収納内容一覧</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &lt;STORAGE_ID&gt; [--vmid &lt;VMID&gt;] です。</pre>
</div></div>
<div class="paragraph">
<p>VMIDで割り当てられたボリュームの一覧</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &lt;STORAGE_ID&gt; --vmid &lt;VMID</pre>
</div></div>
<div class="paragraph">
<p>リストisoイメージ</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &lt;STORAGE_ID&gt; --content iso</pre>
</div></div>
<div class="paragraph">
<p>コンテナテンプレートの一覧</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &lt;STORAGE_ID&gt; --content vztmpl</pre>
</div></div>
<div class="paragraph">
<p>ボリュームのファイルシステムのパスを表示</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesmパス &lt;VOLUME_ID</pre>
</div></div>
<div class="paragraph">
<p>ボリューム<span class="monospaced">local:103/vm-103-disk-0.qcow</span>2をファイル<span class="monospaced">ターゲットに</span>エクスポートします。 これは主に<span class="monospaced">pvesmインポートで</span>内部的に使用されます。 ストリーム形式qcow2+sizeはqcow2形式とは異なるため、エクスポートしたファイルをVMにアタッチすることはできません。 これは他の形式でも同様です。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm export local:103/vm-103-disk-0.qcow2 qcow2+size target --with-snapshots 1</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_directory">
<span>7.5.ディレクトリバックエンド</span> <a class="headerlink" href="#storage_directory" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールのタイプ:<span class="monospaced">dir</span></p></div>
<div class="paragraph">
<p>Proxmox VEは、ローカルディレクトリまたはローカルにマウントされた共有をストレージとして使用できます。ディレクトリはファイルレベルのストレージであるため、仮想ディスクイメージ、コンテナ、テンプレート、ISOイメージ、バックアップファイルなど、あらゆる種類のコンテンツを保存できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">標準的なlinuxの<span class="monospaced">/etc/fstabを使って</span>追加ストレージをマウントし、そのマウントポイントにディレクトリストレージを定義することができます。こうすることで、Linuxでサポートされているあらゆるファイルシステムを使用することができます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このバックエンドは、基礎となるディレクトリがPOSIX互換であることを前提としていますが、それ以外のことは想定していません。これは、ストレージ・レベルでスナップショットを作成できないことを意味します。しかし、<span class="monospaced">qcow2</span>ファイル・フォーマットを使用しているVMイメージについては、このフォーマットが内部的にスナップショットをサポートしているため、回避策があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージ・タイプによっては<span class="monospaced">O_DIRECT を</span>サポートしていないものがあり、 そのようなストレージではキャッシュ・モード<span class="monospaced">none を</span>使用できません。代わりに<span class="monospaced">キャッシュモード・ライトバックを</span>使用してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>異なるコンテンツタイプを異なるサブディレクトリに格納するために、定義済みのディレクトリレイアウトを使用します。このレイアウトは、すべてのファイルレベルストレージバックエンドで使用されます。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 3.ディレクトリレイアウト</caption>
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ        </th>
<th class="tableblock halign-left valign-top">サブディレクトリ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VMイメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">images/&lt;VMID&gt;/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISOイメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">テンプレート/iso/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">コンテナテンプレート</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">テンプレート/キャッシュ</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バックアップファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ダンプ</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">スニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">スニペット</span></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_configuration_2">7.5.1.コンフィギュレーション<a class="headerlink" href="#_configuration_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、一般的なストレージ・プロパティをすべてサポートしており、さらに 2 つのプロパティを追加しています。<span class="monospaced">path</span>プロパティはディレクトリを指定するために使用します。これはファイルシステムの絶対パスである必要があります。</p></div>
<div class="paragraph">
<p>オプションの<span class="monospaced">content-dirs</span>プロパティで、デフォルトのレイアウトを変更できます。このプロパティは、コンマで区切られた識別子のリストで構成されます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vtype=パス</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">vtypeは</span>ストレージに許可されているコンテンツ・タイプの1つで、<span class="monospaced">pathは</span>ストレージのマウントポイントからの相対パスです。</p></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>dir: バックアップパス /mnt/backup content backup prune-backups keep-last=7 max-protected-backups 3 content-dirs backup=custom/backup/dir</pre>
</div></div>
<div class="paragraph">
<p>上記の構成では、<span class="monospaced">backup</span> というストレージ・プールを定義しています。このプールは、VMごとに最大7つの通常バックアップ<span class="monospaced">(keep-last=7</span>)と3つの保護バックアップを保存するために使用できます。バックアップ・ファイルの実際のパスは、<span class="monospaced">/mnt/backup/custom/backup/dir/</span>... です。</p></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions">7.5.2.ファイルの命名規則<a class="headerlink" href="#_file_naming_conventions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、VMイメージに対して明確に定義された命名スキームを使用します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&lt;VMID&gt;-&lt;NAME&gt;.&lt;フォーマット</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;VMID</span></dt>
<dd>
<p>
これはオーナーVMを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;名前</span></dt>
<dd>
<p>
これは空白のない任意の名前<span class="monospaced">(ascii</span>)です。バックエンドはデフォルトで<span class="monospaced">disk-[N]</span>を使用します。<span class="monospaced">[N]</span>は名前を一意にするために整数で置き換えられます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;フォーマット</span></dt>
<dd>
<p>
画像フォーマット<span class="monospaced">（raw|qcow2|vmdk</span>）を指定します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>VM テンプレートを作成すると、すべての VM イメージの名前が変更され、読み取り専用になり、クローンのベースイメージとして使用できるようになります：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>ベース&lt;VMID&gt;-&lt;NAME&gt;.&lt;FORMAT</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">このようなベース画像は、クローン画像を生成するために使用されます。そのため、これらのファイルは読み取り専用で、決して変更されないことが重要です。バックエンドはアクセスモードを<span class="monospaced">0444に</span>変更し、ストレージが対応していればimmutableフラグ<span class="monospaced">(chattr +i</span>)を設定します。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_storage_features">7.5.3.ストレージ機能<a class="headerlink" href="#_storage_features" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>上述したように、ほとんどのファイルシステムはスナップショットをサポートしていません。この問題を回避するために、このバックエンドは<span class="monospaced">qcow2</span>内部のスナップショット機能を使うことができます。</p></div>
<div class="paragraph">
<p>クローンも同様です。バックエンドは<span class="monospaced">qcow2の</span>ベースイメージ機能を使ってクローンを作成します。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 4.<span class="monospaced">バックエンドディールの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類                        </th>
<th class="tableblock halign-left valign-top">画像フォーマット         </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">images rootdir vztmpl iso backup snippets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生のqcow2 vmdkサブボリューム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_2">7.5.4.例<a class="headerlink" href="#_examples_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>以下のコマンドを使用して、<span class="monospaced">ローカル・</span>ストレージに4GBのイメージを割り当ててください：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm alloc local 100 vm-100-disk10.raw 4G Formatting '/var/lib/vz/images/100/vm-100-disk10.raw', fmt=raw size=4294967296 successfully created 'local:100/vm-100-disk10.raw'</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">画像名は上記の命名規則に従わなければなりません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>実際のファイルシステムのパスは</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm パス local:100/vm-100-disk10.raw /var/lib/vz/images/100/vm-100-disk10.raw</pre>
</div></div>
<div class="paragraph">
<p>で画像を削除できます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm free local:100/vm-100-disk10.raw</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_nfs">
<span>7.6.NFSバックエンド</span> <a class="headerlink" href="#storage_nfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールのタイプ:<span class="monospaced">nfs</span></p></div>
<div class="paragraph">
<p>NFSバックエンドはディレクトリバックエンドをベースにしているため、ほとんどのプロパティを共有しています。ディレクトリのレイアウトやファイルの命名規則も同じです。主な利点は、NFSサーバーのプロパティを直接設定できるので、バックエンドが自動的に共有をマウントできることです。<span class="monospaced">etc/fstab を</span>変更する必要はありません。バックエンドはサーバがオンラインかどうかをテストすることもでき、エクスポートされた共有をサーバに問い合わせる方法も提供します。</p></div>
<div class="sect3">
<h4 id="_configuration_3">7.6.1.コンフィギュレーション<a class="headerlink" href="#_configuration_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、常に設定される共有フラグを除く、すべての一般的なストレージ・プロパティをサポートしています。さらに、以下のプロパティがNFSサーバの設定に使用されます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
サーバー</dt>
<dd>
<p>
サーバーIPまたはDNS名。DNSルックアップの遅延を避けるため、通常はDNS名ではなくIPアドレスを使用することが望ましいです。非常に信頼性の高いDNSサーバーがあるか、ローカルの<span class="monospaced">/etc/hosts</span>ファイルにサーバーをリストしている場合を除きます。</p>
</dd>
<dt class="hdlist1">
輸出</dt>
<dd>
<p>
NFS エクスポート・パス (<span class="monospaced">pvesm nfsscan</span> によってリストされます)。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>NFSマウントオプションも設定できます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
パス</dt>
<dd>
<p>
ローカルマウントポイント (デフォルトは<span class="monospaced">/mnt/pve/&lt;STORAGE_ID&gt;/</span>)。</p>
</dd>
<dt class="hdlist1">
コンテンツディレクトリ</dt>
<dd>
<p>
デフォルトのディレクトリレイアウトを上書きします。オプション。</p>
</dd>
<dt class="hdlist1">
オプション</dt>
<dd>
<p>
NFS マウントオプション (<span class="monospaced">man nfs</span> を参照)。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>nfs: iso-templates パス /mnt/pve/iso-templates サーバー 10.0.0.10 エクスポート /space/iso-templates オプション vers=3,ソフトコンテンツ iso,vztmpl</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">NFSリクエストがタイムアウトした後、NFSリクエストはデフォルトで無期限に再試行されます。これは、クライアント側で予期しないハングアップを引き起こす可能性があります。読み取り専用コンテンツの場合は、再試行回数を3回に制限するNFS<span class="monospaced">ソフト</span>オプションを検討する価値があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_storage_features_2">7.6.2.ストレージ機能<a class="headerlink" href="#_storage_features_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>NFSはスナップショットをサポートしていませんが、バックエンドは<span class="monospaced">qcow2の</span>機能を使ってスナップショットとクローンを実装しています。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 5.バックエンド<span class="monospaced">nfsの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類                        </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">images rootdir vztmpl iso backup snippets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生のqcow2 vmdk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_3">7.6.3.例<a class="headerlink" href="#_examples_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>でエクスポートされたNFS共有のリストを取得できます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm nfsscan &lt;server&gt;</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_cifs">
<span>7.7.CIFSバックエンド</span> <a class="headerlink" href="#storage_cifs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールの種類：<span class="monospaced">cifs</span></p></div>
<div class="paragraph">
<p>CIFSバックエンドはディレクトリバックエンドを拡張し、CIFSマウントの手動設定は不要です。このようなストレージは、Proxmox VE APIまたはWeb UIを介して直接追加することができ、サーバのハートビートチェックやエクスポートされた共有の快適な選択など、すべてのバックエンドの利点を利用することができます。</p></div>
<div class="sect3">
<h4 id="_configuration_4">7.7.1.コンフィギュレーション<a class="headerlink" href="#_configuration_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、常に設定される共有フラグを除く、すべての一般的なストレージプロパティをサポートしています。さらに、以下の CIFS 特別プロパティが使用可能です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
サーバー</dt>
<dd>
<p>
サーバーIPまたはDNS名。必須</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">DNSルックアップの遅延を避けるため、通常はDNS名ではなくIPアドレスを使用するのが望ましいです-よほど信頼できるDNSサーバーがあるか、ローカルの<span class="monospaced">/etc/hosts</span>ファイルにサーバーをリストしている場合を除きます。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
シェア</dt>
<dd>
<p>
使用するCIFS共有(<span class="monospaced">pvesm scan cifs &lt;address&gt;</span>またはWeb UIで利用可能なものを取得)。必要です。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
CIFS ストレージのユーザー名。オプションで、デフォルトは「guest」です。</p>
</dd>
<dt class="hdlist1">
パスワード</dt>
<dd>
<p>
ユーザーパスワード。rootのみが読み取り可能なファイル<span class="monospaced">(/etc/pve/priv/storage/&lt;STORAGE-ID&gt;.pw</span>) に保存されます。</p>
</dd>
<dt class="hdlist1">
ドメイン</dt>
<dd>
<p>
このストレージのユーザードメイン（ワークグループ）を設定します。オプションです。</p>
</dd>
<dt class="hdlist1">
スミバージョン</dt>
<dd>
<p>
SMBプロトコルのバージョン。オプション、デフォルトは<span class="monospaced">3</span>。SMB1はセキュリティ上の問題からサポートされていません。</p>
</dd>
<dt class="hdlist1">
パス</dt>
<dd>
<p>
ローカルのマウントポイント。オプションで、デフォルトは<span class="monospaced">/mnt/pve/&lt;STORAGE_ID&gt;/</span>です。</p>
</dd>
<dt class="hdlist1">
コンテンツディレクトリ</dt>
<dd>
<p>
デフォルトのディレクトリレイアウトを上書きします。オプション。</p>
</dd>
<dt class="hdlist1">
オプション</dt>
<dd>
<p>
追加のCIFSマウントオプション（<span class="monospaced">man mount.cifsを</span>参照）。一部のオプションは自動的に設定されるため、ここで設定する必要はありません。Proxmox VEは常に<span class="monospaced">ソフト</span>オプションを設定します。設定に応じて、これらのオプションは自動的に設定されます:<span class="monospaced">ユーザー名</span>、<span class="monospaced">資格情報</span>、<span class="monospaced">ゲスト</span>、<span class="monospaced">ドメイン</span>、<span class="monospaced">vers</span>。</p>
</dd>
<dt class="hdlist1">
サブディレクトリ</dt>
<dd>
<p>
マウントする共有のサブディレクトリ。オプションで、デフォルトは共有のルートディレクトリです。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>cifs: backup path /mnt/pve/backup server 10.0.0.11 share VMData content backup options noserverino,echo_interval=30 username anna smbversion 3 subdir /data</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_3">7.7.2.ストレージ機能<a class="headerlink" href="#_storage_features_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CIFSはストレージレベルでのスナップショットをサポートしていません。しかし、スナップショットやクローン機能を使用したい場合は、<span class="monospaced">qcow2</span>バッキングファイルを使用することができます。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 6.バックエンド<span class="monospaced">cifsの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類                        </th>
<th class="tableblock halign-left valign-top">画像フォーマット   </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">images rootdir vztmpl iso backup snippets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生のqcow2 vmdk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_4">7.7.3.例<a class="headerlink" href="#_examples_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>でエクスポートされたCIFS共有のリストを取得できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm scan cifs &lt;server&gt; [--username &lt;username&gt;] [--password].</pre>
</div></div>
<div class="paragraph">
<p>そして、この共有をProxmox VEクラスタ全体のストレージとして追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add cifs &lt;storagename&gt; --server &lt;server&gt; --share &lt;share&gt; [--username &lt;username&gt;] [--password].</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="storage_pbs">
<span>7.8.Proxmox Backup Server</span> <a class="headerlink" href="#storage_pbs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージ・プール・タイプ:<span class="monospaced">pbs</span></p></div>
<div class="paragraph">
<p>このバックエンドを使用すると、Proxmox Backup Serverを他のストレージと同様にProxmox VEに直接統合できます。 Proxmox Backupストレージは、Proxmox VE API、CLI、またはWebインターフェイスから直接追加できます。</p></div>
<div class="sect3">
<h4 id="_configuration_5">7.8.1.コンフィギュレーション<a class="headerlink" href="#_configuration_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、常に設定される共有フラグを除く、すべての一般的なストレージプロパティを サポートしています。さらに、Proxmox Backup Serverには以下の特別なプロパティがあります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
サーバー</dt>
<dd>
<p>
サーバーIPまたはDNS名。必須</p>
</dd>
<dt class="hdlist1">
ポート</dt>
<dd>
<p>
デフォルトのポート（<span class="monospaced">8007</span>）ではなく、このポートを使用します。オプション。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
Proxmox Backup Serverストレージのユーザー名。必須です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ユーザー名にレルムを追加することを忘れないでください。例えば、<span class="monospaced">root@pamや</span><span class="monospaced">archiver@pbsの</span>ように。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
パスワード</dt>
<dd>
<p>
ユーザ・パスワード。この値は、<span class="monospaced">/etc/pve/priv/storage/&lt;STORAGE-ID&gt;.pw</span>以下のファイルに保存されます。必須。</p>
</dd>
<dt class="hdlist1">
データストア</dt>
<dd>
<p>
使用するProxmox Backup ServerデータストアのID。必須。</p>
</dd>
<dt class="hdlist1">
フィンガープリント</dt>
<dd>
<p>
Proxmox Backup Server API TLS 証明書のフィンガープリントです。Servers Dashboardまたは<span class="monospaced">proxmox-backup-manager cert info</span>コマンドで取得できます。自己署名証明書またはホストがサーバーのCAを信頼していないその他の証明書に必要です。</p>
</dd>
<dt class="hdlist1">
暗号キー</dt>
<dd>
<p>
クライアント側からバックアップデータを暗号化するためのキー。現在、非パスワード保護（キー派生関数（kdf）なし）のみがサポートされています。<span class="monospaced">etc/pve/priv/storage/&lt;STORAGE-ID&gt;.enc</span>に保存され、アクセスは root ユーザに制限されます。 <span class="monospaced">proxmox-backup-client key create --kdf none &lt;path&gt;を</span>使用して新しいものを自動生成するにはマジック値<span class="monospaced">autogenを</span>使用して<span class="monospaced">ください。</span> オプションです。</p>
</dd>
<dt class="hdlist1">
マスターパブキー</dt>
<dd>
<p>
バックアップ・タスクの一部としてバックアップ暗号化キーを暗号化するために使用される公開RSAキー。バックアップ暗号化キーの暗号化されたコピーは各バックアップに追加され、リカバリ用にProxmox Backup Serverインスタンスに保存されます。 オプションで、<span class="monospaced">encryption-keyが</span>必要です。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>pbs: backup datastore main server enya.proxmox.com content backup fingerprint 09:54:ef:...snip...:88:af:47:fe:4c:3b:cf:8b:26:88:0b:4e:3c:b2 prune-backups keep-all=1 username archiver@pbs encryption-key a9:ee:c8:02:13:...snip...:2d:53:2c:98 master-pubkey 1</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_4">7.8.2.ストレージ機能<a class="headerlink" href="#_storage_features_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox Backup Serverはブロックレベルまたはファイルレベルのバックアップのみをサポートします。Proxmox VEは仮想マシンにブロックレベル、コンテナにファイルレベルを使用します。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 7.バックエンド<span class="monospaced">pbs</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類 </th>
<th class="tableblock halign-left valign-top">画像フォーマット </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">バックアップ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="storage_pbs_encryption">7.8.3.暗号化<a class="headerlink" href="#storage_pbs_encryption" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/storage-pbs-encryption-with-key.png">
<img src="images/screenshot/storage-pbs-encryption-with-key.png" alt="screenshot/storage-pbs-encryption-with-key.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>オプションとして、GCM モードで AES-256 によるクライアント側の暗号化を設定することができます。 暗号化は、Web インターフェース、または<span class="monospaced">encryption-key</span>オプション（上記参照）を使用して CLI で設定できます。キーは、root ユーザのみがアクセスできる<span class="monospaced">/etc/pve/priv/storage/&lt;STORAGE-ID&gt;.enc</span> ファイルに保存されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">キーがないと、バックアップにアクセスできなくなります。したがって、キーは順序よく、バックアップするコンテンツとは別の場所に保管する必要があります。たとえば、システム全体をバックアップし、そのシステムのキーを使用することがあります。何らかの理由でシステムにアクセスできなくなり、復元する必要が生じた場合、暗号化キーは壊れたシステムとともに失われてしまうため、復元は不可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>迅速な災害復旧のために、鍵は安全な場所に保管し、簡単にアクセスできるようにしておくことをお勧めします。そのため、すぐに復旧できるパスワード・マネージャー内に保管するのが最適です。このバックアップとして、キーをUSBフラッシュドライブに保存し、安全な場所に保管してください。こうすることで、どのシステムからも切り離された状態になりますが、それでも緊急時には簡単に復旧できます。最後に、最悪のシナリオに備えて、キーの紙コピーを安全な場所に保管しておくことも検討してください。<span class="monospaced">paperkey</span>サブコマンドを使えば、QRコード化された鍵のバージョンを作成することができます。次のコマンドは、<span class="monospaced">paperkey</span>コマンドの出力をテキストファイルに送信し、簡単に印刷できるようにします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-backup-client key paperkey /etc/pve/priv/storage/&lt;STORAGE-ID&gt;.enc --output-format text &gt; qrkey.txt</pre>
</div></div>
<div class="paragraph">
<p>暗号化バックアップを行うすべてのクライアントが単一のパブリック・マスター・キーを使用するように設定すると、それ以降のすべての暗号化バックアップには、使用されたAES暗号化キーのRSA暗号化コピーが含まれます。対応するプライベート・マスター・キーは、クライアント・システムが利用できなくなった場合でも、AESキーの復元とバックアップの復号化を可能にします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">マスター・キー・ペアには、通常の暗号化キーと同じ保管ルールが適用されます。秘密鍵のコピーがなければ、復元は不可能です！<span class="monospaced">paperkey</span>コマンドは、安全な物理的場所に保管するために、秘密鍵のマスター・キーのコピーを作成します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化はクライアント側で管理されるため、暗号化されていないバックアップと暗号化されたバックアップが異なるキーで暗号化されていても、サーバ上の同じデータストアを使用することができます。ただし、異なるキーで暗号化されたバックアップ間の重複排除はできないため、データストアは別々に作成した方がよい場合が多いです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">例えば、信頼できるネットワークでローカルにサーバを実行している場合など、暗号化によるメリットがない場合は暗号化を使用しないでください。暗号化されていないバックアップからの復旧の方が常に簡単です。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_example_add_storage_over_cli">7.8.4.例CLIによるストレージの追加<a class="headerlink" href="#_example_add_storage_over_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>そして、この共有をProxmox VEクラスタ全体のストレージとして追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add pbs &lt;id&gt; --server &lt;server&gt; --datastore &lt;datastore&gt; --username &lt;username&gt; --fingerprint 00:B4:...--パスワード</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_glusterfs">
<span>7.9.GlusterFSバックエンド</span> <a class="headerlink" href="#storage_glusterfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールのタイプ:<span class="monospaced">glusterfs</span></p></div>
<div class="paragraph">
<p>GlusterFSはスケーラブルなネットワークファイルシステムです。モジュラーデザインを採用し、コモディティハードウェア上で動作し、低コストで可用性の高いエンタープライズストレージを提供します。このシステムは数ペタバイトまで拡張可能で、数千のクライアントを扱うことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">ノード/ブリックのクラッシュ後、GlusterFSはデータの一貫性を確認するために完全な<span class="monospaced">rsyncを</span>行います。これは大きなファイルでは非常に時間がかかるため、このバックエンドは大きなVMイメージの保存には適していません。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_6">7.9.1.コンフィギュレーション<a class="headerlink" href="#_configuration_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドはすべての一般的なストレージプロパティをサポートし、以下のGlusterFS固有のオプションを追加します：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">サーバー</span></dt>
<dd>
<p>
GlusterFS volfileサーバのIPまたはDNS名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サーバ2</span></dt>
<dd>
<p>
バックアップファイルサーバーのIPまたはDNS名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ボリューム</span></dt>
<dd>
<p>
GlusterFSボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">輸送</span></dt>
<dd>
<p>
GlusterFSトランスポート：<span class="monospaced">tcp</span>、<span class="monospaced">unix</span>または<span class="monospaced">rdma</span></p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>glusterfs：Gluster server 10.2.3.4 server2 10.2.3.5 volume glustervol content images,iso</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_2">7.9.2.ファイルの命名規則<a class="headerlink" href="#_file_naming_conventions_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ディレクトリのレイアウトとファイルの命名規則は<span class="monospaced">dir</span>バックエンドから継承しています。</p></div>
</div>
<div class="sect3">
<h4 id="_storage_features_5">7.9.3.ストレージ機能<a class="headerlink" href="#_storage_features_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ストレージはファイルレベルのインターフェイスを提供しますが、ネイティブのスナップショット/クローン実装はありません。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 8.バックエンド<span class="monospaced">glusterfsの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類                      </th>
<th class="tableblock halign-left valign-top">画像フォーマット   </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像 vztmpl iso バックアップスニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生のqcow2 vmdk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="storage_zfspool">
<span>7.10.ローカルZFSプールバックエンド</span> <a class="headerlink" href="#storage_zfspool" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールのタイプ：<span class="monospaced">zfspool</span></p></div>
<div class="paragraph">
<p>このバックエンドを使うと、ローカルのZFSプール（またはプール内のZFSファイルシステム）にアクセスできます。</p></div>
<div class="sect3">
<h4 id="_configuration_7">7.10.1.コンフィギュレーション<a class="headerlink" href="#_configuration_7" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、一般的なストレージ・プロパティである<span class="monospaced">content</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disableと</span>、以下のZFS固有のプロパティをサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
プール</dt>
<dd>
<p>
ZFSプール/ファイルシステムを選択します。すべての割り当てはそのプール内で行われます。</p>
</dd>
<dt class="hdlist1">
ブロックサイズ</dt>
<dd>
<p>
ZFSブロックサイズ・パラメータを設定します。</p>
</dd>
<dt class="hdlist1">
まばら</dt>
<dd>
<p>
ZFSシン・プロビジョニングを使用します。スパースボリュームとは、予約がボリュームサイズに等しくないボリュームのことです。</p>
</dd>
<dt class="hdlist1">
マウントポイント</dt>
<dd>
<p>
ZFSプール/ファイルシステムのマウントポイント。デフォルトは<span class="monospaced">/&lt;pool&gt;</span> です。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>zfspool: vmdata pool tank/vmdata content rootdir,images sparse</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_3">7.10.2.ファイルの命名規則<a class="headerlink" href="#_file_naming_conventions_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドでは、VMイメージに以下のような命名スキームを使用します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&lt;VMID&gt;-&lt;NAME&gt; // 通常の VM イメージ base-&lt;VMID&gt;-&lt;NAME&gt; // テンプレート VM イメージ (読み取り専用) subvol-&lt;VMID&gt;-&lt;NAME&gt; // サブボリューム (コンテナ用 ZFS ファイルシステム)</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;VMID</span></dt>
<dd>
<p>
これはオーナーVMを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;名前</span></dt>
<dd>
<p>
これは空白のない任意の名前<span class="monospaced">(ascii</span>)です。バックエンドはデフォルトで<span class="monospaced">disk[N]</span>を使用します。<span class="monospaced">[N]</span>は名前を一意にするために整数で置き換えられます。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_storage_features_6">7.10.3.ストレージ機能<a class="headerlink" href="#_storage_features_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSは、スナップショットとクローニングに関して、おそらく最も先進的なストレージタイプです。バックエンドは、VMイメージ（フォーマット<span class="monospaced">raw</span>）とコンテナデータ（フォーマット<span class="monospaced">subvol</span>）の両方にZFSデータセットを使用します。ZFSプロパティは親データセットから継承されるので、親データセットにデフォルトを設定するだけです。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表9.バックエンド<span class="monospaced">zfsの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像 rootdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生サブヴォル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_5">7.10.4.例<a class="headerlink" href="#_examples_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMイメージを保存するために、追加のZFSファイルシステムを作成することをお勧めします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># zfs create tank/vmdata</pre>
</div></div>
<div class="paragraph">
<p>新しく割り当てられたファイルシステムで圧縮を有効にするには：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># zfs set compression=on tank/vmdata</pre>
</div></div>
<div class="paragraph">
<p>で利用可能なZFSファイルシステムのリストを取得できます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm zfsscan</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_lvm">
<span>7.11.LVMバックエンド</span> <a class="headerlink" href="#storage_lvm" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージ・プールのタイプ:<span class="monospaced">lvm</span></p></div>
<div class="paragraph">
<p>LVMは、ハードディスクとパーティションの上にある軽いソフトウェアレイヤーです。利用可能なディスクスペースをより小さな論理ボリュームに分割するために使用できます。LVMはLinuxで広く使用されており、ハードドライブの管理を容易にします。</p></div>
<div class="paragraph">
<p>もう1つの使用例は、大きなiSCSI LUNの上にLVMを置くことです。そうすれば、iSCSI LUN上のスペースを簡単に管理することができます。iSCSI仕様ではスペース割り当て用の管理インターフェイスが定義されていないため、他の方法では不可能です。</p></div>
<div class="sect3">
<h4 id="_configuration_8">7.11.1.コンフィギュレーション<a class="headerlink" href="#_configuration_8" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVMバックエンドは、一般的なストレージ・プロパティである<span class="monospaced">content</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disableと</span>、以下のLVM固有のプロパティをサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ブグネーム</span></dt>
<dd>
<p>
LVMボリューム・グループ名。これは既存のボリュームグループを指す必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベース</span></dt>
<dd>
<p>
ベースボリューム。このボリュームは、ストレージにアクセスする前に自動的にアクティブ化されます。これは、LVMボリュームグループがリモートのiSCSIサーバに存在する場合に便利です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">セーフリムーブ</span></dt>
<dd>
<p>
Web UIでは "Wipe Removed Volumes "と呼ばれます。LVの削除時にデータをゼロにする ボリュームを削除する際に、すべてのデータが消去され、後から作成された他のLV（たまたま同じ物理エクステントが割り当てられている）からアクセスできないようにします。これはコストのかかる操作ですが、特定の環境ではセキュリティ対策として必要な場合があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">saferemove_throughput</span></dt>
<dd>
<p>
ワイプスループット<span class="monospaced">（cstream -t</span>パラメータ値）。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>lvm: myspace vgname myspace content rootdir,images</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_4">7.11.2.ファイルの命名規則<a class="headerlink" href="#_file_naming_conventions_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、基本的にZFSプールのバックエンドと同じ命名規則を使用します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&lt;VMID&gt;-&lt;NAME&gt; // 通常のVMイメージ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_7">7.11.3.ストレージ機能<a class="headerlink" href="#_storage_features_7" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVMは典型的なブロックストレージですが、このバックエンドはスナップショットとクローンをサポートしていません。残念ながら、通常のLVMスナップショットは、スナップショット時間中にボリュームグループ全体のすべての書き込みを妨害するため、かなり非効率的です。</p></div>
<div class="paragraph">
<p>大きな利点は、iSCSI LUNなどの共有ストレージの上で使用できることです。バックエンド自体が適切なクラスタ全体のロックを実装しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">新しいLVM-thinバックエンドはスナップショットとクローンを可能にしますが、共有ストレージをサポートしません。</td>
</tr></table>
</div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 10.バックエンド<span class="monospaced">lvmの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有   </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像 rootdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可能</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_6">7.11.4.例<a class="headerlink" href="#_examples_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>利用可能なボリュームグループを一覧表示します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm lvmscan</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_lvmthin">
<span>7.12.LVM シン バックエンド</span> <a class="headerlink" href="#storage_lvmthin" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージ・プールのタイプ:<span class="monospaced">lvmthin</span></p></div>
<div class="paragraph">
<p>LVMは通常、ボリュームの作成時にブロックを割り当てます。LVMのシンプールは、代わりに、書き込み時にブロックを割り当てます。ボリュームは物理的に利用可能なスペースよりもはるかに大きくなる可能性があるため、この動作はシン・プロビジョニングと呼ばれます。</p></div>
<div class="paragraph">
<p>通常のLVMコマンドラインツールを使用して、LVMシンプールを管理および作成できます(詳細については、<span class="monospaced">man lvmthinを</span>参照してください)。<span class="monospaced">pveという</span>LVMボリュームグループが既にあると仮定すると、以下のコマンドは、<span class="monospaced">dataという</span>新しいLVMシンプール(サイズ100G)を作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lvcreate -L 100G -n data pve lvconvert --type thin-pool pve/data</pre>
</div></div>
<div class="sect3">
<h4 id="_configuration_9">7.12.1.コンフィギュレーション<a class="headerlink" href="#_configuration_9" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVMシンバックエンドは、一般的なストレージプロパティである<span class="monospaced">content</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disableと</span>、以下のLVM固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ブグネーム</span></dt>
<dd>
<p>
LVMボリューム・グループ名。これは既存のボリュームグループを指す必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シンプール</span></dt>
<dd>
<p>
LVMシンプールの名前。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>lvmthin: local-lvm thinpool data vgname pve content rootdir,images</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_5">7.12.2.ファイルの命名規則<a class="headerlink" href="#_file_naming_conventions_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、基本的にZFSプールのバックエンドと同じ命名規則を使用します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&lt;VMID&gt;-&lt;NAME&gt; // 通常のVMイメージ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_8">7.12.3.ストレージ機能<a class="headerlink" href="#_storage_features_8" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVM thinはブロックストレージですが、スナップショットやクローンを効率的にサポートします。新しいボリュームは自動的にゼロで初期化されます。</p></div>
<div class="paragraph">
<p>LVMシン・プールは複数のノードで共有できないため、ローカル・ストレージとしてのみ使用できます。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 11.バックエンド<span class="monospaced">lvmthinの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有   </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像 rootdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_7">7.12.4.例<a class="headerlink" href="#_examples_7" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ボリュームグループ<span class="monospaced">pveで</span>利用可能なLVMシンプールをリストします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm lvmthinscan pve</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_open_iscsi">
<span>7.13.Open-iSCSI イニシエータ</span> <a class="headerlink" href="#storage_open_iscsi" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールの種類：<span class="monospaced">iscsi</span></p></div>
<div class="paragraph">
<p>iSCSIは、ストレージサーバーへの接続に広く採用されている技術です。ほとんどすべてのストレージベンダーが iSCSI をサポートしています。また、Debian ベースの<a href="https://www.openmediavault.org/">OpenMediaVault</a> など、オープンソースの iSCSI ターゲットソリューションもあります。</p></div>
<div class="paragraph">
<p>このバックエンドを使用するには、<a href="https://www.open-iscsi.com/">Open-iSCSI</a><span class="monospaced">(open-iscsi</span>) パッケージをインストールする必要があります。これは Debian の標準パッケージですが、リソースを節約するためにデフォルトではインストールされません。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># apt-get install open-iscsi</pre>
</div></div>
<div class="paragraph">
<p>低レベルのiscsi管理タスクは<span class="monospaced">iscsiadm</span>ツールを使って行うことができます。</p></div>
<div class="sect3">
<h4 id="_configuration_10">7.13.1.コンフィギュレーション<a class="headerlink" href="#_configuration_10" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、一般的なストレージ・プロパティである<span class="monospaced">content</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disable</span>、および以下のiSCSI固有のプロパティをサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ポータル</dt>
<dd>
<p>
iSCSIポータル（IPまたはDNS名とオプションのポート）。</p>
</dd>
<dt class="hdlist1">
ターゲット</dt>
<dd>
<p>
iSCSI ターゲット。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>iscsi: mynas portal 10.10.10.1 target iqn.2006-01.openfiler.com:tsn.dcb5aaaddd content none</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">iSCSIの上でLVMを使用したい場合は、<span class="monospaced">content noneを</span>設定するのが理にかなっています。そうすることで、iSCSI LUNを直接使用してVMを作成することができなくなります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_6">7.13.2.ファイルの命名規則<a class="headerlink" href="#_file_naming_conventions_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>iSCSIプロトコルは、データを割り当てたり削除したりするインターフェースを定義していません。代わりに、それはターゲット側で行われる必要があり、ベンダー固有です。ターゲットは単に番号付きLUNとしてエクスポートします。そのため、Proxmox VEのiSCSIボリューム名は、Linuxカーネルから見たLUNに関する情報をエンコードしているだけです。</p></div>
</div>
<div class="sect3">
<h4 id="_storage_features_9">7.13.3.ストレージ機能<a class="headerlink" href="#_storage_features_9" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>iSCSIはブロック・レベル・タイプのストレージで、管理インターフェイスを提供しません。  そのため、通常は1つの大きなLUNをエクスポートし、そのLUNの上にLVMをセットアップするのがベストです。その後、LVMプラグインを使ってiSCSI LUN上のストレージを管理することができます。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 12.バックエンド<span class="monospaced">iscsiの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_examples_8">7.13.4.例<a class="headerlink" href="#_examples_8" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リモートのiSCSIポータルをスキャンし、可能なターゲットのリストを返します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm scan iscsi &lt;ホスト[:ポート]&gt;。</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_iscsidirect">
<span>7.14.ユーザーモードiSCSIバックエンド</span> <a class="headerlink" href="#storage_iscsidirect" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールの種類：<span class="monospaced">iscidirect</span></p></div>
<div class="paragraph">
<p>このバックエンドは基本的に Open-iSCSI バックエンドと同じ機能を提供しますが、 実装にはユーザレベルのライブラリを使用します。このバックエンドを使用するには<span class="monospaced">libiscsi-bin</span>パッケージをインストールする必要があります。</p></div>
<div class="paragraph">
<p>カーネル・ドライバが関与していないので、これはパフォーマンスの最適化と見なすことができることに留意すべきです。しかしこれには、そのようなiSCSI LUNの上でLVMを使用できないという欠点があります。そのため、ストレージサーバー側ですべての領域の割り当てを管理する必要があります。</p></div>
<div class="sect3">
<h4 id="_configuration_11">7.14.1.コンフィギュレーション<a class="headerlink" href="#_configuration_11" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザーモード iSCSI バックエンドは、Open-iSCSI バックエンドと同じ設定オプションを使用します。</p></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>iscsidirect: faststore portal 10.10.10.1 target iqn.2006-01.openfiler.com:tsn.dcb5aaaddd</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_10">7.14.2.ストレージ機能<a class="headerlink" href="#_storage_features_10" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">このバックエンドはVMでのみ動作します。コンテナはこのドライバを使用できません。</td>
</tr></table>
</div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表13.バックエンド<span class="monospaced">iscsidirect</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ceph_rados_block_devices">
<span>7.15.Ceph RADOSブロックデバイス (RBD)</span> <a class="headerlink" href="#ceph_rados_block_devices" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージ・プールのタイプ:<span class="monospaced">rbd</span></p></div>
<div class="paragraph">
<p><a href="https://ceph.com">Cephは</a>、優れたパフォーマンス、信頼性、スケーラビリティを提供するように設計された分散オブジェクトストアおよびファイルシステムです。RADOSブロックデバイスは豊富な機能を備えたブロックレベルストレージを実装しており、次のような利点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
シンプロビジョニング</p>
</li>
<li>
<p>
サイズ変更可能なボリューム</p>
</li>
<li>
<p>
分散および冗長（複数のOSDにストライピング）</p>
</li>
<li>
<p>
完全なスナップショットとクローン機能</p>
</li>
<li>
<p>
自己治癒</p>
</li>
<li>
<p>
単一障害点なし</p>
</li>
<li>
<p>
エクサバイトレベルまで拡張可能</p>
</li>
<li>
<p>
カーネルおよびユーザー空間の実装が可能</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">小規模な導入では、Proxmox VEノードでCephサービスを直接実行することも可能です。最近のハードウェアはCPUパワーとRAMに余裕があるため、ストレージサービスとVMを同じノードで実行できます。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="storage_rbd_config">7.15.1.コンフィギュレーション<a class="headerlink" href="#storage_rbd_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、一般的なストレージプロパティである<span class="monospaced">node</span>、<span class="monospaced">disable</span>、<span class="monospaced">contentと</span>、以下の<span class="monospaced">rbd</span>固有のプロパティをサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
モノホスト</dt>
<dd>
<p>
モニタデーモンのIPのリスト。オプション。CephがProxmox VEクラスタで実行されていない場合にのみ必要です。</p>
</dd>
<dt class="hdlist1">
プール</dt>
<dd>
<p>
Cephプール名。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
RBDユーザID。オプションで、CephがProxmox VEクラスタで実行されていない場合にのみ必要です。 ユーザIDのみを使用することに注意してください。client. "タイプの接頭辞は省略する必要があります。</p>
</dd>
<dt class="hdlist1">
クルブド</dt>
<dd>
<p>
krbdカーネルモジュールを通してradosブロックデバイスへのアクセスを強制します。オプション。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナは、オプション値とは無関係に<span class="monospaced">krbdを</span>使用します。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">外部Cephクラスタの構成例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>rbd: ceph-external monhost 10.1.1.20 10.1.1.21 10.1.1.22 pool ceph-external content images username admin</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">rbd</span>ユーティリティを使って低レベルの管理作業を行うことができます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_authentication">7.15.2.認証<a class="headerlink" href="#_authentication" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">Proxmox VEクラスタにCephがローカルにインストールされている場合、ストレージの追加時に以下が自動的に実行されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>デフォルトで有効になっている<span class="monospaced">cephx</span>認証を使用する場合、外部のCephクラスタからキーリングを提供する必要があります。</p></div>
<div class="paragraph">
<p>CLIでストレージを構成するには、まず、キーリングを含むファイルを利用できるようにする必要があります。1つの方法は、外部CephクラスタからProxmox VEノードの1つにファイルを直接コピーすることです。次の例では、実行するノードの<span class="monospaced">/root</span>ディレクトリにコピーします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># scp &lt;外部 cephserver&gt;:/etc/ceph/ceph.client.admin.keyring /root/rbd.keyring</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">pvesm</span>CLIツールを使用して外部RBDストレージを設定します。<span class="monospaced">--keyring</span>パラメータを使用し、コピーしたキーリング・ファイルへのパスを指定します。  たとえば、以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add rbd &lt;名前&gt; --monhost "10.1.1.20 10.1.1.21 10.1.1.22" --content images --keyring /root/rbd.keyring</pre>
</div></div>
<div class="paragraph">
<p>GUIで外部RBDストレージを設定する場合、キーリングをコピーして適切なフィールドに貼り付けることができます。</p></div>
<div class="paragraph">
<p>キーホルダーは</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/priv/ceph/&lt;STORAGE_ID&gt;.keyring</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">外部クラスタに接続する場合は、必要な機能のみを持つキーリングを作成することをお勧めします。Cephユーザ管理の詳細については、Cephドキュメントを参照してください。<span class="footnote" id="_footnote_cephusermgmt"><br><a href="https://docs.ceph.com/en/quincy/rados/operations/user-management/">[Cephユーザ管理</a>]</span>。<span class="footnote" id="_footnote_cephusermgmt"><br></span></td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_ceph_client_configuration_optional">7.15.3.Cephクライアントの構成(オプション)<a class="headerlink" href="#_ceph_client_configuration_optional" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>外部Cephストレージに接続しても、外部クラスタ上のconfig DBでクライアント固有のオプションを設定できるとは限りません。Cephキーリングの横に<span class="monospaced">ceph.confを</span>追加して、ストレージのCephクライアント設定を変更できます。</p></div>
<div class="paragraph">
<p>ceph.confはストレージと同じ名前にする必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/priv/ceph/&lt;STORAGE_ID&gt;.conf</pre>
</div></div>
<div class="paragraph">
<p>可能な設定については、RBD設定リファレンス<span class="footnote"><br>[RBD configuration reference<a href="https://docs.ceph.com/en/quincy/rbd/rbd-config-ref/">https://docs.ceph.com/en/quincy/rbd/rbd-config-ref/]</a><br></span>を参照してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これらの設定を軽率に変更しないでください。Proxmox VEは&lt;STORAGE_ID&gt;.confをストレージ設定にマージします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_storage_features_11">7.15.4.ストレージ機能<a class="headerlink" href="#_storage_features_11" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">rbd</span>バックエンドはブロックレベルのストレージで、完全なスナップショットとクローン機能を実装しています。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表14.バックエンド<span class="monospaced">rbdの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像 rootdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="storage_cephfs">
<span>7.16.Ceph Filesystem (CephFS)</span> <a class="headerlink" href="#storage_cephfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールのタイプ:<span class="monospaced">cephfs</span></p></div>
<div class="paragraph">
<p>CephFSはPOSIX準拠のファイルシステムを実装し、<a href="https://ceph.com">Ceph</a>ストレージクラスタを使用してデータを格納します。CephFSはCephをベースに構築されているため、Cephの特性のほとんどを共有します。これには、冗長性、スケーラビリティ、自己回復、高可用性が含まれます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEは<a href="#chapter_pveceph">Cephのセットアップを管理</a>できるため、CephFSストレージの構成が容易になります。最新のハードウェアは多くの処理能力とRAMを備えているため、ストレージサービスとVMを同じノードで実行してもパフォーマンスに大きな影響はありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>CephFSストレージプラグインを使用するには、Debian純正のCephクライアントを置き換えて、<a href="#sysadmin_package_repositories_ceph">Cephリポジトリを</a>追加する必要があります。 追加したら、<span class="monospaced">apt updateを</span>実行し、続いて<span class="monospaced">apt dist-upgradeを</span>実行して、最新のパッケージを取得します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">他のCephリポジトリが設定されていないことを確認してください。 設定されていない場合、インストールに失敗するか、ノード上にパッケージのバージョンが混在して予期しない動作が発生します。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="storage_cephfs_config">7.16.1.コンフィギュレーション<a class="headerlink" href="#storage_cephfs_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、一般的なストレージプロパティの<span class="monospaced">nodes</span>、<span class="monospaced">disable</span>、<span class="monospaced">contentの</span>ほか、以下の<span class="monospaced">cephfs</span>固有のプロパティもサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
エフエスネーム</dt>
<dd>
<p>
Ceph FSの名前。</p>
</dd>
<dt class="hdlist1">
モノホスト</dt>
<dd>
<p>
モニタデーモンアドレスのリスト。オプション。CephがProxmox VEクラスタで実行されていない場合にのみ必要です。</p>
</dd>
<dt class="hdlist1">
パス</dt>
<dd>
<p>
ローカルのマウントポイント。オプションで、デフォルトは<span class="monospaced">/mnt/pve/&lt;STORAGE_ID&gt;/</span>です。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
CephユーザID。オプション。CephがProxmox VEクラスタで実行されていない場合にのみ必要で、デフォルトは<span class="monospaced">admin</span>です。</p>
</dd>
<dt class="hdlist1">
サブディレクトリ</dt>
<dd>
<p>
マウントするCephFSサブディレクトリ。オプション、デフォルトは<span class="monospaced">/</span>です。</p>
</dd>
<dt class="hdlist1">
ヒューズ</dt>
<dd>
<p>
カーネルクライアントの代わりにFUSEを介してCephFSにアクセスします。オプション、デフォルトは<span class="monospaced">0</span>。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">外部Cephクラスタの構成例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>cephfs: cephfs-external monhost 10.1.1.20 10.1.1.21 10.1.1.22 path /mnt/pve/cephfs-external content backup username admin fs-name cephfs</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">cephxが無効になっていない場合は、クライアントの秘密鍵ファイルを設定することを忘れないでください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_authentication_2">7.16.2.認証<a class="headerlink" href="#_authentication_2" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEクラスタにCephがローカルにインストールされている場合、ストレージの追加時に以下が自動的に実行されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>デフォルトで有効になっている<span class="monospaced">cephx</span>認証を使用する場合、外部Cephクラスタからシークレットを提供する必要があります。</p></div>
<div class="paragraph">
<p>CLIでストレージを設定するには、まず、シークレットを含むファイルを利用できるようにする必要があります。1つの方法は、外部CephクラスタからProxmox VEノードの1つにファイルを直接コピーすることです。次の例では、実行するノードの<span class="monospaced">/root</span>ディレクトリにコピーします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># scp &lt;外部 cephserver&gt;:/etc/ceph/cephfs.secret /root/cephfs.secret</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">pvesm</span>CLIツールを使用して外部RBDストレージを設定します。<span class="monospaced">--keyring</span>パラメータを使用し、コピーしたシークレットファイルへのパスを指定します。  たとえば、以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add cephfs &lt;name&gt; --monhost "10.1.1.20 10.1.1.21 10.1.1.22" --content backup --keyring /root/cephfs.secret</pre>
</div></div>
<div class="paragraph">
<p>GUIで外部RBDストレージを設定する場合、該当するフィールドにシークレットをコピー&amp;ペーストできます。</p></div>
<div class="paragraph">
<p><span class="monospaced">rbd</span>バックエンドは<span class="monospaced">[client.userid]</span>セクションも含んでいるのとは対照的に、シークレットはキーそのものだけです。</p></div>
<div class="paragraph">
<p>秘密は</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/priv/ceph/&lt;STORAGE_ID&gt;.secret</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">useridは</span>クラスタにアクセスするように設定されているクライアントIDです。Cephユーザ管理の詳細については、Cephのドキュメントを参照してください。<span class="footnoteref"><br><a href="#_footnote_cephusermgmt">[cephusermgmt]</a><br></span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ceph auth get-key client.userid &gt; cephfs.secret</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_12">7.16.3.ストレージ機能<a class="headerlink" href="#_storage_features_12" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">cephfs</span>バックエンドは、Cephクラスタ上のPOSIX準拠ファイルシステムです。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表15.バックエンド<span class="monospaced">cephfsの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類              </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vztmpl ISOバックアップスニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">皆無</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes<sup>[1]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[<sup>1]</sup>既知のバグは存在しませんが、スナップショットは十分なテストが行われていないため、安定性は保証されていません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_btrfs">
<span>7.17.BTRFSバックエンド</span> <a class="headerlink" href="#storage_btrfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールの種類：<span class="monospaced">btrfs</span></p></div>
<div class="paragraph">
<p>表面的には、このストレージタイプはディレクトリストレージタイプと非常に似ているので、一般的な概要についてはディレクトリバックエンドのセクションを参照してください。</p></div>
<div class="paragraph">
<p>主な違いは、このストレージタイプでは、スナップショットを取得し、スナップショットを保持したままオフラインストレージの移行をサポートするために、<span class="monospaced">ローフォーマットディスクが</span>サブボリュームに配置されることです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">BTRFSは、ファイルを開く際に<span class="monospaced">O_DIRECT</span>フラグを尊重します。つまり、VMはキャッシュ・モード<span class="monospaced">noneを</span>使用すべきではなく、そうでなければチェックサム・エラーが発生します。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_12">7.17.1.コンフィギュレーション<a class="headerlink" href="#_configuration_12" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、ディレクトリ・ストレージと同様に設定します。それ自身がマウントポイントでもないディレクトリを BTRFS ストレージとして追加する場合は、<span class="monospaced">is_mountpoint</span>オプションで実際のマウントポイントを指定することを強くお勧めします。</p></div>
<div class="paragraph">
<p>たとえば、BTRFS ファイルシステムが<span class="monospaced">/mnt/data2</span>にマウントされ、その<span class="monospaced">pve-storage/</span>サブディレクトリ（スナップショットである可能性があり、これを推奨）を<span class="monospaced">data2</span> というストレージプールとして追加する場合、次のエントリを使用できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>btrfs: data2 パス /mnt/data2/pve-storage コンテンツ rootdir,images is_mountpoint /mnt/data2</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snapshots">7.17.2.スナップショット<a class="headerlink" href="#_snapshots" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>サブボリュームまたは<span class="monospaced">RAW</span>ファイルのスナップショットを作成する場合、スナップショットは、同じパスに<span class="monospaced">@と</span>スナップショット名を付けた読み取り専用のサブボリュームとして作成されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_zfs">
<span>7.18.ZFS over ISCSI バックエンド</span> <a class="headerlink" href="#storage_zfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールのタイプ：<span class="monospaced">zfs</span></p></div>
<div class="paragraph">
<p>このバックエンドは、ストレージとして ZFS プールを持ち、iSCSI ターゲットを実装したリモートマシンに<span class="monospaced">ssh</span> 経由でアクセスします。各ゲストディスクに対してZVOLを作成し、iSCSI LUNとしてエクスポートします。このLUNはProxmox VEによってゲストディスクに使用されます。</p></div>
<div class="paragraph">
<p>以下のiSCSIターゲット実装がサポートされています：</p></div>
<div class="ulist"><ul>
<li>
<p>
LIO（リナックス）</p>
</li>
<li>
<p>
IET (Linux)</p>
</li>
<li>
<p>
ISTGT (FreeBSD)</p>
</li>
<li>
<p>
コムスター（ソラリス）</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このプラグインを使用して、通常のストレージアプライアンス/SAN上にZFSプールを作成することはできません。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_13">7.18.1.コンフィギュレーション<a class="headerlink" href="#_configuration_13" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS over iSCSI プラグインを使用するには、リモートマシン (ターゲット) が Proxmox VE ノードからの<span class="monospaced">ssh</span>接続を受け付けるように設定する必要があります。Proxmox VEはターゲットに接続してZVOLを作成し、iSCSI経由でエクスポートします。 認証は<span class="monospaced">/etc/pve/priv/zfs/&lt;target_ip&gt;_id_rsaに</span>保存されたsshキー(パスワード保護なし)を介して行われます。</p></div>
<div class="paragraph">
<p>以下の手順でsshキーを作成し、IP 192.0.2.1のストレージマシンに配布します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mkdir /etc/pve/priv/zfs ssh-keygen -f /etc/pve/priv/zfs/192.0.2.1_id_rsa ssh-copy-id -i /etc/pve/priv/zfs/192.0.2.1_id_rsa.pub root@192.0.2.1 ssh -i /etc/pve/priv/zfs/192.0.2.1_id_rsa root@192.0.2.1</pre>
</div></div>
<div class="paragraph">
<p>バックエンドは、一般的なストレージ・プロパティである<span class="monospaced">content</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disable</span>、および以下のZFS over ISCSI固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
プール</dt>
<dd>
<p>
iSCSIターゲット上のZFSプール/ファイルシステム。すべての割り当てはそのプール内で行われます。</p>
</dd>
<dt class="hdlist1">
ポータル</dt>
<dd>
<p>
iSCSIポータル（IPまたはDNS名とオプションのポート）。</p>
</dd>
<dt class="hdlist1">
ターゲット</dt>
<dd>
<p>
iSCSI ターゲット。</p>
</dd>
<dt class="hdlist1">
アイソサイプロバイダ</dt>
<dd>
<p>
リモートマシンで使用されるiSCSIターゲット実装</p>
</dd>
<dt class="hdlist1">
コムスター</dt>
<dd>
<p>
コムスター・ビューのターゲット・グループ。</p>
</dd>
<dt class="hdlist1">
comstar_hg</dt>
<dd>
<p>
comstarビューのホストグループ。</p>
</dd>
<dt class="hdlist1">
lio_tpg</dt>
<dd>
<p>
Linux LIOターゲット用ターゲットポータルグループ</p>
</dd>
<dt class="hdlist1">
ナウライトキャッシュ</dt>
<dd>
<p>
ターゲットの書き込みキャッシュを無効にします。</p>
</dd>
<dt class="hdlist1">
ブロックサイズ</dt>
<dd>
<p>
ZFSブロックサイズ・パラメータを設定します。</p>
</dd>
<dt class="hdlist1">
まばら</dt>
<dd>
<p>
ZFSシン・プロビジョニングを使用します。スパースボリュームとは、予約がボリュームサイズに等しくないボリュームのことです。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>zfs: lio blocksize 4k iscsiprovider LIO pool tank portal 192.0.2.111 target iqn.2003-01.org.linux-iscsi.lio.x8664:sn.xxxxxxxxxx content images lio_tpg tpg1 sparse 1 zfs: solaris blocksize 4k target iqn.2010-08.org.illumos:02:xxxxxxxx-xxxxxx-xxxxxx-xxxxxxxxxx:tank1 pool tank iscsiprovider comstar portal 192.0.2.112 content images zfs: freebsd blocksize 4k target iqn.2007-09.jp.ne.peach.istgt:tank1 pool tank iscsiprovider istgt portal 192.0.2.113 content images zfs: iet blocksize 4k target iqn.2001-04.com.example:tank1 pool tank iscsiprovider iet portal 192.0.2.114 content images</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_13">7.18.2.ストレージ機能<a class="headerlink" href="#_storage_features_13" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS over iSCSIプラグインは、スナップショットが可能な共有ストレージを提供します。ZFSアプライアンスが導入における単一障害点にならないようにする必要があります。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 16.バックエンド<span class="monospaced">iscsiの</span>ストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類  </th>
<th class="tableblock halign-left valign-top">画像フォーマット  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップ写真 </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">生</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pveceph">
8.ハイパーコンバージドCephクラスタの展開<a class="headerlink" href="#chapter_pveceph" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2">
<span>8.1.はじめに</span> <a class="headerlink" href="#_introduction_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-status-dashboard.png">
<img src="images/screenshot/gui-ceph-status-dashboard.png" alt="screenshot/gui-ceph-status-dashboard.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEは、コンピュートシステムとストレージシステムを統合します。つまり、クラスタ内の同じ物理ノードをコンピューティング（VMやコンテナの処理）とレプリケートされたストレージの両方に使用できます。コンピュートリソースとストレージリソースの従来のサイロを単一のハイパーコンバージドアプライアンスにまとめることができ、個別のストレージネットワーク（SAN）やネットワークアタッチドストレージ（NAS）を介した接続がなくなります。オープンソースのSoftware-Defined StorageプラットフォームであるCephの統合により、Proxmox VEはハイパーバイザーノード上でCephストレージを直接実行・管理する機能を備えています。</p></div>
<div class="paragraph">
<p>Cephは、優れたパフォーマンス、信頼性、スケーラビリティを提供するように設計された分散オブジェクトストアおよびファイルシステムです。</p></div>
<div class="ulist"><div class="title">Proxmox VE上のCephの利点は以下のとおりです：</div><ul>
<li>
<p>
CLIとGUIによる簡単なセットアップと管理</p>
</li>
<li>
<p>
シン・プロビジョニング</p>
</li>
<li>
<p>
スナップショットのサポート</p>
</li>
<li>
<p>
セルフヒーリング</p>
</li>
<li>
<p>
エクサバイト・レベルまで拡張可能</p>
</li>
<li>
<p>
ブロック、ファイルシステム、オブジェクトストレージを提供</p>
</li>
<li>
<p>
パフォーマンスと冗長性の特性が異なるプールの設定</p>
</li>
<li>
<p>
データは複製されるため、フォールトトレラントです。</p>
</li>
<li>
<p>
コモディティハードウェアで動作</p>
</li>
<li>
<p>
ハードウェアRAIDコントローラは不要</p>
</li>
<li>
<p>
オープンソース</p>
</li>
</ul></div>
<div class="paragraph">
<p>小規模から中規模の導入の場合、RADOS Block Devices (RBD)またはCephFSを使用するCephサーバをProxmox VEクラスタノードに直接インストールできます(<a href="#ceph_rados_block_devices">Ceph RADOS Block Devices (RBD)</a>を参照)。 最近のハードウェアはCPUパワーとRAMが大きいため、ストレージサービスと仮想ゲストを同じノードで実行できます。</p></div>
<div class="paragraph">
<p>管理を簡素化するために、Proxmox VEは、組み込みのWebインタフェース、または<em>pveceph</em>コマンドラインツールを使用して、Proxmox VEノードに<a href="http://ceph.com">Ceph</a>サービスをインストールおよび管理するためのネイティブ統合を提供します。</p></div>
</div>
<div class="sect2">
<h3 id="_terminology">
<span>8.2.用語</span> <a class="headerlink" href="#_terminology" title="Permalink to this heading"></a></h3>
<div class="ulist"><div class="title">Cephは複数のデーモンで構成され、RBDストレージとして使用します：</div><ul>
<li>
<p>
Cephモニタ（ceph-mon、またはMON）</p>
</li>
<li>
<p>
Ceph Manager（ceph-mgr、またはMGS）</p>
</li>
<li>
<p>
Cephメタデータサービス（ceph-mds、またはMDS）</p>
</li>
<li>
<p>
Ceph Object Storage Daemon (ceph-osd、またはOSD)</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKZUlEQVRoge2aa3BU5RmAn3Pbs7fs
JmwCRGITk0hVLFAtNWoq6pAiU0cKaYfa6ShT+YN4YbQw9F/8QX+UMv6gM3Q6oxMV6TgIbe10Gq2g
cSzDpRaFgmIk4SKB3LP3Pff+SM66m+xuFvEyzvSbeefsbva8+z7nvXzf934RHMfhmzzEr9uAqx3/
B/i6xzceQP6iFDmT1cBxHNzCkFsgBEHIXnNeC1f7u1cN4DiOY9s2rliWhWVZWRDHcbJGC4KAJElI
koQoioii6IiieFUgnxvAtm3HNdg0Tbq6uuju7ubYsWP09vYyMjKCpmmoqkokEqGhoYGFCxfS2tpK
W1sbiqJkRZIkZxLoikGEK50H3CdumiZ9fX3s3LmT3bt3U1V3A0033cKc2nkEQxV4PSqSJOI4Dpqu
k0gkGLx8kZ4T7zF87iSrV69m3bp1NDY2oqoqHo8HWZa5Uo9cEYBt245lWRiGQUdHB9u2beOe1Y8w
/6bFVAT9xJJpYvEUiVSGjG5gmBY4DqIoonoUfF4PoYAfRRE5/8kp3njlD6xfv54tW7YQCATw+Xyu
R8r2RtkAtm07pmly5MgRHn/8cZSaZpbcfjd+n5f+wVEGRqJkdCMv3vME8t77vB6qQn4+OX6YsXPH
2bp1Ky0tLQQCAVRVdb0xI0RZZdQ1ft++fSxbtozrlqzgrnvvI5nRee9UL+f6h9B0A1EQEIsBiOKE
TL7XdJOBkTg1jYtouu1+1qxZw549e4hGo6TTaUzTxLbtGZ/ujEmca/wvHnqYnz/2DLNn19B74TID
I9HPjCvwlLMls4RHdMNC8IRZ8dBmnnp6E7Zts2rVKgB8Ph+yLDulPFEyhBzHcUzT5PDhwyxbtow1
j3YQqanmozOfEk2kChuLQ3x0lGQihmM7qF4vVdWz8fr9hYFyoK30OG/ufpYXXniB1tZWwuEwXq8X
WZaLJnZJAMuyHE3TuPPOO2lcsoLGpmZO9ZzPM37q0x0ZuISla2xY2077j5ZSFargZM9Znt97gE8u
DBb3ziRIfPAcF4/v59VXX6W6uppQKISqqkiSVBCgaA64odPR0YFS00xjUzNnLlwmmkznxbKYI45j
k04mefaZJ3j04VXMqZ6Fx6Pw3QXXs/3Xv6Tp2rnTALL3T8wDBCLz8M2Zz/bt24nFYjPmQ0EAt9b3
9fWxbds2ltxxD0NjMQbdmC+QlIIgIIkSoWCAH971/Wk6PYrCg/f/oHiVmhSP6qWm/gY6Ozvp6ekh
mUyi6zq2bWeXK+UAYFkWO3fu5N72dQT8Pi5cGp6xuoiiiBoMktH0gl5trp87DbqQBEMRbl32U3bt
2kUikUDTtOzypGwAwzDYvXs3316wiEuDoxiGWVaZrAjP4qW/vFUQ4NAHPdlwKQWiqF4qa+ro6uoi
kUiQTqcxDKM8ADd8Xn/9dWZdewMVwSCDo7GicT8NSBTZt/8oT259jgOHThBNpIgmUjy3dz/P7z2Q
r2My7gs9FNUXoPpbN9Ld3Z0FKBRG0+YBN3y6u7tpWnAr8WR6+gxLfr03TYNMMolhGFimiWVbXDzb
x4G3/4XgOIiyTF3DdW45nHG2RhBQfX6q65o5evQoy5cvn9BtWUiSRG5FLQhg2zbHjh3j+tsfKFrv
3R8EGL7UT23NLNraWmi+ro5r5kSYHakiVOHH7/OiyDKxZIonf9NJIpWZMQcEwOPx4vNXcPr0B2Qy
mdxEzrO34ExsWRa9vb3csjzEaP9w1sUFZ1RBQJJk/vjbTdTXzS2kDoBQwI9HmcEDOSJ7PAiiSH9/
P7quY5omlmVN01soB3Ach5GREbyqiqabM8a+NxAglcmvPOf7h9jR+WdOfNQLwNtHTzIeT+XFfdGC
IAiIogSOQzQaxTRNdy4ozwO2baNpGpIkY1j2RAJTeJ0jCAKRmtmcPHORmkglxz48y/5DJ3jrnUPM
b7iGxx7+MZZls/efR0rG/VQPgwMC2eQtZHxRAABVVbM3lEpgV178azcvvfYOgiCgZTJomsbGR9oR
BIHzl4YYGo2VlcCuWOaE5xVFwbbtqVHiCJOZXBQgEomg6zqSKOIUMrqER+LRKItvaubW78wH4NLQ
WNmx7+q1DB1ZkgmFQohifqS7xhcFEEWRhoYGEokEqkeeWPLmurcEiGPbpJJJfvbAPVl95/qHJyYv
mH5/EdG1FA5QW1ubzZvc8pm1deoHroKFCxcycPkiPlWdnmC5iTxlVk2n0wT9Xu69Y3FW51g8OfH3
ye+WnAgnRcukyKQSNDU1Icty7n65NACAJEm0trbSc/zfVAT9JZ/U1NWklslwx/duxqMoWX0Zzcy/
bwr0VCDT0NDTSS6f/ZBFixZlN/ySJJXnAVEUaWtrY6DvOIoiFlx5FhPLsrjl5uvzdPq8nsLfL6I3
FR1FlhUG+v5LS0tLtmtRlgcEYaL5pCgKq1ev5lzPKfxeT8FwKSQA115Tk6eztjpcsubn6rUMnfj4
MLHxIZYuXYrX683rVpQDIIiiiKIorFu3jn+8vIPKCt+0cCkG4m4Bc0fd3OqCoVIIJDo2iCQrvPu3
F1m5cmVeu6VQz6hgDrj1t7GxkfXr1/Px+wdRPcr02C+wmgxVVnLm3KU8ffNmVxX03lSgRHSEVGyc
oYt9tLe3U19fTzAYzAKUVYVyw0hVVbZs2cJw7/uYyZGSIeCCeFWVd499jGGaWX1zq8OfrYOKeC+T
ijM+cBHHsRju/Q9r164lFAoRDAbdPfEVAQiiKOLxeAgEAmzdupW/v/A7RLPEyjTHuGjKYMfLb3B5
eBzdMNl/+CSmZReN+0wqztDFs4iSxIE9O9mwYQPhcJhwOEwgEMhN4GkEZXUlYrEYe/bs4elfbWLF
Q5tQKyJlVaRy+kSJ6AhjA58iihJdf9rBUxufYPny5cyZM6esrkTJxpabzIFAgFWrVmHbNps3b+bu
n6wnVF2H4lHLmlULgZiGTmxkgGR8DNu2efOV3/PUxo20tbURiUSorKwkEAhkk7fYmLE36rZX0uk0
0WiUgwcP0tHRQcW8G5ndsIBgaBYe1TvtyRYDMXWNZGyU+Ngwkiwz+GkfQ73vsWHDBhYvXkwkEmHW
rFmEw2G3M1eyR1pWczcXIh6PMz4+zvbt2+ns7OS2+x6kanYdqjeA1xdAUb3IioIoSjg42JaJaejo
mTRaOoGeTiHJEvGxYd55rZP29nbWrl1LOBymqqqKyspKKioqyjK+bIBcCE3TSCaTxGIxenp62LVr
F11dXdTUL2BO/Xx8/goEUcSxbYSJ2EGS5IlzgnSC/r4PuXzmOEuXLmXlypXU19cTCoUIh8OEQqEr
7k5/7vOBdDpNMpkkkUiQSCTo7u7m6NGjnD59mv7+fqLRKIZhoCgKoVCI2tpampqaWLRoES0tLfh8
Pvx+P8FgkGAw+OWfD7gj94RG13U0TSOdTpNOp8lMbmQ0TcvbArrrK1mW8Xg8eL3e7BLB5/N9dSc0
uSP3jMwwjKy4G3AXwB0ugAsx5YzMndW//DOy3OFMjGwrxrKs7NX9LBfAneFFUcxec6rU5zqpvCqA
qTCT16/0nPgLA/i6xjf+Xw3+B2ll/uiqTaJTAAAAAElFTkSuQmCC" />
</td>
<td class="content">Ceph<span class="footnote"><br>[Ceph intro<a href="https://docs.ceph.com/en/quincy/start/">https://docs.ceph.com/en/quincy/start/]</a><br></span> 、そのアーキテクチャ<span class="footnote"><br>[Ceph architecture<a href="https://docs.ceph.com/en/quincy/architecture/">https://docs.ceph.com/en/quincy/architecture/]</a><br></span>および語彙<span class="footnote"><br>[Ceph glossary<a href="https://docs.ceph.com/en/quincy/glossary">https://docs.ceph.com/en/quincy/glossary]</a><br></span> に精通することを強くお勧めします。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_recommendations_for_a_healthy_ceph_cluster">
<span>8.3.健全なCephクラスタの推奨事項</span> <a class="headerlink" href="#_recommendations_for_a_healthy_ceph_cluster" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ハイパーコンバージドProxmox + Ceph Clusterを構築するには、セットアップに少なくとも3台の(できれば)同一のサーバを使用する必要があります。</p></div>
<div class="paragraph">
<p><a href="https://docs.ceph.com/en/quincy/start/hardware-recommendations/">Cephのウェブサイトの</a>推奨事項も確認してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">以下の推奨事項は、ハードウェアを選択する際のおおまかな指針とお考えください。セットアップをテストし、ヘルスとパフォーマンスを継続的に監視する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">中央演算処理装置</div><p>Cephサービスは2つのカテゴリに分類できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
CPUを集中的に使用し、高いCPU基本周波数とマルチコアの恩恵を受けています。このカテゴリのメンバーは以下の通り：</p>
<div class="ulist"><ul>
<li>
<p>
オブジェクト・ストレージ・デーモン（OSD）サービス</p>
</li>
<li>
<p>
CephFSで使用されるメタデータサービス(MDS)</p>
</li>
</ul></div>
</li>
<li>
<p>
複数のCPUコアを必要としない、適度なCPU使用率。これらは</p>
<div class="ulist"><ul>
<li>
<p>
モニター（MON）サービス</p>
</li>
<li>
<p>
マネージャー（MGR）サービス</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph">
<p>単純な経験則として、安定した耐久性のあるCephパフォーマンスに必要な最小限のリソースを提供するために、各Cephサービスに少なくとも1つのCPUコア（またはスレッド）を割り当てる必要があります。</p></div>
<div class="paragraph">
<p>たとえば、1つのノードでCephモニタ、Cephマネージャ、および6つのCeph OSDサービスを実行する予定であれば、基本的で安定したパフォーマンスを目標とする場合、8つのCPUコアをCeph専用に確保する必要があります。</p></div>
<div class="paragraph">
<p>OSD の CPU 使用率は、主にディスクの性能に依存することに注意してください。ディスクの IOPS<strong>(IO</strong> <strong>Operations</strong>per<strong>Second</strong>) が高ければ高いほど、OSD サービスで使用できる CPU は増えます。 NVMe のような最新のエンタープライズ SSD ディスクでは、100,000 を超える高い IOPS 負荷をサブミリ秒のレイテンシで永続的に維持できるため、各 OSD は複数の CPU スレッドを使用できます。</p></div>
<div class="paragraph">
<div class="title">メモリー</div><p>特にハイパーコンバージドセットアップでは、メモリ消費を注意深く計画し、監視する必要があります。仮想マシンとコンテナのメモリ使用量の予測に加えて、Cephが優れた安定したパフォーマンスを提供するために十分なメモリを利用できることも考慮する必要があります。</p></div>
<div class="paragraph">
<p>経験則として、およそ<strong>1TiBのデータに対して、1GiBのメモリが</strong>OSDによって使用されます。通常の状態では使用量は少ないかもしれませんが、リカバリー、再バランス、バックフィルなどの重要な操作の際には、最も多く使用されます。 つまり、通常の操作ですでに使用可能なメモリを最大にするのは避けるべきで、むしろ障害に対処するための余裕を残しておく必要があります。</p></div>
<div class="paragraph">
<p>OSDサービス自体にはさらにメモリが必要です。デーモンのCeph BlueStoreバックエンドには、デフォルトで<strong>3～5GiBのメモリが</strong>必要です(調整可能)。</p></div>
<div class="paragraph">
<div class="title">ネットワーク</div><p>Cephトラフィック専用に、少なくとも10Gbps以上のネットワーク帯域幅を使用することを推奨します。10Gbps以上のスイッチがない場合、3～5ノードのクラスタにはメッシュ型ネットワークセットアップ<span class="footnote"><br>[Full Mesh Network for Ceph<a href="https://pve.proxmox.com/wiki/Full_Mesh_Network_for_Ceph_Server">https://pve.proxmox.com/wiki/Full_Mesh_Network_for_Ceph_Server]</a><br></span>もオプションとして使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">特にリカバリ中のトラフィック量は、同じネットワーク上の他のサービスに干渉し、特にレイテンシに敏感なProxmox VEのcorosyncクラスタスタックが影響を受け、クラスタクォーラムが失われる可能性があります。  Cephトラフィックを専用の物理的に分離されたネットワークに移動すると、corosyncだけでなく、仮想ゲストによって提供されるネットワークサービスでも、このような干渉が回避されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>必要な帯域幅を見積もるには、ディスクの性能を考慮する必要があります。1台のHDDが1Gbのリンクを飽和させることはないかもしれませんが、ノードあたり複数のHDD OSDが10Gbpsを飽和させることもあります。 最新のNVMeアタッチドSSDが使用されている場合、1台で10Gbps以上の帯域幅を飽和させることができます。このような高性能セットアップには、少なくとも25Gpbsを推奨します。また、基盤となるディスクの潜在性能をフルに活用するには、40Gbpsまたは100Gbps以上が必要な場合もあります。</p></div>
<div class="paragraph">
<p>不安な場合は、高性能なセットアップのために3つの（物理的な）独立したネットワークを使用することをお勧めします：</p></div>
<div class="ulist"><ul>
<li>
<p>
Ceph(内部)クラスタトラフィック用の超高帯域幅(25Gbps以上)ネットワーク1つ。</p>
</li>
<li>
<p>
cephサーバとcephクライアントのストレージトラフィック間のCeph（パブリック）トラフィック用の高帯域幅（10Gpbs以上）ネットワーク1つ。ニーズによっては、仮想ゲストラフィックとVMライブマイグレーショントラフィックのホストにも使用できます。</p>
</li>
<li>
<p>
遅延の影響を受けやすいcorosyncクラスタ通信のために、1つの中帯域幅（1 Gbps）専用。</p>
</li>
</ul></div>
<div class="paragraph">
<div class="title">ディスク</div><p>Cephクラスタのサイズを計画する際は、リカバリ時間を考慮することが重要です。特に小規模なクラスタでは、リカバリに時間がかかる場合があります。リカバリ時間を短縮し、リカバリ中に後続の障害イベントが発生する可能性を最小限に抑えるため、小規模なセットアップではHDDの代わりにSSDを使用することをお勧めします。</p></div>
<div class="paragraph">
<p>一般的に、SSD は回転ディスクよりも多くの IOPS を提供します。この点を考慮すると、コストが高くなることに加えて、<a href="#pve_ceph_device_classes">クラスベースの</a>プール分離を実装することが理にかなっている場合があります。OSDを高速化するもう1つの方法は、より高速なディスクをジャーナルまたはDB/Write-<strong>Ahead</strong>-Logデバイスとして使用することです。 より高速なディスクを複数のOSDに使用する場合、OSDとWAL/DB(またはジャーナル)ディスクの適切なバランスを選択する必要があります。</p></div>
<div class="paragraph">
<p>ディスクの種類は別として、Cephはノードごとに均等なサイズで均等な量のディスクを使用するのが最適です。たとえば、1 TBディスク1台と250 GBディスク3台の混在セットアップよりも、各ノード内に500 GBディスク4台の方が優れています。</p></div>
<div class="paragraph">
<p>OSD数とシングルOSD容量のバランスも取る必要があります。容量を増やすと、ストレージ密度を高めることができますが、OSDが1つ故障すると、Cephは一度に多くのデータを回復しなければならなくなります。</p></div>
<div class="paragraph">
<div class="title">RAIDを避ける</div><p>Cephはデータオブジェクトの冗長性とディスクへの複数の並列書き込み(OSD)を独自に処理するため、通常、RAIDコントローラを使用してもパフォーマンスや可用性は向上しません。それどころか、Cephはディスク全体を単独で処理するように設計されています。RAIDコントローラはCephのワークロード用に設計されておらず、書き込みやキャッシュのアルゴリズムがCephのものと干渉する可能性があるため、状況が複雑になり、場合によってはパフォーマンスが低下することもあります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">RAIDコントローラは避けてください。代わりにホストバスアダプタ（HBA）を使用してください。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_install_wizard">
<span>8.4.Cephの初期インストールと構成</span> <a class="headerlink" href="#pve_ceph_install_wizard" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_using_the_web_based_wizard">8.4.1.ウェブベースのウィザードの使用<a class="headerlink" href="#_using_the_web_based_wizard" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-install.png">
<img src="images/screenshot/gui-node-ceph-install.png" alt="screenshot/gui-node-ceph-install.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEには、Ceph用の使いやすいインストールウィザードが用意されています。クラスタノードの1つをクリックし、メニューツリーのCephセクションに移動します。Cephがまだインストールされていない場合は、インストールを促すプロンプトが表示されます。</p></div>
<div class="paragraph">
<p>ウィザードは複数のセクションに分かれており、Cephを使用するには、各セクションを正常に終了する必要があります。</p></div>
<div class="paragraph">
<p>まず、インストールするCephのバージョンを選択する必要があります。他のノードのものを選ぶか、Cephをインストールする最初のノードであれば最新のものを選びます。</p></div>
<div class="paragraph">
<p>インストールを開始すると、ウィザードがProxmox VEのCephリポジトリから必要なパッケージをすべてダウンロードしてインストールします。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-install-wizard-step0.png">
<img src="images/screenshot/gui-node-ceph-install-wizard-step0.png" alt="screenshot/gui-node-ceph-install-wizard-step0.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>この設定はProxmox VEのクラスタ<a href="#chapter_pmxcfs">構成ファイルシステム(pmxcfs)</a>を通じて残りのすべてのクラスタメンバに自動的に配布されるため、このステップはクラスタごとに1回だけ必要です。</p></div>
<div class="paragraph">
<p>コンフィギュレーション・ステップには以下の設定が含まれます：</p></div>
<div class="ulist" id="pve_ceph_wizard_networks"><ul>
<li>
<p>
<strong>パブリックネットワーク：</strong>このネットワークは、パブリックストレージ通信(Ceph RBDバックアップディスクやCephFSマウントを使用する仮想マシンなど)、およびさまざまなCephサービス間の通信に使用されます。この設定は必須です。 <br>
  CephのトラフィックをProxmox VEクラスタ通信(corosync)、および仮想ゲストの前面(パブリック)ネットワークから分離することを強くお勧めします。そうしないと、Cephの広帯域幅IOトラフィックが他の低レイテンシ依存サービスに干渉する可能性があります。</p>
</li>
<li>
<p>
<strong>クラスタ・ネットワーク：</strong> <a href="#pve_ceph_osds">OSD</a>レプリケーションとハートビートトラフィックも分離するように指定します。この設定はオプションです。 <br>
  物理的に分離されたネットワークを使用すると、Cephパブリックと仮想ゲストのネットワークが緩和され、Cephのパフォーマンスも大幅に向上するため、推奨されます。 <br>
  Cephクラスタネットワークを構成し、後で別の物理的に分離されたネットワークに移動できます。</p>
</li>
</ul></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-install-wizard-step2.png">
<img src="images/screenshot/gui-node-ceph-install-wizard-step2.png" alt="screenshot/gui-node-ceph-install-wizard-step2.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>さらに2つのオプションがありますが、これは上級者向けなので、自分が何をしているかを知っている場合のみ変更してください。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>レプリカの数</strong>：オブジェクトが複製される頻度を定義します。</p>
</li>
<li>
<p>
<strong>最小レプリカ数</strong>：I/Oを完了としてマークするために必要なレプリカの最小数を定義します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>さらに、最初のモニターノードを選択する必要があります。このステップは必須です。</p></div>
<div class="paragraph">
<p>これで完了です。最後のステップとして成功ページが表示され、さらに進む方法が表示されます。これで、システムはCephの使用を開始する準備ができました。 開始するには、追加の<a href="#pve_ceph_monitors">モニタ</a>、<a href="#pve_ceph_osds">OSD</a>、および少なくとも1つの<a href="#pve_ceph_pools">プールを</a>作成する必要があります。</p></div>
<div class="paragraph">
<p>この章の残りの部分では、Proxmox VEベースのCephセットアップを最大限に活用する方法を説明します。これには、前述のヒントのほか、新しいCephクラスタに追加すると便利な<a href="#pveceph_fs">CephFSなどが</a>含まれます。</p></div>
</div>
<div class="sect3">
<h4 id="pve_ceph_install">8.4.2.CephパッケージのCLIインストール<a class="headerlink" href="#pve_ceph_install" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Webインタフェースで利用可能な推奨のProxmox VE Cephインストールウィザードの代わりに、各ノードで次のCLIコマンドを使用できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecephインストール</tt></pre></div></div>
<div class="paragraph">
<p>これにより、<span class="monospaced">/etc/apt/sources.list.d/ceph.list</span>に<span class="monospaced">apt</span>パッケージリポジトリが設定され、必要なソフトウェアがインストールされます。</p></div>
</div>
<div class="sect3">
<h4 id="_initial_ceph_configuration_via_cli">8.4.3.CLIによるCephの初期設定<a class="headerlink" href="#_initial_ceph_configuration_via_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE Cephインストールウィザードを使用するか(推奨)、1つのノードで以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph init --network<span style="color: #993399">10.10</span><span style="color: #990000">.</span><span style="color: #993399">10.</span><span style="color: #993399">0/24</span></tt></pre></div></div>
<div class="paragraph">
<p>これにより、<span class="monospaced">/etc/pve/ceph.confに</span>Ceph専用のネットワークを持つ初期構成が作成されます。このファイルは、<a href="#chapter_pmxcfs">pmxcfsを</a>使用して、すべてのProxmox VEノードに自動的に配布されます。このコマンドはまた、<span class="monospaced">/etc/ceph/ceph.confに</span>シンボリックリンクを作成し、このファイルを指すようにします。 このため、構成ファイルを指定しなくても、Cephコマンドを単純に実行できます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_monitors">
<span>8.5.Cephモニタ</span> <a class="headerlink" href="#pve_ceph_monitors" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-monitor.png">
<img src="images/screenshot/gui-ceph-monitor.png" alt="screenshot/gui-ceph-monitor.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Ceph Monitor (MON)<span class="footnote"><br>[Ceph Monitor<a href="https://docs.ceph.com/en/quincy/rados/configuration/mon-config-ref/">https://docs.ceph.com/en/quincy/rados/configuration/mon-config-ref/]</a><br></span>クラスタマップのマスターコピーを維持します。高可用性を実現するには、少なくとも3つのモニタが必要です。インストールウィザードを使用した場合、1つのモニタがすでにインストールされています。クラスタが小規模から中規模であれば、3つ以上のモニタは必要ありません。これ以上必要になるのは、本当に大規模なクラスタだけです。</p></div>
<div class="sect3">
<h4 id="pveceph_create_mon">8.5.1.モニターの作成<a class="headerlink" href="#pveceph_create_mon" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>モニタを配置する各ノードで(3つのモニタを推奨)、GUIの<em>Ceph → Monitor</em>タブを使用するか、runしてモニタを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>プベケフ・モン・クリエイト</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="pveceph_destroy_mon">8.5.2.モニターの破棄<a class="headerlink" href="#pveceph_destroy_mon" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUIでCephモニタを削除するには、まずツリービューでノードを選択し、<strong>Ceph → Monitor</strong>パネルに移動します。MONを選択して、<strong>Destroy</strong>ボタンをクリックします。</p></div>
<div class="paragraph">
<p>CLIでCephモニタを削除するには、まずMONが実行されているノードに接続します。次に、次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ヴェセフ・モン討伐</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">定足数には少なくとも3名のモニターが必要です。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_manager">
<span>8.6.Ceph Manager</span> <a class="headerlink" href="#pve_ceph_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Managerデーモンはモニタと並行して実行されます。クラスタを監視するためのインタフェースを提供します。Ceph luminousのリリース以降、少なくとも1つのceph-mgr<span class="footnote"><br>[Ceph Manager<a href="https://docs.ceph.com/en/quincy/mgr/">https://docs.ceph.com/en/quincy/mgr/]</a><br></span>デーモンが必要です。</p></div>
<div class="sect3">
<h4 id="pveceph_create_mgr">8.6.1.マネージャーの作成<a class="headerlink" href="#pveceph_create_mgr" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>複数のManagerをインストールできますが、常にアクティブなManagerは1つだけです。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>を作成します。</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Ceph Managerはモニタノードにインストールすることをお勧めします。高可用性を実現するには、複数のマネージャをインストールします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveceph_destroy_mgr">8.6.2.デストロイ・マネージャー<a class="headerlink" href="#pveceph_destroy_mgr" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUIでCeph Managerを削除するには、まずツリービューでノードを選択し、<strong>Ceph → Monitor</strong>パネルに移動します。マネージャを選択し、[<strong>Destroy]</strong>ボタンをクリックします。</p></div>
<div class="paragraph">
<p>CLIでCephモニタを削除するには、まずManagerが実行されているノードに接続します。次に、次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>コンベック破壊</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">マネージャはハード依存ではありませんが、PG自動スケーリング、デバイスのヘルスモニタリング、テレメトリなどの重要な機能を処理するため、Cephクラスタにとって重要です。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_osds">
<span>8.7.Ceph OSD</span> <a class="headerlink" href="#pve_ceph_osds" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-osd-status.png">
<img src="images/screenshot/gui-ceph-osd-status.png" alt="screenshot/gui-ceph-osd-status.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Ceph<strong>Object</strong> <strong>Storage</strong> <strong>Daemonは</strong>、ネットワーク経由でCephのオブジェクトを格納します。物理ディスクごとに1つのOSDを使用することをお勧めします。</p></div>
<div class="sect3">
<h4 id="pve_ceph_osd_create">8.7.1.OSDの作成<a class="headerlink" href="#pve_ceph_osd_create" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OSD は Proxmox VE の Web インターフェイスまたは<span class="monospaced">pveceph を</span>使用して CLI で作成できます。例えば</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd create /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>.</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">少なくとも3台のノードと、ノード間で均等に分散された少なくとも12台のOSDを備えたCephクラスタを推奨します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ディスクが以前（例えばZFSやOSDとして）使用されていた場合は、まずその使用痕跡をすべて消す必要があります。パーティションテーブル、ブートセクタ、その他のOSDの残りを削除するには、以下のコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph-volume lvm zap /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>--destroy</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">上記のコマンドはディスク上のすべてのデータを破壊します！</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">Ceph Bluestore</div><p>Ceph Krakenリリースから、Bluestore<span class="footnote"><br>[Ceph Bluestore<a href="https://ceph.com/community/new-luminous-bluestore/">https://ceph.com/community/new-luminous-bluestore/]</a><br></span> という新しいCeph OSDストレージタイプが導入されました。 Ceph Luminous以降、OSD作成時のデフォルトはこれです。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd create /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>.</tt></pre></div></div>
<div class="paragraph">
<div class="title">block.dbとblock.wal</div><p>OSDに別のDB/WALデバイスを使いたい場合は、<em>-db_devと</em> <em>-wal_dev</em>オプションで指定できます。別々に指定しない場合、WALはDBと一緒に配置されます。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd create /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>-db_dev /dev/sd<span style="color: #990000">[</span>Y<span style="color: #990000">]</span>-wal_dev /dev/sd<span style="color: #990000">[</span>Z<span style="color: #990000">]</span>.</tt></pre></div></div>
<div class="paragraph">
<p>それぞれ<em>-db_size</em>と<em>-wal_size</em>パラメータで直接サイズを指定できます。それらが与えられない場合は、以下の値（順番に）が使われます：</p></div>
<div class="ulist"><ul>
<li>
<p>
Ceph設定からのbluestore_block_{db,wal}_size...</p>
<div class="ulist"><ul>
<li>
<p>
... データベース、セクション<em>osd</em></p>
</li>
<li>
<p>
... データベース、セクション<em>グローバル</em></p>
</li>
<li>
<p>
...ファイル、セクション<em>osd</em></p>
</li>
<li>
<p>
... ファイル、セクション<em>グローバル</em></p>
</li>
</ul></div>
</li>
<li>
<p>
OSDサイズの10%(DB)/1%(WAL)</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">DBはBlueStoreの内部メタデータを保存し、WALはBlueStoreの内部ジャーナルまたはライトアヘッド・ログです。パフォーマンスを向上させるために、高速なSSDまたはNVRAMを使用することをお勧めします。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">Cephファイルストア</div><p>Ceph Luminous以前は、Ceph OSDのデフォルトのストレージタイプとしてファイルストアが使用されていました。 Ceph Nautilus以降、Proxmox VEでは<em>pvecephを</em>使用したOSDの作成がサポートされなくなりました。ファイルストアOSDを作成する場合は、<em>ceph-volumeを</em>直接使用してください。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph-volume lvm create --filestore --data /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>--journal /dev/sd<span style="color: #990000">[</span>Y<span style="color: #990000">]</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="pve_ceph_osd_destroy">8.7.2.OSDの破棄<a class="headerlink" href="#pve_ceph_osd_destroy" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUIでOSDを削除するには、まずツリービューでProxmox VEノードを選択し、<strong>Ceph → OSD</strong>パネルに進みます。次に、破棄するOSDを選択し、<strong>OUT</strong>ボタンをクリックします。OSDのステータスが<span class="monospaced">inから</span> <span class="monospaced">outに</span>変わったら、<strong>STOP</strong>ボタンをクリックします。最後に、ステータスが<span class="monospaced">upから</span> <span class="monospaced">downに</span>変わったら、<span class="monospaced">More</span>ドロップダウン・メニューから<strong>Destroyを</strong>選択します。</p></div>
<div class="paragraph">
<p>CLIでOSDを削除するには、次のコマンドを実行します。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd out<span style="color: #990000">&lt;ID&gt;</span><span style="color: #990000"> systemctl</span>stop<span style="color: #990000"> ceph-osd@&lt;ID</span><span style="color: #990000">&gt;.</span>service</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最初のコマンドは、データ配布にOSDを含めないようにCephに指示します。2番目のコマンドは、OSDサービスを停止します。この時点まで、データは失われません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>次のコマンドはOSDを破棄します。さらにパーティションテーブルを破棄するには、<em>-cleanup</em>オプションを指定します。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd destroy<span style="color: #990000">&lt;ID&gt;</span>です。</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">上記のコマンドはディスク上のすべてのデータを破壊します！</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_pools">
<span>8.8.Cephプール</span> <a class="headerlink" href="#pve_ceph_pools" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-pools.png">
<img src="images/screenshot/gui-ceph-pools.png" alt="screenshot/gui-ceph-pools.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>プールはオブジェクトを格納するための論理グループです。これは、<strong>配置</strong> <strong>グループ</strong><span class="monospaced">（PG</span>、<span class="monospaced">pg_num</span>）として知られるオブジェクトのコレクションを保持します。</p></div>
<div class="sect3">
<h4 id="_create_and_edit_pools">8.8.1.プールの作成と編集<a class="headerlink" href="#_create_and_edit_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEホストのコマンドラインまたはWebインタフェースから、<strong>Ceph → Poolsで</strong>プールを作成および編集できます。</p></div>
<div class="paragraph">
<p>オプションが指定されていない場合、デフォルトで<strong>128個のPG</strong>、<strong>3個のレプリカ</strong>、<strong>2個のレプリカのmin_sizeを</strong>設定します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">min_sizeを<strong>1に設定しないで</strong>ください。min_sizeが1のレプリケート・プールでは、レプリカが1つしかないときにオブジェクトに対するI/Oが許可されるため、データ損失、不完全なPG、または未発見のオブジェクトが発生する可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>PG-Autoscalerを有効にするか、セットアップに基づいてPG数を計算することをお勧めします。計算式とPG計算機<span class="footnote"><br>[PG計算機<a href="https://web.archive.org/web/20210301111112/http://ceph.com/pgcalc/">https://web.archive.org/web/20210301111112/http://ceph.com/pgcalc/]</a><br></span>はオンラインで参照できます。Ceph Nautilus以降では、セットアップ後にPG数<span class="footnote" id="_footnote_placement_groups"><br>[配置グループ<a href="https://docs.ceph.com/en/quincy/rados/operations/placement-groups/">https://docs.ceph.com/en/quincy/rados/operations/placement-groups/]</a><br></span>を変更できます。</p></div>
<div class="paragraph">
<p>PG autoscaler<span class="footnote" id="_footnote_autoscaler"><br>[Automated Scaling<a href="https://docs.ceph.com/en/quincy/rados/operations/placement-groups/#automated-scaling">https://docs.ceph.com/en/quincy/rados/operations/placement-groups/#automated-scaling]</a><br></span>は、バックグラウンドでプールの PG カウントを自動的にスケールできます。<span class="monospaced">ターゲット サイズ</span>または<span class="monospaced">ターゲット比率の</span>詳細パラメータを設定すると、PG オートスケーラがより良い決定を下すのに役立ちます。</p></div>
<div class="listingblock">
<div class="title">CLIでプールを作成する例</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool create<span style="color: #990000">&lt;</span> <span style="color: #990000">プール名&gt;</span>--add_storages</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プールにストレージを自動的に定義したい場合は、Webインタフェースで「Add as Storage」チェックボックスをチェックしたままにするか、プール作成時にコマンドラインオプション<em>--add_storagesを</em>使用します。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="_pool_options">プールオプション<a class="headerlink" href="#_pool_options" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-pool-create.png">
<img src="images/screenshot/gui-ceph-pool-create.png" alt="screenshot/gui-ceph-pool-create.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>以下のオプションは、プールの作成時に使用でき、プールの編集時にも一部使用できます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
名称</dt>
<dd>
<p>
プールの名前。これは一意でなければならず、後から変更することはできません。</p>
</dd>
<dt class="hdlist1">
サイズ</dt>
<dd>
<p>
オブジェクトあたりのレプリカ数。Cephは常にオブジェクトのコピーをこの数にしようとします。デフォルト:<span class="monospaced">3</span>。</p>
</dd>
<dt class="hdlist1">
PGオートスケールモード</dt>
<dd>
<p>
自動 PG スケーリングモード<span class="footnoteref"><br><a href="#_footnote_autoscaler">[autoscaler]</a><br></span>プールの。<span class="monospaced">warn</span> に設定すると、プールの PG 数が最適でない場合に警告メッセージを生成します。デフォルト:<span class="monospaced">warn</span>。</p>
</dd>
<dt class="hdlist1">
ストレージとして追加</dt>
<dd>
<p>
新しいプールを使用して、VM またはコンテナ・ストレージを構成します。 デフォルト：<span class="monospaced">true</span>（作成時にのみ表示されます）。</p>
</dd>
</dl></div>
<div class="dlist"><div class="title">高度なオプション</div><dl>
<dt class="hdlist1">
最小サイズ</dt>
<dd>
<p>
オブジェクトあたりの最小レプリカ数。PGのレプリカ数がこの数未満の場合、Cephはプール上のI/Oを拒否します。デフォルト:<span class="monospaced">2</span>。</p>
</dd>
<dt class="hdlist1">
クラッシュルール</dt>
<dd>
<p>
クラスタ内のオブジェクト配置のマッピングに使用するルール。これらのルールは、クラスタ内でのデータの配置方法を定義します。デバイスベースのルールについては、<a href="#pve_ceph_device_classes">Ceph CRUSH &amp; デバイスクラスを</a>参照してください。</p>
</dd>
<dt class="hdlist1">
# PG数</dt>
<dd>
<p>
<span class="footnoteref"><br><a href="#_footnote_placement_groups">[placement_groups]</a><br></span>プールが最初に持つべき配置グループの数。デフォルト:<span class="monospaced">128</span>。</p>
</dd>
<dt class="hdlist1">
目標比率</dt>
<dd>
<p>
プールで予想されるデータの比率。PG オートスケーラは、他の比率セットに対する比率を使用します。両方が設定されている場合は、<span class="monospaced">ターゲットサイズよりも</span>優先されます。</p>
</dd>
<dt class="hdlist1">
対象サイズ</dt>
<dd>
<p>
プールに予想されるデータ量。PGオートスケーラーは、このサイズを使用して最適なPG数を推定します。</p>
</dd>
<dt class="hdlist1">
最低# PG数</dt>
<dd>
<p>
配置グループの最小数。この設定は、そのプールの PG カウントの下限を微調整するために使用されます。PG オートスケーラーは、この閾値未満の PG をマージしません。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>Cephプールの処理の詳細については、Cephプール操作<span class="footnote"><br>[Cephプール操作<a href="https://docs.ceph.com/en/quincy/rados/operations/pools/">https://docs.ceph.com/en/quincy/rados/operations/pools/]</a><br></span>マニュアルを参照してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pve_ceph_ec_pools">8.8.2.消去符号化プール<a class="headerlink" href="#pve_ceph_ec_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>消去符号化（EC）は「順方向エラー訂正」符号の一形態で、ある程度のデータ損失から回復することができます。消去符号化されたプールは、複製されたプールと比較してより多くの使用可能領域を提供できますが、その分パフォーマンスが低下します。</p></div>
<div class="paragraph">
<p>一方、消去コード化プールでは、データは<span class="monospaced">k個の</span>データチャンクに分割され、さらに<span class="monospaced">m個の</span>コーディング（チェック）チャンクが追加されます。これらのコーディング・チャンクは、データ・チャンクが欠落した場合にデータを再作成するために使用されます。</p></div>
<div class="paragraph">
<p>符号化チャンクの数<span class="monospaced">mは</span>、データを失うことなくOSDを失うことができる数を定義します。保存されるオブジェクトの総量は<span class="monospaced">k + m</span>です。</p></div>
<div class="sect4">
<h5 id="_creating_ec_pools">ECプールの作成<a class="headerlink" href="#_creating_ec_pools" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>消去符号化（EC）プールは<span class="monospaced">pveceph</span>CLIツールで作成できます。 ECプールを計画するには、レプリケートされたプールとは動作が異なるという事実を考慮する必要があります。</p></div>
<div class="paragraph">
<p>ECプールのデフォルトの<span class="monospaced">min_sizeは</span> <span class="monospaced">m</span>パラメータによって異なります。<span class="monospaced">m = 1の</span>場合、ECプールの<span class="monospaced">min_sizeは</span> <span class="monospaced">kに</span>なります。<span class="monospaced">m &gt; 1の</span>場合、<span class="monospaced">min_sizeは</span> <span class="monospaced">k + 1に</span>なります。Cephのドキュメントでは、保守的な<span class="monospaced">min_sizeとして</span> <span class="monospaced">k + 2</span><span class="footnote"><br>[Ceph Erasure Coded Pool Recovery<a href="https://docs.ceph.com/en/quincy/rados/operations/erasure-code/#erasure-coded-pool-recovery">https://docs.ceph.com/en/quincy/rados/operations/erasure-code/#erasure-coded-pool-recovery]</a><br></span> を推奨しています。</p></div>
<div class="paragraph">
<p>利用可能なOSDが<span class="monospaced">min_size</span>未満である場合、プールへのIOは、再び十分なOSDが利用可能になるまでブロックされます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">消去コード化されたプールを計画するときは、<span class="monospaced">min_size</span>に注意してください。そうしないと、IOがブロックされてしまいます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>たとえば、<span class="monospaced">k = 2</span>、<span class="monospaced">m = 1の</span>ECプールは、<span class="monospaced">size = 3</span>、<span class="monospaced">min_size = 2と</span>なり、1つのOSDが故障しても運用を継続します。プールが<span class="monospaced">k = 2</span>、<span class="monospaced">m = 2で</span>構成されている場合、<span class="monospaced">サイズ = 4</span>、<span class="monospaced">min_size = 3と</span>なり、1つのOSDが失われた場合でも運用を継続します。</p></div>
<div class="paragraph">
<p>新しいECプールを作成するには、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool create<span style="color: #990000">&lt;pool-name&gt;</span>--erasure-coding<span style="color: #993399">k=2</span><span style="color: #990000">,</span><span style="color: #993399">m=1</span></tt></pre></div></div>
<div class="paragraph">
<p>オプションのパラメータは<span class="monospaced">failure-domainと</span> <span class="monospaced">device-class</span>です。プールで使用されるECプロファイル設定を変更する必要がある場合は、新しいプロファイルで新しいプールを作成する必要があります。</p></div>
<div class="paragraph">
<p>これにより、新しいECプールと、RBDオマップとその他のメタデータを格納するために必要な複製プールが作成されます。最終的に、<span class="monospaced">&lt;プール名&gt;-</span>データと<span class="monospaced">&lt;プール名&gt;-メタデータ</span>・プールが作成されます。デフォルトの動作では、一致するストレージ構成も作成されます。この動作が不要な場合、<span class="monospaced">--add_storages 0</span>パラメータを指定することで無効にすることができます。  ストレージ構成を手動で構成する場合、<span class="monospaced">data-pool</span>パラメータを設定する必要があることに注意してください。その場合のみ、ECプールがデータ・オブジェクトの格納に使用されます。例えば</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションのパラメータ<span class="monospaced">-size</span>、<span class="monospaced">-min_size</span>、および<span class="monospaced">-crush_ruleは</span>、複製されたメタデータ・プールには使用されますが、消去コード化されたデータ・プールには使用されません。 データ・プールで<span class="monospaced">min_sizeを</span>変更する必要がある場合は、後で変更できます。<span class="monospaced">size</span>および<span class="monospaced">crush_rule</span>パラメータは、消去コード化されたプールでは変更できません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ECプロファイルをさらにカスタマイズする必要がある場合は、Cephツールで直接作成できます<span class="footnote"><br>[Ceph Erasure Code Profile<a href="https://docs.ceph.com/en/quincy/rados/operations/erasure-code/#erasure-code-profiles">https://docs.ceph.com/en/quincy/rados/operations/erasure-code/#erasure-code-profiles]</a><br></span> 、<span class="monospaced">profile</span>パラメータで使用するプロファイルを指定します。</p></div>
<div class="paragraph">
<p>例えば</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool create<span style="color: #990000">&lt;pool-name&gt;</span>--erasure-coding<span style="color: #009900">profile=&lt;profile-</span><span style="color: #990000">name</span> <span style="color: #009900">&gt;。</span></tt></pre></div></div>
</div>
<div class="sect4">
<h5 id="_adding_ec_pools_as_storage">ストレージとしてのECプールの追加<a class="headerlink" href="#_adding_ec_pools_as_storage" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>既存のECプールをストレージとしてProxmox VEに追加できます。<span class="monospaced">RBD</span>プールの追加と同じように動作しますが、追加の<span class="monospaced">データプールオプションが</span>必要です。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvesm add rbd<span style="color: #990000">&lt;ストレージ</span> <span style="color: #990000">名&gt;</span>--pool<span style="color: #990000">&lt;複製</span> <span style="color: #990000">プール&gt;</span>--data-pool<span style="color: #990000">&lt;ec-pool</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ローカルのProxmox VEクラスタで管理されていない外部のCephクラスタ用に、<span class="monospaced">キーリングと</span> <span class="monospaced">monhost</span>オプションを追加することを忘れないでください。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_destroy_pools">8.8.3.プールを破壊する<a class="headerlink" href="#_destroy_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUIでプールを破棄するには、ツリービューでノードを選択し、<strong>Ceph → Pools</strong>パネルに移動します。破棄するプールを選択し、<strong>破棄</strong>ボタンをクリックします。プールの破棄を確認するには、プール名を入力する必要があります。</p></div>
<div class="paragraph">
<p>以下のコマンドを実行してプールを破棄します。関連するストレージも削除するには、<em>-remove_storages</em>を指定します。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph プール破壊<span style="color: #990000">&lt;名前</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">プールの削除はバックグラウンドで実行されるため、時間がかかることがあります。 このプロセスの間、クラスタのデータ使用量が減少していることがわかります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_pg_autoscaler">8.8.4.PG オートスケーラー<a class="headerlink" href="#_pg_autoscaler" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>PGオートスケーラを使用すると、クラスタが各プールに格納されている(予想される)データ量を考慮し、適切なpg_num値を自動的に選択できます。 Ceph Nautilusから使用できます。</p></div>
<div class="paragraph">
<p>調整が有効になる前に、PGオートスケーラー・モジュールをアクティブにする必要がある場合があります。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph mgr module<span style="font-weight: bold"><span style="color: #0000FF">enable</span></span>pg_autoscaler</tt></pre></div></div>
<div class="paragraph">
<p>オートスケーラーはプールごとに構成され、以下のモードがあります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
言い聞かす<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
<span class="monospaced">pg_numの</span>推奨値が現在の値と大きく異なる場合、健全性の警告が発行されます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
オン<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
<span class="monospaced">pg_numは</span>自動的に調整され、手動で操作する必要はありません。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
オフ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
自動的な<span class="monospaced">pg_numの</span>調整は行われず、PG数が最適でない場合に警告は発行されません。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>スケーリング係数は、<span class="monospaced">target_size</span>、<span class="monospaced">target_size_ratio</span>、<span class="monospaced">pg_num_min</span>オプションで将来のデータ保存を容易にするように調整することができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">デフォルトでは、オートスケーラは、プールのPGカウントが3倍ずれている場合にチューニングを検討します。これは、データ配置のかなりのシフトにつながり、クラスタに高負荷をもたらす可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>PGオートスケーラの詳細については、Cephのブログ -<a href="https://ceph.io/rados/new-in-nautilus-pg-merging-and-autotuning/">Nautilusの新機能を</a>参照してください：<a href="https://ceph.io/rados/new-in-nautilus-pg-merging-and-autotuning/">PGマージとオートチューニング</a>。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_device_classes">
<span>8.9.Ceph CRUSH &amp; デバイスクラス</span> <a class="headerlink" href="#pve_ceph_device_classes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-config.png">
<img src="images/screenshot/gui-ceph-config.png" alt="screenshot/gui-ceph-config.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><span class="footnote"><br><a href="https://ceph.com/assets/pdfs/weil-crush-sc06.pdf">[https://ceph.com/assets/pdfs/weil-crush-sc06.pdf]</a><br></span><strong>(Controlled</strong><strong>Replication</strong> <strong>Under</strong> <strong>Scalable</strong> <strong>Hashing</strong>)アルゴリズムはCephの基盤です。</p></div>
<div class="paragraph">
<p>CRUSHはどこにデータを保存し、どこから取得するかを計算します。これには、中央のインデックス作成サービスが必要ないという利点があります。CRUSHはプールのOSD、バケット（デバイスの位置）、ルールセット（データの複製）のマップを使用して動作します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">詳細については、CephドキュメントのCRUSH map<span class="footnote"><br>[CRUSH map<a href="https://docs.ceph.com/en/quincy/rados/operations/crush-map/">https://docs.ceph.com/en/quincy/rados/operations/crush-map/]</a><br></span> のセクションを参照してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このマップは、異なるレプリケーション階層を反映するように変更できます。オブジェクトのレプリカは、望ましい分散を維持したまま分離することができます（障害ドメインなど）。</p></div>
<div class="paragraph">
<p>一般的な構成は、異なるCephプールに異なるクラスのディスクを使用することです。  このため、Cephはルミナスでデバイスクラスを導入し、ルールセットを簡単に生成できるようにしました。</p></div>
<div class="paragraph">
<p>デバイスクラスは、<em>ceph osdツリー</em>出力で確認できます。これらのクラスは独自のルートバケットを表し、以下のコマンドで確認できます。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd crush tree --show-shadow</tt></pre></div></div>
<div class="paragraph">
<p>上記コマンドの出力例：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ID CLASS WEIGHT TYPE NAME<span style="color: #993399">-16</span>nvme<span style="color: #993399">2.18307</span>root<span style="color: #990000"> default~nvme</span><span style="color: #993399">-13</span>nvme<span style="color: #993399">0.72769</span>host<span style="color: #990000"> sumi1~nvme</span> <span style="color: #993399">12</span>nvme<span style="color: #993399">0.72769</span>osd<span style="color: #990000">.</span><span style="color: #993399">12</span><span style="color: #993399">-14</span>nvme<span style="color: #993399">0.72769</span>host<span style="color: #990000"> sumi2~nvme</span> <span style="color: #993399">13</span>nvme<span style="color: #993399">0.72769</span>osd<span style="color: #990000">.</span><span style="color: #993399">13</span><span style="color: #993399">-15</span>nvme<span style="color: #993399">0.72769</span>host<span style="color: #990000"> sumi3~nvme</span> <span style="color: #993399">14</span>nvme<span style="color: #993399">0.72769</span>osd<span style="color: #990000">.</span><span style="color: #993399">14</span>
 -<span style="color: #993399">1</span>7.<span style="color: #993399">70544</span>root default<span style="color: #993399">-</span>3<span style="color: #993399">2.56848</span>host sumi1<span style="color: #993399">12</span>nvme<span style="color: #993399">0.72769</span>osd<span style="color: #990000">.</span><span style="color: #993399">12</span><span style="color: #993399">-5</span> <span style="color: #993399">2.56848</span>host sumi2<span style="color: #993399">13</span>nvme<span style="color: #993399">0.72769</span>osd<span style="color: #990000">.</span><span style="color: #993399">13</span><span style="color: #993399">-7</span> <span style="color: #993399">2.56848</span>host sumi3<span style="color: #993399">14</span>nvme<span style="color: #993399">0.72769</span>osd<span style="color: #990000">.</span><span style="color: #993399">14</span></tt></pre></div></div>
<div class="paragraph">
<p>特定のデバイスクラス上のオブジェクトのみを配布するようにプールに指示するには、まず、デバイスクラス用のルールセットを作成する必要があります：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd crush rule create-replicated<span style="color: #990000">&lt;</span> <span style="color: #990000">ルール名&gt;</span><span style="color: #990000">&lt;ルート</span> <span style="color: #990000">&gt;</span><span style="color: #990000">&lt;障害</span> <span style="color: #990000">ドメイン&gt;</span><span style="color: #990000">&lt;クラス</span></tt></pre></div></div>
<table class="tableblock frame-none grid-none" style="
margin-left:0; margin-right:auto;
width:100%;
">
<col style="width:30%;" />
<col style="width:70%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;ルール名</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">プールと接続するためのルール名 (GUI および CLI)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;ルート</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">どのクラッシュルートに属するか(デフォルトのCephルート「default」)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;失敗ドメイン</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">どの障害ドメインでオブジェクトを配布するか (通常はホスト)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;クラス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用するOSDバックアップ・ストアのタイプ（nvme、sd、hddなど）</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>ルールがCRUSHマップにあれば、そのルールセットを使用するようにプールに指示することができます。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osdプール<span style="font-weight: bold"><span style="color: #0000FF">セット</span></span> <span style="color: #990000">&lt;</span> <span style="color: #990000">プール名&gt;</span>crush_rule<span style="color: #990000">&lt;rule-</span><span style="color: #990000">name</span> <span style="color: #990000">&gt;。</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プールにすでにオブジェクトが含まれている場合は、それに応じてこれらを移動する必要があります。 セットアップによっては、クラスタに大きなパフォーマンスの影響が生じる可能性があります。別の方法として、新しいプールを作成し、ディスクを個別に移動することができます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_ceph_client">
<span>8.10.Cephクライアント</span> <a class="headerlink" href="#_ceph_client" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-log.png">
<img src="images/screenshot/gui-ceph-log.png" alt="screenshot/gui-ceph-log.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>前のセクションのセットアップに続いて、Proxmox VEを設定して、このようなプールを使用してVMおよびコンテナイメージを保存できます。GUIを使用して新しい<span class="monospaced">RBD</span>ストレージを追加するだけです(<a href="#ceph_rados_block_devices">Ceph RADOS Block Devices (RBD)の</a>項を参照)。</p></div>
<div class="paragraph">
<p>また、外部Cephクラスタ用の定義済みの場所にキーリングをコピーする必要があります。CephがProxmoxノード自体にインストールされている場合、これは自動的に実行されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイル名は<span class="monospaced">&lt;storage_id&gt; + `.keyring</span> で、<span class="monospaced">&lt;storage_id&gt;</span>は<span class="monospaced">/etc/pve/storage.cfg</span> の<em>rbd: の</em>後に記述します。以下の例では、<span class="monospaced">my-ceph-storage</span>が<span class="monospaced">&lt;storage_id&gt;</span> です<span class="monospaced">：</span></td>
</tr></table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>mkdir /etc/pve/priv/ceph cp /etc/ceph/ceph<span style="color: #990000">.</span>client<span style="color: #990000">.</span>admin<span style="color: #990000">.</span>keyring /etc/pve/priv/ceph/my-ceph-storage<span style="color: #990000">.</span>keyring</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="pveceph_fs">
<span>8.11.CephFS</span> <a class="headerlink" href="#pveceph_fs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Cephはファイルシステムも提供し、RADOSブロックデバイスと同じオブジェクトストレージ上で動作します。<strong>メタデータ</strong> <strong>サーバ</strong><span class="monospaced">(MDS</span>)を使用して、RADOSでバックアップされたオブジェクトをファイルとディレクトリにマッピングするため、CephはPOSIX準拠の複製ファイルシステムを提供できます。これにより、クラスタ化された可用性の高い共有ファイルシステムを簡単に構成できます。Cephのメタデータサーバは、ファイルがCephクラスタ全体に均等に分散されることを保証します。その結果、負荷が高い場合でも、<span class="monospaced">NFSなどの</span>従来の共有ファイルシステムアプローチで問題となる、単一のホストを圧倒することはありません。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-cephfs-panel.png">
<img src="images/screenshot/gui-node-ceph-cephfs-panel.png" alt="screenshot/gui-node-ceph-cephfs-panel.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEは、ハイパーコンバージドCephFSの作成と、バックアップ、ISOファイル、コンテナテンプレートを保存する<a href="#storage_cephfs">ストレージとしての</a>既存の<a href="#storage_cephfs">CephFSの</a>使用の両方をサポートしています。</p></div>
<div class="sect3">
<h4 id="pveceph_fs_mds">8.11.1.メタデータ・サーバー (MDS)<a class="headerlink" href="#pveceph_fs_mds" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CephFSを機能させるには、少なくとも1つのメタデータサーバを構成して実行する必要があります。データシートは、Proxmox VE Web GUIの<span class="monospaced">Node -&gt; CephFS</span>パネルまたはコマンドラインから作成できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>プベケフ・マッズ・クリエイト</pre>
</div></div>
<div class="paragraph">
<p>クラスタには複数のメタデータサーバーを作成できますが、デフォルト設定では一度にアクティブにできるのは1つのみです。データシートまたはそのノードが応答しなくなった（またはクラッシュした）場合、別の<span class="monospaced">スタンバイ</span>データシートが<span class="monospaced">アクティブに</span>昇格します。 作成時に<em>hotstandby</em>パラメータオプションを使用するか、すでに作成済みの場合は設定/追加することで、アクティブとスタンバイのデータシート間のハンドオーバーを高速化できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mdsスタンバイ再生 = true</pre>
</div></div>
<div class="paragraph">
<p>を<span class="monospaced">/etc/pve/ceph.confの</span>各データシートセクションに追加します。この設定を有効にすると、指定されたデータシートは<span class="monospaced">ウォーム</span>状態を維持し、アクティブなデータシートにポーリングします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このアクティブなポーリングは、システムおよびアクティブな<span class="monospaced">データシートに</span>さらなるパフォーマンスの影響を与えます。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">複数のアクティブMDS</div><p>Luminous (12.2.x)以降、複数のアクティブなメタデータサーバーを同時に実行することができますが、これは通常、大量のクライアントが並行して実行されている場合にのみ有用です。そうでない場合、<span class="monospaced">データシートが</span>システムのボトルネックになることはほとんどありません。この設定を行う場合は、Cephのドキュメントを参照してください。<span class="footnote"><br>[Configuring multiple active MDS daemon<a href="https://docs.ceph.com/en/quincy/cephfs/multimds/">https://docs.ceph.com/en/quincy/cephfs/multimds/]</a><br></span></p></div>
</div>
<div class="sect3">
<h4 id="pveceph_fs_create">8.11.2.CephFS<a class="headerlink" href="#pveceph_fs_create" title="Permalink to this heading"></a>の作成</h4>
<div class="paragraph">
<p>Proxmox VEのCephFSの統合により、Webインタフェース、CLI、または外部APIインタフェースを使用して簡単にCephFSを作成できます。これを動作させるには、いくつかの前提条件が必要です：</p></div>
<div class="ulist"><div class="title">CephFSのセットアップを成功させるための前提条件：</div><ul>
<li>
<p>
<a href="#pve_ceph_install">Cephパッケージのインストール</a>- 以前に実行済みの場合は、最新のシステムで再実行して、CephFS関連パッケージがすべてインストールされるようにします。</p>
</li>
<li>
<p>
<a href="#pve_ceph_monitors">モニターの設定</a></p>
</li>
<li>
<p>
<a href="#pve_ceph_monitors">OSDの設定</a></p>
</li>
<li>
<p>
<a href="#pveceph_fs_mds">少なくとも1つのデータシートを設定</a></p>
</li>
</ul></div>
<div class="paragraph">
<p>これが完了したら、Web GUIの<span class="monospaced">Node -&gt; CephFS</span>パネルまたはコマンドラインツールの<span class="monospaced">pvecephなどを</span>使用して、CephFSを作成できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveceph fs create --pg_num 128 --add-storage</pre>
</div></div>
<div class="paragraph">
<p>これにより、<em>cephfsという</em>名前のCephFSが作成され、<em>128の</em>配置グループを持つ<em>cephfs_dataという</em>名前のデータ用プールと、データプールの配置グループの4分の1<span class="monospaced">(32</span>)を持つ<em>cephfs_metadataという</em>名前のメタデータ用プールが使用されます。
セットアップに適した配置グループ番号<span class="monospaced">(pg_num</span>)の詳細については、<a href="#pve_ceph_pools">Proxmox VE managed Ceph poolの章を</a>参照するか、Cephのドキュメントを参照してください<span class="footnoteref"><a href="#_footnote_placement_groups">。</a><br><a href="#_footnote_placement_groups">[placement_groups]</a><br></span>. さらに、<em>--add-storage</em>パラメータを使用すると、CephFSが正常に作成された後、Proxmox VEストレージ構成に追加されます。</p></div>
</div>
<div class="sect3">
<h4 id="_destroy_cephfs">8.11.3.CephFS<a class="headerlink" href="#_destroy_cephfs" title="Permalink to this heading"></a>を破棄します。</h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">CephFSを破棄すると、そのデータはすべて使用できなくなります。これは元に戻せません！</td>
</tr></table>
</div>
<div class="paragraph">
<p>CephFSを完全かつ優雅に削除するには、次の手順が必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
すべての非Proxmox VEクライアントを切断します(たとえば、ゲストのCephFSをアンマウントします)。</p>
</li>
<li>
<p>
関連するすべてのCephFS Proxmox VEストレージエントリを無効にします(自動的にマウントされないようにします)。</p>
</li>
<li>
<p>
破棄するCephFS上のゲスト(ISOなど)から、使用済みのリソースをすべて削除します。</p>
</li>
<li>
<p>
を使用して、すべてのクラスタノードのCephFSストレージを手動でアンマウントします。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>umount /mnt/pve/&lt;STORAGE-NAME&gt;。</pre>
</div></div>
<div class="paragraph">
<p>ここで、<span class="monospaced">&lt;STORAGE-NAME&gt;は</span>Proxmox VE内のCephFSストレージの名前です。</p></div>
</li>
<li>
<p>
メタデータサーバ<span class="monospaced">(MDS</span>)を停止するか破棄して、そのCephFSでメタデータサーバ<span class="monospaced">(MDS</span>)が実行されていないことを確認します。これは、Webインタフェースまたはコマンドラインインタフェースで実行できます。後者の場合は、次のコマンドを実行します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>pveceph stop --service mds.NAME</pre>
</div></div>
<div class="paragraph">
<p>を止めるか</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveceph mds destroy NAME</pre>
</div></div>
<div class="paragraph">
<p>破壊するために。</p></div>
<div class="paragraph">
<p>アクティブな<span class="monospaced">データシートが</span>停止または削除されると、スタンバイサーバーは自動的にアクティブに昇格することに注意してください。</p></div>
</li>
<li>
<p>
これで、CephFSを次のように破壊できます。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>pveceph fs destroy NAME --remove-storages --remove-pools</pre>
</div></div>
<div class="paragraph">
<p>これにより、基盤となるCephプールが自動的に破棄され、pve設定からストレージが削除されます。</p></div>
</li>
</ul></div>
<div class="paragraph">
<p>これらの手順の後、CephFSを完全に削除し、他のCephFSインスタンスがある場合は、停止したメタデータサーバを再度起動してスタンバイとして動作させることができます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_ceph_maintenance">
<span>8.12.Cephメンテナンス</span> <a class="headerlink" href="#_ceph_maintenance" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_replace_osds">8.12.1.OSDの交換<a class="headerlink" href="#_replace_osds" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Cephで最も一般的なメンテナンスタスクの1つは、OSDのディスクを交換することです。ディスクがすでに故障状態になっている場合は、<a href="#pve_ceph_osd_destroy">Destroy OSDの</a>手順を実行します。Cephは、可能であれば残りのOSDにそれらのコピーを再作成します。このリバランシングは、OSD障害が検出されるか、OSDがアクティブに停止されるとすぐに開始されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">プールのデフォルトのsize/min_size (3/2)では、「size + 1」ノードが利用可能な場合にのみ復旧が開始されます。この理由は、Cephオブジェクトバランサ<a href="#pve_ceph_device_classes">CRUSHの</a>デフォルトがフルノードを`障害ドメイン'としているためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>GUIから機能しているディスクを交換するには、<a href="#pve_ceph_osd_destroy">Destroy OSDの</a>手順を実行します。唯一の追加は、OSDを停止して破壊する前に、クラスタが<em>HEALTH_OKを</em>表示するまで待つことです。</p></div>
<div class="paragraph">
<p>コマンドラインでは、以下のコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ceph osd out osd.&lt;id&gt;</pre>
</div></div>
<div class="paragraph">
<p>OSDを安全に削除できるかどうかは、以下のコマンドで確認できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ceph osdのsafe-to-destroy osd.&lt;id&gt;。</pre>
</div></div>
<div class="paragraph">
<p>上記のチェックでOSDを取り外しても安全であることがわかったら、次のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl stop ceph-osd@&lt;id&gt;.service pveceph osd destroy &lt;id&gt;</pre>
</div></div>
<div class="paragraph">
<p>古いディスクを新しいディスクと交換し、<a href="#pve_ceph_osd_create">OSDの作成で</a>説明したのと同じ手順を使用します。</p></div>
</div>
<div class="sect3">
<h4 id="_trim_discard">8.12.2.トリム/廃棄<a class="headerlink" href="#_trim_discard" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMやコンテナで<em>fstrim</em>（discard）を定期的に実行するのは良い習慣です。 これにより、ファイルシステムが使用しなくなったデータ・ブロックが解放されます。これにより、データ使用量とリソース負荷が軽減されます。最近のオペレーティング・システムでは、このようなdiscardコマンドを定期的にディスクに発行しています。仮想マシンが<a href="#qm_hard_disk_discard">ディスク廃棄オプションを</a>有効にしていることを確認するだけです。</p></div>
</div>
<div class="sect3">
<h4 id="pveceph_scrub">8.12.3.スクラブ＆ディープスクラブ<a class="headerlink" href="#pveceph_scrub" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Cephは配置グループを<em>スクラブする</em>ことで、データの整合性を確保します。CephはPG内のすべてのオブジェクトの健全性をチェックします。スクラブには、毎日の安価なメタデータチェックと毎週のディープデータチェックの2つの形式があります。毎週のディープスクラブはオブジェクトを読み取り、チェックサムを使用してデータの整合性を確保します。実行中のスクラブがビジネス(パフォーマンス)ニーズに干渉する場合、スクラブ<span class="footnote"><br>[Ceph scrubbing https://docs.ceph.com/en/quincy/rados/configuration/osd-config-ref/#scrubbing<a href="https://docs.ceph.com/en/quincy/rados/configuration/osd-config-ref/#scrubbing">]</a><br></span>が実行される時間を調整できます。</p></div>
</div>
<div class="sect3">
<h4 id="pveceph_shutdown">8.12.4.Proxmox VE + Ceph HCIクラスタのシャットダウン<a class="headerlink" href="#pveceph_shutdown" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE + Cephクラスタ全体をシャットダウンするには、まずすべてのCephクライアントを停止します。これらは主にVMとコンテナになります。Ceph FSまたはインストールされているRADOS GWにアクセスする可能性がある追加のクライアントがある場合は、これらも停止します。 Proxmox VEツールを使用してパワーダウンすると、可用性の高いゲストは状態を<em>停止に</em>切り替えます。</p></div>
<div class="paragraph">
<p>すべてのクライアント、VM、およびコンテナがオフになるか、Cephクラスタにアクセスしなくなったら、Cephクラスタが健全な状態であることを確認します。Web UIまたはCLIのいずれかを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ceph -s</pre>
</div></div>
<div class="paragraph">
<p>すべての自己回復アクションを無効にし、CephクラスタのクライアントIOを一時停止するには、<strong>Ceph → OSD</strong>パネルまたはCLIで次のOSDフラグを有効にします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ceph osd set noout ceph osd set norecover ceph osd set norebalance ceph osd set nobackfill ceph osd set nodown ceph osd set pause</pre>
</div></div>
<div class="paragraph">
<p>モニター（MON）のないノードのパワーダウンを開始します。これらのノードのパワーダウンが完了したら、モニターのあるノードのパワーダウンを続けます。</p></div>
<div class="paragraph">
<p>クラスタの電源を入れるときは、モニタ(MON)があるノードを最初に起動します。すべてのノードが稼働したら、すべてのCephサービスが稼働していることを確認してから、OSDフラグを再度設定解除します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ceph osd unset pause ceph osd unset nodown ceph osd unset nobackfill ceph osd unset norebalance ceph osd unset norecover ceph osd unset noout</pre>
</div></div>
<div class="paragraph">
<p>これでゲストを起動できます。高可用性ゲストは、電源が入ると状態が<em>開始</em>状態に変わります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_ceph_monitoring_and_troubleshooting">
<span>8.13.Cephの監視とトラブルシューティング</span> <a class="headerlink" href="#_ceph_monitoring_and_troubleshooting" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Cephツールを使用するか、Proxmox VE<a href="api-viewer/index.html">APIを介して</a>ステータスにアクセスするかして、Cephデプロイの健全性を最初から継続的に監視することが重要です。</p></div>
<div class="paragraph">
<p>以下のCephコマンドを使用して、クラスタが健全かどうか<em>(HEALTH_OK</em>)、警告があるかどうか<em>(HEALTH_WARN</em>)、またはエラーかどうか<em>(HEALTH_ERR</em>)を確認できます。クラスタが不健全な状態の場合、以下のステータスコマンドを使用すると、現在のイベントの概要と取るべきアクションもわかります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># 単発出力 pve# ceph -s # ステータス変更を継続的に出力 (CTRL+C で停止) pve# ceph -w</pre>
</div></div>
<div class="paragraph">
<p>より詳細に表示するには、すべてのCephサービスに<span class="monospaced">/var/log/ceph/</span>下のログファイルがあります。詳細が必要な場合は、ログレベルを調整できます<span class="footnote">。<br>[Ceph log and debugging<a href="https://docs.ceph.com/en/quincy/rados/troubleshooting/log-and-debug/">https://docs.ceph.com/en/quincy/rados/troubleshooting/log-and-debug/]</a><br></span> 。</p></div>
<div class="paragraph">
<p><span class="footnote">Ceph troubleshooting<br>[Ceph troubleshooting<a href="https://docs.ceph.com/en/quincy/rados/troubleshooting/">https://docs.ceph.com/en/quincy/rados/troubleshooting/]</a><br></span>Cephクラスタの詳細については、公式Webサイトを参照してください。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pvesr">
9.ストレージレプリケーション<a class="headerlink" href="#chapter_pvesr" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="monospaced">pvesr</span>コマンドラインツールは Proxmox VE ストレージレプリケーションフレームワークを管理します。ストレージレプリケーションは、ローカルストレージを使用するゲストに冗長性をもたらし、移行時間を短縮します。</p></div>
<div class="paragraph">
<p>ゲストボリュームを別のノードにレプリケートし、共有ストレージを使用せずにすべてのデータを利用できるようにします。レプリケーションでは、スナップショットを使用してネットワーク経由で送信されるトラフィックを最小限に抑えます。そのため、最初の完全同期の後、新しいデータは増分的にしか送信されません。ノードに障害が発生した場合でも、ゲストデータはレプリケートされたノードで利用可能です。</p></div>
<div class="paragraph">
<p>レプリケーションは設定可能な間隔で自動的に行われます。 レプリケーション間隔は最小で1分、最大で週に1回です。これらの間隔を指定するために使われるフォーマットは<span class="monospaced">systemd</span>カレンダーイベントのサブセットです：</p></div>
<div class="paragraph">
<p>ゲストを複数のターゲットノードにレプリケートすることは可能ですが、同じターゲットノードに2回レプリケートすることはできません。</p></div>
<div class="paragraph">
<p>各レプリケーションの帯域幅は、ストレージやサーバーに過負荷をかけないように制限することができます。</p></div>
<div class="paragraph">
<p>ゲストがすでにレプリケートされているノードに移行する場合は、最後のレプリケーション以降の変更（いわゆる<span class="monospaced">デルタ</span>）のみを転送する必要があります。これにより、必要な時間が大幅に短縮されます。ゲストをレプリケーションターゲットノードに移行すると、レプリケーションの方向が自動的に切り替わります。</p></div>
<div class="paragraph">
<p>例えばVM100は現在<span class="monospaced">nodeA</span>上にあり、<span class="monospaced">nodeBに</span>レプリケートされています。VM100を<span class="monospaced">nodeBに</span>マイグレートすると、自動的に<span class="monospaced">nodeBから</span> <span class="monospaced">nodeAに</span>レプリケートバックされます。</p></div>
<div class="paragraph">
<p>ゲストがレプリケートされていないノードに移行する場合は、ディスクデータ全体を送信する必要があります。移行後、レプリケーションジョブはこのゲストを設定されたノードにレプリケートし続けます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="paragraph">
<p>高可用性はストレージ・レプリケーションとの組み合わせで許可されますが、最後に同期された時刻とノードが故障した時刻の間に何らかのデータ損失が発生する可能性があります。</p></div>
</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_supported_storage_types">
<span>9.1.サポートされるストレージタイプ</span> <a class="headerlink" href="#_supported_storage_types" title="Permalink to this heading"></a></h3>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 17.ストレージの種類</caption>
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">説明    </th>
<th class="tableblock halign-left valign-top">プラグインタイプ </th>
<th class="tableblock halign-left valign-top">スナップ写真</th>
<th class="tableblock halign-left valign-top">安定</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZFS（ローカル）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ゼットスプール</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="pvesr_schedule_time_format">
<span>9.2.スケジュールフォーマット</span> <a class="headerlink" href="#pvesr_schedule_time_format" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>レプリケーションでは、スケジュールの設定に<a href="#chapter_calendar_events">カレンダーイベントを</a>使用します。</p></div>
</div>
<div class="sect2">
<h3 id="_error_handling">
<span>9.3.エラー処理</span> <a class="headerlink" href="#_error_handling" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>この状態では、設定されたレプリケーション間隔は一時的に中断されます。失敗したレプリケーションは、30分間隔で繰り返し再試行されます。 これが成功すると、元のスケジュールが再びアクティブになります。</p></div>
<div class="sect3">
<h4 id="_possible_issues">9.3.1.考えられる問題<a class="headerlink" href="#_possible_issues" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最も一般的な問題は、以下のリストのとおりです。セットアップによっては別の原因があるかもしれません。</p></div>
<div class="ulist"><ul>
<li>
<p>
ネットワークが機能していません。</p>
</li>
<li>
<p>
レプリケーション先のストレージに空き容量がありません。</p>
</li>
<li>
<p>
ターゲット・ノードで利用可能な同じストレージIDのストレージ</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">レプリケーション・ログを使用すれば、いつでも問題の原因を突き止めることができます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_migrating_a_guest_in_case_of_error">9.3.2.エラー時のゲストの移行<a class="headerlink" href="#_migrating_a_guest_in_case_of_error" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>重大なエラーが発生した場合、仮想ゲストは障害が発生したノード上でスタックする可能性があります。その場合、手動で再び動作するノードに移動する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="_example_2">9.3.3.例<a class="headerlink" href="#_example_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノードAで2つのゲスト（VM 100とCT 200）を実行し、ノードBにレプリケートしているとします。そこで、ゲストを手動でノードBに移行する必要があります。</p></div>
<div class="ulist"><ul>
<li>
<p>
sshでノードBに接続するか、ウェブUIでシェルを開きます。</p>
</li>
<li>
<p>
クラスタがクォーレートかどうかをチェックします。</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm ステータス</pre>
</div></div>
</li>
<li>
<p>
クォーラムがない場合は、まずこれを修正し、ノードを再び操作できるようにすることを強くお勧めします。現時点ではこれが不可能な場合のみ、以下のコマンドを使用して現在のノードにクォーラムを強制することができます：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm 期待値 1</pre>
</div></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">期待される票が</span>設定されている場合にクラスタに影響を与えるような変更（ノード、ストレージ、仮想ゲストの追加/削除など）は絶対に避けてください。 重要なゲストを再び稼働させるか、クォーラムの問題そのものを解決する場合にのみ使用してください。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
両方のゲスト設定ファイルを元のノードAからノードBに移動します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># mv /etc/pve/nodes/A/qemu-server/100.conf /etc/pve/nodes/B/qemu-server/100.conf # mv /etc/pve/nodes/A/lxc/200.conf /etc/pve/nodes/B/lxc/200.conf</pre>
</div></div>
</li>
<li>
<p>
これでまたゲストをお迎えすることができます：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 100 # pct start 200</pre>
</div></div>
</li>
</ul></div>
<div class="paragraph">
<p>VMIDとノード名はそれぞれの値に置き換えてください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_jobs">
<span>9.4.ジョブの管理</span> <a class="headerlink" href="#_managing_jobs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-add-replication-job.png">
<img src="images/screenshot/gui-qemu-add-replication-job.png" alt="screenshot/gui-qemu-add-replication-job.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Web GUIを使用して、レプリケーション・ジョブを簡単に作成、変更、削除できます。さらに、コマンドライン・インターフェイス（CLI）ツールの<span class="monospaced">pvesrを</span>使用することもできます。</p></div>
<div class="paragraph">
<p>レプリケーション・パネルは、Web GUIのすべてのレベル（データセンター、ノード、仮想ゲスト）で見つけることができます。どのジョブが表示されるかは、すべてのジョブ、ノード固有のジョブ、ゲスト固有のジョブで異なります。</p></div>
<div class="paragraph">
<p>新しいジョブを追加する際、まだ選択されていない場合はゲストとターゲットノードを指定する必要があります。<a href="#pvesr_schedule_time_format">レプリケーションスケジュールは</a>、デフォルトの<span class="monospaced">すべて15</span>分が不要な場合に設定できます。レプリケーションジョブにレート制限を課すことができます。レート制限は、ストレージの負荷を許容範囲に保つのに役立ちます。</p></div>
<div class="paragraph">
<p>レプリケーション・ジョブは、クラスタ全体で一意のIDによって識別されます。このIDは、ジョブ番号に加えてVMIDで構成されます。 このIDは、CLIツールを使用する場合にのみ手動で指定する必要があります。</p></div>
</div>
<div class="sect2">
<h3 id="_command_line_interface_examples">
<span>9.5.コマンドライン・インターフェースの例</span> <a class="headerlink" href="#_command_line_interface_examples" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ID 100のゲストに対して、帯域幅を10 Mbps（メガバイト/秒）に制限して5分ごとに実行するレプリケーションジョブを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr create-local-job 100-0 pve1 --schedule "*/5" --rate 10</pre>
</div></div>
<div class="paragraph">
<p>ID<span class="monospaced">100-0</span> のアクティブなジョブを無効にします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr disable 100-0</pre>
</div></div>
<div class="paragraph">
<p>IDが<span class="monospaced">100-</span>0の非アクティブ化されたジョブを有効にします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr enable 100-0</pre>
</div></div>
<div class="paragraph">
<p>ID<span class="monospaced">100-</span>0のジョブのスケジュール間隔を1時間に1回に変更します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr update 100-0 --schedule '*/00'</pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_virtual_machines">
10.QEMU/KVM 仮想マシン<a class="headerlink" href="#chapter_virtual_machines" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>QEMU (Quick Emulator の略) は、物理コンピュータをエミュレートするオープンソースのハイパーバイザーです。QEMU が実行されているホスト システムから見ると、QEMU はユーザー プログラムであり、パーティション、ファイル、ネットワーク カードなどの多数のローカル リソースにアクセスできます。</p></div>
<div class="paragraph">
<p>エミュレートされたコンピュータで実行されているゲストオペレーティングシステムは、これらのデバイスにアクセスし、実際のハードウェア上で実行されているかのように動作します。たとえば、ISO イメージを QEMU にパラメータとして渡すと、エミュレートされたコンピュータで実行されている OS には、CD ドライブに挿入された本物の CD-ROM が表示されます。</p></div>
<div class="paragraph">
<p>QEMUはARMからSparcまで多種多様なハードウェアをエミュレートできますが、Proxmox VEは32ビットおよび64ビットのPCクローンのエミュレーションにのみ対応しています。PCクローンのエミュレーションは、エミュレートするアーキテクチャがホストアーキテクチャと同じ場合にQEMUを大幅に高速化するプロセッサ拡張機能を利用できるため、最も高速なエミュレーションの1つでもあります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>KVM</em>(Kernel-based Virtual Machine) という用語に遭遇することがありますが、これは QEMU が Linux KVM モジュールを介して仮想化プロセッサの拡張機能をサポートしながら実行されていることを意味します。Proxmox VEのQEMUは常にKVMモジュールをロードしようとするため、Proxmox VEのコンテキストでは<em>QEMUと</em><em>KVMは</em>同じ意味で使用できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Proxmox VE 内の QEMU は、ブロックデバイスと PCI デバイスにアクセスするために必要なルートプロセスとして実行されます。</p></div>
<div class="sect2">
<h3 id="_emulated_devices_and_paravirtualized_devices">
<span>10.1.エミュレートされたデバイスと準仮想化デバイス</span> <a class="headerlink" href="#_emulated_devices_and_paravirtualized_devices" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>QEMU によってエミュレートされる PC ハードウェアには、マザーボード、ネットワークコントローラ、SCSI、IDE、SATA コントローラ、シリアルポート (完全なリストは<span class="monospaced">kvm(1)</span>man ページを参照してください) が含まれます。これらのデバイスはすべて、既存のハードウェアデバイスとまったく同等のソフトウェアデバイスであり、ゲストで実行されている OS に適切なドライバがあれば、実際のハードウェア上で実行されているかのようにデバイスを使用できます。これにより、QEMU は<em>変更されていない</em>オペレーティングシステムを実行できます。</p></div>
<div class="paragraph">
<p>しかし、ハードウェアで実行する予定だったものをソフトウェアで実行すると、ホスト CPU に多くの余分な作業が発生するため、これにはパフォーマンス上のコストが伴います。これを軽減するために、QEMU はゲスト OS に<em>準仮想化デバイスを</em>提示することができます。この場合、ゲスト OS は QEMU 内で実行されていることを認識し、ハイパーバイザーと協調します。</p></div>
<div class="paragraph">
<p>QEMU は virtio 仮想化標準に依存しているため、準仮想化された汎用ディスクコントローラ、準仮想化されたネットワークカード、準仮想化されたシリアルポート、準仮想化された SCSI コントローラなど、準仮想化された virtio デバイスを表示できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">可能な限り、virtio デバイスを使用することを<strong>強く推奨</strong>します。 virtio の汎用ディスクコントローラとエミュレートされた IDE コントローラを比較すると、<span class="monospaced">bonnie++(8)</span> で測定されたシーケンシャル書き込みスループットは 2 倍になります。virtio ネットワークインターフェイスを使用すると、iperf<span class="monospaced">(1)</span> で計測されるように、エミュレートされた Intel E1000 ネットワークカードのスループットの最大 3 倍を提供できます。<span class="footnote"><br>[KVM wiki<a href="https://www.linux-kvm.org/page/Using_VirtIO_NIC">https://www.linux-kvm.org/page/Using_VirtIO_NIC</a> のこのベンチマークを参照<a href="https://www.linux-kvm.org/page/Using_VirtIO_NIC">]。</a><br></span></td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="qm_virtual_machines_settings">
<span>10.2.仮想マシン設定</span> <a class="headerlink" href="#qm_virtual_machines_settings" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>一般的にProxmox VEは、仮想マシン(VM)に対して適切なデフォルトを選択しようとします。パフォーマンスを低下させたり、データを危険にさらす可能性があるため、変更する設定の意味を理解してください。</p></div>
<div class="sect3">
<h4 id="qm_general_settings">10.2.1.一般設定<a class="headerlink" href="#qm_general_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-general.png">
<img src="images/screenshot/gui-create-vm-general.png" alt="screenshot/gui-create-vm-general.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>VMの一般的な設定は次のとおりです。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ノード</strong>: VM が実行される物理サーバー</p>
</li>
<li>
<p>
<strong>VM ID</strong>：VMを識別するためのProxmox VEインストール内で一意の番号です。</p>
</li>
<li>
<p>
<strong>Name</strong>: VM を説明するために使用できる自由形式のテキスト文字列です。</p>
</li>
<li>
<p>
<strong>リソースプール</strong>：VMの論理グループ</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="qm_os_settings">10.2.2.OS設定<a class="headerlink" href="#qm_os_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-os.png">
<img src="images/screenshot/gui-create-vm-os.png" alt="screenshot/gui-create-vm-os.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>仮想マシン(VM)を作成する際、適切なオペレーティングシステム(OS)を設定することで、Proxmox VEはいくつかの低レベルパラメータを最適化することができます。例えば、Windows OSは、BIOSクロックがローカル時間を使用することを期待しますが、UnixベースのOSは、BIOSクロックがUTC時間を使用することを期待します。</p></div>
</div>
<div class="sect3">
<h4 id="qm_system_settings">10.2.3.システム設定<a class="headerlink" href="#qm_system_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMの作成時に、新しいVMの基本的なシステムコンポーネントの一部を変更することができます。使用する<a href="#qm_display">ディスプレイ・タイプを</a>指定できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-system.png">
<img src="images/screenshot/gui-create-vm-system.png" alt="screenshot/gui-create-vm-system.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>さらに、<a href="#qm_hard_disk">SCSI コントローラを</a>変更することもできます。 QEMU ゲストエージェントをインストールする予定の場合、または選択した ISO イメージがすでに出荷され、自動的にインストールされる場合、<em>QEMU エージェント</em>ボックスにチェックを入れると、Proxmox VE にその機能を使用してより多くの情報を表示し、いくつかのアクション（シャットダウンやスナップショットなど）をよりインテリジェントに実行できることを知らせることができます。</p></div>
<div class="paragraph">
<p>Proxmox VEでは、<a href="#qm_bios_and_uefi">SeaBIOSとOVMFという</a>異なるファームウェアとマシンタイプでVMをブートすることができます。ほとんどの場合、<a href="#qm_pci_passthrough">PCIe パススルーを</a>使用する場合のみ、デフォルトの SeaBIOS から OVMF に切り替えます。</p></div>
<div class="sect4">
<h5 id="qm_machine_type">マシンタイプ<a class="headerlink" href="#qm_machine_type" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>VMの<em>マシン・タイプは</em>、VMの仮想マザーボードのハードウェア・レイアウトを定義します。デフォルトの<a href="https://en.wikipedia.org/wiki/Intel_440FX">Intel 440FXか</a>、仮想PCIeバスも提供する<a href="https://ark.intel.com/content/www/us/en/ark/products/31918/intel-82q35-graphics-and-memory-controller.html">Q35</a>チップセットのいずれかを選択できます。 さらに、<a href="#qm_pci_viommu">vIOMMUの</a>実装を選択できます。</p></div>
<div class="sect5">
<h6 id="_machine_version">マシンバージョン<a class="headerlink" href="#_machine_version" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>各マシンタイプは QEMU 内でバージョン管理されており、ある QEMU バイナリは多くのマシンバージョンをサポートしています。新しいバージョンは、新機能のサポート、修正、一般的な改良をもたらすかもしれません。ただし、仮想ハードウェアのプロパティも変更されます。ゲストの観点からの突然の変更を回避し、VM状態の互換性を確保するために、RAMを使用したライブマイグレーションとスナップショットは、新しいQEMUインスタンスで同じマシンバージョンを使用し続けます。</p></div>
<div class="paragraph">
<p>Windows ゲストの場合、Windows は仮想ハードウェアの変更（コールドブート間であっても）に敏感なので、マシンバージョンは作成時に固定されます。例えば、ネットワークデバイスの列挙は異なるマシンバージョンで異なるかもしれません。Linuxのような他のOSは、通常このような変更にうまく対応できます。この場合、デフォルトで<em>最新の</em>マシンバージョンが使用されます。 つまり、再スタート後、QEMU バイナリがサポートする最新のマシンバージョンが使用されます（例えば、QEMU 8.1 がサポートする最新のマシンバージョンは、各マシンタイプでバージョン 8.1 です）。</p></div>
</div>
<div class="sect5">
<h6 id="qm_machine_update">新しいマシン・バージョンへのアップデート<a class="headerlink" href="#qm_machine_update" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>QEMU では、非常に古いマシンのバージョンが非推奨になる場合があります。例えば、i440fxマシンタイプのバージョン1.4から1.7がそうです。これらのマシンバージョンのサポートは、ある時点で終了することが予想されます。非推奨の警告が表示された場合は、マシンのバージョンを新しいものに変更する必要があります。 最初に必ずバックアップを取り、ゲストがハードウェアを認識する方法の変更に備えるようにしてください。シナリオによっては、特定のドライバの再インストールが必要になるかもしれません。残念ながら、スナップショットのマシンバージョンを変更する方法はないので、スナップショットからデータを救い出すにはスナップショットをロードする必要があります。</p></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="qm_hard_disk">10.2.4.ハードディスク<a class="headerlink" href="#qm_hard_disk" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="qm_hard_disk_bus">バス/コントローラ<a class="headerlink" href="#qm_hard_disk_bus" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QEMUは、多数のストレージコントローラをエミュレートできます：</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><strong>VirtIO SCSI</strong>または<strong>VirtIO Block</strong>コントローラを使用することを強くお勧めします。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<strong>IDE</strong>コントローラは、1984年のPC/ATディスクコントローラに遡る設計です。このコントローラが最近の設計に取って代わられたとしても、思いつく限りのすべてのOSがこのコントローラをサポートしているため、2003年以前にリリースされたOSを実行したい場合に最適です。このコントローラには最大4台のデバイスを接続できます。</p>
</li>
<li>
<p>
<strong>SATA</strong>(Serial ATA) コントローラは、2003年に開発されたもので、より近代的な設計となっており、より高いスループットとより多くのデバイスを接続することができます。このコントローラには最大6台のデバイスを接続できます。</p>
</li>
<li>
<p>
1985年に設計された<strong>SCSI</strong>コントローラは、サーバグレードのハードウェアで一般的で、最大14台のストレージデバイスを接続できます。Proxmox VEはデフォルトでLSI 53C895Aコントローラをエミュレートします。</p>
<div class="paragraph">
<p>パフォーマンスを重視する場合は、<em>VirtIO SCSIシングル</em>タイプのSCSIコントローラを使用し、接続ディスクの<a href="#qm_hard_disk_iothread">IOスレッド</a>設定を有効にすることをお勧めします。これは、Proxmox VE 7.3 以降で新しく作成される Linux VM のデフォルトです。各ディスクは独自の<em>VirtIO SCSI</em>コントローラーを持ち、QEMU は専用スレッドでディスクの IO を処理します。Linuxディストリビューションは2012年から、FreeBSDは2014年からこのコントローラをサポートしています。Windows OSの場合は、インストール時にドライバを含む追加のISOを提供する必要があります。</p></div>
</li>
<li>
<p>
<strong>VirtIO</strong>または virtio-blk と呼ばれることが多い<strong>VirtIO Block</strong>コントローラーは、古いタイプの準仮想化コントローラーです。機能面では、VirtIO SCSI コントローラーに取って代わられました。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_formats">画像フォーマット<a class="headerlink" href="#qm_hard_disk_formats" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各コントローラには多数のエミュレートされたハードディスクが接続され、設定されたストレージに存在するファイルまたはブロックデバイスによってバックアップされます。ストレージタイプの選択により、ハードディスクイメージのフォーマットが決まります。ブロックデバイスを使用するストレージ (LVM、ZFS、Ceph) では<strong>raw ディスクイメージフォーマットが</strong>必要ですが、ファイルベースのストレージ (Ext4、NFS、CIFS、GlusterFS) では<strong>raw ディスクイメージフォーマット</strong>または<strong>QEMU イメージフォーマットの</strong>いずれかを選択できます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>QEMU イメージフォーマットは</strong>、スナップショットやディスクイメージのシンプロビジョニングを可能にするコピーオンライトフォーマットです。</p>
</li>
<li>
<p>
<strong>rawディスクイメージは</strong>、ハードディスクのビット単位のイメージで、Linuxでブロックデバイスに対して<span class="monospaced">dd</span>コマンドを実行したときに得られるものと似ています。このフォーマットは、それ自体ではシンプロビジョニングやスナップショットをサポートしません。しかし、<strong>QEMUイメージ形式よりも</strong>最大10%高速になる可能性があります。<span class="footnote"><br>[詳細はこのベンチマークを参照してください: https:<a href="https://events.static.linuxfound.org/sites/events/files/slides/CloudOpen2013_Khoa_Huynh_v3.pdf">//events.static.linuxfound.org/sites/events/files/slides/CloudOpen2013_Khoa_Huynh_v3.pdf]</a><br></span></p>
</li>
<li>
<p>
<strong>VMwareのイメージフォーマットは</strong>、ディスクイメージを他のハイパーバイザーにインポート/エクスポートする場合にのみ意味があります。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_cache">キャッシュ・モード<a class="headerlink" href="#qm_hard_disk_cache" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ハードドライブの<strong>キャッシュ</strong>モードを設定すると、ホストシステムがゲストシステムにブロック書き込み完了を通知する方法に影響します。デフォルトの<strong>No cache</strong>は、各ブロックが物理ストレージの書き込みキューに到達したときに書き込みが完了したことをゲストシステムに通知し、ホストのページキャッシュを無視することを意味します。 これは、安全性と速度の良いバランスを提供します。</p></div>
<div class="paragraph">
<p>ProxmoxのVEバックアップマネージャがVMのバックアップを実行するときにディスクをスキップしたい場合は、そのディスクに<strong>No backup</strong>オプションを設定します。</p></div>
<div class="paragraph">
<p>Proxmox VE のストレージレプリケーション機構で、レプリケーションジョブの開始時にディスクをスキップさせたい場合は、そのディスクに<strong>レプリケーションのスキップオプションを</strong>設定します。 Proxmox VE 5.0 のレプリケーションでは、ディスクイメージが<span class="monospaced">zfspool</span> タイプのストレージ上にある必要があるため、VM にレプリケーションが設定されている場合にディスクイメージを他のストレージに追加すると、このディスクイメージのレプリケーションをスキップする必要があります。</p></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_discard">トリム/廃棄<a class="headerlink" href="#qm_hard_disk_discard" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ストレージが<em>シンプロビジョニングを</em>サポートしている場合(Proxmox VE ガイドのストレージの章を参照)、ドライブの<strong>Discard</strong>オプションを有効にすることができます。<strong>Discard が</strong>設定され、<em>TRIM が有効な</em>ゲスト OS<span class="footnote"><br>[TRIM、UNMAP、および discard<a href="https://en.wikipedia.org/wiki/Trim_%28computing%29">https://en.wikipedia.org/wiki/Trim_%28computing%29]</a><br></span> では、VM のファイルシステムがファイルを削除した後にブロックを未使用としてマークすると、コントローラはこの情報をストレージにリレーし、ストレージはそれに応じてディスクイメージを縮小します。 ゲストが<em>TRIM</em>コマンドを発行できるようにするには、ドライブで<strong>Discard</strong>オプションを有効にする必要があります。ゲストオペレーティングシステムによっては、<strong>SSD Emulation</strong>フラグを設定する必要もあります。<strong>VirtIO Block</strong>ドライブの<strong>Discard</strong>は、Linux Kernel 5.0 以降を使用するゲストでのみサポー トされていることに注意してください。</p></div>
<div class="paragraph">
<p>ドライブを回転ハード ディスクではなくソリッド ステート ドライブとしてゲストに表示する場合は、そのドライブに<strong>SSD エミュレーション</strong>オプションを設定できます。基盤となるストレージが実際に SSD でバックアップされている必要はなく、この機能はあらゆるタイプの物理メディアで使用できます。<strong>SSD エミュレーションは</strong>、<strong>VirtIO Block</strong>ドライブではサポートされていないことに注意してください。</p></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_iothread">IOスレッド<a class="headerlink" href="#qm_hard_disk_iothread" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><strong>IO Thread</strong>オプションは、<strong>VirtIO</strong>コントローラでディスクを使用する場合、またはエミュレートされるコントローラのタイプが<strong>VirtIO SCSI シングル</strong>である場合に<strong>SCSI</strong>コントローラでディスクを使用する場合にのみ使用できます。<strong>IO Thread</strong>を有効にすると、QEMU は、メイン イベント ループまたは vCPU スレッドですべての I/O を処理するのではなく、ストレージ コントローラごとに 1 つの I/O スレッドを作成します。利点の 1 つは、基礎となるストレージの作業分散と利用が向上することです。もう 1 つの利点は、メイン スレッドも vCPU スレッドもディスク I/O によってブロックされることがないため、非常に I/O 負荷の高いホスト ワークロードのゲストでの待ち時間 (ハング) が短縮されることです。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_cpu">10.2.5.CPU<a class="headerlink" href="#qm_cpu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-cpu.png">
<img src="images/screenshot/gui-create-vm-cpu.png" alt="screenshot/gui-create-vm-cpu.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><strong>CPUソケットとは</strong>、PCマザーボード上にある物理的なスロットのことで、CPUを差し込むことができます。 このCPUには、独立した処理ユニットである<strong>コアを</strong>1つまたは複数含めることができます。CPUソケットが1つで4コアか、2つで2コアかは、性能の観点からはほとんど関係ありません。 しかし、ソフトウェアのライセンスによっては、マシンのソケット数に依存するものがあり、その場合は、ライセンスで許可されているソケット数に設定するのが理にかなっています。</p></div>
<div class="paragraph">
<p>仮想 CPU (コアとソケット) の数を増やすと、通常はパフォーマンスが向上しますが、これは VM の用途に大きく依存します。 仮想 CPU を追加するごとに、QEMU はホスト・システム上に新しい実行スレッドを作成するためです。VM のワークロードについて確信が持てない場合は、通常、<strong>合計コア</strong>数を 2 に設定するのが安全です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">すべての VM の<em>全体の</em>コア数がサーバーのコア数よりも大きい場合（例えば、8 コアしかないマシンにそれぞれ 4 コア (= 合計 16 コア) の VM を 4 つ配置する場合）は、まったく問題ありません。この場合、ホスト・システムは、標準的なマルチスレッド・アプリケーションを実行する場合と同様に、QEMU の実行スレッドをサーバー・コア間でバランスさせます。しかし、Proxmox VEは、物理的に利用可能な数よりも多くの仮想CPUコアでVMを起動することを防ぎます。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="qm_cpu_resource_limits">リソース制限<a class="headerlink" href="#qm_cpu_resource_limits" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><strong>クプリミット</strong></p></div>
<div class="paragraph">
<p>仮想コア数に加えて、VMで使用可能な「ホストCPU時間」の合計も<strong>cpulimit</strong>オプションで設定できます。これはCPU時間をパーセントで表した浮動小数点値で、<span class="monospaced">1.0は</span> <span class="monospaced">100</span>%、<span class="monospaced">2.</span>5は<span class="monospaced">250%などに</span>相当します。1つのプロセスが1つのコアを完全に使用する場合、CPU時間の使用率は<span class="monospaced">100%に</span>なります。4つのコアを持つVMがすべてのコアをフルに使用した場合、理論上は<span class="monospaced">400%の</span>使用率になります。QEMUはvCPUコア以外にVMペリフェラル用の追加スレッドを持つことができるため、実際の使用率はさらに高くなる可能性があります。</p></div>
<div class="paragraph">
<p>この設定は、VMがいくつかのプロセスを並行して実行しているために複数のvCPUを持つ必要があるが、VM全体としてはすべてのvCPUを同時に100%で実行することはできない場合に役立ちます。</p></div>
<div class="paragraph">
<p>例えば、8つの仮想CPUを持つことで恩恵を受けられる仮想マシンがあるとして、その仮想マシンが8つのコアをフル稼働させることはできません。これを解決するには、<strong>cpulimitを</strong> <span class="monospaced">4.0</span>（=400%）に設定します。これは、VMが8つのプロセスを同時に実行して8つすべての仮想CPUを完全に利用する場合、各vCPUは物理コアから最大50%のCPU時間を受け取ることを意味します。ただし、VMのワークロードが4つの仮想CPUしかフルに使用しない場合でも、物理コアから最大100%のCPU時間を受け取ることができ、合計で400%になります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VMは、その構成によっては、ネットワーキングやIOオペレーション、ライブマイグレーションなど、追加のスレッドを使用することができます。そのため、VMは仮想CPUが使用できる以上のCPU時間を使用するように表示されることがあります。VMが割り当てられたvCPUよりも多くのCPU時間を使用しないようにするには、<strong>cpulimitを</strong>総コア数と同じ値に設定します。</td>
</tr></table>
</div>
<div class="paragraph">
<p><strong>CPU</strong></p></div>
<div class="paragraph">
<p><strong>cpuunits</strong>オプション（最近では CPU shares または CPU weight と呼ばれることもあります）を使用すると、VM が他の実行中の VM と比較してどれだけの CPU 時間を取得するかを制御できます。これは相対的な重みで、デフォルトは<span class="monospaced">100</span>（またはホストがレガシーcgroup v1を使用している場合は<span class="monospaced">1024</span>）です。これを増やすと、VMはスケジューラによって、より低いウェイトの他のVMよりも優先されます。</p></div>
<div class="paragraph">
<p>たとえば、VM 100がデフォルトの<span class="monospaced">100に</span>設定され、VM 200が<span class="monospaced">200に</span>変更された場合、後者のVM 200は最初のVM 100の2倍のCPU帯域幅を受け取ることになります。</p></div>
<div class="paragraph">
<p>より詳しい情報は<span class="monospaced">man systemd.resource-control</span> を見てください。ここでは<span class="monospaced">CPUQuota</span>が<span class="monospaced">cpulimit に</span>、<span class="monospaced">CPUWeight</span>が<span class="monospaced">cpuunits の</span>設定に対応しています。参考文献や実装の詳細については Notes セクションを参照してください。</p></div>
<div class="paragraph">
<p><strong>親和性</strong></p></div>
<div class="paragraph">
<p><strong>アフィニティ・オプションを</strong>使用すると、VMのvCPUの実行に使用する物理CPUコアを指定できます。I/OなどのペリフェラルVMプロセスは、この設定の影響を受けません。<strong>CPUアフィニティはセキュリティ機能ではない</strong>ことに注意してください。</p></div>
<div class="paragraph">
<p>CPU<strong>アフィニティを</strong>強制することは、場合によっては意味がありますが、複雑さとメンテナンスの手間の増加を伴います。例えば、後からVMを追加したい場合や、VMをCPUコアの少ないノードに移行したい場合などです。また、一部のCPUがフルに使用され、他のCPUがほとんどアイドル状態である場合、非同期でシステムのパフォーマンスが制限されやすくなります。</p></div>
<div class="paragraph">
<p><strong>アフィニティは</strong> <span class="monospaced">taskset</span>CLIツールで設定します。これは<span class="monospaced">man cpuset</span> の<span class="monospaced">List Format</span>にあるホスト CPU 番号 (<span class="monospaced">lscpu</span> を参照) を受け入れます。このASCII 10進数リストには、数値だけでなく数値範囲も含めることができます。例えば、<strong>アフィニティ</strong><span class="monospaced">0-1,8-11</span>（拡張<span class="monospaced">0,1,8,9,10,11</span>）は、VMがこれら6つの特定のホストコアのみで実行されるようにします。</p></div>
</div>
<div class="sect4">
<h5 id="_cpu_type">CPUタイプ<a class="headerlink" href="#_cpu_type" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QEMU は、486 から最新の Xeon プロセッサまで、さまざまな<strong>種類の CPU</strong>をエミュレートできます。プロセッサの世代が新しくなるごとに、ハードウェア アシスト 3d レンダリング、乱数生成、メモリ保護などの新機能が追加されます。また、現在の世代は、バグやセキュリティの修正を伴う<a href="#chapter_firmware_updates">マイクロコードアップデートによって</a>アップグレードできます。</p></div>
<div class="paragraph">
<p>通常、ホスト・システムのCPUに近いプロセッサ・タイプをVMに選択する必要があります。これは、ホストのCPU機能（<em>CPUフラグとも</em>呼ばれます）がVMで利用できることを意味します。完全に一致させたい場合は、CPUタイプを<strong>ホストに</strong>設定すると、VMはホスト・システムと全く同じCPUフラグを持つことになります。</p></div>
<div class="paragraph">
<p>しかし、これには欠点があります。異なるホスト間でVMのライブマイグレーションを行いたい場合、VMは異なるCPUタイプや異なるマイクロコードバージョンを持つ新しいシステム上で終了するかもしれません。 ゲストに渡されたCPUフラグが欠落している場合、QEMUプロセスは停止します。これを解決するために、QEMUには独自の仮想CPUタイプがあり、Proxmox VEはデフォルトでこれを使用します。</p></div>
<div class="paragraph">
<p>バックエンドのデフォルトは<em>kvm64で</em>、基本的にすべてのx86_64ホストCPUで動作します。新しいVMを作成する際のUIのデフォルトは<em>x86-64-v2-AESで</em>、Intelの場合はWestmereから始まるホストCPU、AMDの場合は少なくとも第4世代のOpteronが必要です。</p></div>
<div class="paragraph">
<p>要するに：</p></div>
<div class="paragraph">
<p>ライブマイグレーションにこだわらない場合や、すべてのノードが同じCPUと同じマイクロコードバージョンを持つ均質なクラスタの場合は、CPUタイプをホストに設定してください。</p></div>
<div class="paragraph">
<p>ライブマイグレーションとセキュリティを重視し、Intel CPUのみ、またはAMD CPUのみを使用している場合は、クラスタのCPUの世代が最も低いモデルを選択してください。</p></div>
<div class="paragraph">
<p>セキュリティなしのライブマイグレーションを重視する場合や、Intel/AMDクラスタが混在している場合は、互換性の最も低い仮想QEMU CPUタイプを選択してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">IntelとAMDのホストCPU間のライブマイグレーションは、動作保証がありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p><a href="#chapter_qm_vcpu_list">QEMUで定義されているAMDとIntelのCPUタイプの一覧</a>」も参照してください。</p></div>
</div>
<div class="sect4">
<h5 id="_qemu_cpu_types">QEMU CPU タイプ<a class="headerlink" href="#_qemu_cpu_types" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QEMUは、IntelとAMDの両方のホストCPUと互換性のある仮想CPUタイプも提供しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">仮想CPUタイプのSpectre脆弱性を緩和するには、関連するCPU<a href="#qm_meltdown_spectre">フラグを</a>追加する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>歴史的に、Proxmox VEのCPUモデルは<em>kvm64で</em>、Pentium 4レベルのCPUフラグが有効になっていました。</p></div>
<div class="paragraph">
<p>2020年夏、AMD、Intel、Red Hat、SUSEは共同で、x86-64ベースラインの上に3つのx86-64マイクロアーキテクチャ・レベルを定義し、モダン・フラグを有効にしました。詳細については、<a href="https://gitlab.com/x86-psABIs/x86-64-ABI">x86-64-ABI仕様を</a>参照してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">CentOS 9のような新しいディストリビューションは、<em>x86-64-v2</em>フラグを最低要件としてビルドされています。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>kvm64 (x86-64-v1)：</em>Intel CPU &gt;= Pentium 4、AMD CPU &gt;= Phenomに対応。</p>
</li>
<li>
<p>
<em>x86-64-v2</em>：Intel CPU &gt;= Nehalem, AMD CPU &gt;= Opteron_G3 に対応。<em>x86-64-v1</em> と比較して CPU フラグを追加:<em>+cx16</em>,<em>+lahf-lm</em>,<em>+popcnt</em>,<em>+pni</em>,<em>+sse4.1</em>,<em>+sse4.2</em>,<em>+ssse3</em>.</p>
</li>
<li>
<p>
<em>x86-64-v2-AES</em>：Intel CPU &gt;= Westmere, AMD CPU &gt;= Opteron_G4に対応。<em>x86-64-v</em>2と比較してCPUフラグを追加：<em>+aes</em>。</p>
</li>
<li>
<p>
<em>x86-64-v3</em>: Intel CPU &gt;= Broadwell, AMD CPU &gt;= EPYC に対応。<em>x86-64-v2-AESと</em>比較してCPUフラグを追加：<em>+avx</em>、<em>+avx2</em> <em>、+bmi1</em> <em>、+bmi2</em><em>、+f16c</em>、<em>+fma</em>、<em>+movbe</em>、<em>+xsave</em>。</p>
</li>
<li>
<p>
<em>x86-64-v4</em>: Intel CPU &gt;= Skylake, AMD CPU &gt;= EPYC v4 Genoa と互換性があります。<em>x86-64-v3</em> と比較して CPU フラグが追加されました:<em>+avx512f</em>,<em>+avx512bw</em>,<em>+avx512cd</em>,<em>+avx512dq</em>,<em>+avx512vl</em>.</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_custom_cpu_types">カスタムCPUタイプ<a class="headerlink" href="#_custom_cpu_types" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>設定可能な機能セットを持つカスタム CPU タイプを指定できます。これらは、管理者が設定ファイル<span class="monospaced">/etc/pve/virtual-guest/cpu-models.conf</span>で管理します。フォーマットの詳細については、<span class="monospaced">man cpu-models.conf</span>を参照してください。</p></div>
<div class="paragraph">
<p>指定されたカスタムタイプは、<span class="monospaced">/nodesの</span> <span class="monospaced">Sys.Audit</span>権限を持つユーザであれば誰でも選択できます。CLIまたはAPIを介してVMにカスタムCPUタイプを設定する場合、名前の前に<em>custom-を</em>付ける必要があります。</p></div>
</div>
<div class="sect4">
<h5 id="qm_meltdown_spectre">Meltdown / Spectre 関連 CPU フラグ<a class="headerlink" href="#qm_meltdown_spectre" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>MeltdownおよびSpectre脆弱性<span class="footnote"><br>[Meltdown Attack<a href="https://meltdownattack.com/">https://meltdownattack.com/]</a><br></span>に関連するCPUフラグがいくつかありますが、選択したVMのCPUタイプがデフォルトですでに有効になっている場合を除き、手動で設定する必要があります。</p></div>
<div class="paragraph">
<p>これらのCPUフラグを使用するには、2つの条件を満たす必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ホスト CPU がその機能をサポートし、それをゲストの仮想 CPU に伝える必要があります。</p>
</li>
<li>
<p>
ゲストオペレーティングシステムは、攻撃を軽減し、CPU機能を利用できるバージョンにアップデートする必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>そうでない場合は、Web UIでCPUオプションを編集するか、VM設定ファイルで<em>cpu</em>オプションの<em>flags</em>プロパティを設定して、仮想CPUの希望するCPUフラグを設定する必要があります。</p></div>
<div class="paragraph">
<p>Spectre v1,v2,v4の修正については、CPUまたはシステムベンダーがCPU用のいわゆる「マイクロコードアップデート」を提供する必要もあります<a href="#chapter_firmware_updates">。</a>影響を受けるすべての CPU が spec-ctrl をサポートするようにアップデートできるわけではないことに注意してください。</p></div>
<div class="paragraph">
<p>Proxmox VE ホストが脆弱かどうかを確認するには、root で以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>for f in /sys/devices/system/cpu/vulnerabilities/*; do echo "${f##*/}.-" $(cat "$f"); done</pre>
</div></div>
<div class="paragraph">
<p><span class="footnote"><br>[spectre-meltdown-checker<a href="https://meltdown.ovh/">https://meltdown.ovh/]</a></span>ホストがまだ脆弱かどうかを検出するためのコミュニティ・スクリプトも用意されています。<span class="footnote"><br></span></p></div>
</div>
<div class="sect4">
<h5 id="_intel_processors">インテル・プロセッサー<a class="headerlink" href="#_intel_processors" title="Permalink to this heading"></a></h5>
<div class="ulist"><ul>
<li>
<p>
<em>ピピッド</em></p>
<div class="paragraph">
<p>これにより、ユーザー空間からカーネルメモリを効果的に隠す<em>KPTI（Kernel Page-Table Isolation</em>）と呼ばれるMeltdown（CVE-2017-5754）緩和策のパフォーマンスへの影響が軽減されます。PCIDなしでは、KPTIはかなり高価なメカニズムです<span class="footnote"><br>[PCID is now a critical performance/security feature on x86<a href="https://groups.google.com/forum/m/#!topic/mechanical-sympathy/L9mHTbeQLNU">https://groups.google.com/forum/m/#!topic/mechanical-sympathy/L9mHTbeQLNU</a>]<br></span> 。</p></div>
<div class="paragraph">
<p>Proxmox VEホストがPCIDをサポートしているかどうかを確認するには、rootで次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># grep ' pcid ' /proc/cpuinfo</pre>
</div></div>
<div class="paragraph">
<p>これがemptyを返さない場合、ホストのCPUは<em>pcidを</em>サポートしています。</p></div>
</li>
<li>
<p>
<em>スペックctrl</em></p>
<div class="paragraph">
<p>Spectre v1 (CVE-2017-5753) および Spectre v2 (CVE-2017-5715) の修正を有効にするには、retpolines が十分でない場合に必要です。 IBRS サフィックスが -IBRS のインテル CPU モデルではデフォルトで含まれています。 IBRS サフィックスが -IBRS でないインテル CPU モデルでは明示的にオンにする必要があります。 更新されたホスト CPU マイクロコード (intel-microcode &gt;= 20180425) が必要です。</p></div>
</li>
<li>
<p>
<em>エスエスビーディー</em></p>
<div class="paragraph">
<p>Spectre V4 (CVE-2018-3639) 修正を有効にするために必要です。すべてのインテル CPU モデルで明示的にオンにする必要があります。 更新されたホスト CPU マイクロコード (intel-microcode &gt;= 20180703) が必要です。</p></div>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_amd_processors">AMDプロセッサー<a class="headerlink" href="#_amd_processors" title="Permalink to this heading"></a></h5>
<div class="ulist"><ul>
<li>
<p>
<em>イブピ</em></p>
<div class="paragraph">
<p>Spectre v1 (CVE-2017-5753) および Spectre v2 (CVE-2017-5715) の修正を有効にするには、retpolines が十分でない場合に必要です。 AMD CPU モデルで -IBPB サフィックスがデフォルトで含まれています。 AMD CPU モデルで -IBPB サフィックスがない場合は、明示的にオンにする必要があります。 ゲスト CPU で使用する前に、ホスト CPU のマイクロコードがこの機能をサポートしている必要があります。</p></div>
</li>
<li>
<p>
<em>ヴィルトエスビーディー</em></p>
<div class="paragraph">
<p>Spectre v4 (CVE-2018-3639) の修正を有効にするために必要です。 どの AMD CPU モデルにもデフォルトでは含まれていません。 すべての AMD CPU モデルで明示的に有効にする必要があります。 ゲストの互換性を最大化するために、amd-ssbd も提供されている場合でも、これはゲストに提供する必要があります。 これは物理 CPU には存在しない仮想機能であるため、「ホスト」CPU モデルを使用する場合は明示的に有効にする必要があることに注意してください。</p></div>
</li>
<li>
<p>
<em>amd-ssbd</em></p>
<div class="paragraph">
<p>Spectre v4 (CVE-2018-3639) 修正を有効にするために必要です。 どの AMD CPU モデルにもデフォルトでは含まれていません。すべての AMD CPU モデルで明示的にオンにする必要があります。 これは virt-ssbd よりも高いパフォーマンスを提供するため、これをサポートするホストは、可能であれば常にこれをゲストに公開する必要があります。</p></div>
</li>
<li>
<p>
<em>amd-no-ssb</em></p>
<div class="paragraph">
<p>ホストが Spectre V4 (CVE-2018-3639) に対して脆弱ではないことを示すために推奨されます。 どの AMD CPU モデルにもデフォルトでは含まれていません。 将来のハードウェア世代の CPU は CVE-2018-3639 に対して脆弱ではないため、amd-no-ssb を公開することで、その緩和策を有効にしないようにゲストに伝える必要があります。 これは virt-ssbd および amd-ssbd と相互に排他的です。</p></div>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_numa">NUMA<a class="headerlink" href="#_numa" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>また、オプションで<strong>NUMA</strong><span class="footnote"><br><a href="https://en.wikipedia.org/wiki/Non-uniform_memory_access">[https://en.wikipedia.org/wiki/Non-uniform_memory_access]</a><br></span>アーキテクチャをVMでエミュレートすることもできます。NUMAアーキテクチャの基本は、すべてのコアで利用可能なグローバル・メモリ・プールを持つ代わりに、メモリを各ソケットに近いローカル・バンクに分散させることを意味します。 これにより、メモリ・バスがボトルネックでなくなるため、速度が向上します。システムがNUMAアーキテクチャを採用している場合<span class="footnote"><br>[<span class="monospaced">numactl --hardware | grep available</span>コマンドが複数のノードを返す場合は、ホストシステムがNUMAアーキテクチャを採用しています]<br></span>ホストシステム上でVMリソースを適切に分配できるようになるため、このオプションを有効にすることをお勧めします。 このオプションは、VMのコアやRAMをホットプラグする場合にも必要です。</p></div>
<div class="paragraph">
<p>NUMAオプションを使用する場合は、ソケット数をホストシステムのノード数に設定することをお勧めします。</p></div>
</div>
<div class="sect4">
<h5 id="_vcpu_hot_plug">vCPU ホットプラグ<a class="headerlink" href="#_vcpu_hot_plug" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最近のオペレーティングシステムでは、実行中のシステムでCPUをホットプラグしたり、ある程度までホットアンプラグしたりする機能が導入されています。仮想化によって、このようなシナリオで実際のハードウェアが引き起こす（物理的な）問題の多くを回避することができます。 それでも、これはかなり新しく複雑な機能なので、その使用は絶対に必要な場合に限定すべきです。この機能のほとんどは、よくテストされた、より複雑でない他の機能で再現できます。</p></div>
<div class="paragraph">
<p>Proxmox VEでは、プラグインされたCPUの最大数は常に<span class="monospaced">コア数*ソケット</span>数です。 このCPUの合計コア数より少ないコア数でVMを起動するには、<strong>vcpus</strong>設定を使用することができ、これはVM起動時にプラグインされるべきvCPUの数を示します。</p></div>
<div class="paragraph">
<p>現在、この機能はLinuxでのみサポートされており、3.10より新しいカーネルが必要で、4.7より新しいカーネルが推奨されています。</p></div>
<div class="paragraph">
<p>以下のように udev ルールを使用して、新しい CPU をゲストのオンラインとして自動的に設定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>SUBSYSTEM=="cpu", ACTION=="add", TEST=="online", ATTR{online}=="0", ATTR{online}="1"</pre>
</div></div>
<div class="paragraph">
<p>これを /etc/udev/rules.d/ の下に<span class="monospaced">.rules</span> で終わるファイルとして保存します。</p></div>
<div class="paragraph">
<p>注意: CPU ホットリムーブはマシン依存であり、ゲストの協力が必要です。  削除コマンドは CPU の削除が実際に行われることを保証するものではなく、通常は x86/amd64 の ACPI のようなターゲットに依存するメカニズムを使用してゲスト OS に転送されるリクエストです。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_memory">10.2.6.メモリー<a class="headerlink" href="#qm_memory" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各VMには、固定サイズのメモリを設定するか、ホストの現在のRAM使用量に基づいて動的にメモリを割り当てるようにProxmox VEに依頼するオプションがあります。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-memory.png">
<img src="images/screenshot/gui-create-vm-memory.png" alt="screenshot/gui-create-vm-memory.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">固定メモリ割り当て</div><p>メモリと最小メモリを同じ量に設定した場合、Proxmox VEは単純に指定した量をVMに割り当てます。</p></div>
<div class="paragraph">
<p>固定メモリサイズを使用している場合でも、ゲストが実際に使用するメモリ量などの有用な情報を提供するため、バルーニングデバイスは VM に追加されます。 一般的に、<strong>バルーニングは</strong>有効なままにしておく必要がありますが、（デバッグ目的などで）無効にしたい場合は、<strong>バルーニングデバイスの</strong>チェックを外すか、または</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>バルーン: 0</pre>
</div></div>
<div class="paragraph">
<p>を設定します。</p></div>
<div class="paragraph">
<div class="title">自動メモリ割り当て</div><p>最小メモリをメモリより低く設定すると、Proxmox VE は指定した最小量が常に VM で使用可能であることを確認し、ホスト上の RAM 使用率が 80% 未満の場合、指定した最大メモリまで動的にゲストにメモリを追加します。</p></div>
<div class="paragraph">
<p>ホストの RAM が不足すると、VM はホストにメモリを解放し、必要に応じて実行中のプロセスをスワップし、最後の手段として oom killer を起動します。ホストとゲスト間のメモリの受け渡しは、ゲスト内部で動作する特別な<span class="monospaced">バルーンカーネルドライバを介して</span>行われます。<span class="footnote"><br>[バルーンドライバの内部構造に関する詳しい説明は、こちら<a href="https://rwmj.wordpress.com/2010/07/17/virtio-balloon/">https://rwmj.wordpress.com/2010/07/17/virtio-balloon/]</a> を参照してください</span>。<span class="footnote"><br></span></p></div>
<div class="paragraph">
<p>複数のVMが自動割り当て機能を使用する場合、各VMが占有すべき空きホスト・メモリの相対量を示す<strong>シェア</strong>係数を設定することができます。例えば、4つのVMがあり、そのうちの3つがHTTPサーバを実行し、最後の1つがデータベースサーバであるとします。データベース・サーバのRAMにより多くのデータベース・ブロックをキャッシュするために、予備のRAMが利用可能な場合、データベースVMを優先したいとします。このため、データベースVMに3000のSharesプロパティを割り当て、他のVMはデフォルト設定の1000にします。ホスト・サーバには 32GB の RAM があり、現在 16GB を使用しているため、32 * 80/100 - 16 = 9GB の RAM が、設定された最小メモリ量に加えて VM に割り当てられます。データベース VM には 9 * 3000 / (3000 + 1000 + 1000 + 1000) = 4.5 GB の RAM が、HTTP サーバにはそれぞれ 1.5 GB の RAM が追加されます。</p></div>
<div class="paragraph">
<p>2010 年以降にリリースされたすべての Linux ディストリビューションには、バルーンカーネルドライバーが含まれています。Windows OS の場合、バルーンドライバは手動で追加する必要があり、ゲストの速度を低下させる可能性があるため、重要なシステムでの使用はお勧めしません。</p></div>
<div class="paragraph">
<p>VMにRAMを割り当てる場合、ホストが使用できるRAMを常に1GB残しておくのが良い経験則です。</p></div>
</div>
<div class="sect3">
<h4 id="qm_memory_encryption">10.2.7.メモリ暗号化<a class="headerlink" href="#qm_memory_encryption" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="qm_memory_encryption_sev">AMD SEV<a class="headerlink" href="#qm_memory_encryption_sev" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>SEV（セキュア暗号化仮想化）は、AES-128暗号化とAMDセキュア・プロセッサを使用して、VMごとのメモリ暗号化を可能にします。</p></div>
<div class="paragraph">
<p>さらに、SEV-ES（Secure Encrypted Virtualization-Encrypted State）は、ハイパーバイザーへの情報漏洩を防ぐため、VMの実行停止時にすべてのCPUレジスタの内容を暗号化します。この機能は非常に実験的なものです。</p></div>
<div class="paragraph">
<p><strong>ホストの条件</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
AMD EPYC CPU</p>
</li>
<li>
<p>
SEV-ESはAMD EPYC 7xx2以降でのみサポートされます。</p>
</li>
<li>
<p>
ホスト・マシンのBIOS設定でAMDメモリー暗号化を設定します。</p>
</li>
<li>
<p>
デフォルトで有効になっていない場合は、カーネルパラメータに「kvm_amd.sev=1」を追加します。</p>
</li>
<li>
<p>
ホスト(SME)上のメモリーを暗号化したい場合は、カーネル・パラメーターに "mem_encrypt=on "を追加<a href="https://www.kernel.org/doc/Documentation/x86/amd-memory-encryption.txt">https://www.kernel.org/doc/Documentation/x86/amd-memory-encryption.txt</a>を参照。</p>
</li>
<li>
<p>
SWIOTLBは<a href="https://github.com/AMDESE/AMDSEV#faq-4">https://github.com/AMDESE/AMDSEV#faq-4</a>を参照。</p>
</li>
</ul></div>
<div class="paragraph">
<p>ホスト上でSEVが有効になっているかどうかを確認するには、dmesgで<span class="monospaced">sevを</span>検索し、kvm_amdのSEVカーネルパラメータを出力します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -i sev [...] ccp 0000:45:00.1: sev enabled [...] ccp 0000:45:00.1: SEV API: &lt;buildversion&gt; [...] SEV supported: &lt;number&gt; ASIDs [...] SEV-ES supported: &lt;number&gt; ASIDs # cat /sys/module/kvm_amd/parameters/sev Y</pre>
</div></div>
<div class="paragraph">
<p><strong>ゲストの条件</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
edk2-OVMF</p>
</li>
<li>
<p>
Q35を使用することをお勧めします。</p>
</li>
<li>
<p>
ゲスト OS に SEV サポートが含まれている必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p><strong>制限事項</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
メモリが暗号化されているため、ホスト上のメモリ使用量は常に間違っています。</p>
</li>
<li>
<p>
スナップショットやライブマイグレーションなど、メモリーの保存や復元を伴う操作はまだ機能していないか、攻撃可能です。<a href="https://github.com/PSPReverse/amd-sev-migration-attack">https://github.com/PSPReverse/amd-sev-migration-attack</a></p>
</li>
<li>
<p>
PCIパススルーはサポートされていません。</p>
</li>
<li>
<p>
SEV-ESは非常に実験的なものです。</p>
</li>
<li>
<p>
QEMUとAMD-SEVのドキュメントは非常に限られています。</p>
</li>
</ul></div>
<div class="paragraph">
<p>設定例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -amd_sev type=std,no-debug=1,no-key-sharing=1,kernel-hashes=1。</pre>
</div></div>
<div class="paragraph">
<p><strong>typeは</strong>暗号化技術を定義します（"type="は必要ありません）。 利用可能なオプションはstdとesです。</p></div>
<div class="paragraph">
<p>QEMU<strong>ポリシー</strong>パラメータは、<strong>no-debug</strong>パラメータと<strong>no-key-sharing</strong>パラメータで計算されます。これらのパラメータはポリシービット0と1に対応します。<strong>typeが</strong> <strong>esの</strong>場合、ポリシービット2は1に設定され、SEV-ESが有効になります。 ポリシービット3（nosend）はマイグレーション攻撃を防ぐために常に1に設定されます。ポリシーの計算方法の詳細については、<a href="https://www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf">AMD SEV API仕様書第3章を</a>参照してください。</p></div>
<div class="paragraph">
<p><strong>kernel-hashes</strong>オプションは、古いOVMFイメージやカーネル/initrdを測定しないゲストとの後方互換性のため、デフォルトではオフになっています。<a href="https://lists.gnu.org/archive/html/qemu-devel/2021-11/msg02598.html">https://lists.gnu.org/archive/html/qemu-devel/2021-11/msg02598.html を参照してください</a>。</p></div>
<div class="paragraph">
<p><strong>SEVがゲストで動作しているかチェック</strong></p></div>
<div class="paragraph">
<p>方法 1 - dmesg：</p></div>
<div class="paragraph">
<p>出力はこのようになります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -i sev AMD Memory Encryption Features active：SEV</pre>
</div></div>
<div class="paragraph">
<p>方法 2 - MSR 0xc0010131 (MSR_AMD64_SEV)：</p></div>
<div class="paragraph">
<p>出力は1でなければなりません。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt install msr-tools # modprobe msr # rdmsr -a 0xc0010131 1</pre>
</div></div>
<div class="paragraph">
<p>リンク</p></div>
<div class="ulist"><ul>
<li>
<p>
h<a href="https://developer.amd.com/sev/">ttps://</a>developer.amd.com/sev/</p>
</li>
<li>
<p>
h<a href="https://github.com/AMDESE/AMDSEV">ttps://</a>github.com/AMDESE/AMDSEV</p>
</li>
<li>
<p>
h<a href="https://www.qemu.org/docs/master/system/i386/amd-memory-encryption.html">ttps://</a>www.qemu.org/docs/master/system/i386/amd-memory-encryption.html</p>
</li>
<li>
<p>
h<a href="https://www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf">ttps://</a>www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf</p>
</li>
<li>
<p>
h<a href="https://documentation.suse.com/sles/15-SP1/html/SLES-amd-sev/index.html">ttps://</a>documentation.suse.com/sles/15-SP1/html/SLES-amd-sev/index.html</p>
</li>
</ul></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_network_device">10.2.8.ネットワークデバイス<a class="headerlink" href="#qm_network_device" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-network.png">
<img src="images/screenshot/gui-create-vm-network.png" alt="screenshot/gui-create-vm-network.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>各VMは、4つの異なるタイプの多数の<em>ネットワーク・インターフェイス・コントローラ</em>（NIC）を持つことができます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Intel E1000が</strong>デフォルトで、Intelギガビットネットワークカードをエミュレートします。</p>
</li>
<li>
<p>
<strong>の</strong>準仮想化 NIC を使用する必要があります。すべての VirtIO デバイスと同様に、ゲスト OS には適切なドライバがインストールされている必要があります。</p>
</li>
<li>
<p>
<strong>Realtek 8139は</strong>旧式の100MB/sネットワークカードをエミュレートしているため、旧式のオペレーティングシステム（2002年以前にリリースされたもの）をエミュレートする場合にのみ使用してください。</p>
</li>
<li>
<p>
<strong>vmxnet3</strong>は別の準仮想化デバイスで、別のハイパーバイザーから VM をインポートする場合にのみ使用します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは各NICにランダムな<strong>MACアドレスを</strong>生成し、VMがイーサネットネットワーク上でアドレス指定できるようにします。</p></div>
<div class="paragraph">
<p>VMに追加したNICは、2つの異なるモデルのいずれかに従います：</p></div>
<div class="ulist"><ul>
<li>
<p>
デフォルトの<strong>ブリッジモードでは</strong>、各仮想NICは<em>タップデバイス</em>(イーサネットNICをシミュレートするソフトウェアループバックデバイス)によってホスト上でバックアップされます。このタップデバイスは、Proxmox VEではデフォルトでvmbr0というブリッジに追加されます。このモードでは、VMはホストがあるイーサネットLANに直接アクセスできます。</p>
</li>
<li>
<p>
代替<strong>NATモードでは</strong>、各仮想NICはQEMUユーザーネットワーキングスタックとのみ通信し、内蔵ルーターとDHCPサーバーがネットワークアクセスを提供します。この内蔵DHCPは、プライベート10.0.2.0/24範囲のアドレスを提供します。NATモードはブリッジモードよりもはるかに遅いので、テストにのみ使用してください。このモードはCLIまたはAPI経由でのみ利用可能で、Web UI経由では利用できません。</p>
</li>
</ul></div>
<div class="paragraph">
<p>また、<strong>ネットワークデバイスなしを</strong>選択することで、VMの作成時にネットワークデバイスの追加を省略することもできます。</p></div>
<div class="paragraph">
<p>各 VM ネットワークデバイスの<strong>MTU</strong>設定を上書きできます。<span class="monospaced">mtu=1</span>オプションは、MTU 値が基礎となるブリッジから継承される特殊なケースを表します。 このオプションは、<strong>VirtIO</strong>ネットワークデバイスでのみ使用できます。</p></div>
<div class="paragraph">
<div class="title">マルチキュー</div><p>VirtIO ドライバを使用している場合、オプションで<strong>Multiqueue</strong>オプションを有効にできます。このオプションにより、ゲスト OS は複数の仮想 CPU を使用してネットワークパケットを処理できるようになり、転送されるパケットの総数が増加します。</p></div>
<div class="paragraph">
<p>Proxmox VEでVirtIOドライバを使用する場合、各NICネットワークキューはホストカーネルに渡され、キューはvhostドライバによって生成されたカーネルスレッドによって処理されます。このオプションを有効にすると、各 NIC に対して<em>複数の</em>ネットワーク・キューをホスト・カーネルに渡すことができます。</p></div>
<div class="paragraph">
<p>Multiqueue を使用する場合は、ゲストの vCPU 数と同じ値に設定することをお勧めします。vCPU 数は、 ソケット数× VM に設定されたコア数であることを忘れないでください。また、この ethtool コマンドを使用して、VM の各 VirtIO NIC の多目的チャネル数を設定する必要があります：</p></div>
<div class="paragraph">
<p><span class="monospaced">ethtool -L ens1 結合 X</span></p></div>
<div class="paragraph">
<p>ここで、XはVMのvCPU数です。</p></div>
<div class="paragraph">
<p>WindowsゲストをMultiqueue用に設定するには、<a href="https://pve.proxmox.com/wiki/Windows_VirtIO_Drivers">Redhat VirtIO Ethernetアダプタドライバを</a>インストールし、次のようにNICの設定を変更します。デバイスマネージャーを開き、"Network adapters" で NIC を右クリックし、"Properties" を選択します。次に「詳細設定」タブを開き、左側のリストから「受信側スケーリング」を選択します。有効」になっていることを確認してください。次に、リストの「Maximum number of RSS Queues」に移動し、VMのvCPU数に設定します。設定が正しいことを確認したら、「OK」をクリックして確定します。</p></div>
<div class="paragraph">
<p>Multiqueue パラメータを 1 より大きな値に設定すると、トラフィックが増加するにつれてホストおよびゲストシステムの CPU 負荷が増加することに注意してください。このオプションは、VM がルーター、リバースプロキシ、または長時間のポーリングを行うビジーな HTTP サーバーとして実行されている場合など、VM が多数の着信接続を処理する必要がある場合にのみ設定することをお勧めします。</p></div>
</div>
<div class="sect3">
<h4 id="qm_display">10.2.9.表示<a class="headerlink" href="#qm_display" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QEMU は、数種類の VGA ハードウェアを仮想化できます。いくつか例を挙げます：</p></div>
<div class="ulist"><ul>
<li>
<p>
デフォルトの<strong>std</strong> は、Bochs VBE 拡張を持つカードをエミュレートします。</p>
</li>
<li>
<p>
<strong>cirrus</strong> はかつてデフォルトで使用されていましたが、非常に古いハードウェアモ ジュールをエミュレートしており、すべての問題があります。<span class="footnote"><br><a href="https://www.kraxel.org/blog/2014/10/qemu-using-cirrus-considered-harmful/">[https://www.kraxel.org/blog/2014/10/qemu-using-cirrus-considered-harmful/ qemu:</a>cirrus の使用は有害です]<br></span> 、例えば Windows XP 以前を使用している場合。</p>
</li>
<li>
<p>
<strong>vmwareは</strong>、VMWare SVGA-II互換アダプタです。</p>
</li>
<li>
<p>
<strong>qxl</strong> は QXL 準仮想化グラフィックカードです。これを選択すると、VMの<a href="https://www.spice-space.org/">SPICE</a>（リモート・ビューワ・プロトコル）も有効になります。</p>
</li>
<li>
<p>
<strong>Virtio-gl</strong>（しばしばVirGLと呼ばれます）は、VM内で使用するための仮想3D GPUで、特別な（高価な）モデルやドライバを必要とせず、ホストGPUを完全にバインドすることなく、ワークロードをホストGPUにオフロードすることができます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VirGLのサポートにはいくつかの追加ライブラリが必要ですが、比較的大きいためデフォルトではインストールされず、またすべてのGPUモデル/ベンダーでオープンソースとして利用できるわけではありません。ほとんどのセットアップでは、次のようにするだけです:<span class="monospaced">apt install libgl1 libegl1</span></td>
</tr></table>
</div>
</li>
</ul></div>
<div class="paragraph">
<p><em>メモリ</em>オプションを設定することで、仮想 GPU に与えるメモリ量を編集できます。これにより、特に SPICE/QXL で、VM 内でより高い解像度を実現できます。</p></div>
<div class="paragraph">
<p>メモリは表示デバイスによって予約されるため、SPICE でマルチモニタ・モード（デュアルモニタの場合は<span class="monospaced">qxl2</span>など）を選択すると、いくつかの意味があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
Windowsはモニタごとにデバイスを必要とするため、<em>ostypeが</em>Windowsの場合、Proxmox VEはモニタごとに追加のデバイスをVMに与えます。 各デバイスは指定された量のメモリを取得します。</p>
</li>
<li>
<p>
Linux VMでは、常に多くの仮想モニタを有効にすることができますが、マルチモニタ・モードを選択すると、デバイスに与えられるメモリがモニタの数に乗算されます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>ディスプレイ<em>タイプとして</em> <span class="monospaced">serialXを</span>選択すると、VGA出力が無効になり、Webコンソールは選択したシリアルポートにリダイレクトされます。この場合、ディスプレイ<em>メモリの</em>設定は無視されます。</p></div>
<div class="paragraph">
<div class="title">VNCクリップボード</div><p><span class="monospaced">クリップボードを</span> <span class="monospaced">vncに</span>設定することで、VNCクリップボードを有効にすることができます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -vga &lt;displaytype&gt;,clipboard=vnc</pre>
</div></div>
<div class="paragraph">
<p>クリップボード機能を使用するには、まずSPICEゲストツールをインストールする必要があります。Debianベースのディストリビューションでは、<span class="monospaced">spice-vdagentを</span>インストールすることで実現できます。他のオペレーティングシステムでは、公式リポジトリで検索するか、<a href="https://www.spice-space.org/download.html">https://www.spice-space.org/download.html</a>を参照してください<a href="https://www.spice-space.org/download.html">。</a></p></div>
<div class="paragraph">
<p>spiceゲストツールをインストールすると、VNCクリップボード機能を使用することができます（noVNCコンソールパネルなど）。ただし、SPICE、virtio、virgl を使用している場合は、使用するクリップボードを選択する必要があります。 これは、<span class="monospaced">clipboard</span>が<span class="monospaced">vnc</span> に設定されている場合、デフォルトの<strong>SPICE</strong>クリップボードが<strong>VNC</strong>クリップボードに置き換わるためです。</p></div>
</div>
<div class="sect3">
<h4 id="qm_usb_passthrough">10.2.10.USB パススルー<a class="headerlink" href="#qm_usb_passthrough" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>USBパススルー・デバイスには2種類あります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ホストUSBパススルー</p>
</li>
<li>
<p>
SPICE USBパススルー</p>
</li>
</ul></div>
<div class="paragraph">
<p>ホストUSBパススルーは、VMにホストのUSBデバイスを提供することで機能します。 これは、ベンダーIDやプロダクトIDを経由するか、ホスト・バスやポートを経由することができます。</p></div>
<div class="paragraph">
<p>vendor/product-idは次のようになります：<strong>0123:abcd</strong>、ここで<strong>0123は</strong>ベンダーのID、<strong>abcdは</strong>製品のIDです。</p></div>
<div class="paragraph">
<p>バス/ポートは次のようになります：<strong>1-2.3.4で</strong>、<strong>1が</strong>バス、<strong>2.3.4が</strong>ポートパスです。これはホストの物理ポートを表します（usbコントローラの内部順序に依存します）。</p></div>
<div class="paragraph">
<p>VMの起動時にVMのコンフィグレーションにデバイスが存在していても、そのデバイスがホストに存在しない場合、VMは問題なく起動できます。 デバイス/ポートがホストで利用可能になると、すぐにそのデバイスがパススルーされます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このようなUSBパススルーを使用することは、VMを別のホストにオンラインで移動できないことを意味します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>パススルーの2つ目のタイプは、SPICE USB パススルーです。VM に 1 つ以上の SPICE USB ポートを追加すると、SPICE クライアントから VM にローカルの USB デバイスを動的に渡すことができます。これは、入力デバイスやハードウェアドングルを一時的にリダイレクトするのに便利です。</p></div>
<div class="paragraph">
<p>また、クラスタレベルでデバイスをマッピングすることも可能で、HAで適切に使用できるようにしたり、ハードウェアの変更を検出したり、非rootユーザが設定できるようにしたりできます。詳細は<a href="#resource_mapping">リソースマッピングを</a>参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_bios_and_uefi">10.2.11.BIOS と UEFI<a class="headerlink" href="#qm_bios_and_uefi" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>コンピュータを適切にエミュレートするために、QEMUはファームウェアを使用する必要があります。 一般的なPCではBIOSまたは(U)EFIとして知られているファームウェアは、VMを起動する際の最初のステップの1つとして実行されます。BIOSは、基本的なハードウェアの初期化を行い、オペレーティング・システムにファームウェアとハードウェアへのインタフェースを提供します。デフォルトでは、QEMUはオープンソースのx86 BIOS実装である<strong>SeaBIOSを</strong>使用します。SeaBIOS は、ほとんどの標準的なセットアップに適しています。</p></div>
<div class="paragraph">
<p>オペレーティングシステム (Windows 11 など) によっては UEFI 互換の実装を使う必要があるかもしれません。そのような場合、代わりにオープンソースの UEFI 実装である<strong>OVMF</strong>を使う必要があります。<span class="footnote"><br>[OVMF Project<a href="https://github.com/tianocore/tianocore.github.io/wiki/OVMF">https://github.com/tianocore/tianocore.github.io/wiki/OVMF</a> を見て下さい<a href="https://github.com/tianocore/tianocore.github.io/wiki/OVMF">]。</a><br></span></p></div>
<div class="paragraph">
<p>例えば、VGA パススルーを行いたい場合などです。<span class="footnote"><br>[アレックス・ウィリアムソンは、これに関して良いブログエントリを持っています。<a href="https://vfio.blogspot.co.at/2014/08/primary-graphics-assignment-without-vga.html">https://vfio.blogspot.co.at/2014/08/primary-graphics-assignment-without-vga.html]</a><br></span></p></div>
<div class="paragraph">
<p>OVMFを使いたい場合、考慮すべき点がいくつかあります：</p></div>
<div class="paragraph">
<p>このディスクはバックアップやスナップショットに含まれ、1つしかありません。</p></div>
<div class="paragraph">
<p>このようなディスクは以下のコマンドで作成できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -efidisk0 &lt;storage&gt;:1,format=&lt;format&gt;,efitype=4m,pre-enrolled-keys=1</pre>
</div></div>
<div class="paragraph">
<p>ここで、<strong>&lt;storage&gt;</strong>はディスクを置きたいストレージ、<strong>&lt;format&gt;</strong>はストレージがサポートするフォーマットです。あるいは、Web インターフェースから、VM のハードウェアセクションの<em>Add</em>→<em>EFI Disk</em>で、このようなディスクを作成することもできます。</p></div>
<div class="paragraph">
<p><strong>efitype</strong>オプションは、使用する OVMF ファームウェアのバージョンを指定します。新しい VM の場合、これは常に<em>4m</em> であるべきです。なぜなら、これはセキュア・ブートをサ ポートしており、将来の開発をサポートするために割り当てられる容量が多いからです（GUI ではこれがデフォルトです）。</p></div>
<div class="paragraph">
<p><strong>pre-enroll-keys</strong>は、efidisk にディストリビューション固有のセキュアブートキーと Microsoft 標準セキュアブートキーを事前にロードするかどうかを指定します。また、デフォルトでセキュアブートを有効にします (ただし、VM 内の OVMF メニューで無効にすることもできます)。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">既存の VM (<em>2m の</em>efidisk を使用している) でセキュアブートの使用を開始する場合は、efidisk を再作成する必要があります。そのためには、古い<span class="monospaced">efidisk</span> を削除し<span class="monospaced">(qm set &lt;vmid&gt; -delete efidisk0</span>)、前述の方法で新しい<span class="monospaced">efidisk</span> を追加します。これにより、OVMFメニューで行ったカスタム設定がリセットされます！</td>
</tr></table>
</div>
<div class="paragraph">
<p>仮想ディスプレイ（VGAパススルーなし）でOVMFを使用する場合、OVMFメニュー（ブート中にESCボタンを押すと表示されます）でクライアントの解像度を設定するか、ディスプレイタイプとしてSPICEを選択する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="qm_tpm">10.2.12.トラステッド・プラットフォーム・モジュール (TPM)<a class="headerlink" href="#qm_tpm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><strong>トラステッド・プラットフォーム・モジュール（Trusted Platform Module</strong>）は、暗号化キーなどの秘密データを安全に保存し、システムの起動を検証するための耐タンパー機能を提供するデバイスです。</p></div>
<div class="paragraph">
<p>特定のオペレーティングシステム（Windows 11など）では、このようなデバイスをマシン（物理または仮想）に接続する必要があります。</p></div>
<div class="paragraph">
<p>TPMは、<strong>tpmstate</strong>ボリュームを指定して追加します。これはefidiskに似た働きをしますが、一度作成すると変更できません（削除のみ）。以下のコマンドで追加できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -tpmstate0 &lt;storage&gt;:1,version=&lt;version&gt;.</pre>
</div></div>
<div class="paragraph">
<p>ここで、<strong>&lt;storage&gt;は</strong>状態を置きたいストレージ、<strong>&lt;version&gt;は</strong> <em>v1.2</em>または<em>v2.0</em>です。ウェブ・インターフェイスから、VM のハードウェア・セクションで<em>Add</em>→<em>TPM State</em>を選択して追加することもできます。</p></div>
<div class="paragraph">
<p><em>v2.0</em>TPM仕様の方が新しく、サポートが充実しているため、<em>v1.2</em>TPMを必要とする特定の実装がない限り、そちらを優先すべきです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">物理的なTPMと比較すると、エミュレートされたTPMにはセキュリティ上の利点は<strong>ありません</strong>。TPMのポイントは、TPM仕様の一部として指定されたコマンドを除いて、その上のデータを簡単に変更できないことです。エミュレートされたデバイスの場合、データの保存は通常のボリューム上で行われるため、そのボリュームにアクセスできる人なら誰でも編集できる可能性があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="qm_ivshmem">10.2.13.VM間共有メモリー<a class="headerlink" href="#qm_ivshmem" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VM 間共有メモリーデバイス<span class="monospaced">(ivshmem</span>) を追加することで、ホストとゲスト間、または複数のゲスト間でメモリーを共有することができます。</p></div>
<div class="paragraph">
<p>このようなデバイスを追加するには、<span class="monospaced">qm：</span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -ivshmem size=32,name=foo</pre>
</div></div>
<div class="paragraph">
<p>サイズの単位は MiB です。ファイルは<span class="monospaced">/dev/shm/pve-shm-$name</span>（デフォルト名は vmid）配下に配置されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">現在、デバイスは、それを使用しているVMがシャットダウンまたは停止されるとすぐに削除されます。オープンな接続は維持されますが、まったく同じデバイスへの新しい接続はできなくなります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このようなデバイスのユースケースとしては、Looking Glass<span class="footnote"><br>[Looking Glass:<a href="https://looking-glass.io/">https://looking-glass.io/]</a><br></span>プロジェクトがあり、ホストとゲスト間で高性能、低遅延のディスプレイミラーリングが可能です。</p></div>
</div>
<div class="sect3">
<h4 id="qm_audio_device">10.2.14.オーディオデバイス<a class="headerlink" href="#qm_audio_device" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>オーディオデバイスを追加するには、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &lt;vmid&gt; -audio0 device=&lt;デバイス&gt;.</pre>
</div></div>
<div class="paragraph">
<p>対応オーディオデバイスは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ich9-intel-hda</span>：Intel HD オーディオコントローラ、ICH9 をエミュレート</p>
</li>
<li>
<p>
<span class="monospaced">intel-hda</span>：Intel HD オーディオコントローラ、ICH6 をエミュレート</p>
</li>
<li>
<p>
<span class="monospaced">AC97</span>：Audio Codec '97、Windows XPのような古いオペレーティングシステムに便利です。</p>
</li>
</ul></div>
<div class="paragraph">
<p>バックエンドは2種類あります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>スパイス</em></p>
</li>
<li>
<p>
<em>皆無</em></p>
</li>
</ul></div>
<div class="paragraph">
<p><em>spice</em>バックエンドは<a href="#qm_display">SPICEと組み合わせて</a>使用することができ、<em>none</em>バックエンドはVM内のオーディオデバイスがソフトウェアの動作に必要な場合に便利です。ホストの物理オーディオ・デバイスを使用するには、デバイス・パススルーを使用します（<a href="#qm_pci_passthrough">PCI パススルーと</a><a href="#qm_usb_passthrough">USB パススルーを</a>参照）。MicrosoftのRDPのようなリモートプロトコルには、サウンドを再生するオプションがあります。</p></div>
</div>
<div class="sect3">
<h4 id="qm_virtio_rng">10.2.15.VirtIO RNG<a class="headerlink" href="#qm_virtio_rng" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>RNG (Random Number Generator) は、システムにエントロピー<em>(ランダム性</em>) を提供するデバイスです。仮想ハードウェア RNG を使用して、ホストシステムからゲスト VM にエントロピーを提供することができます。これは、特にゲストのブートプロセス中に、ゲスト内のエントロピー飢餓問題 (十分なエントロピーが利用できず、システムが遅くなったり問題が発生したりする状況) を回避するのに役立ちます。</p></div>
<div class="paragraph">
<p>VirtIOベースのエミュレートされたRNGを追加するには、次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &lt;vmid&gt; -rng0 source=&lt;ソース&gt;[,max_bytes=X,period=Y]。</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">source</span>はエントロピーがホスト上のどこから読み込まれるかを指定します：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/dev/urandom</span>：ノンブロッキングカーネルエントロピープール (推奨)</p>
</li>
<li>
<p>
<span class="monospaced">/dev/random</span>：カーネルプールをブロック (推奨されません。ホストシステムでエントロピーが枯渇する可能性があります)</p>
</li>
<li>
<p>
<span class="monospaced">/dev/hwrng</span>：ホストに接続されたハードウェア RNG を通過させます (複数の RNG が利用可能な場合、<span class="monospaced">/sys/devices/virtual/misc/hw_random/rng_current</span>で選択されたものが使用されます)。</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">max_bytesと</span> <span class="monospaced">period</span>パラメータで制限を指定することができ、これらはミリ秒単位で1<span class="monospaced">周期</span>あたりの<span class="monospaced">max_bytesとして</span>読み込まれます。しかし、これは線形関係を表すものではありません：1024B/1000ms は、1 秒のタイマーで最大 1 KiB のデータが利用可能になることを意味し、1 秒の間に 1 KiB がゲストにストリーミングされることを意味しません。そのため、<span class="monospaced">周期を</span>短くすることで、より速い速度でゲストにエントロピーを注入することができます。</p></div>
<div class="paragraph">
<p>デフォルトでは、リミットは1000msあたり1024バイト（1KiB/s）に設定されています。ゲストがホストのリソースを使いすぎないように、常にリミッターを使用することをお勧めします。必要であれば、<span class="monospaced">max_bytes</span>に<em>0</em>を指定することで、すべての制限を無効にすることができます。</p></div>
</div>
<div class="sect3">
<h4 id="qm_bootorder">10.2.16.デバイスのブート順序<a class="headerlink" href="#qm_bootorder" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QEMU は、どのデバイスから、どの順番でブートすべきかをゲストに指示できます。 これは、例えば、<span class="monospaced">boot</span>プロパティ経由で config で指定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>boot: order=scsi0;net0;hostpci0</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-edit-bootorder.png">
<img src="images/screenshot/gui-qemu-edit-bootorder.png" alt="screenshot/gui-qemu-edit-bootorder.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>この方法では、ゲストはまずディスク<span class="monospaced">scsi0</span> からのブートを試み、失敗した場合は<span class="monospaced">net0</span> からのネットワークブートを試み、それも失敗した場合は、最後に通過した PCIe デバイス (NVMe の場合はディスクとみなされ、そうでない場合はオプション ROM に起動しようとします) からのブートを試みます。</p></div>
<div class="paragraph">
<p>GUI 上では、ドラッグアンドドロップエディタを使ってブート順序を指定したり、チェックボックス を使って特定のデバイスのブートを有効または無効にすることができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ゲストが OS を起動したりブートローダをロードするために複数のディスクを使用する場合、ゲストが起動できるようにするためには、それらの全てが<em>ブータブルとして</em>マークされている必要があります (つまり、チェックボックスが有効になっているか、設定内のリストに表示されている必要があります)。 これは、最近の SeaBIOS と OVMF のバージョンでは、<em>ブータブルとして</em>マークされている場合にのみディスクを初期化するためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>いずれにせよ、リストに表示されないデバイスやチェックマークが無効になっているデバイスでも、ゲストのオペレーティングシステムが起動して初期化されれば、ゲストはまだ利用可能です。<em>ブータブルフラグは</em>ゲスト BIOS とブートローダーにのみ影響します。</p></div>
</div>
<div class="sect3">
<h4 id="qm_startup_and_shutdown">10.2.17.仮想マシンの自動起動とシャットダウン<a class="headerlink" href="#qm_startup_and_shutdown" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMを作成した後、ホスト・システムのブート時にVMを自動的に起動させたいと思うでしょう。そのためには、ウェブ・インターフェイスのVMの<em>オプション・</em>タブから<em>Start at boot</em>オプションを選択するか、以下のコマンドで設定する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -onboot 1</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-edit-start-order.png">
<img src="images/screenshot/gui-qemu-edit-start-order.png" alt="screenshot/gui-qemu-edit-start-order.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">スタートとシャットダウンの順序</div><p>例えば、あるVMが他のゲストシステムにファイアウォールやDHCPを提供している場合など、VMの起動順序を微調整したい場合があります。  この場合、以下のパラメータを使用できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>スタート/シャットダウン順</strong>：開始順序の優先順位を定義します。例えば、VMを最初に起動させたい場合は1に設定します。(シャットダウンには逆の起動順序を使用するため、起動順序が1のマシンは最後にシャットダウンされます）。ホスト上で複数のVMが同じ順序で定義されている場合、それらはさらに<em>VMIDの</em>昇順で並べられます。</p>
</li>
<li>
<p>
<strong>起動遅延</strong>：このVMが起動してから後続のVMが起動するまでの間隔を定義します。例えば、240秒待ってから他のVMを起動する場合は240に設定します。</p>
</li>
<li>
<p>
<strong>シャットダウンタイムアウト</strong>：Proxmox VEがシャットダウンコマンドを発行した後、VMがオフラインになるまで待機する時間を秒単位で定義します。デフォルトでは、この値は180に設定されています。これは、Proxmox VEがシャットダウン要求を発行し、マシンがオフラインになるまで180秒待つことを意味します。タイムアウト後もマシンがオンラインの場合、強制的に停止されます。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">HAスタックによって管理されるVMは、現在のところ<em>起動時開始と</em><em>起動順序</em>オプションに従いません。これらのVMは、HAマネージャ自身がVMの起動と停止を確実に行うため、起動とシャットダウンのアルゴリズムによってスキップされます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>開始/シャットダウン順序パラメータが設定されていないマシンは、常にパラメータが設定されているマシンの後に開始することに注意してください。さらに、このパラメータは同じホスト上で実行されている仮想マシン間でのみ適用され、クラスタ全体では適用されません。</p></div>
<div class="paragraph">
<p>ホストのブートと最初のVMのブートの間に遅延が必要な場合は、<a href="#first_guest_boot_delay">Proxmox VEノード</a>管理のセクションを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_qemu_agent">10.2.18.QEMU ゲストエージェント<a class="headerlink" href="#qm_qemu_agent" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QEMU ゲストエージェントは VM 内で実行されるサービスで、ホストとゲスト間の通信チャネルを提供します。情報を交換するために使用され、ホストがゲストにコマンドを発行できるようにします。</p></div>
<div class="paragraph">
<p>例えば、VM サマリーパネルの IP アドレスはゲストエージェント経由で取得されます。</p></div>
<div class="paragraph">
<p>または、バックアップを開始する際に、ゲストエージェントを介して、<em>fs-freeze</em>と<em>fs-thaw</em>コマンドで未処理の書き込みを同期するようにゲストに指示します。</p></div>
<div class="paragraph">
<p>ゲストエージェントが正しく動作するためには、以下の手順を実行する必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ゲストにエージェントをインストールし、実行されていることを確認します。</p>
</li>
<li>
<p>
Proxmox VEでエージェント経由の通信を有効にします。</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_install_guest_agent">ゲストエージェントのインストール<a class="headerlink" href="#_install_guest_agent" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ほとんどの Linux ディストリビューションでは、ゲストエージェントが利用可能です。パッケージの名前は通常<span class="monospaced">qemu-guest-agent</span> です。</p></div>
<div class="paragraph">
<p>Windows では、<a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso">Fedora VirtIO ドライバー ISO</a> からインストールできます。</p></div>
</div>
<div class="sect4">
<h5 id="qm_qga_enable">ゲストエージェント通信の有効化<a class="headerlink" href="#qm_qga_enable" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEからゲストエージェントへの通信は、VMの<strong>オプション</strong>パネルで有効にできます。変更を有効にするには、VMの再スタートが必要です。</p></div>
</div>
<div class="sect4">
<h5 id="qm_qga_auto_trim">QGA を使用した自動 TRIM<a class="headerlink" href="#qm_qga_auto_trim" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><em>Run guest-trim</em>オプションを有効にすることができます。これを有効にすると、Proxmox VE は、ストレージにゼロを書き出す可能性のある以下の操作の後に、ゲストにトリムコマンドを発行します：</p></div>
<div class="ulist"><ul>
<li>
<p>
ディスクを別のストレージに移動</p>
</li>
<li>
<p>
ローカルストレージを持つ別のノードへのVMのライブマイグレーション</p>
</li>
</ul></div>
<div class="paragraph">
<p>シンプロビジョニングされたストレージでは、未使用領域を解放するのに役立ちます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Linux の ext4 では、重複した TRIM リクエストの発行を避けるためにメモリ内の最適化を使用するため、注意点があります。ゲストは基礎となるストレージの変更について知らないので、最初のゲストトリムだけが期待通りに実行されます。それ以降の TRIM は、次のリブートまで、それ以降に変更されたファイルシステムの一部のみを考慮します。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="qm_qga_fsfreeze">バックアップ時のファイルシステムのフリーズと解凍<a class="headerlink" href="#qm_qga_fsfreeze" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デフォルトでは、バックアップが実行されると、<em>fs-freeze</em>QEMU ゲストエージェントコマンドを介してゲストファイルシステムが同期され、一貫性が提供されます。</p></div>
<div class="paragraph">
<p>Windowsゲストでは、Windows VSS（Volume Shadow Copy Service）レイヤーをフックすることで一貫性のあるバックアップを処理するアプリケーションもあるため、<em>fs-freezeが</em>それを妨害する可能性があります。たとえば、一部の SQL Server で<em>fs-freeze を</em>呼び出すと、VSS が SQL Writer VSS モジュールを呼び出す引き金となり、差分バックアップの SQL Server バックアップチェーンが切断されることが確認されています。</p></div>
<div class="paragraph">
<p>このようなセットアップの場合、QGAオプションの<span class="monospaced">freeze-fs-on-backupを</span> <span class="monospaced">0に</span>設定することで、バックアップ時にフリーズと解凍のサイクルを発行しないようにProxmox VEを設定できます。これは、GUIで<em>Freeze/thaw guest filesystems on backup for consistency</em>オプションを使用して実行することもできます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションを無効にすると、一貫性のないファイルシステムでバックアップが作成される可能性があるため、自分が何をしているのかわかっている場合にのみ無効にしてください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_troubleshooting_2">トラブルシューティング<a class="headerlink" href="#_troubleshooting_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<div class="title">VMがシャットダウンしない</div><p>ゲストエージェントがインストールされ、実行されていることを確認します。</p></div>
<div class="paragraph">
<p>ゲストエージェントが有効になると、Proxmox VE はゲストエージェント経由で<em>シャットダウンなどの</em>電源コマンドを送信します。ゲストエージェントが実行されていない場合、コマンドは正しく実行できず、シャットダウンコマンドはタイムアウトになります。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_spice_enhancements">10.2.19.SPICE の機能強化<a class="headerlink" href="#qm_spice_enhancements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>SPICE Enhancements は、リモート・ビューワの操作性を向上させるオプション機能です。</p></div>
<div class="paragraph">
<p>GUIで有効にするには、仮想マシンの<strong>［オプション］</strong>パネルを開きます。CLIで有効にするには、次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &lt;vmid&gt; -spice_enhancements foldersharing=1,videostreaming=すべて</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これらの機能を使用するには、仮想マシンの<a href="#qm_display"><strong>Displayを</strong></a>SPICE（qxl）に設定する必要があります。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="_folder_sharing">フォルダ共有<a class="headerlink" href="#_folder_sharing" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ローカルフォルダをゲストと共有します。<span class="monospaced">spice-webdavd</span>デーモンをゲストにインストールする必要があります。これは、<a href="http://localhost:9843">http://localhost:9843</a> にあるローカル WebDAV サーバーを通じて共有フォルダーを利用可能にします<a href="http://localhost:9843">。</a></p></div>
<div class="paragraph">
<p>Windowsゲストの場合、<em>Spice WebDAVデーモンの</em>インストーラは<a href="https://www.spice-space.org/download.html#windows-binaries">SPICE公式ウェブサイトから</a>ダウンロードできます。</p></div>
<div class="paragraph">
<p>ほとんどのLinuxディストリビューションには、<span class="monospaced">spice-webdavdという</span>パッケージがインストールされています。</p></div>
<div class="paragraph">
<p>Virt-Viewer（リモートビューワー）でフォルダを共有するには、[<em>ファイル]→[環境設定]</em>に進みます。 共有するフォルダを選択し、チェックボックスを有効にします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">フォルダ共有は現在、Linux 版 Virt-Viewer でのみ機能します。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">実験的です！現在、この機能は安定して動作していません。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_video_streaming">ビデオストリーミング<a class="headerlink" href="#_video_streaming" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>高速リフレッシュエリアはビデオストリームにエンコードされます。2つのオプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>すべて</strong>：高速リフレッシュ領域はすべてビデオストリームにエンコードされます。</p>
</li>
<li>
<p>
<strong>フィルタを</strong>使用します：ビデオストリーミングを使用するかどうかを決定するために、追加のフィルタが使用されます（現在、小さなウィンドウ面のみがスキップされます）。</p>
</li>
</ul></div>
<div class="paragraph">
<p>ビデオストリーミングを有効にすべきかどうか、また、どのオプションを選択すべきかについては、一般的な推奨はできません。特定の状況によって異なります。</p></div>
</div>
<div class="sect4">
<h5 id="_troubleshooting_3">トラブルシューティング<a class="headerlink" href="#_troubleshooting_3" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<div class="title">共有フォルダが表示されない</div><p>ゲストで WebDAV サービスが有効で実行されていることを確認します。Windows では<em>Spice webdav proxy</em> と呼ばれます。Linux では<em>spice-webdavd</em>という名前ですが、ディストリビューションによって異なります。</p></div>
<div class="paragraph">
<p>サービスが実行されている場合は、ゲスト内のブラウザで<a href="http://localhost:9843">http://localhost:9843 を開いて</a>WebDAV サーバーを確認します。</p></div>
<div class="paragraph">
<p>SPICE セッションを再開するのに役立ちます。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qm_migration">
<span>10.3.マイグレーション</span> <a class="headerlink" href="#qm_migration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-migrate.png">
<img src="images/screenshot/gui-qemu-migrate.png" alt="screenshot/gui-qemu-migrate.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>クラスタがある場合、VMを別のホストに移行するには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm migrate &lt;vmid&gt; &lt;target&gt;</pre>
</div></div>
<div class="paragraph">
<p>これには一般的に2つのメカニズムがあります。</p></div>
<div class="ulist"><ul>
<li>
<p>
オンラインマイグレーション（別名ライブマイグレーション）</p>
</li>
<li>
<p>
オフライン移行</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_online_migration">10.3.1.オンライン移行<a class="headerlink" href="#_online_migration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMが実行中で、ローカルにバインドされたリソースが設定されていない場合(パススルーされるデバイスなど)、<span class="monospaced">qm migration</span>コマンド呼び出しの<span class="monospaced">--online</span>フラグを使用してライブ・マイグレーションを開始できます。VMが実行されている場合、Webインタフェースはデフォルトでライブ・マイグレーションを行います。</p></div>
<div class="sect4">
<h5 id="_how_it_works">仕組み<a class="headerlink" href="#_how_it_works" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>オンラインマイグレーションはまず、ターゲットホスト上で<em>着信</em>フラグを持つ新しい QEMU プロセスを起動し、ゲスト vCPU を一時停止したまま基本的な初期化のみを実行し、ソース仮想マシンのゲストメモリとデバイス状態のデータストリームを待ちます。 ディスクなどの他のリソースはすべて、VM の実行時状態移行が始まる前に共有されるか、すでに送信されているため、転送が必要なのはメモリコンテンツとデバイス状態のみです。</p></div>
<div class="paragraph">
<p>この接続が確立されると、ソースは非同期でメモリコンテンツをターゲットに送信し始めます。このループは、実行中のソースVMと受信中のターゲットVMのデータ差が数ミリ秒で送信できるほど小さくなるまで繰り返されます。 その後、ソースVMはユーザーやプログラムに気づかれることなく完全に一時停止し、残りのデータをターゲットに送信することができます。</p></div>
</div>
<div class="sect4">
<h5 id="_requirements_2">要件<a class="headerlink" href="#_requirements_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ライブマイグレーションが機能するためには、いくつかのことが必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
VM には移行できないローカルリソースはありません。例えば、PCI や USB デバイスは、現在ライブマイグレーションをブロックしています。 一方、ローカルディスクは、ターゲットに送信することで問題なくマイグレーションできます。</p>
</li>
<li>
<p>
ホストは同じProxmox VEクラスタに配置されています。</p>
</li>
<li>
<p>
ホスト同士は正常に（信頼できる）ネットワーク接続されています。</p>
</li>
<li>
<p>
ターゲットホストには、Proxmox VEパッケージと同じかそれ以上のバージョンが必要です。逆に動作する場合もありますが、保証できません。</p>
</li>
<li>
<p>
ホストは同じベンダーの同じようなCPUを使用しています。実際のモデルやVMのCPUタイプによっては異なるベンダーでも動作<strong>するかも</strong>しれませんが、保証はできません。</p>
</li>
</ul></div>
</div>
</div>
<div class="sect3">
<h4 id="_offline_migration">10.3.2.オフライン移行<a class="headerlink" href="#_offline_migration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ローカルリソースがある場合、すべてのディスクが両方のホストで定義されたストレージ上にある限り、VMをオフラインでマイグレーションすることができます。 マイグレーションは、オンラインマイグレーションと同様に、ネットワーク経由でターゲットホストにディスクをコピーします。ハードウェアパススルーの設定は、ターゲットホスト上のデバイスの場所に合わせる必要があるかもしれないことに注意してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="qm_copy_and_clone">
<span>10.4.コピーとクローン</span> <a class="headerlink" href="#qm_copy_and_clone" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-full-clone.png">
<img src="images/screenshot/gui-qemu-full-clone.png" alt="screenshot/gui-qemu-full-clone.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>VMのインストールは通常、OSベンダーのインストール・メディア（CD-ROM）を使って行われます。OSによっては、これは避けたい時間のかかる作業です。</p></div>
<div class="paragraph">
<p>同じタイプのVMを多数デプロイする簡単な方法は、既存のVMをコピーすることです。このようなコピーには<em>クローンという</em>用語を使用し、<em>リンククローンと</em> <em>フルクローンを</em>区別します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
フルクローン</dt>
<dd>
<p>
このようなコピーの結果は独立したVMです。新しいVMは元のVMとストレージ・リソースを共有しません。</p>
<div class="paragraph">
<p><strong>ターゲット・ストレージを</strong>選択することができるので、VMを全く別のストレージに移行することができます。ストレージドライバが複数のフォーマットをサポートしている場合は、ディスクイメージの<strong>フォーマットを</strong>変更することもできます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">完全クローンは、すべてのVMイメージ・データを読み込んでコピーする必要があります。これは通常、リンクされたクローンを作成するよりもはるかに遅いです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ストレージの種類によっては、特定の<strong>スナップショットを</strong>コピーすることができます。これはまた、最終的なコピーに元のVMからの追加スナップショットが含まれないことを意味します。</p></div>
</dd>
<dt class="hdlist1">
リンクド・クローン</dt>
<dd>
<p>
最近のストレージ・ドライバは、リンクされたクローンを高速に生成する方法をサポートしています。このようなクローンは書き込み可能なコピーで、初期内容は元のデータと同じです。リンクされたクローンの作成はほぼ瞬時に行われ、初期状態では追加の領域を消費しません。</p>
<div class="paragraph">
<p>新しい画像はまだ元の画像を参照しているため、<em>リンクされて</em>いると呼ばれます。変更されていないデータブロックは元の画像から読み込まれますが、変更は新しい場所から書き込まれます（その後、読み込まれます）。この手法は<em>コピー・オン・ライトと</em>呼ばれます。</p></div>
<div class="paragraph">
<p>これには、元のボリュームが読み取り専用であることが必要です。Proxmox VEを使用すると、任意のVMを読み取り専用の<a href="#qm_templates">テンプレートに</a>変換できます。このようなテンプレートは、後でリンクされたクローンを効率的に作成するために使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">リンクされたクローンが存在する間は、元のテンプレートを削除することはできません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>これはストレージの内部機能であるため、リンクされたクローンの<strong>ターゲットストレージを</strong>変更することはできません。</p></div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ターゲット・ノード・</strong>オプションを使用すると、新しいVMを別のノードに作成できます。唯一の制限は、VMが共有ストレージ上にあり、そのストレージがターゲット・ノードでも利用可能であることです。</p></div>
<div class="paragraph">
<p>リソースの競合を避けるため、ネットワーク・インターフェイスのMACアドレスはすべてランダム化され、VMのBIOS（smbios1）設定用に新しい<em>UUIDが</em>生成されます。</p></div>
</div>
<div class="sect2">
<h3 id="qm_templates">
<span>10.5.仮想マシンテンプレート</span> <a class="headerlink" href="#qm_templates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>VMをテンプレートに変換することができます。このようなテンプレートは読み取り専用で、リンクされたクローンを作成するために使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ディスクイメージを変更することになるため、テンプレートを起動することはできません。テンプレートを変更したい場合は、リンクされたクローンを作成し、それを変更してください。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_vm_generation_id">
<span>10.6.VM 世代 ID</span> <a class="headerlink" href="#_vm_generation_id" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは、仮想マシンのVirtual Machine Generation ID<em>(vmgenid</em>)<span class="footnote"><br>[Official<em>vmgenid</em>Specification<a href="https://docs.microsoft.com/en-us/windows/desktop/hyperv_v2/virtual-machine-generation-identifier">https://docs.microsoft.com/en-us/windows/desktop/hyperv_v2/virtual-machine-generation-identifier]</a><br></span>をサポートしています。これは、ゲストオペレーティングシステムが、バックアップの復元やスナップショットのロールバックなどのタイムシフトイベントを検出するために使用できます。</p></div>
<div class="paragraph">
<p>新しいVMを作成すると、<em>vmgenidが</em>自動的に生成され、設定ファイルに保存されます。</p></div>
<div class="paragraph">
<p>既に存在するVMに<em>vmgenidを</em>作成して追加するには、特別な値'1'を渡してProxmox VEに自動生成させるか、手動で<em>UUID</em><span class="footnote"><br>[Online GUID generator<a href="http://guid.one/">http://guid.one/]</a><br></span>を値として使用するなどして設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -vmgenid 1 # qm set VMID -vmgenid 00000000-0000-0000-000000000000</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">既存のVMに<em>vmgenid</em>デバイスを最初に追加すると、スナップショットのロールバックやバックアップのリストアなどで、VMがこれを世代の変更と解釈するため、変更と同じ効果が生じる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p><em>vmgenid</em>メカニズムが不要な場合は、VM作成時にその値に'0'を渡すか、またはコンフィギュレーションでそのプロパティを遡及的に削除することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -delete vmgenid</pre>
</div></div>
<div class="paragraph">
<p><em>vmgenidの</em>最も顕著なユースケースは、新しいMicrosoft Windowsオペレーティングシステムで、スナップショットのロールバック、バックアップのリストア、またはVM全体のクローン操作において、時間の影響を受けやすい、またはレプリケートサービス（データベースやドメインコントローラ<span class="footnote"><br>[https://docs.microsoft.com/en-us/windows-server/identity<a href="https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/get-started/virtual-dc/virtualized-domain-controller-architecture">/ad-ds/get-started/virtual-dc/virtualized-domain-controller-architecture]</a><br></span> など）の問題を回避するために使用されます。</p></div>
</div>
<div class="sect2">
<h3 id="qm_import_virtual_machines">
<span>10.7.仮想マシンのインポート</span> <a class="headerlink" href="#qm_import_virtual_machines" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>海外のハイパーバイザーや他のProxmox VEクラスタから既存の仮想マシンをインポートするには、さまざまな方法があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ESXiの特殊ストレージが提供するような<em>インポートコンテンツタイプを</em>利用するネイティブインポートウィザードを使用します。</p>
</li>
<li>
<p>
ソースでバックアップを実行し、ターゲットでリストアします。この方法は、別のProxmox VEインスタンスから移行する場合に最適です。</p>
</li>
<li>
<p>
<span class="monospaced">qm</span>コマンドラインツールの OVF 専用インポートコマンドを使用します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>他のハイパーバイザーからProxmox VEにVMをインポートする場合は、<a href="https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE#Concepts">Proxmox VEの概念に</a>慣れることをお勧めします。</p></div>
<div class="sect3">
<h4 id="_import_wizard">10.7.1.インポートウィザード<a class="headerlink" href="#_import_wizard" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-import-wizard-general.png">
<img src="images/screenshot/gui-import-wizard-general.png" alt="screenshot/gui-import-wizard-general.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEは、APIとWebベースのユーザインタフェースにネイティブに統合するために、ストレージプラグインシステムを使用した統合VMインポーターを提供します。これを使用してVMを全体としてインポートし、そのコンフィグのほとんどをProxmox VEのコンフィグモデルにマッピングし、ダウンタイムを削減することができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">インポートウィザードはProxmox VE 8.2の開発サイクルで追加され、技術プレビューの状態です。すでに有望で安定して動作していますが、まだアクティブな開発中です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>インポートウィザードを使用するには、まずインポートソース用に新しいストレージをセットアップする必要があります。</p></div>
<div class="paragraph">
<p>次に、リソースツリーで新しいストレージを選択し、<em>Virtual Guests</em>コンテンツタブを使用して、インポート可能なすべてのゲストを確認できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-import-wizard-advanced.png">
<img src="images/screenshot/gui-import-wizard-advanced.png" alt="screenshot/gui-import-wizard-advanced.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>1つを選択し、<em>インポートボタン</em>（またはダブルクリック） を使ってインポートウィザードを開きます。ここで利用可能なオプションのサブセットを変更し、インポートを開始することができます。インポートが完了した後に、さらに詳細な修正を行うことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ESXi インポートウィザードは、ESXi バージョン 6.5 から 8.0 でテストされています。vSAN ストレージを使用しているゲストは、直接インポートできないことに注意してください。インポート元として vCenter を使用することは可能ですが、パフォーマンスが大幅に低下します（5 ～ 10 倍遅くなります）。</td>
</tr></table>
</div>
<div class="paragraph">
<p>仮想ゲストを新しいハイパーバイザーに適応させる方法のステップバイステップのガイドとヒントについては、<a href="https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE#Migration">Proxmox VE へのマイグレーションの wiki 記事を</a>参照してください。</p></div>
<div class="sect4">
<h5 id="_ova_ovf_import">OVA/OVF インポート<a class="headerlink" href="#_ova_ovf_import" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>OVA/OVFファイルをインポートするには、まず、<em>インポートコンテンツタイプの</em>ファイルベースのストレージが必要です。このストレージには<em>インポートフォルダが</em>あり、OVAファイルまたはOVFファイルと対応する画像をフラットな構造で置くことができます。 または、Web UIを使用してOVAファイルを直接アップロードまたはダウンロードすることもできます。 その後、Web UIを使用してそれらを選択し、インポートウィザードを使用してゲストをインポートすることができます。</p></div>
<div class="paragraph">
<p>OVAファイルの場合、一時的にイメージを展開するために必要な領域が追加されます。これには、<em>イメージの</em>コンテンツタイプが設定されたファイルベースのストレージが必要です。デフォルトでは、このためにソースストレージが選択されますが、実際のターゲットストレージにインポートする前にイメージを抽出する<em>インポート作業用ストレージを</em>指定することができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">OVA/OVF ファイルの構造やコンテンツは常によく維持・定義されているわけではないので、いくつかのゲスト設定を手動で適応させる必要があるかもしれません。例えば、SCSI コントローラのタイプは OVA/OVF ファイルではほとんど定義されていませんが、デフォルトでは OVMF (UEFI) で起動できません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_import_ovf_ova_through_cli">10.7.2.CLIによるOVF/OVAのインポート<a class="headerlink" href="#_import_ovf_ova_through_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>海外のハイパーバイザーからのVMエクスポートは通常、1つ以上のディスクイメージと、VMの設定（RAM、コア数）を記述した設定ファイルから構成されます。<br>
ディスク・イメージは、ディスクがVMwareまたはVirtualBoxから提供される場合はvmdk形式、ディスクがKVMハイパーバイザーから提供される場合はqcow2形式になります。 VMエクスポート用の最も一般的な設定フォーマットはOVF標準ですが、多くの設定が標準自体で実装されておらず、ハイパーバイザーが非標準の拡張子で補足情報をエクスポートするため、実際には相互運用が制限されます。</p></div>
<div class="paragraph">
<p>フォーマットの問題だけでなく、エミュレートされるハードウェアがハイパーバイザーごとに大きく変わると、他のハイパーバイザーからのディスクイメージのインポートに失敗することがあります。OS はハードウェアの変更に非常にうるさいため、Windows VM は特にこの問題を気にします。この問題は、エクスポートする前にインターネットから入手可能な MergeIDE.zip ユーティリティをインストールし、インポートした Windows VM を起動する前にハードディスクのタイプを<strong>IDE</strong>に選択することで解決できます。</p></div>
<div class="paragraph">
<p>GNU/Linuxやその他のフリーのUnix OSには必要なドライバがすべてデフォルトでインストールされており、VMをインポートした直後に準仮想化ドライバに切り替えることができます。Windows VMの場合は、Windows準仮想化ドライバを自分でインストールする必要があります。</p></div>
<div class="paragraph">
<p>GNU/Linuxやその他のフリーUnixは通常、問題なくインポートできます。上記の問題のため、Windows VMのインポート/エクスポートがすべてのケースで成功することは保証できません。</p></div>
<div class="sect4">
<h5 id="_step_by_step_example_of_a_windows_ovf_import">Windows OVFインポートのステップバイステップ例<a class="headerlink" href="#_step_by_step_example_of_a_windows_ovf_import" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>マイクロソフトは、Windows開発を始めるための<a href="https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/">仮想マシンのダウンロードを</a>提供しています。私たちは、OVFインポート機能のデモを行うために、これらのうちの1つを使用するつもりです。</p></div>
<div class="sect5">
<h6 id="_download_the_virtual_machine_zip">仮想マシンzipのダウンロード<a class="headerlink" href="#_download_the_virtual_machine_zip" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>ユーザー同意書について説明を受けた後、VMwareプラットフォーム用の<em>Windows 10 Enterprise (Evaluation - Build)</em>を選択し、zipをダウンロードします。</p></div>
</div>
<div class="sect5">
<h6 id="_extract_the_disk_image_from_the_zip">ZIPからディスクイメージを展開<a class="headerlink" href="#_extract_the_disk_image_from_the_zip" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p><span class="monospaced">unzip</span>ユーティリティまたは任意のアーカイバを使用してzipを解凍し、ssh/scp経由でovfファイルとvmdkファイルをProxmox VEホストにコピーします。</p></div>
</div>
<div class="sect5">
<h6 id="_import_the_virtual_machine">仮想マシンのインポート<a class="headerlink" href="#_import_the_virtual_machine" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>これにより、OVFマニフェストから読み取ったコア、メモリ、VM名を使用して新しい仮想マシンが作成され、ディスクが<span class="monospaced">local-lvm</span>ストレージにインポートされます。ネットワークは手動で設定する必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm importovf 999 WinDev1709Eval.ovf local-lvm</pre>
</div></div>
<div class="paragraph">
<p>VMを起動する準備ができました。</p></div>
</div>
<div class="sect5">
<h6 id="_adding_an_external_disk_image_to_a_virtual_machine">仮想マシンへの外部ディスクイメージの追加<a class="headerlink" href="#_adding_an_external_disk_image_to_a_virtual_machine" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>既存のディスク・イメージをVMに追加することもできます。</p></div>
<div class="paragraph">
<p><em>vmdebootstrap</em>ツールでDebian/Ubuntuディスクイメージを作成したとします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vmdebootstrap --verbose ˶ --size 10GiB --serial-console ˶ --grub --no-extlinux ˶ --package openssh-server ˶ --package avahi-daemon ˶ --package qemu-guest-agent ˶ --hostname vm600 --enable-dhcp ˶ --customize=./copy_pub_ssh.sh ˶ --sparse --image vm600.raw</pre>
</div></div>
<div class="paragraph">
<p>これで新しいターゲットVMを作成し、イメージをストレージ<span class="monospaced">pvedirに</span>インポートしてVMのSCSIコントローラにアタッチすることができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm create 600 --net0 virtio,bridge=vmbr0 --name vm600 --serial0 socket ˶ --boot order=scsi0 --scsihw virtio-scsi-pci --ostype l26 ˶ --scsi0 pvedir:0,import-from=/path/to/dir/vm600.raw</pre>
</div></div>
<div class="paragraph">
<p>VMを起動する準備ができました。</p></div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qm_cloud_init">
<span>10.8.クラウドイニットサポート</span> <a class="headerlink" href="#qm_cloud_init" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://cloudinit.readthedocs.io">Cloud-Init</a>は、仮想マシンインスタンスの初期化を処理する、事実上の複数配布パッケージです。Cloud-Initを使用すると、ハイパーバイザー側でネットワークデバイスとsshキーの設定が可能になります。VM が初めて起動すると、VM 内部の Cloud-Init ソフトウェアがこれらの設定を適用します。</p></div>
<div class="paragraph">
<p>多くのLinuxディストリビューションは、すぐに使えるCloud-Initイメージを提供しています。これらのイメージは Proxmox VE でも動作します。このようなすぐに使えるイメージを入手するのは便利かもしれませんが、通常は自分でイメージを準備することをお勧めします。その利点は、何をインストールしたかを正確に知ることができ、後で自分のニーズに合わせてイメージを簡単にカスタマイズできることです。</p></div>
<div class="paragraph">
<p>このようなCloud-Initイメージを作成したら、それをVMテンプレートに変換することをお勧めします。VMテンプレートからリンクされたクローンを素早く作成できるので、これは新しいVMインスタンスをロールアウトする迅速な方法です。新しいVMを起動する前にネットワーク（と多分sshキー）を設定するだけです。</p></div>
<div class="paragraph">
<p>Cloud-InitでプロビジョニングされたVMにログインするには、SSHキーベースの認証を使用することをお勧めします。パスワードを設定することも可能ですが、Proxmox VEはCloud-Initのデータ内に暗号化されたパスワードを保存する必要があるため、SSHキーベースの認証ほど安全ではありません。</p></div>
<div class="paragraph">
<p>Proxmox VEはCloud-InitデータをVMに渡すためにISOイメージを生成します。通常、シリアルコンソールを追加してディスプレイとして使用します。多くのCloud-Initイメージはこれに依存しており、これはOpenStackの要件です。しかし、他のイメージではこの設定に問題があるかもしれません。シリアルコンソールを使ってもうまくいかない場合は、デフォルトのディスプレイ構成に戻してください。</p></div>
<div class="sect3">
<h4 id="_preparing_cloud_init_templates">10.8.1.Cloud-Initテンプレートの準備<a class="headerlink" href="#_preparing_cloud_init_templates" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最初のステップはVMの準備です。Cloud-Initパッケージを準備したい<strong>VMに</strong>インストールするだけです。Debian/Ubuntuベースのシステムでは、これは以下のように簡単です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt-get install cloud-init</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このコマンドはProxmox VEホスト上では実行さ<strong>れず</strong>、VM内部でのみ実行されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>すでに多くのディストリビューションがすぐに使えるCloud-Initイメージ（<span class="monospaced">.qcow2</span>ファイルとして提供）を提供しているので、そのようなイメージをダウンロードしてインポートすることもできます。以下の例では、Ubuntuが提供するクラウドイメージ<a href="https://cloud-images.ubuntu.com">（https://cloud-images.ubuntu.com</a>）を使用します<a href="https://cloud-images.ubuntu.com">。</a></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># イメージをダウンロード wget https://cloud-images.ubuntu.com/bionic/current/bionic-server-cloudimg-amd64.img # VirtIO SCSI コントローラで新しい VM を作成 qm create 9000 --memory 2048 --net0 virtio,bridge=vmbr0 --scsihw virtio-scsi-pci # ダウンロードしたディスクを local-lvm ストレージにインポートし、 SCSI ドライブとしてアタッチ qm set 9000 --scsi0 local-lvm:0,import-from=/path/to/bionic-server-cloudimg-amd64.img</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">Ubuntu Cloud-Init イメージには、SCSI ドライブ用に<span class="monospaced">virtio-scsi-pci</span>コントローラタイプが必要です。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cloudinit-hardware.png">
<img src="images/screenshot/gui-cloudinit-hardware.png" alt="screenshot/gui-cloudinit-hardware.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">Cloud-InitのCD-ROMドライブを追加</div><p>次のステップはCD-ROMドライブを設定することです。CD-ROMドライブはCloud-InitデータをVMに渡すために使用されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --ide2 local-lvm:cloudinit</pre>
</div></div>
<div class="paragraph">
<p>Cloud-Init イメージから直接ブートするには、<span class="monospaced">ブートパラメータを</span> <span class="monospaced">order=scsi0</span>に設定して、BIOS がこのディスクからのみブートするように制限します。これにより、VM BIOS はブート可能な CD-ROM のテストをスキップするため、ブートが高速化されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --boot order=scsi0</pre>
</div></div>
<div class="paragraph">
<p>多くの Cloud-Init イメージでは、シリアルコンソールを設定してディスプレイとして使用する必要があります。しかし、あるイメージで設定がうまくいかない場合は、代わりにデフォルトのディスプレイに切り替えてください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --serial0 socket --vga serial0</pre>
</div></div>
<div class="paragraph">
<p>最後のステップでは、VMをテンプレートに変換すると便利です。VMテンプレートからのデプロイは、完全なクローン（コピー）を作成するよりもはるかに高速です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>QMテンプレート9000</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_deploying_cloud_init_templates">10.8.2.Cloud-Initテンプレートのデプロイ<a class="headerlink" href="#_deploying_cloud_init_templates" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cloudinit-config.png">
<img src="images/screenshot/gui-cloudinit-config.png" alt="screenshot/gui-cloudinit-config.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>このようなテンプレートはクローンすることで簡単に導入できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm clone 9000 123 --name ubuntu2</pre>
</div></div>
<div class="paragraph">
<p>次に、認証に使用するSSH公開鍵を設定し、IP設定を行います：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 123 --sshkey ~/.ssh/id_rsa.pub qm set 123 --ipconfig0 ip=10.0.10.123/24,gw=10.0.10.1</pre>
</div></div>
<div class="paragraph">
<p>1つのコマンドだけですべてのCloud-Initオプションを設定することもできます。上記の例では、行数を減らすためにコマンドを単純に分割しています。また、特定の環境のIPセットアップを採用するようにしてください。</p></div>
</div>
<div class="sect3">
<h4 id="_custom_cloud_init_configuration">10.8.3.カスタムクラウドイニット構成<a class="headerlink" href="#_custom_cloud_init_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Cloud-Init の統合では、自動生成された設定の代わりにカスタム設定ファイルを使うこともできます。これはコマンドラインの<span class="monospaced">cicustom</span>オプションで行います：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --cicustom "user=&lt;volume&gt;,network=&lt;volume&gt;,meta=&lt;volume&gt;"</pre>
</div></div>
<div class="paragraph">
<p>カスタム設定ファイルは、スニペットをサポートするストレージ上にあり、VMを移行するすべてのノードで利用可能でなければなりません。そうでないと、VMは起動できません。 例えば、以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --cicustom "user=local:snippets/userconfig.yaml"</pre>
</div></div>
<div class="paragraph">
<p>Cloud-Initには3種類の設定があります。一つ目は上の例にあるように<span class="monospaced">ユーザー</span>設定です。2つ目は<span class="monospaced">ネットワーク</span>設定、3つ目は<span class="monospaced">メタ</span>設定です。カスタムコンフィグファイルが指定されていない場合は、自動生成されたコンフィグが使われます。</p></div>
<div class="paragraph">
<p>生成されたコンフィグはカスタムコンフィグのベースとしてダンプすることができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm cloudinit dump 9000 ユーザー</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">ネットワークと</span> <span class="monospaced">メタにも</span>同じコマンドがあります。</p></div>
</div>
<div class="sect3">
<h4 id="_cloud_init_on_windows">10.8.4.WindowsのCloud-Init<a class="headerlink" href="#_cloud_init_on_windows" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://cloudbase.it/">Cloudbase-initという</a>Windows用のCloud-Initの再実装があります。Cloudbase-InitではCloud-Initのすべての機能が利用できるわけではなく、Cloud-Initとは異なる機能もあります。</p></div>
<div class="paragraph">
<p>Cloudbase-Initでは、<span class="monospaced">ostypeを</span>Windowsバージョンに設定し、<span class="monospaced">citypeを</span> <span class="monospaced">configdrive</span>2に設定する必要があります。</p></div>
<div class="paragraph">
<p>Windows用の既製のクラウドイメージは無料で入手できません。Cloudbase-Initを使用するには、Windowsゲストを手動でインストールして設定する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="_preparing_cloudbase_init_templates">10.8.5.Cloudbase-Initテンプレートの準備<a class="headerlink" href="#_preparing_cloudbase_init_templates" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最初のステップはVMにWindowsをインストールすることです。Cloudbase-Initをダウンロードしてゲストにインストールします。インストールの最後にSysprepを実行しないでください。代わりにCloudbase-Initを最初に設定します。</p></div>
<div class="paragraph">
<p>一般的なオプションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>username</em>: 管理者のユーザー名を設定します。</p>
</li>
<li>
<p>
<em>グループに</em>追加します：これにより、ユーザーを<span class="monospaced">Administrators</span>グループに追加できます。</p>
</li>
<li>
<p>
<em>inject_user_password</em>: VMコンフィグでパスワードを設定できるようにするには、これを<span class="monospaced">trueに</span>設定します。</p>
</li>
<li>
<p>
<em>first_logon_behaviour</em>：ログイン時に新しいパスワードを要求しないようにするには、これを<span class="monospaced">noに</span>設定します。</p>
</li>
<li>
<p>
<em>rename_admin_user</em>：デフォルトの<span class="monospaced">管理者</span>ユーザーを<span class="monospaced">username</span>で指定したユーザー名に変更する場合は<span class="monospaced">true を</span>設定します。</p>
</li>
<li>
<p>
<em>metadata_services</em> に設定します：Cloudbase-Init が最初にこのサービスをチェックするように<span class="monospaced">cloudbaseinit.metadata.services.configdrive.ConfigDriveService</span>に設定します。そうしないと Cloudbase-Init がブート後にシステムを設定するのに数分かかるかもしれません。</p>
</li>
</ul></div>
<div class="paragraph">
<p>プラグインの中には、例えば SetHostnamePlugin のように再起動を必要とし、自動的に再起動するものもあります。Cloudbase-Init による自動再起動を無効にするには、<span class="monospaced">allow_reboot</span>を<span class="monospaced">false</span> に設定します。</p></div>
<div class="paragraph">
<p>設定オプションの完全なセットは<a href="https://cloudbase-init.readthedocs.io/en/latest/config.html">cloudbase-init の公式ドキュメントに</a>あります。</p></div>
<div class="paragraph">
<p>設定の一部にまだ調整が必要な場合に備えて、設定後にスナップショットを作成することは意味があります。 Cloudbase-Initを設定した後、テンプレートの作成を開始できます。Windowsゲストをシャットダウンし、Cloud-Initディスクを追加してテンプレートにします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --ide2 local-lvm:cloudinit qm template 9000</pre>
</div></div>
<div class="paragraph">
<p>テンプレートを新しいVMにクローンします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm clone 9000 123 --name windows123</pre>
</div></div>
<div class="paragraph">
<p>その後、パスワード、ネットワーク設定、SSHキーを設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 123 --cipassword &lt;password&gt; qm set 123 --ipconfig0 ip=10.0.10.123/24,gw=10.0.10.1 qm set 123 --sshkey ~/.ssh/id_rsa.pub</pre>
</div></div>
<div class="paragraph">
<p>パスワードを設定する前に、<span class="monospaced">ostype</span>が任意の Windows バージョンに設定されていることを確認してください。そうしないとパスワードは暗号化され、Cloudbase-Initは暗号化されたパスワードを平文のパスワードとして使用します。</p></div>
<div class="paragraph">
<p>すべての設定が完了したら、クローンしたゲストを起動します。最初の起動ではログインは機能せず、変更されたホスト名で自動的に再起動します。 再起動後、新しいパスワードが設定され、ログインが機能するはずです。</p></div>
</div>
<div class="sect3">
<h4 id="_cloudbase_init_and_sysprep">10.8.6.Cloudbase-Init と Sysprep<a class="headerlink" href="#_cloudbase_init_and_sysprep" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>SysprepはWindowsの設定をリセットして<span class="monospaced">新しい</span>システムを提供する機能です。Cloudbase-Initと併用することで、クリーンなテンプレートを作成することができます。</p></div>
<div class="paragraph">
<p>Sysprepを使用する場合、適合させる必要がある2つの設定ファイルがあります。 1つ目は通常の設定ファイル、2つ目は<span class="monospaced">-unattend.confで</span>終わる設定ファイルです。</p></div>
<div class="paragraph">
<p>Cloudbase-Initは2つのステップで実行されます。最初に<span class="monospaced">-unattend.confを</span>使用するSysprepステップ、次にプライマリ設定ファイルを使用する通常のステップです。</p></div>
<div class="paragraph">
<p>提供されている<span class="monospaced">Unattend.xml</span>ファイルを使用してSysprepを実行している<span class="monospaced">Windows Serverでは</span>、すぐに動作するはずです。しかし、通常のWindowsバージョンでは、追加の手順が必要です：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
PowerShellインスタンスを開きます。</p>
</li>
<li>
<p>
Administrator ユーザーを有効にします：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>net user Administrator /active:yes`</pre>
</div></div>
</li>
<li>
<p>
Cloudbase-InitをAdministratorユーザでインストールします。</p>
</li>
<li>
<p>
<span class="monospaced">Unattend.xmlを</span>変更し、sysprepping後の最初のブートでAdministratorユーザーを有効にするコマンドを含めます：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>&lt;RunSynchronousCommand wcm:action="add"&gt; &lt;Path&gt;net user administrator /active:yes&lt;/Path&gt; &lt;Order&gt;1&lt;/Order&gt; &lt;Description&gt;管理者ユーザーを有効にします&lt;/Description&gt; &lt;/RunSynchronousCommand&gt; &lt;RunSynchronousCommand</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&lt;Order</span> <span class="monospaced">&gt;が</span>他の同期コマンドと衝突しないことを確認してください。 Cloudbase-Initコマンドの<span class="monospaced">&lt;Order&gt;を</span>、このコマンドの後に実行するように変更します。</p></div>
</li>
<li>
<p>
(Windows 11のみ）競合するMicrosoft.OneDriveSyncパッケージを削除します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>Get-AppxPackage -AllUsers Microsoft.OneDriveSync | Remove-AppxPackage -AllUsers</pre>
</div></div>
</li>
<li>
<p>
Cloudbase-Init configディレクトリに<span class="monospaced">cd</span>します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>cd 'C:¥Program Files¥Cloudbase Solutions¥Cloudbase-Init¥conf</pre>
</div></div>
</li>
<li>
<p>
(オプション）Sysprep前にVMのスナップショットを作成し、設定ミスに備えます。</p>
</li>
<li>
<p>
Sysprepを実行します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>C:¥Windows¥System32¥Sysprep¥Sysprep.exe /generalize /oobe /unattend:Unattend.xml</pre>
</div></div>
</li>
</ol></div>
<div class="paragraph">
<p>上記の手順を踏むと、SysprepによってVMはシャットダウン状態になるはずです。これでVMをテンプレート化し、クローンして必要に応じて設定することができます。</p></div>
</div>
<div class="sect3">
<h4 id="_cloud_init_specific_options">10.8.7.Cloud-Init固有のオプション<a class="headerlink" href="#_cloud_init_specific_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">カスタム</span>[<span class="monospaced">meta=&lt;volume&gt;] [,network=&lt;volume&gt;] [,user=&lt;volume&gt;] [,vendor=&lt;volume&gt;</span>] です。</dt>
<dd>
<p>
開始時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">meta</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
cloud-init経由でVMに渡されるすべてのメタデータを含むカスタムファイルを指定します。これはプロバイダ固有で、configdrive2とnocloudは異なります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネットワーク</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
すべてのネットワークデータを含むカスタムファイルをcloud-init経由でVMに渡す場合。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ユーザー</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
すべてのユーザーデータを含むカスタムファイルをcloud-init経由でVMに渡す場合。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダー</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
すべてのベンダーデータを含むカスタムファイルをcloud-init経由でVMに渡すには。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cipassword</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザーに割り当てるパスワード。これを使用することは一般的に推奨されません。代わりに ssh 鍵を使ってください。また、cloud-init の古いバージョンではハッシュ化されたパスワードをサポートしていないことに注意しましょう。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">citype</span>:<span class="monospaced">&lt;configdrive2 | nocloud | opennebula&gt;</span>です。</dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは、設定されているオペレーティングシステムの種類<span class="monospaced">（ostype</span>.Linuxでは<span class="monospaced">nocloud</span>形式、Windowsでは<span class="monospaced">configdrive2を</span>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciupgrade</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
最初のブート後にパッケージの自動アップグレードを行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciuser</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
イメージに設定されているデフォルトユーザの代わりに、ssh キーとパスワードを変更するユーザ名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ipconfig[n]</span>：[<span class="monospaced">gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,ip=&lt;IPv4Format/CIDR&gt;] [,ip6=&lt;IPv6Format/CIDR&gt;</span>] となります。</dt>
<dd>
<p>
対応するインターフェイスのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>特別な文字列<em>dhcpは</em>、DHCPを使用するIPアドレスに使用することができ、その場合、明示的なゲートウェイを提供する必要はありません。 IPv6の場合、特別な文字列<em>autoは</em>、ステートレス自動設定を使用するために使用することができます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-initが有効で、IPv4アドレスもIPv6アドレスも指定されていない場合、デフォルトでIPv4のdhcpを使用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">gw=&lt;ゲートウェイ</span><span class="monospaced">IPv</span><span class="monospaced">4</span></dt>
<dd>
<p>
IPv4トラフィックのデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション:<span class="monospaced">ip</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw</span><span class="monospaced">6=&lt;ゲートウェイIPv6</span></dt>
<dd>
<p>
IPv6トラフィックのデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">ip6</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=&lt;IPv4Format/CIDR&gt;</span><em>(デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=&lt;IPv6Format/CIDR&gt;</span><em>(デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネームサーバー</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの DNS サーバー IP アドレスを設定します。searchdomainもnameserverも設定されていない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">searchdomain</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sshkeys</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
公開SSH鍵を設定します（1行に1つの鍵、OpenSSH形式）。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="qm_pci_passthrough">
<span>10.9.PCI(e) パススルー</span> <a class="headerlink" href="#qm_pci_passthrough" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>PCIパススルーは、ホストから仮想マシンにPCIデバイスを制御させるメカニズムです。これには、仮想化ハードウェアを使用する場合よりも、低レイテンシ、高パフォーマンス、より多くの機能（オフロードなど）などの利点があります。</p></div>
<div class="paragraph">
<p>しかし、デバイスを仮想マシンに渡すと、そのデバイスはホスト上でも他のVMでも使用できなくなります。</p></div>
<div class="paragraph">
<p>PCIパススルーはi440fxおよびq35マシンで利用可能ですが、PCIeパススルーはq35マシンのみで利用可能です。これは、PCIデバイスとしてパススルーされたPCIe対応デバイスがPCI速度でのみ動作することを意味するものではありません。PCIe としてデバイスを通過させることは、デバイスが "本当に高速なレガシー PCI デバイス" ではなく PCIe デバイスであることをゲストに伝えるためのフラグを設定するだけです。一部のゲストアプリケーションはこの恩恵を受けます。</p></div>
<div class="sect3">
<h4 id="_general_requirements">10.9.1.一般要件<a class="headerlink" href="#_general_requirements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>パススルーは実際のハードウェア上で実行されるため、いくつかの要件を満たす必要があります。これらの要件の概要を以下に示します。特定のデバイスに関する詳細については、<a href="https://pve.proxmox.com/wiki/PCI_Passthrough">PCIパススルーの例を</a>参照してください。</p></div>
<div class="sect4">
<h5 id="_hardware_3">ハードウェア<a class="headerlink" href="#_hardware_3" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ハードウェアが<span class="monospaced">IOMMU</span><strong>（</strong><strong>I/O</strong> <strong>Memory</strong> <strong>Management</strong><strong>Unit</strong>）割り込みリマッピングをサポートしている必要があります。</p></div>
<div class="paragraph">
<p>一般的に、VT-dを搭載したIntelシステムとAMD-Viを搭載したAMDシステムはこれをサポートしています。 しかし、ハードウェアの実装が悪かったり、ドライバが不足していたり、品質が低かったりするため、箱から出してすぐにすべてが動作する保証はありません。</p></div>
<div class="paragraph">
<p>さらに、サーバーグレードのハードウェアは、コンシューマーグレードのハードウェアよりもサポートが優れていることが多いのですが、それでも最近のシステムの多くはこれをサポートしています。</p></div>
<div class="paragraph">
<p>この機能がLinuxでサポートされているかどうかは、ハードウェアベンダーにお問い合わせください。</p></div>
</div>
<div class="sect4">
<h5 id="_determining_pci_card_address">PCI カードアドレスの決定<a class="headerlink" href="#_determining_pci_card_address" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最も簡単な方法は、GUI を使用して VM のハードウェア・タブに「Host PCI」タイプのデバイスを追加することです。また、コマンドラインを使用することもできます。</p></div>
<div class="paragraph">
<p>カードを探すには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>エルエスピーシー</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_configuration_14">コンフィギュレーション<a class="headerlink" href="#_configuration_14" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ハードウェアがパススルーをサポートしていることを確認したら、PCI(e) パススルーを有効にするための設定を行う必要があります。</p></div>
<div class="paragraph">
<div class="title">IOMMU</div><p>BIOS/UEFI で IOMMU サポートを有効にする必要があります。通常、対応する設定は<span class="monospaced">IOMMU</span>または<span class="monospaced">VT-d</span> と呼ばれますが、正確なオプション名はマザーボードのマニュアルで見つけてください。</p></div>
<div class="paragraph">
<p>AMD CPUでは、IOMMUはデフォルトで有効になっています。最近のカーネル（6.8以降）では、Intel CPUでも有効です。それ以前のカーネルでは、<a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインに</a>以下を追加して、Intel CPU で有効にする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>intel_iommu=on</pre>
</div></div>
<div class="paragraph">
<div class="title">IOMMUパススルーモード</div><p>ハードウェアがIOMMUパススルーモードをサポートしている場合、このモードを有効にするとパフォーマンスが向上する可能性があります。 これは、VMがハイパーバイザによって通常実行される（デフォルトの）DMA変換をバイパスし、代わりにDMA要求をハードウェアIOMMUに直接渡すためです。これらのオプションを有効にするには、以下を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>iommu=pt</pre>
</div></div>
<div class="paragraph">
<p>を<a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインに</a>追加します。</p></div>
<div class="paragraph">
<div class="title">カーネルモジュール</div><p>以下のモジュールがロードされていることを確認する必要があります。<em>etc/modules</em>'に追加してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">媒介機器のパススルー</div>
<div class="paragraph">
<p>仲介デバイス（vGPUなど）を通過する場合は、以下は必要ありません。 このような場合、デバイスは該当するホストドライバが直接所有します。</p></div>
</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre>vfio vfio_iommu_type1 vfio_pci</pre>
</div></div>
<div class="paragraph" id="qm_pci_passthrough_update_initramfs">
<p>モジュール関連の何かを変更したら、<span class="monospaced">initramfsを</span>リフレッシュする必要があります。Proxmox VEでは、これを実行することで行えます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-initramfs -u -k all</pre>
</div></div>
<div class="paragraph">
<p>モジュールがロードされているかどうかをチェックするには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsmod | grep vfio</pre>
</div></div>
<div class="paragraph">
<p>の4つのモジュールが含まれている必要があります。</p></div>
<div class="paragraph">
<div class="title">仕上げの構成</div><p>最後に再起動して変更を有効にし、実際に有効になっていることを確認してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -e DMAR -e IOMMU -e AMD-Vi</pre>
</div></div>
<div class="paragraph">
<p>は、<span class="monospaced">IOMMU</span>、<span class="monospaced">Directed I/O</span>、または<span class="monospaced">Interrupt Remappingが</span>有効であることを表示するはずですが、正確なメッセージはハードウェアとカーネルによって異なります。</p></div>
<div class="paragraph">
<p>IOMMU が意図したとおりに動作しているかどうかを確認する方法については、wiki の「<a href="https://pve.proxmox.com/wiki/PCI_Passthrough#Verifying_IOMMU_parameters">IOMMU パラメータの検証」</a>セクションを参照してください。</p></div>
<div class="paragraph">
<p>また、通過させたいデバイスが<strong>別の</strong> <span class="monospaced">IOMMU</span>グループに属していることも重要です。これは Proxmox VE API を呼び出すことで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh get /nodes/{nodename}/hardware/pci --pci-class-blacklist ""</pre>
</div></div>
<div class="paragraph">
<p>デバイスが、その機能（例えば、HDMIオーディオデバイスを持つGPU）と一緒に<span class="monospaced">IOMMU</span>グループにあるか、そのルートポートまたはPCI(e)ブリッジと一緒にある場合は問題ありません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">PCI(e)スロット</div>
<div class="paragraph">
<p>プラットフォームによっては、物理的なPCI(e)スロットの扱いが異なります。そのため、希望の<span class="monospaced">IOMMU</span>グループ分離が得られない場合、カードを別のPCI(e)スロットに置くことが助けになることがあります。</p></div>
</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">安全でない割り込み</div>
<div class="paragraph">
<p>プラットフォームによっては、安全でない割り込みを許可する必要があるかもしれません。 その場合は、<strong>/etc/modprobe.d/の</strong>'.conf'で終わるファイルに以下の行を追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>オプション vfio_iommu_type1 allow_unsafe_interrupts=1</pre>
</div></div>
<div class="paragraph">
<p>このオプションはシステムを不安定にする可能性がありますのでご注意ください。</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_gpu_passthrough_notes">GPU パススルー・ノート<a class="headerlink" href="#_gpu_passthrough_notes" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEのウェブインタフェースで、NoVNCやSPICEを介してGPUのフレームバッファを表示することはできません。</p></div>
<div class="paragraph">
<p>GPU 全体または vGPU を通過してグラフィック出力が必要な場合、物理的にモニターをカードに接続するか、ゲスト内でリモートデスクトップソフトウェア (例えば VNC や RDP) を設定する必要があります。</p></div>
<div class="paragraph">
<p>OpenCLやCUDAを使用するプログラムなど、GPUをハードウェア・アクセラレータとして使用したい場合は、この必要はありません。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_host_device_passthrough">10.9.2.ホスト・デバイス・パススルー<a class="headerlink" href="#_host_device_passthrough" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>PCI(e)パススルーの最も一般的な方法は、PCI(e)カード全体（GPUやネットワークカードなど）を通過させる方法です。</p></div>
<div class="sect4">
<h5 id="_host_configuration">ホスト構成<a class="headerlink" href="#_host_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEは自動的にPCI(e)デバイスをホストから使用できないようにしようとします。 しかし、これがうまくいかない場合、2つの方法があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
を追加することで、<em>vfio-pci</em>モジュールのオプションにデバイスIDを渡します。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>オプション vfio-pci ids=1234:5678,4321:8765</pre>
</div></div>
<div class="paragraph">
<p>ここで<span class="monospaced">1234:5678と</span> <span class="monospaced">4321:8765は</span>、<strong>/etc/modprobe.d/の</strong>.confファイルで取得したベンダーとデバイスのIDです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -nn</pre>
</div></div>
</li>
<li>
<p>
ホスト上のドライバを完全にブラックリストに入れ、パススルー用にバインドできるようにします。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>ブラックリスト DRIVERNAME</pre>
</div></div>
<div class="paragraph">
<p>を<strong>/etc/modprobe.d/</strong> の .conf ファイルに追加します。</p></div>
<div class="paragraph">
<p>ドライバ名を見つけるには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -k</pre>
</div></div>
<div class="paragraph">
<p>例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -k | grep -A 3 "VGA"</pre>
</div></div>
<div class="paragraph">
<p>のようなものが出力されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>01:00.0 VGA 互換コントローラ：NVIDIA Corporation GP108 [GeForce GT 1030] (rev a1) サブシステム：サブシステム: Micro-Star International Co.[MSI] GP108 [GeForce GT 1030] 使用中のカーネルドライバ: &lt;some-module&gt; カーネルモジュール: &lt;some-module</pre>
</div></div>
<div class="paragraph">
<p>これで、.confファイルにドライバを記述することで、ドライバをブラックリスト化することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "blacklist &lt;some-module&gt;" &gt;&gt; /etc/modprobe.d/blacklist.conf</pre>
</div></div>
</li>
</ul></div>
<div class="paragraph">
<p>どちらの方法でも、<a href="#qm_pci_passthrough_update_initramfs"> <span class="monospaced">initramfsを</span></a>再度<a href="#qm_pci_passthrough_update_initramfs">更新</a>し、その後再起動する必要があります。</p></div>
<div class="paragraph">
<p>これがうまくいかない場合は、<em>vfio-pciを</em>ロードする前にgpuモジュールをロードするよう、ソフト依存を設定する必要があるかもしれません。これは<em>softdep</em>フラグで行えます。詳しくは<em>modprobe.d</em>の man ページも参照してください。</p></div>
<div class="paragraph">
<p>例えば、&lt;some-module&gt;という名前のドライバを使っている場合です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># echo "softdep &lt;some-module&gt; pre: vfio-pci" &gt;&gt; /etc/modprobe.d/&lt;some-module&gt;.conf。</pre>
</div></div>
<div class="paragraph">
<div class="title">設定の確認</div><p>変更が成功したかどうかを確認するには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -nnk</pre>
</div></div>
<div class="paragraph">
<p>をクリックし、デバイスのエントリを確認してください。もし</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>使用中のカーネルドライバ：vfio-pci</pre>
</div></div>
<div class="paragraph">
<p>または<em>使用中の</em>行が全くない場合、デバイスはパススルーに使用する準備ができています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">媒介機器</div>
<div class="paragraph">
<p>mediatedデバイスの場合、デバイスは<em>vfio-pciではなく</em>直接ホストドライバとして所有されるため、この行は異なります。</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="qm_pci_passthrough_vm_config">VM 構成<a class="headerlink" href="#qm_pci_passthrough_vm_config" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>GPU をパススルーする場合、<em>q35</em>をマシンタイプとして使い、SeaBIOS の代わりに<em>OVMF</em><em>(</em>VM 用<em>UEFI</em>)、そして PCI の代わりに PCIe を使うと最高の互換性が得られます。GPU パススルーに<em>OVMF を</em>使いたい場合、GPU が UEFI 対応の ROM を持っている必要があることに注意してください。ROM が UEFI に対応しているかチェックするには<a href="https://pve.proxmox.com/wiki/PCI_Passthrough#How_to_know_if_a_graphics_card_is_UEFI_.28OVMF.29_compatible">PCI Passthrough Examples</a>wiki を見て下さい。</p></div>
<div class="paragraph">
<p>さらに、OVMFを使用することで、vgaのアービトレーションを無効にすることができ、ブート中に実行する必要があるレガシーコードの量を減らすことができます。vgaアービトレーションを無効にするには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "options vfio-pci ids=&lt;vendor-id&gt;,&lt;device-id&gt; disable_vga=1" &gt; /etc/modprobe.d/vfio.conf</pre>
</div></div>
<div class="paragraph">
<p>を&lt;vendor-id&gt;と&lt;device-id&gt;に置き換えてください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -nn</pre>
</div></div>
<div class="paragraph">
<p>PCIデバイスは、VMのハードウェア・セクションにあるウェブ・インターフェイスで追加できます。 また、コマンドラインを使用することもできます。VMコンフィギュレーションで<strong>hostpciX</strong>オプションを設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 00:02.0</pre>
</div></div>
<div class="paragraph">
<p>またはVMコンフィギュレーション・ファイルに行を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ホストPCI0: 00:02.0</pre>
</div></div>
<div class="paragraph">
<p>デバイスに複数のファンクション（例えば '<span class="monospaced">00:02.0</span>' と '<span class="monospaced">00:02.1</span>' ）がある場合は、`00:02` という短縮構文でまとめて渡すことができます<em>。 これは</em>ウェブインターフェースの<em>``All Functions`</em>チェックボックスを<em>チェックするのと同じです</em>。</p></div>
<div class="paragraph">
<p>デバイスとゲストOSによっては、必要なオプションがいくつかあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>x-vga=on|off</strong>は、PCI(e) デバイスを VM のプライマリ GPU としてマークします。 これを有効にすると、<strong>vga</strong>設定オプションは無視されます。</p>
</li>
<li>
<p>
<strong>pcie=on|offは</strong>PCIeまたはPCIポートを使用するようにProxmox VEに指示します。ゲスト/デバイスの組み合わせによってはPCIではなくPCIeを必要とします。PCIeは<em>q35</em>マシンタイプでのみ使用可能です。</p>
</li>
<li>
<p>
<strong>rombar=on|off</strong>は、ファームウェア ROM をゲストから見えるようにします。デフォルトは on です。 いくつかの PCI(e) デバイスはこれを無効にする必要があります。</p>
</li>
<li>
<p>
<strong>romfile=&lt;path&gt;</strong> は、デバイスが使用する ROM ファイルへのオプションのパスです。 これは、<strong>/usr/share/kvm/</strong> 以下の相対パスです。</p>
</li>
</ul></div>
<div class="paragraph">
<div class="title">例</div><p>GPUをプライマリに設定したPCIeパススルーの例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 02:00,pcie=on,x-vga=on。</pre>
</div></div>
<div class="paragraph">
<div class="title">PCI IDオーバーライド</div><p>ゲストによって認識される PCI ベンダー ID、デバイス ID、サブシステム ID を上書きすることができます。これは、デバイスがゲストのドライバが認識しない ID を持つバリアントであるにもかかわらず、それらのドライバを強制的にロードしたい場合に便利です (例えば、デバイスがサポートされるバリアントと同じチップセットを共有していることが分かっている場合など)。</p></div>
<div class="paragraph">
<p>使用可能なオプションは<span class="monospaced">vendor-id</span>、<span class="monospaced">device-id</span>、<span class="monospaced">sub-vendor-id</span>、<span class="monospaced">sub-device-id</span> です。デバイスのデフォルトIDを上書きするために、これらのいずれかまたはすべてを設定できます。</p></div>
<div class="paragraph">
<p>例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 02:00,device-id=0x10f6,sub-vendor-id=0x0000。</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_sr_iov">10.9.3.SR-IOV<a class="headerlink" href="#_sr_iov" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>PCI(e)デバイスを通過させるもう一つの方法は、もし利用可能であれば、デバイスのハードウェア仮想化機能を使うことです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="title">SR-IOVの実現</div>
<div class="paragraph">
<p>SR-IOV を使用するには、プラットフォームのサポートが特に重要です。最初に BIOS/UEFI でこの機能を有効にするか、特定の PCI(e) ポートを使用する必要があるかもしれません。不明な点は、プラットフォームのマニュアルを参照するか、ベンダーにお問い合わせください。</p></div>
</td>
</tr></table>
</div>
<div class="paragraph">
<p><strong>SR-IOV（Single-Root</strong><strong>Input/Output</strong> <strong>Virtualization</strong>）は、1つのデバイスで複数の<em>VF</em><strong>（仮想</strong> <strong>機能</strong>）をシステムに提供することができます。これらの<em>VFは</em>それぞれ異なるVMで使用することができ、完全なハードウェア機能を備え、ソフトウェア仮想化デバイスよりも優れたパフォーマンスと低レイテンシを実現します。</p></div>
<div class="paragraph">
<p>現在、最も一般的なユースケースは SR-IOV をサポートする NIC<strong>（ネットワーク・</strong><strong>インターフェイス・</strong> <strong>カード</strong>）で、物理ポートごとに複数の VF を提供することができます。これにより、チェックサム・オフロードなどの機能をVM内部で使用できるようになり、（ホストの）CPUオーバーヘッドを削減できます。</p></div>
<div class="sect4">
<h5 id="_host_configuration_2">ホスト構成<a class="headerlink" href="#_host_configuration_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>一般的に、デバイス上で仮想機能を有効にするには2つの方法があります。</p></div>
<div class="ulist"><ul>
<li>
<p>
ドライバモジュールにオプションがある場合もあります。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>max_vfs=4</pre>
</div></div>
<div class="paragraph">
<p>これは、<strong>/etc/modprobe.d/</strong> の下に<em>.conf を</em>末尾に持つファイルを置くことができます (この後、initramfs を更新することを忘れないでください)。</p></div>
<div class="paragraph">
<p>正確なパラメータとオプションについては、ドライバ・モジュールのマニュアルを参照してください。</p></div>
</li>
<li>
<p>
デバイスとドライバがこれをサポートしていれば、VFの数をその場で変更することができます。例えば、デバイス0000:01:00.0に4つのVFをセットアップするには、次のように実行します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># echo 4 &gt; /sys/bus/pci/devices/0000:01:00.0/sriov_numvfs</pre>
</div></div>
<div class="paragraph">
<p>インストール後、<strong>/etc/sysfs.conf</strong>または<strong>/etc/sysfs.d/</strong> 内の `FILE.conf' で設定します。</p></div>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_vm_configuration">VM 構成<a class="headerlink" href="#_vm_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>VF を作成した後、それらを<span class="monospaced">lspci</span> で出力すると、別々の PCI(e) デバイスとして見えるはずです。それらの ID を取得し、<a href="#qm_pci_passthrough_vm_config">通常の PCI(e) デバイスの</a>ように通してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_mediated_devices_vgpu_gvt_g">10.9.4.媒介デバイス (vGPU、GVT-g)<a class="headerlink" href="#_mediated_devices_vgpu_gvt_g" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>媒介デバイスは、物理ハードウェアの機能と性能を仮想化ハードウェアに再利用するもう1つの方法です。これらは、IntelのGVT-gやNVIDIAのGRIDテクノロジーで使用されているvGPUのような仮想化GPUセットアップで最もよく見られます。</p></div>
<div class="paragraph">
<p>これによって、物理カードはSR-IOVと同様に仮想カードを作成することができます。 違いは、mediatedデバイスはホスト内でPCI(e)デバイスとして表示されず、仮想マシンでの使用にのみ適していることです。</p></div>
<div class="sect4">
<h5 id="_host_configuration_3">ホスト構成<a class="headerlink" href="#_host_configuration_3" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>一般的に、カードのドライバがその機能をサポートしていなければ、動作しません。そのため、互換性のあるドライバとその設定方法については、各ベンダーにお問い合わせください。</p></div>
<div class="paragraph">
<p>インテルのGVT-g用ドライバはカーネルに統合されており、第5、第6、第7世代のインテルCoreプロセッサ、およびE3 v4、E3 v5、E3 v6のXeonプロセッサで動作するはずです。</p></div>
<div class="paragraph">
<p>Intel Graphicsで有効にするには、モジュール<em>kvmgtを</em>（例えば<span class="monospaced">/etc/modules</span>経由で）ロードし、<a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインで</a>有効にして、以下のパラメータを追加する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>i915.enable_gvt=1</pre>
</div></div>
<div class="paragraph">
<p>その後、<a href="#qm_pci_passthrough_update_initramfs"> <span class="monospaced">initramfsを</span>更新</a>し、ホストを再起動することを忘れないでください。</p></div>
</div>
<div class="sect4">
<h5 id="_vm_configuration_2">VM 構成<a class="headerlink" href="#_vm_configuration_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>mediatedデバイスを使用するには、<span class="monospaced">hostpciX</span>VMコンフィギュレーション・オプションで<span class="monospaced">mdev</span>プロパティを指定するだけです。</p></div>
<div class="paragraph">
<p>サポートされているデバイスは、<em>sysfs</em>経由で取得できます。例えば、<em>0000:00:02.0という</em>デバイスでサポートされているタイプをリストアップするには、次のように実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ls /sys/bus/pci/devices/0000:00:02.0/mdev_supported_types</pre>
</div></div>
<div class="paragraph">
<p>各エントリーは、以下の重要なファイルを含むディレクトリです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>available</em><em>_instancesには</em>、このタイプのまだ利用可能なインスタンスの量が含まれます。</p>
</li>
<li>
<p>
<em>説明には</em>、その型の能力に関する短い説明が含まれます。</p>
</li>
<li>
<p>
<em>createは</em>、このようなデバイスを作成するためのエンドポイントです。Proxmox VEは、<span class="monospaced">mdevの</span> <em>hostpciX</em>オプションが設定されている場合、自動的にこれを行います。</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">Intel GVT-g</span><span class="monospaced">vGPU（Intel Skylake 6700k</span>）を使用した構成例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 00:02.0,mdev=i915-GVTg_V5_4。</pre>
</div></div>
<div class="paragraph">
<p>この設定により、Proxmox VEはVM起動時にこのようなデバイスを自動的に作成し、VM停止時に再びクリーンアップします。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_use_in_clusters">10.9.5.クラスターでの使用<a class="headerlink" href="#_use_in_clusters" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>また、クラスタレベルでデバイスをマッピングすることも可能で、HAで適切に使用できるようにしたり、ハードウェアの変更を検出したり、非rootユーザが設定できるようにしたりできます。詳細は<a href="#resource_mapping">リソースマッピングを</a>参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_pci_viommu">10.9.6. vIOMMU（エミュレートされた IOMMU）<a class="headerlink" href="#qm_pci_viommu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>vIOMMUは、仮想マシン内のハードウェアIOMMUのエミュレーションで、仮想化I/Oデバイスのメモリアクセス制御とセキュリティを向上させます。vIOMMU オプションを使用すると、<a href="https://pve.proxmox.com/wiki/Nested_Virtualization">ネストされた仮想化により</a>、PCI(e) デバイスをレベル 1 VM のレベル 2 VM にパススルーすることもできます。 ホストからネストされた VM に物理 PCI(e) デバイスをパススルーするには、PCI(e) パススルーの手順に従ってください。</p></div>
<div class="paragraph">
<p>現在、2つのvIOMMU実装が利用可能です：IntelとVirtIOです。</p></div>
<div class="sect4">
<h5 id="_intel_viommu">インテル vIOMMU<a class="headerlink" href="#_intel_viommu" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Intel vIOMMU固有のVM要件：</p></div>
<div class="ulist"><ul>
<li>
<p>
ホストでIntelまたはAMDのどちらのCPUを使用している場合でも、VMのカーネル・パラメータで<span class="monospaced">intel_iommu=onを</span>設定することが重要です。</p>
</li>
<li>
<p>
Intel vIOMMUを使用するには、マシンタイプとして<strong>q35を</strong>設定する必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>すべての要件が満たされていれば、PCIデバイスを通過できるはずのVMのコンフィギュレーションのマシン・パラメータに<span class="monospaced">viommu=intelを</span>追加できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -machine q35,viommu=intel</pre>
</div></div>
<div class="paragraph">
<p><a href="https://wiki.qemu.org/Features/VT-d">VT-d 用 QEMU ドキュメント</a></p></div>
</div>
<div class="sect4">
<h5 id="_virtio_viommu">VirtIO vIOMMU<a class="headerlink" href="#_virtio_viommu" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>この vIOMMU の実装はより新しく、Intel vIOMMU ほどの制限はありませんが、現在のところ実運用での使用は少なく、文書化もされていません。</p></div>
<div class="paragraph">
<p>VirtIO vIOMMUでは、カーネルパラメータを設定する必要は<strong>ありません</strong>。また、マシンタイプとして q35 を使用する<strong>必要は</strong>ありませんが、PCIe を使用する場合は使用することをお勧めします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -machine q35,viommu=virtio</pre>
</div></div>
<div class="paragraph">
<p><a href="https://web.archive.org/web/20230804075844/https://michael2012z.medium.com/virtio-iommu-789369049443">virtio-iommuを説明するマイケル・ザオのブログ記事</a></p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hookscripts">
<span>10.10.フックスクリプト</span> <a class="headerlink" href="#_hookscripts" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>設定プロパティ<span class="monospaced">hookscriptを</span>使用すると、VMにフックスクリプトを追加できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set 100 --hookscript local:snippets/hookscript.pl</pre>
</div></div>
<div class="paragraph">
<p>このスクリプトは、ゲストが生きている間の様々な局面で呼び出されます。 例とドキュメントは、<span class="monospaced">/usr/share/pve-docs/examples/guest-example-hookscript.pl</span> にあるサンプルスクリプトを参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="qm_hibernate">
<span>10.11.ハイバネーション</span> <a class="headerlink" href="#qm_hibernate" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>VMをディスクにサスペンドするには、GUIオプションの<span class="monospaced">Hibernate</span>または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm suspend ID --todisk</pre>
</div></div>
<div class="paragraph">
<p>つまり、メモリの現在の内容がディスクに保存され、VMは停止します。次の起動時には、メモリの内容がロードされ、VMは中断したところから続行することができます。</p></div>
<div class="paragraph" id="qm_vmstatestorage">
<div class="title">ステートストレージの選択</div><p>メモリーのターゲット・ストレージが指定されていない場合は、自動的に選択されます：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
VMコンフィグのストレージ<span class="monospaced">vmstatestorage</span>。</p>
</li>
<li>
<p>
任意のVMディスクからの最初の共有ストレージ。</p>
</li>
<li>
<p>
どのVMディスクからも最初の非共有ストレージ。</p>
</li>
<li>
<p>
フォールバックとしてのストレージ<span class="monospaced">ローカル</span>。</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="resource_mapping">
<span>10.12.リソースマッピング</span> <a class="headerlink" href="#resource_mapping" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-resource-mappings.png">
<img src="images/screenshot/gui-datacenter-resource-mappings.png" alt="screenshot/gui-datacenter-resource-mappings.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ローカルリソース（例えば、pciデバイスのアドレス）を使用したり参照したりする場合、生のアドレスやidを使用することは、時々問題があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
HAを使用する場合、ターゲットノード上に同じIDやパスを持つ別のデバイスが存在する可能性があり、そのようなゲストをHAグループに割り当てる際に注意しなければ、間違ったデバイスが使用され、設定が壊れてしまう可能性があります。</p>
</li>
<li>
<p>
ハードウェアを変更するとIDやパスが変わることがあるので、割り当てられたすべてのデバイスをチェックして、パスやIDが正しいかどうかを確認する必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>これをうまく処理するには、クラスタ全体のリソースマッピングを定義して、リソースがクラスタ固有の、ユーザが選択した識別子を持ち、異なるホスト上の異なるデバイスに対応できるようにします。これにより、HAが間違ったデバイスでゲストを起動することはなくなり、ハードウェアの変更も検出できるようになります。</p></div>
<div class="paragraph">
<p>このようなマッピングの作成は、Proxmox VE ウェブ GUI の<span class="monospaced">リソースマッピ ングカテゴリの</span>関連タブにある<span class="monospaced">データセンターで</span>行うことができます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh create /cluster/mapping/&lt;type&gt; &lt;options&gt;</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-mapping-pci-edit.png">
<img src="images/screenshot/gui-datacenter-mapping-pci-edit.png" alt="screenshot/gui-datacenter-mapping-pci-edit.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ここで<span class="monospaced">&lt;type&gt;は</span>ハードウェアタイプ（現在は<span class="monospaced">pciか</span> <span class="monospaced">usb</span>）、<span class="monospaced">&lt;options&gt;は</span>デバイスマッピングとその他の設定パラメータです。</p></div>
<div class="paragraph">
<p>オプションには、ハードウェアが変更されておらず、正しいデバイスが通過していることを確認できるように、そのハードウェアのすべての識別プロパティを持つマッププロパティを含める必要があることに注意してください。</p></div>
<div class="paragraph">
<p>例えば、ノード<span class="monospaced">node</span>1にデバイスID<span class="monospaced">0001と</span>ベンダーID<span class="monospaced">0002を</span>持つパス<span class="monospaced">0000:01:00.0の</span>PCIデバイスを<span class="monospaced">device1として</span>追加し、<span class="monospaced">ノードnode</span>2に<span class="monospaced">0000:02:00.0を</span>追加するには、次のようにします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh create /cluster/mapping/pci --id device1 ˶ --map node=node1,path=0000:01:00.0,id=0002:0001 ˶ --map node=node2,path=0000:02:00.0,id=0002:0001</pre>
</div></div>
<div class="paragraph">
<p>デバイスがマッピングされるべき各ノードに対して、<span class="monospaced">map</span>パラメータを繰り返す必要があります（現在、1つのマッピングにつき1つのノードにつき1つのUSBデバイスしかマッピングできないことに注意してください）。</p></div>
<div class="paragraph">
<p>GUIを使用すると、正しいプロパティが自動的にピックアップされ、APIに送信されるため、これが非常に簡単になります。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-mapping-usb-edit.png">
<img src="images/screenshot/gui-datacenter-mapping-usb-edit.png" alt="screenshot/gui-datacenter-mapping-usb-edit.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>PCI デバイスでは、ノードごとに複数のマッププロパティを持つ複数のデバイスを提供することも可能です。このようなデバイスがゲストに割り当てられた場合、ゲストの起動時に最初に空いているものが使用されます。与えられたパスの順番は試行される順番でもあるため、任意の割り当てポリシーを実装できます。</p></div>
<div class="paragraph">
<p>これは、SR-IOVを持つデバイスにとって便利です。</p></div>
<div class="paragraph">
<p>このようなデバイスをゲストに割り当てるには、GUI または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set ID -hostpci0 &lt;名前&gt;.</pre>
</div></div>
<div class="paragraph">
<p>PCIデバイスの場合</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &lt;vmid&gt; -usb0 &lt;name&gt;</pre>
</div></div>
<div class="paragraph">
<p>USBデバイス用。</p></div>
<div class="paragraph">
<p>ここで、<span class="monospaced">&lt;vmid&gt;</span>はゲスト ID で、<span class="monospaced">&lt;name&gt;</span>は作成されるマッピングの名前です。<span class="monospaced">mdev</span> のような、デバイスを通過するための通常のオプションはすべて許可されています。</p></div>
<div class="paragraph">
<p>マッピングを作成するには、<span class="monospaced">Mapping.Modify</span>on<span class="monospaced">/mapping/&lt;type&gt;/&lt;name&gt;が</span>必要です（<span class="monospaced">&lt;type&gt;は</span>デバイスタイプ、<span class="monospaced">&lt;name&gt;は</span>マッピング名）。</p></div>
<div class="paragraph">
<p>これらのマッピングを使用するには、<span class="monospaced">/mapping/&lt;type&gt;/&lt;name&gt;</span>上の<span class="monospaced">Mapping.Useが</span>必要です（設定を編集する通常のゲスト権限に加えて）。</p></div>
</div>
<div class="sect2">
<h3 id="_managing_virtual_machines_with_span_class_monospaced_qm_span">
<span>10.13.<span class="monospaced">qm</span>による仮想マシンの管理</span> <a class="headerlink" href="#_managing_virtual_machines_with_span_class_monospaced_qm_span" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>qm は Proxmox VE 上の QEMU/KVM 仮想マシンを管理するツールです。仮想マシンの作成と破棄、実行の制御(スタート/ストップ/サスペンド/レジューム)ができます。さらに、qm を使用して関連する設定ファイルにパラメータを設定できます。仮想ディスクの作成と削除も可能です。</p></div>
<div class="sect3">
<h4 id="_cli_usage_examples">10.13.1.CLIの使用例<a class="headerlink" href="#_cli_usage_examples" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>ローカル・</em>ストレージにアップロードされたisoファイルを使って、4GBのIDEディスクを持つVMを<em>local-lvm</em>ストレージに作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm create 300 -ide0 local-lvm:4 -net0 e1000 -cdrom local:iso/proxmox-mailgateway_2.1.iso</pre>
</div></div>
<div class="paragraph">
<p>新しいVMの起動</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 300</pre>
</div></div>
<div class="paragraph">
<p>シャットダウン要求を送信し、VMが停止するまで待ちます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm shutdown 300 &amp;&amp; qm wait 300</pre>
</div></div>
<div class="paragraph">
<p>上記と同じですが、40秒間待つだけです。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm shutdown 300 &amp;&amp; qm wait 300 -timeout 40</pre>
</div></div>
<div class="paragraph">
<p>VMがシャットダウンしない場合は、VMを強制停止し、実行中のシャットダウン・タスクを上書きします。VMを停止するとデータが失われる可能性があるため、使用には注意が必要です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm stop 300 -overrule-shutdown 1</pre>
</div></div>
<div class="paragraph">
<p>VMを破棄すると、そのVMは常にアクセス制御リストから削除され、そのVMのファイアウォール構成も常に削除されます。レプリケーション・ジョブ、バックアップ・ジョブ、およびHAリソース・コンフィギュレーションからもVMを削除する場合は、<em>-purgeを</em>有効にする必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm destroy 300 --purge</pre>
</div></div>
<div class="paragraph">
<p>ディスクイメージを別のストレージに移動します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm move-disk 300 scsi0 other-storage</pre>
</div></div>
<div class="paragraph">
<p>ディスクイメージを別のVMに再割り当てします。これにより、ディスク<span class="monospaced">scsi1</span>がソース VM から削除され、<span class="monospaced">scsi3</span>としてターゲット VM にアタッチされます。バックグラウンドでは、ディスク・イメージの名前が新しい所有者と一致するように変更されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm move-disk 300 scsi1 --target-vmid 400 --target-disk scsi3</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="qm_configuration">
<span>10.14.コンフィギュレーション</span> <a class="headerlink" href="#qm_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>VM設定ファイルはProxmoxクラスタファイルシステム内に保存され、<span class="monospaced">/etc/pve/qemu-server/&lt;VMID&gt;.confに</span>アクセスできます。<span class="monospaced">/etc/pve/</span>内に保存された他のファイルと同様に、他のすべてのクラスタノードに自動的に複製されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">100未満のVMIDは内部用に予約されており、VMIDはクラスタ全体で一意である必要があります。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">VMの構成例</div>
<div class="content monospaced">
<pre>boot: order=virtio0;net0 コア：1 ソケット1 メモリ512 name: webmail ostype: l26 net0: e1000=EE:D2:28:5F:B6:3E,bridge=vmbr0 virtio0: local:vm-100-disk-1,size=32G</pre>
</div></div>
<div class="paragraph">
<p>これらの設定ファイルは単純なテキストファイルで、通常のテキストエディタ<span class="monospaced">（vi</span>、<span class="monospaced">nano</span>、...）を使用して編集できます。これはちょっとした修正に便利ですが、そのような変更を適用するにはVMを再起動する必要があることに注意してください。</p></div>
<div class="paragraph">
<p>そのため、通常は<span class="monospaced">qm</span>コマンドを使用してファイルを生成・変更するか、GUIを使用してすべての作業を行う方がよいでしょう。 私たちのツールキットは十分に賢く、実行中のVMにほとんどの変更を即座に適用することができます。この機能は「ホットプラグ」と呼ばれ、この場合VMを再起動する必要はありません。</p></div>
<div class="sect3">
<h4 id="_file_format">10.14.1.ファイルフォーマット<a class="headerlink" href="#_file_format" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VM設定ファイルは、コロンで区切られた単純なキー/値形式を使用します。各行の書式は以下のとおりです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># これはコメントです。</pre>
</div></div>
<div class="paragraph">
<p>これらのファイルの空白行は無視され、<span class="monospaced">#</span>文字で始まる行はコメントとして扱われ、これも無視されます。</p></div>
</div>
<div class="sect3">
<h4 id="qm_snapshots">10.14.2.スナップショット<a class="headerlink" href="#qm_snapshots" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>スナップショットを作成すると、<span class="monospaced">qm は</span>スナップショット時の設定を同じ設定ファイル内の別のスナップショットセクションに保存します。例えば、"testsnapshot" というスナップショットを作成した後、設定ファイルは以下のようになります：</p></div>
<div class="listingblock">
<div class="title">スナップショットによるVM構成</div>
<div class="content monospaced">
<pre>メモリ512 swap：512 parent: testsnaphot ... [testsnaphot] memory：512 swap：512 snaptime: 1457170803 ...</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">parent</span>や<span class="monospaced">snaptime の</span>ようなスナップショット関連のプロパティがいくつかあります。<span class="monospaced">parent</span>プロパティはスナップショット間の親子関係を保存するために使用されます。<span class="monospaced">snaptime</span>はスナップショットの作成タイムスタンプ (Unix epoch) です。</p></div>
<div class="paragraph">
<p>オプションの<span class="monospaced">vmstateを</span>使用すると、実行中のVMのメモリを保存することができます。 VMの状態のターゲット・ストレージの選択方法については、「<a href="#qm_hibernate">ハイバネーション</a>」の章の<a href="#qm_vmstatestorage">「状態ストレージの選択</a>」を参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_options">10.14.3.オプション<a class="headerlink" href="#qm_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acpi</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPI を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">親和性</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ゲストプロセスの実行に使用されるホストコアのリスト（例：0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">エージェント</span>:<span class="monospaced">[enabled=]&lt;1|0&gt; [,freeze-fs-on-backup=&lt;1|0&gt;] [,fstrim_cloned_disks=&lt;1|0&gt;] [,type=&lt;virtio|isa&gt;</span>]。</dt>
<dd>
<p>
QEMU ゲストエージェントとそのプロパティとの通信を有効/無効にします。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">enabled=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VM 内で実行されている QEMU ゲストエージェント (QGA) との通信を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">freeze-</span><span class="monospaced">fs</span><span class="monospaced">-on-backup=&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">1）</span></dt>
<dd>
<p>
一貫性を保つために、バックアップ時にゲストファイルシステムをフリーズ/解凍します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fstrim_cloned_disks=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ディスクの移動またはVMの移行後にfstrimを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&lt;isa</span><span class="monospaced">| virtio&gt;</span><em>(デフォルト =</em> <span class="monospaced">virtio</span>)</dt>
<dd>
<p>
エージェントタイプの選択</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">amd-sev</span>:<span class="monospaced">[type=]&lt;sev-type&gt;[,kernel-hashes=&lt;1|0&gt;][,no-debug=&lt;1|0&gt;][,no-key-sharing=&lt;1|0&gt;</span>]。</dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">kernel-hashes=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
カーネル・ハッシュをゲスト・ファームウェアに追加して、Linuxカーネルの起動を測定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">no-debug=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ポリシービット 0 を 1 に設定し、ゲストのデバッグを禁止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">no-key-sharing=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ポリシービット1を1に設定し、他のゲストとの鍵共有を禁止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=</span><span class="monospaced">&lt;セブ</span><span class="monospaced">タイプ</span></dt>
<dd>
<p>
type<em>=</em>stdで標準的なSEVを有効にするか、<em>es</em>オプションで実験的なSEV-ESを有効にします。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">arch</span>:<span class="monospaced">&lt;aarch64 | x86_64&gt;</span>です。</dt>
<dd>
<p>
仮想プロセッサ・アーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">引数</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
例えばkvmに渡される任意の引数：</p>
<div class="paragraph">
<p>args: -no-reboot -smbios<em>type=0,vendor=FOO</em></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションはエキスパート専用です。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">audio0</span>:<span class="monospaced">device=&lt;ich9-intel-hda|intel-hda|AC97&gt; [,driver=&lt;spice|none&gt;</span>].</dt>
<dd>
<p>
QXL/Spiceと組み合わせると便利です。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">device=&lt;AC97</span><span class="monospaced">| ich9-intel-hda | intel-hda&gt; です</span>。</dt>
<dd>
<p>
オーディオデバイスを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">driver=&lt;none</span><span class="monospaced">| spice&gt;</span><em>(デフォルト =</em> <span class="monospaced">spice</span>)</dt>
<dd>
<p>
オーディオデバイスのドライババックエンド。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">autostart</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視されています）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">バルーン</span>:<span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
VM のターゲット RAM の量 (MiB 単位)。ゼロを使用すると、バロンドライバが無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bios</span>:<span class="monospaced">&lt;ovmf | seabios&gt;</span><em>(デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOSの実装を選択します。</p>
</dd>
<dt class="hdlist1">
を<span class="monospaced">起動</span>します：<span class="monospaced">[[legacy=]&lt;[acdn]{1,4}&gt;]ブート: [,order=&lt;デバイス[;デバイス...]&gt;]]。</span>
</dt>
<dd>
<p>
ゲストの起動順序を指定します。<em>order=</em>サブプロパティを使用してください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">legacy=</span><span class="monospaced">&lt;[acdn]{1,4}&gt;</span><em>(デフォルト =</em> <span class="monospaced">cdn</span>)</dt>
<dd>
<p>
フロッピー(a)、ハードディスク(c)、CD-ROM(d)、ネットワーク(n)で起動。非推奨。代わりに<em>order=</em>を使ってください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">order=&lt;デバイス</span><span class="monospaced">[;デバイス...]&gt;</span>です。</dt>
<dd>
<p>
ゲストは、ここに表示されている順番でデバイスからの起動を試みます。</p>
<div class="paragraph">
<p>ディスク、光学ドライブ、パススルー・ストレージ USBデバイスは直接起動し、NICはPXEをロードし、PCIeデバイスはディスクのように動作するか（NVMeなど）、オプションROMをロードします（RAIDコントローラ、ハードウェアNICなど）。</p></div>
<div class="paragraph">
<p>このリストにあるデバイスだけがブート可能としてマークされ、ゲストファームウェア (BIOS/UEFI) によってロードされることに注意してください。ブートに複数のディスクが必要な場合 (例: ソフトウェアレイド)、ここで全てのディスクを指定する必要があります。</p></div>
<div class="paragraph">
<p>指定された場合、非推奨の<em>legacy=[acdn]*</em>値を上書きします。</p></div>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">bootdisk</span>:<span class="monospaced">(ide|sata|scsi|virtio) \d+.</span></dt>
<dd>
<p>
指定したディスクからの起動を有効にします。非推奨：代わりに<em>boot: order=foo;bar</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">CDROM</span>:<span class="monospaced">&lt;ボリューム</span></dt>
<dd>
<p>
これは -ide2 オプションのエイリアスです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">カスタム</span>[<span class="monospaced">meta=&lt;volume&gt;] [,network=&lt;volume&gt;] [,user=&lt;volume&gt;] [,vendor=&lt;volume&gt;</span>] です。</dt>
<dd>
<p>
cloud-init：開始時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">meta</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
cloud-init経由でVMに渡されるすべてのメタデータを含むカスタムファイルを指定します。これはプロバイダ固有で、configdrive2とnocloudは異なります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネットワーク</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
すべてのネットワークデータを含むカスタムファイルをcloud-init経由でVMに渡す場合。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ユーザー</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
すべてのユーザーデータを含むカスタムファイルをcloud-init経由でVMに渡す場合。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダー</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
すべてのベンダーデータを含むカスタムファイルをcloud-init経由でVMに渡すには。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cipassword</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：ユーザーに割り当てるパスワード。一般的に、これを使うことは推奨されません。代わりに ssh 鍵を使います。また、古いバージョンの cloud-init はハッシュ化されたパスワードをサポートしていないことに注意しましょう。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">citype</span>:<span class="monospaced">&lt;configdrive2 | nocloud | opennebula&gt;</span>です。</dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは、設定されているオペレーティングシステムの種類<span class="monospaced">（ostype</span>.Linuxでは<span class="monospaced">nocloud</span>形式、Windowsでは<span class="monospaced">configdrive2を</span>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciupgrade</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 最初の起動後にパッケージの自動アップグレードを行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciuser</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：イメージに設定されているデフォルトユーザーの代わりに、sshキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">core</span>:<span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpu</span>:<span class="monospaced">[[cputype=]&lt;string&gt;] ]</span>。<span class="monospaced">[,flags=&lt;+FLAG[;-FLAG...]&gt;] [,hidden=&lt;1|0&gt;] [,hv-vendorid=&lt;vendor-id&gt;] [,phys-bits=&lt;vendor-id&gt;] [[cputype=]&lt;string[,hidden=&lt;1|0&gt;] [,hv-vendor-id=&lt;vendor-id&gt;] [,phys-bits=&lt;8-64|host&gt;] [,reported-model=&lt;enum&gt;</span>]。</dt>
<dd>
<p>
エミュレートされたCPUタイプ。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">cputype=&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">kvm64</span>)</dt>
<dd>
<p>
エミュレートされたCPUタイプ。デフォルトまたはカスタム名（カスタムモデル名の前に<em>custom-を</em>付ける必要があります）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">flags=&lt;+FLAG</span><span class="monospaced">[;-FLAG...]&gt;</span>です。</dt>
<dd>
<p>
<em>で</em>区切られた追加CPUフラグのリスト。フラグを有効にするには<em>+FLAG を</em>、無効にするには<em>-FLAG を</em>使用します。カスタム CPU モデルは、QEMU/KVM でサポートされる任意のフラグを指定できます。VM 固有のフラグは、セキュリティ上の理由から以下のセットから選択する必要があります: pcid、spec-ctrl、ibpb、ssbd、virt-ssbd、amd-ssbd、amd-no-ssb、pdpe1gb、md-clear、hv-tlbflush、hv-evmcs、aes</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hidden=</span><span class="monospaced">&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">0）</span></dt>
<dd>
<p>
KVM仮想マシンとして識別しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hv-vendor-id=&lt;ベンダー</span><span class="monospaced">ID</span><span class="monospaced">&gt;です。</span></dt>
<dd>
<p>
Hyper-VのベンダーID。Windows ゲスト内の一部のドライバーまたはプログラムには、特定の ID が必要です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">phys-bits=&lt;8</span><span class="monospaced">-</span><span class="monospaced">64|host&gt;です。</span></dt>
<dd>
<p>
ゲスト OS に報告される物理メモリアドレスビット。ホストの値より小さいか等しくなければなりません。ホスト CPU の値を使用するには<em>ホストに</em>設定しますが、そうすると他の値を持つ CPU へのライブマイグレーションが壊れることに注意してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">reported-model=&lt;486 | Broadwell | Broadwell-IBRS | Broadwell-noTSX | Broadwell-noTSX-IBRS | Cascadelake-Server | Cascadelake-Server-noTSX | Cascadelake-Server-v2 | Cascadelake-Server-v4 | Cascadelake-Server-v5 | Conroe | Cooperlake | Cooperlake-v2 | EPYC | EPYC-Genoa | EPYC-IBPB | EPYC-Milan | EPYC-Milan-EPYC-Rome｜EPYC-Rome-v2｜EPYC-Rome-v3｜EPYC-Rome-v4｜EPYC-v3｜EPYC-v4｜GraniteRapids｜Haswell｜Haswell-IBRS｜Haswell-noTSX｜Haswell-noTSX-IBRS｜Icelake-Client｜Icelake-Client-noTSX｜Icelake-Server｜Icelake-Server-noTSX｜Icelake-Server-v3｜Icelake-Server-v4｜Icelake-Server-v5｜Icelake-Server-v6｜IvyBridge｜IvyBridge-IBRS｜KnightsMill｜Nehalem｜Nehalem-IBRS｜Opteron_G1｜Opteron_G2｜Opteron_G3｜Opteron_G4｜Opteron_G5｜Penryn｜SandyBridge｜SandyBridge-IBRS｜SapphireRapids｜SapphireRapids-v2｜Skylake-Client｜Skylake-Client-IBRS｜Skylake-Skylake-Client｜Skylake-Client-v4｜Skylake-Server｜Skylake-Server-IBRS｜Skylake-Server-noTSX-IBRS｜Skylake-Server-v4｜Skylake-Server-v5｜Westmere｜Westmere-IBRS｜athlon｜core2duo｜coreduo｜host｜kvm32｜kvm64｜max｜pentium｜pentium2｜pentium3｜phenom｜qemu32｜qemu64＞。</span><em>(デフォルト =</em> <span class="monospaced">kvm64</span>)</dt>
<dd>
<p>
ゲストに報告する CPU モデルとベンダー。QEMU/KVM がサポートするモデルである必要があります。カスタム CPU モデル定義に対してのみ有効で、デフォルトモデルは常にゲスト OS に自分自身を報告します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpulimit</span>:<span class="monospaced">&lt;数値&gt; (0 - 128)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2つの</em>CPU時間を持ちます。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpuunits</span>:<span class="monospaced">&lt;整数&gt; (1 - 262144)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VMのCPUウェイト。引数はカーネルのフェア・スケジューラで使用されます。この数値が大きいほど、このVMはより多くのCPU時間を得ます。数値は、他のすべての実行中のVMのウェイトに対する相対値です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">説明</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の説明。WebインターフェイスのVMのサマリーに表示されます。コンフィギュレーション・ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">efidisk0</span>:<span class="monospaced">[file=]&lt;volume&gt; [,efitype=&lt;2m|4m&gt;] [,format=&lt;enum&gt;] [,pre-enrolled-keys=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;</span>].</dt>
<dd>
<p>
EFIバーを保存するディスクを設定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">efitype=&lt;2m</span><span class="monospaced">| 4m&gt;</span><em>(デフォルト =</em> <span class="monospaced">2m</span>)</dt>
<dd>
<p>
OVMF EFIバーのサイズとタイプ。<em>4mが</em>新しく推奨され、セキュアブートには必須です。後方互換性のため、特に指定がない場合は<em>2mが</em>使用されます。arch=aarch64（ARM）のVMでは無視されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">format=&lt;cloop</span><span class="monospaced">｜cow｜qcow｜qcow2｜qed｜raw｜vmdk&gt;。</span></dt>
<dd>
<p>
ドライブのバックアップ・ファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pre-</span><span class="monospaced">enrolled</span><span class="monospaced">-keys=&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">0）</span></dt>
<dd>
<p>
<em>efitype=4m</em> とともに使用する場合は、ディストリビューション固有および Microsoft Standard キーが登録された am EFI vars テンプレートを使用します。この場合、デフォルトでセキュアブートが有効になりますが、VM 内からオフにすることも可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ディスクサイズ。これは単なる情報提供であり、何の効果もありません。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">freeze</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
起動時にCPUをフリーズ（<em>c</em>monitorコマンドで実行開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フックスクリプト</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
vmsのライフタイムの様々なステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hostpci[n]：</span> <span class="monospaced">[[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;] [,deviceid=&lt;hex id&gt;] [,legacy-igd=&lt;1|0&gt;] [,mapping=&lt;mapping-id[,device-id=&lt;hex id&gt;] [,legacy-igd=&lt;1|0&gt;] [,mapping=&lt;mapping-id&gt;] [,mdev=&lt;string&gt;] [,pcie=&lt;1|0&gt;] [,rombar=&lt;1|0&gt; ] [,romfile=&lt;string&gt;] [,sub-devpci[n] [,romfile=&lt;string&gt;] [,sub-device-id=&lt;hex id&gt;] [,sub-vendor-id=&lt;hex id&gt;] [,vendor-id=&lt;hex id&gt;] [,x-vga=&lt;1|0&gt;</span>] となります。</dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションは、ホストハードウェアへの直接アクセスを可能にします。そのため、このようなマシンの移行はもはや不可能です。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKdUlEQVRoge1Ze1AV1x3+zt279wEi
DWCYGzRVktqa1MEmmtbWR22ncXxUrTDWV/5IqG2wUAUfmUwSkk6V+EAJCEQC6figwZBqZtRxqukf
tebRZBpFG1S0hiRErwiaKK977+6eX//YPXt37+UiIJlMZnpmdnb33PP4vt97z2VEhG9yc3zdAO60
/Z/A192+8QScX8Wifr+fWltbzffU1FT4fD72Vew15ASampqovr4eBw8eNPvGjRuHzMxMmj9//tCT
IKIhu958801yuVwEoNdr48aNNJT7EdHQEdi/fz/JshwTvLiKioqGlMSQLFJfX0+MMRvQsWNSqXLz
H2jez78fRWLTpk1DRuKOF6irqyOn02kDOP8XGdTz+VFSP91Hatu79NRvZ0SR2LJly5CQuKPJtbW1
JEmSDdivHp1AwctHSblYSsqFElLOF5PavIvWZU+LIrF169Y7JjHoibt3744CnzXrIQpeOUbKhVJS
mkpIPV9MyrnNpJwtIuVSNa15/MdRJLZt23ZHJBjRwIu5N954gxYvXgzOudm3aO5E1L5SBNZ1Hoxr
INLAyH6HJxVP/WkXtu9+37ZeSUkJVq9ePagQO+BMXFNTEwV+ybxHsPeVIjg6zwOkgSWNhuOuUUBC
KhxJY0AggDSgpwWbn1mO1csftq1ZUFCA0tLSQZXFA0pkVVVVlJOTA6vWsmY9hF07N0AS4OU48LgR
WLO+FPFxboxMS8G5hlPYmPMI4jwM1P0Jtj67DJyrKHvtNADdjPPz8+FwOCgvL29gmuivrVVUVESF
yqxZD1PoyjFSL+7QHbapmJTml+n9EzVRtl676ZekNKwl5VQ+KSfzKHR2E+UutodYxhiVl5cPyCf6
ZUJlZWWUm5trk/wTi6bgtVdf1M2Gq2DEwUgDNBWhUDBqjfSRwwGoIOEP3c3Y/uxirFw0zibMvLw8
VFZW9tucbkugoqKCVq1aZQO/YslUVJU+D9bVBIDroLgK4hygEDweybYGY8AD6d8yftfASL+j+2O8
9NwiPJk51kYiNzcXO3fu7BeJPgkUFxdTbm6ure/JZdNRub0QrOMcGFcBrgLgAHEAGqD2ID7OZZsz
Ji0RcR6HAV4DkaqPJxXouoSywkz8buF9NhIrV65EVVXVbUnEJHDixAlat26drS9n+U+xo/hZMMNh
yZA+uAbAIKOGMCJlmG3eA/clAYaJEamGBlRdC6QBXZewo3AhVswfbSORk5ODDz/8sE8SvRLw+/1U
XV0dBb5MgOe6LUNIEqpOwgCUlOCESw4HuAfG3KX7B2kAGaTJ0Jro77yI8ucX4DfzRtlIHD58GH6/
PyaJXgk0NjZi79695vuUiffrkr91Vt8cHAwc4FZJGiZEKqDcwsi0ZHP+d749POy8MS7iGtBxARWF
8/CDsQnm3BdeeAHWj6N+EYhspSVbgI5zYYkZGmAwzIEbwA0tUM9NfO+7aeb89HuGRQBWLcSNZxj3
zvOYMzk5NpjBEHi99mXD5lXdjqGDJh42h7CEOXhnK3448X5z/shUb1jSpIEM8yFuzOUcjAsNcnR0
KXdG4MEHH8TEiRPN9z0H3sfRE41m+GNcs9i0LjkGTTcrUoGem5g7/V5z/ohElw4O+jxGYQ3qJqmB
jN/+cbINtcfCJvPYY4+hr3qtVwI+n49lZmaa71fbbuH3hX/FycbPQKSCoIIMQEQcehjVo5Gw8/F3
3cSvH03H2HuHY1icQzcvYWKGIMiITMwQwjtnruPpqk9w/ZZq7p2RkYEJEyaAYrCIWY36/X7KyMhA
W1ub2XfP3Qmo3ZKFaQ+P0gmYIdSoOkU4lWSwxGRAdqHL/xm86k27w0blAw3/PncD6yo/xrsfdZj7
paSkoLGxESNGjAgDZsxWK8X0AZ/Px44fP460tLAzXrnWgUX5r+PYuxf1mG/Gf80sofWy2YuWbg/+
uONtPLHhPRw+0WIHL8hbwG95rcUGPiEhAYcOHUJSUhI456YZRWqiz+8BIqLm5mZMmjQJN27cMPsT
E9zYtWE25k4bYzh3mABIBRwOHPgPx+LH/6yDiXPi6pHZcEpk+I5qmtGpCzdQecCPPUevmevLsowj
R45gypQpcDgc5mVowKaJmBoQTEePHo2GhgaMGxcuum52BLHsqUOoP3oWgLB9Sz7QgpgxJoThw/SS
IutnaXBKZEpcgD998Uvs+3ubDbzT6URNTQ0mTZoEVVWhaRo459A0TeCy4etVA+JH8RvnHK2trZgz
Zw5Onz5tjnPJDrxSOAPLZt1nSVIqwDmIVJw6dx1nLt3A3J/cjZThkhE29cvf3o2KA59ja91lcz3G
GDZv3oylS5fC7XbD6XTC6XRCkiRIktS7Jm5HQLDXNA3Xr19HVlYWPvjgA4vEGLav+RHmTxsJX4rb
8AsO4kbOIG6GzTD4HvzlmB/PVH9q2zc/Px/Z2dnwer1wu92QZRkulwuSJEGWZZMEY8wkEGVCVvCC
AOcciqIgPj4e+/btw9SpU83xqkpYteU9HHm7Bf62rnC2RjikisTFSMPV9m4ceucannvVDn7p0qVY
uHAhgsEggsEgQqFQlAlZnVm0PjOxIKFpGogIqqrC5XKhuroa06dPt4wDcl78F+qPNeNKe6cRoTjs
ZYOKK+3dON7wBQrKm2H5pMbMmTOxZMkSBAIB9PT0oKenB4FAAIqiQFEUU4hRRyq3I2AlIZ4553A6
nSgvL8fs2bNtY9eVNaDub58YmhDZWpe+v70bJ5tu4clt/4WihqU4efJkrFixAkRkAg4Gg1AUBaqq
muDF/pGtX7WQNXeIZ0mSUFRUhAULFtjGPl3ZiJdev4QrbZ16zUQqrrZ342JLN5ZvaEJ3ICz68ePH
IycnB5qmmZIW4EOhUJTZWEKo+Rx1KsEYY9Zk4XA4IEmSKXnOuRkVJElCYWEhvF4v6urqzDVK9n2M
zu4Qnl5+L9q/7MHltgBWbr9kA5+eno7c3FzIsoyI5GrTeCzgosU8VmGMmSGLiEwSsixH2WNBQQEA
2EhUH/wc7330BaaOH479/2zHtS/CFabP58OaNWvg9Xp1EE4nZFmGLMtwu93wer1wuVy2ECpJko2I
iTNWJrZGI+HEwi6FisUVCAQQCASwZ88eVFZW9lk9JicnY/369fD5fPB4PCbo+Ph4k4TH44HL5YLX
64XX6zXH9EKE9aUBRkTEGLNJP1Kd4nI4HMjOzkZ8fDyKi4ttJ3eiJSYmYu3atRg1apQJzuv1wuPx
wOPxwOFwmEBFHnA6nXC5XGYSiywlbns2SnoDANN0hMNZnS0UCpkaOnPmDN566y20tLSY2ktLS8OM
GTOQkpICt9uNuLg4M2EJ8CJZSZJkZmFBwkrAWpH2+3BXEBEkRIhTVdVMOCL5qKqKy5cvQ1EUaJoG
VVWRnKx/Jlpt3eVy2QCKu9C68AFr9o0spwd0Oh1ZYggCIlNaiQktiXdhZgKQABcp3ci7LMtM7B0J
fsAErJoAYItG1mdr+hfvVlACtHDIXkploYXbHvQOikDEe6/ZmjFmAhf9ZvJxOk2Qol88W4kYz32S
GNQfHLG+TyMTkAVEr88xQfVnkBg7GAKixSIykDYQsL21/wFkW/B5QqT9lwAAAABJRU5ErkJggg==" />
</td>
<td class="content">実験的！このオプションに関する問題が報告されました。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">デバイスID=&lt;16進数</span><span class="monospaced">ID</span></dt>
<dd>
<p>
ゲストから見えるPCIデバイスIDを上書き</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">host=&lt;HOSTPCIID</span><span class="monospaced">[;HOSTPCIID2...]&gt;</span>です。</dt>
<dd>
<p>
ホストPCIデバイス・パススルー。ホストのPCIデバイスのPCI ID、またはホストのPCI仮想ファンクションのリスト。HOSTPCIID の構文は次のとおりです：</p>
<div class="paragraph">
<p><em>bus:dev.func</em>(16進数)</p></div>
<div class="paragraph">
<p><em>lspci</em>コマンドを使用すると、既存の PCI デバイスを一覧表示できます。</p></div>
<div class="paragraph">
<p>このキーまたは<em>マッピング・</em>キーのどちらかを設定する必要があります。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">legacy</span><span class="monospaced">-</span><span class="monospaced">igd=&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">0）</span></dt>
<dd>
<p>
このデバイスをレガシーIGDモードで渡すと、VMのプライマリで排他的なグラフィックデバイスになります。<em>pc-i440fx</em>マシンタイプとVGAが<em>noneに</em>設定されている必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">マッピング</span><span class="monospaced">=&lt;マッピングID</span></dt>
<dd>
<p>
クラスタ全体のマッピングのID。このホストかdefault-key<em>ホストの</em>どちらかを設定する必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mdev</span><span class="monospaced">=&lt;文字列</span></dt>
<dd>
<p>
このタイプのインスタンスはVMの起動時に作成され、VMの停止時にクリーンアップされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pcie=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
PCI-expressバスを選択してください（<em>q35</em>マシンモデルが必要です）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rombar=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
デバイスの ROM をゲストのメモリーマップに表示するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">romfile</span><span class="monospaced">=&lt;文字列</span></dt>
<dd>
<p>
カスタム pci デバイス rom ファイル名 (/usr/share/kvm/ にある必要があります)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サブデバイスID=&lt;16進数</span><span class="monospaced">ID</span></dt>
<dd>
<p>
ゲストから見えるPCIサブシステムのデバイスIDを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サブベンダーID=&lt;16進数</span><span class="monospaced">ID</span></dt>
<dd>
<p>
ゲストから見えるPCIサブシステムのベンダーIDを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダーID=&lt;16進数</span><span class="monospaced">ID</span></dt>
<dd>
<p>
ゲストに見えるPCIベンダーIDの上書き</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">x-vga=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
vfio-vgaデバイスのサポートを有効にします。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">hotplug</span>:<span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">ネットワーク,ディスク,USB</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効にします。これはカンマ区切りのホットプラグ機能のリストです：<em>ネットワーク</em>、<em>ディスク</em>、<em>CPU</em>、<em>メモリ</em>、<em>USB</em>、<em>cloudinit</em>。ホットプラグを完全に無効にするには<em>0を</em>使用します。値として<em>1 を</em>使用すると、デフォルトの<span class="monospaced">network、disk、usb</span> のエイリアスになります。USB ホットプラグは、マシンのバージョンが &gt;= 7.1 で、ostype l26 または Windows &gt; 7 のゲストで可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hugepages</span>:<span class="monospaced">&lt;1024 | 2 | any&gt;</span>.</dt>
<dd>
<p>
hugepagesメモリの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ide[n]</span>：<span class="monospaced">[ファイル=]&lt;ボリューム&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,model=&lt;model&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt; ] [,size=&lt;Disk] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>]。</dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用します（nは0～3）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&lt;io_uring</span><span class="monospaced">｜ネイティブ｜スレッド&gt;。</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&lt;bps&gt;</span></dt>
<dd>
<p>
最大r/w速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&lt;bps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&lt;bps&gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&lt;directsync</span><span class="monospaced">| none | unsafe | writeback | writethrough&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
ドライブのキャッシュ・モード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cys</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のシリンダ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">detect_</span><span class="monospaced">zeroes</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ゼロの書き込みを検出し、最適化を試みるかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&lt;無視</span><span class="monospaced">｜オン</span></dt>
<dd>
<p>
破棄/トリム要求を基礎となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">format=&lt;cloop</span><span class="monospaced">｜cow｜qcow｜qcow2｜qed｜raw｜vmdk&gt;。</span></dt>
<dd>
<p>
ドライブのバックアップ・ファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">heads</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリが特定のヘッド数を持つように強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&lt;iops&gt;</span></dt>
<dd>
<p>
最大r/w I/O（オペレーション毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&lt;iops&gt;</span></dt>
<dd>
<p>
スロットルされていないr/w I/Oプールの最大オペレーション/秒。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&lt;iops&gt;</span></dt>
<dd>
<p>
1秒あたりの最大読み取りI/O。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルされていない最大読み取りI/Oプール（1秒あたりの処理数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_</span><span class="monospaced">wr</span><span class="monospaced">=&lt;アイオプス&gt;。</span></dt>
<dd>
<p>
最大書き込みI/O（オペレーション/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みI/Oプール（1秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大R/W速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大スロットルなしR/Wプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルのない最大読み取りプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&lt;cdrom</span><span class="monospaced">| disk&gt;</span><em>(デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディア・タイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">model</span><span class="monospaced">=&lt;モデル</span></dt>
<dd>
<p>
ドライブのモデル名（URLエンコード、最大40バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ドライブをレプリケーション・ジョブの対象とするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&lt;ignore</span><span class="monospaced">| report | stop&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りエラー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">secs</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のセクタ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル=</span><span class="monospaced">&lt;シリアル</span></dt>
<dd>
<p>
報告されたドライブのシリアル・ナンバー（URLエンコード、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、ボリュームを自動的に共有しません！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ディスクサイズ。これは単なる情報提供であり、何の効果もありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">snapshot=&lt;boolean&gt;</span></dt>
<dd>
<p>
qemu のスナップショットモード機能を制御します。有効な場合、ディスクに加えられた変更は一時的なもので、VM がシャットダウンされると破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ssd=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
このドライブを回転式ハードディスクではなくSSDとして公開するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trans=&lt;自動</span><span class="monospaced">| lba | なし&gt;。</span></dt>
<dd>
<p>
強制ディスクジオメトリバイオス変換モード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&lt;enospc</span><span class="monospaced">｜無視｜報告｜停止&gt;。</span></dt>
<dd>
<p>
書き込みエラーアクション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">wwn=&lt;wwn&gt;</span></dt>
<dd>
<p>
16バイトの16進文字列としてエンコードされたドライブのワールドワイド名で、先頭に<em>0xが</em>付きます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ipconfig[n]</span>：[<span class="monospaced">gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,ip=&lt;IPv4Format/CIDR&gt;] [,ip6=&lt;IPv6Format/CIDR&gt;</span>] となります。</dt>
<dd>
<p>
cloud-init：対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>特別な文字列<em>dhcpは</em>、DHCPを使用するIPアドレスに使用することができ、その場合、明示的なゲートウェイを提供する必要はありません。 IPv6の場合、特別な文字列<em>autoは</em>、ステートレス自動設定を使用するために使用することができます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-initが有効で、IPv4アドレスもIPv6アドレスも指定されていない場合、デフォルトでIPv4のdhcpを使用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">gw=&lt;ゲートウェイ</span><span class="monospaced">IPv</span><span class="monospaced">4</span></dt>
<dd>
<p>
IPv4トラフィックのデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">ip</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw</span><span class="monospaced">6=&lt;ゲートウェイIPv6</span></dt>
<dd>
<p>
IPv6トラフィックのデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション:<span class="monospaced">ip6</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=&lt;IPv4Format/CIDR&gt;</span><em>(デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=&lt;IPv6Format/CIDR&gt;</span><em>(デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ivshmem</span>:<span class="monospaced">size=&lt;整数&gt; [,name=&lt;文字列&gt;</span>] です。</dt>
<dd>
<p>
VM間共有メモリ。VM間やホストとの直接通信に便利。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">name</span><span class="monospaced">=&lt;文字列</span></dt>
<dd>
<p>
ファイル名。先頭に<em>pve-shm-</em> が付きます。デフォルトは VMID です。VM の停止時に削除されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&lt;integer&gt;</span><span class="monospaced">(1 - N</span>)</dt>
<dd>
<p>
MB単位のファイルサイズ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">keephugepages</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepagesと一緒に使用します。有効にすると、hugepagesはVMシャットダウン後も削除されず、その後の起動に使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キーボード</span>:<span class="monospaced">&lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&gt;</span>.</dt>
<dd>
<p>
VNC サーバーのキーボードレイアウト。このオプションは一般的には必要なく、ゲストOS内で処理した方が良い場合が多いです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">kvm</span>:<span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効/無効を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">localtime</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）をローカルタイムに設定します。<span class="monospaced">ostypeが</span>Microsoft Windows OSの場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">lock</span>:<span class="monospaced">&lt;バックアップ|クローン|作成|マイグレーション|ロールバック|スナップショット|スナップショット削除|中断|サスペンド&gt;。</span></dt>
<dd>
<p>
VMをロック/アンロックします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">マシン</span> <span class="monospaced">[[タイプ=]&lt;マシンタイプ&gt;]][viommu=&lt;intel|virtio&gt;</span>]です。</dt>
<dd>
<p>
QEMUマシンを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">type=&lt;マシン</span><span class="monospaced">タイプ</span></dt>
<dd>
<p>
QEMUのマシンタイプを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">viommu=&lt;intel</span><span class="monospaced">| virtio&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
ゲストの vIOMMU バリアントを有効にして設定します (Intel vIOMMU はマシンタイプとして q35 を設定する必要があります)。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">メモリを</span>使用します：<span class="monospaced">[カレント=]&lt;整数</span></dt>
<dd>
<p>
メモリ特性。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">current=&lt;integer&gt;</span><span class="monospaced">(16 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
VM の現在のオンライン RAM 量 (MiB 単位)。これは、バルーン デバイスを使用する際に使用可能な最大メモリです。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">migrate_downtime</span>:<span class="monospaced">&lt;数値&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
マイグレーションの最大許容ダウンタイム（秒）を設定します。新しく汚れたRAMを転送する必要があるため、マイグレーションが最後まで収束しない場合、マイグレーションが収束するまで、この上限は自動的に段階的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">migrate_speed</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
マイグレーションの最大速度（MB/s）を設定します。値 0 は制限なしです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">name</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の名前を設定します。コンフィギュレーションWebインターフェイスでのみ使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネームサーバー</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナの DNS サーバー IP アドレスを設定します。searchdomain も nameserver も設定されていない場合、Create は自動的にホストからの設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">net[n]</span>：<span class="monospaced">[model=]&lt;enum&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,link_down=&lt;1|0&gt;] [,macaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,mtu=&lt;integer&gt;] [,queues=&lt;integer&gt;] [,rate=&lt;number&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr</span></dt>
<dd>
<p>
ネットワーク機器を指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ブリッジ</span></dt>
<dd>
<p>
ネットワークデバイスを接続するブリッジ。Proxmox VE標準ブリッジは<em>vmbr0と</em>呼ばれます。</p>
<div class="paragraph">
<p>ブリッジを指定しない場合は、DHCPとDNSサービスを提供するkvmユーザー（NAT）ネットワークデバイスを作成します。以下のアドレスが使用されます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>10.0.2.2 ゲートウェイ 10.0.2.3 DNSサーバ 10.0.2.4 SMBサーバ</pre>
</div></div>
<div class="paragraph">
<p>DHCPサーバーは、10.0.2.15から始まるアドレスをゲストに割り当てます。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">firewall=&lt;boolean&gt;</span></dt>
<dd>
<p>
このインターフェイスをファイアウォールで保護するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">link_</span><span class="monospaced">down</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
このインターフェイスを切断するかどうか（プラグを抜くように）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">macaddr=&lt;XX</span><span class="monospaced">:XX:XX:XX:XX&gt;となります。</span></dt>
<dd>
<p>
I/G（Individual/Group）ビットが設定されていない共通のMACアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">model=&lt;e1000</span><span class="monospaced">｜e1000-82540em｜e1000-82544gc｜e1000-82545em｜e1000e｜i82551｜i82557b｜i82559er｜ne2k_isa｜ne2k_pci｜pcnet｜rtl8139｜virtio｜vmxnet3&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
ネットワークカードモデル。<em>virtio</em>モデルは、非常に低い CPU オーバーヘッドで最高のパフォーマンスを提供します。ゲストがこのドライバをサポートしていない場合、通常は<em>e1000</em> を使用するのが最善です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mtu=&lt;整数&gt;</span><span class="monospaced">(1 - 65520</span>)</dt>
<dd>
<p>
MTUを強制します。ブリッジMTUを使用するには<em>1を</em>設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キュー=&lt;整数&gt;</span><span class="monospaced">(0 - 64</span>)</dt>
<dd>
<p>
デバイスで使用するパケットキューの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rate=&lt;数値&gt;</span><span class="monospaced">(0 - N</span>)</dt>
<dd>
<p>
mbps（メガバイト/秒）単位のレート制限を浮動小数点数で指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ=&lt;整数&gt;</span><span class="monospaced">(1 - 4094</span>)</dt>
<dd>
<p>
このインターフェイスのパケットに適用するVLANタグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trunks=&lt;vlanid</span><span class="monospaced">[;vlanid...]&gt;</span>です。</dt>
<dd>
<p>
このインターフェイスを通過する VLAN トランク。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">numa</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">numa[n]</span>:<span class="monospaced">cpus=&lt;id[-id];...&gt; [,hostnodes=&lt;id[-id];...&gt;] [,policy=&lt;</span>優先|バインド|インターリーブ&gt;]<span class="monospaced">[,policy</span>=&lt;優先|バインド<span class="monospaced">|</span>インターリーブ<span class="monospaced">[,メモリ=&lt;数&gt;] [,ポリシー=&lt;preferred|bind|interleave&gt;</span>]。</dt>
<dd>
<p>
NUMAトポロジー。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">cpus=&lt;id</span><span class="monospaced">[-id];...&gt;</span>です。</dt>
<dd>
<p>
このNUMAノードにアクセスするCPU。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hostnodes=&lt;id</span><span class="monospaced">[-id];...&gt;</span><span class="monospaced">です</span>。</dt>
<dd>
<p>
使用するホストNUMAノード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">メモリ</span><span class="monospaced">=&lt;数字</span></dt>
<dd>
<p>
このNUMAノードが提供するメモリ量。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy=&lt;バインド</span><span class="monospaced">｜インターリーブ｜プリファード&gt;。</span></dt>
<dd>
<p>
NUMA割り当てポリシー。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">onboot</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時に VM を起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ostype</span>:<span class="monospaced">&lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&gt;</span>.</dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。これは、特定のオペレーティングシステム用の特別な最適化/機能を有効にするために使用されます：</p>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
その他<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
不特定OS</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ダブルエックスピー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows XP</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ダブリューツーケー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 2000</p>
</td>
</tr>
<tr>
<td class="hdlist1">
w2k3<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 2003</p>
</td>
</tr>
<tr>
<td class="hdlist1">
w2k8<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 2008</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ウエビスタ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows Vista</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ウインセブン<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 7</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ウインエイト<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 8/2012/2012r2</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ウインテン<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 10/2016/2019</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ウィンナップ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マイクロソフト Windows 11/2022/2025</p>
</td>
</tr>
<tr>
<td class="hdlist1">
l24<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Linux 2.4 カーネル</p>
</td>
</tr>
<tr>
<td class="hdlist1">
l26<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Linux 2.6 - 6.X カーネル</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ソラリス<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Solaris/OpenSolaris/OpenIndian カーネル</p>
</td>
</tr>
</table></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">parallel[n]：</span>/<span class="monospaced">dev/parportd+|/dev/usb/lpd+</span></dt>
<dd>
<p>
ホスト・パラレル・デバイスをマップします（nは0～2）。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションは、ホストハードウェアへの直接アクセスを可能にします。そのため、このようなマシンのマイグレーションはもはや不可能です。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">実験的！このオプションに関する問題が報告されました。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VM の保護フラグを設定します。これにより、VM の削除とディスクの削除操作が無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">reboot</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可。<em>0</em>に設定すると、VM は再起動時に終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rng0</span>:<span class="monospaced">[source=]&lt;/dev/urandom|/dev/random|/dev/hwrng&gt; [,max_bytes=&lt;integer&gt;] [,period=&lt;integer&gt;</span>] です。</dt>
<dd>
<p>
VirtIO ベースの乱数ジェネレータを設定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">max</span><span class="monospaced">_bytes=&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">1024</span>)</dt>
<dd>
<p>
<em>ミリ</em>秒ごとにゲストに注入されるエントロピーの最大バイト数。ソースとして<em>/dev/random を</em>使用する場合は低い値を推奨します。制限を無効にするには<span class="monospaced">0 を</span>使用します (潜在的に危険です!)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">period=&lt;integer&gt;</span><em>(デフォルト=</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
<em>周期</em>ミリ秒ごとにエントロピー注入クォータがリセットされ、ゲストは別の<em>max_bytes</em>のエントロピーを取得できるようになります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">source=&lt;/dev/hwrng</span><span class="monospaced">｜/dev/random｜/dev/urandom&gt;。</span></dt>
<dd>
<p>
エントロピーを収集するホスト上のファイル。ほとんどの場合、ホスト上のエントロピー枯渇の問題を避けるために<em>/dev/random</em>よりも<em>/dev/urandom を</em>優先すべきです。urandomを使用しても、実際のエントロピーのシードであることに変わりはなく、提供されるバイトはゲスト上でも実際のエントロピーと混合される可能性が高いため、意味のある方法でセキュリティを低下させる<strong>ことは</strong>ありません。/<em>dev/hwrng</em>は、ホストからハードウェア RNG を渡すために使用できます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">sata[n]</span>：<span class="monospaced">[ファイル=]&lt;ボリューム&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;秒&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>]。</dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用します（nは0～5）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&lt;io_uring</span><span class="monospaced">｜ネイティブ｜スレッド&gt;。</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&lt;bps&gt;</span></dt>
<dd>
<p>
最大r/w速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&lt;bps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&lt;bps&gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&lt;directsync</span><span class="monospaced">| none | unsafe | writeback | writethrough&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
ドライブのキャッシュ・モード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cys</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のシリンダ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">detect_</span><span class="monospaced">zeroes</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ゼロの書き込みを検出し、最適化を試みるかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&lt;無視</span><span class="monospaced">｜オン</span></dt>
<dd>
<p>
破棄/トリム要求を基礎となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">format=&lt;cloop</span><span class="monospaced">｜cow｜qcow｜qcow2｜qed｜raw｜vmdk&gt;。</span></dt>
<dd>
<p>
ドライブのバックアップ・ファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">heads</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリが特定のヘッド数を持つように強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&lt;iops&gt;</span></dt>
<dd>
<p>
最大r/w I/O（オペレーション毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&lt;iops&gt;</span></dt>
<dd>
<p>
スロットルされていないr/w I/Oプールの最大オペレーション/秒。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&lt;iops&gt;</span></dt>
<dd>
<p>
1秒あたりの最大読み取りI/O。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大読み取りI/Oプール（1秒あたりの処理数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_</span><span class="monospaced">wr</span><span class="monospaced">=&lt;アイオプス&gt;。</span></dt>
<dd>
<p>
最大書き込みI/O（オペレーション/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みI/Oプール（1秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大R/W速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大スロットルなしR/Wプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルのない最大読み取りプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&lt;cdrom</span><span class="monospaced">| disk&gt;</span><em>(デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディア・タイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ドライブをレプリケーション・ジョブの対象とするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&lt;ignore</span><span class="monospaced">| report | stop&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りエラー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">secs</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のセクタ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル=</span><span class="monospaced">&lt;シリアル</span></dt>
<dd>
<p>
報告されたドライブのシリアル・ナンバー（URLエンコード、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、ボリュームを自動的に共有しません！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ディスクサイズ。これは単なる情報提供であり、何の効果もありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">snapshot=&lt;boolean&gt;</span></dt>
<dd>
<p>
qemu のスナップショットモード機能を制御します。有効な場合、ディスクに加えられた変更は一時的なもので、VM がシャットダウンされると破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ssd=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
このドライブを回転式ハードディスクではなくSSDとして公開するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trans=&lt;自動</span><span class="monospaced">| lba | なし&gt;。</span></dt>
<dd>
<p>
強制ディスクジオメトリバイオス変換モード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&lt;enospc</span><span class="monospaced">｜無視｜報告｜停止&gt;。</span></dt>
<dd>
<p>
書き込みエラーアクション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">wwn=&lt;wwn&gt;</span></dt>
<dd>
<p>
16バイトの16進文字列としてエンコードされたドライブのワールドワイド名で、先頭に<em>0xが</em>付きます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">scsi[n]</span>：<span class="monospaced">[ファイル=]&lt;ボリューム&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;秒&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt; ]。] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,product=&lt;product&gt;] [,queues=&lt;integer&gt;] [,replicate=&lt;1|0] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,scsiblock=&lt;1|0&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,vendor=&lt;vendor&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用します（nは0～30）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&lt;io_uring</span><span class="monospaced">｜ネイティブ｜スレッド&gt;。</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&lt;bps&gt;</span></dt>
<dd>
<p>
最大r/w速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&lt;bps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&lt;bps&gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&lt;directsync</span><span class="monospaced">| none | unsafe | writeback | writethrough&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
ドライブのキャッシュ・モード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cys</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のシリンダ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">detect_</span><span class="monospaced">zeroes</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ゼロの書き込みを検出し、最適化を試みるかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&lt;無視</span><span class="monospaced">｜オン</span></dt>
<dd>
<p>
破棄/トリム要求を基礎となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">format=&lt;cloop</span><span class="monospaced">｜cow｜qcow｜qcow2｜qed｜raw｜vmdk&gt;。</span></dt>
<dd>
<p>
ドライブのバックアップ・ファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">heads</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリが特定のヘッド数を持つように強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&lt;iops&gt;</span></dt>
<dd>
<p>
最大r/w I/O（オペレーション毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&lt;iops&gt;</span></dt>
<dd>
<p>
スロットルされていないr/w I/Oプールの最大オペレーション/秒。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&lt;iops&gt;</span></dt>
<dd>
<p>
1秒あたりの最大読み取りI/O。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルされていない最大読み取りI/Oプール（1秒あたりの処理数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_</span><span class="monospaced">wr</span><span class="monospaced">=&lt;アイオプス&gt;。</span></dt>
<dd>
<p>
最大書き込みI/O（オペレーション/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みI/Oプール（1秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iothread</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
このドライブにiothreadsを使用するかどうか</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大R/W速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大スロットルなしR/Wプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルのない最大読み取りプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&lt;cdrom</span><span class="monospaced">| disk&gt;</span><em>(デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディア・タイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">product</span><span class="monospaced">=&lt;</span><span class="monospaced">商品</span></dt>
<dd>
<p>
ドライブの製品名（最大16バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キュー=&lt;整数&gt;</span><span class="monospaced">(2 - N</span>)</dt>
<dd>
<p>
キューの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ドライブをレプリケーション・ジョブの対象とするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&lt;ignore</span><span class="monospaced">| report | stop&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りエラー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
ドライブが読み取り専用かどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">scsiblock=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホストブロックデバイスのフルパススルーに scsi-block を使用するかどうか</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ホストのメモリ不足やメモリの断片化が進むと、I/O エラーが発生する可能性があります。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">secs</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のセクタ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル=</span><span class="monospaced">&lt;シリアル</span></dt>
<dd>
<p>
報告されたドライブのシリアル・ナンバー（URLエンコード、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、ボリュームを自動的に共有しません！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ディスクサイズ。これは単なる情報提供であり、何の効果もありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">snapshot=&lt;boolean&gt;</span></dt>
<dd>
<p>
qemu のスナップショットモード機能を制御します。有効な場合、ディスクに加えられた変更は一時的なもので、VM がシャットダウンされると破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ssd=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
このドライブを回転式ハードディスクではなくSSDとして公開するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trans=&lt;自動</span><span class="monospaced">| lba | なし&gt;。</span></dt>
<dd>
<p>
強制ディスクジオメトリバイオス変換モード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダー</span></dt>
<dd>
<p>
ドライブのベンダー名（最大8バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&lt;enospc</span><span class="monospaced">｜無視｜報告｜停止&gt;。</span></dt>
<dd>
<p>
書き込みエラーアクション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">wwn=&lt;wwn&gt;</span></dt>
<dd>
<p>
16バイトの16進文字列としてエンコードされたドライブのワールドワイド名で、先頭に<em>0xが</em>付きます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">scsihw</span>:<span class="monospaced">&lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&gt;</span><em>(デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">searchdomain</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">serial[n]</span>:<span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内部でシリアル・デバイスを作成し（nは0～3）、ホストのシリアル・デバイス（例：/dev/ttyS0）を通すか、ホスト側でunixソケットを作成します（<em>qm terminalを使って</em>ターミナル接続を開きます）。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ホストシリアルデバイスを経由すると、そのようなマシンの移行はできなくなります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">実験的！このオプションに関する問題が報告されました。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">shares</span>:<span class="monospaced">&lt;整数&gt; (0 - 50000)</span><em>(デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
オート・バルーニングのメモリ・シェア量。この数値が大きいほど、このVMはより多くのメモリを取得します。数値は、他のすべての実行中のVMの重みに対する相対値です。ゼロを使用すると、オートバルーニングは無効になります。オートバルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">smbios1</span>：[<span class="monospaced">base64=&lt;1|0&gt;] [,family=&lt;Base64 エンコードされた文字列&gt;] [,manufacturer=&lt;Base64 エンコードされた文字列&gt;] [,product=&lt;Base64 エンコードされた文字列&gt;] [,serial=&lt;Base64 エンコードされた文字列&gt;] [,sku=&lt;Base64 エンコードされた文字列&gt;] [,uuid=&lt;UUID&gt;] [,version=&lt;Base64 エンコードされた文字列&gt;</span>].</dt>
<dd>
<p>
SMBIOSタイプ1のフィールドを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">base</span><span class="monospaced">64=&lt;ブール値</span></dt>
<dd>
<p>
SMBIOSの値がbase64エンコードされていることを示すフラグ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">family=&lt;Base</span><span class="monospaced">64でエンコードされた文字列</span></dt>
<dd>
<p>
SMBIOS1 ファミリ文字列を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">メーカー=&lt;Base64</span><span class="monospaced">エンコード文字列</span></dt>
<dd>
<p>
SMBIOS1 メーカーを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">product=&lt;Base</span><span class="monospaced">64でエンコードされた文字列</span></dt>
<dd>
<p>
SMBIOS1のプロダクトIDを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">serial=&lt;Base</span><span class="monospaced">64でエンコードされた文字列</span></dt>
<dd>
<p>
SMBIOS1のシリアル番号を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sku=&lt;Base</span><span class="monospaced">64でエンコードされた文字列</span></dt>
<dd>
<p>
SMBIOS1 SKU文字列を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">uuid=&lt;UUID&gt;</span></dt>
<dd>
<p>
SMBIOS1 の UUID を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">バージョン=&lt;Base64</span><span class="monospaced">エンコード文字列</span></dt>
<dd>
<p>
SMBIOS1のバージョンを設定します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">smp</span>:<span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPU数。代わりに -sockets オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sockets</span>:<span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">spice_enhancements</span>：[<span class="monospaced">foldersharing=&lt;1|0&gt;] [,videostreaming=&lt;off|all|filter&gt;</span>]。</dt>
<dd>
<p>
SPICE の追加機能拡張を設定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">フォルダ共有=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
SPICE 経由でのフォルダ共有を有効にします。VMにSpice-WebDAVデーモンがインストールされている必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">videostreaming=&lt;all</span><span class="monospaced">| filter | off&gt;</span><em>(デフォルト =</em> <span class="monospaced">off</span>)</dt>
<dd>
<p>
ビデオストリーミングを有効にします。検出されたビデオストリームに圧縮を使用します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">sshkeys</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：公開 SSH 鍵を設定します (1 行に 1 つの鍵、OpenSSH 形式)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">startdate</span>:<span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span><em>(デフォルト =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。有効な日付のフォーマットは'now'または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">を起動</span>します：order=]♪ [,up=♪] [,down=♪ `)</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tablet</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスを有効/無効にします。このデバイスは通常、VNCで絶対的なマウスポジショニングを可能にするために必要です。そうしないと、マウスは通常のVNCクライアントと同期しません。1つのホスト上で多くのコンソールオンリーゲストを実行している場合、コンテキストスイッチを節約するために、これを無効にすることを検討することができます。spice<span class="monospaced">(qm set &lt;vmid&gt; --vga qxl</span>) を使用すると、デフォルトでオフになります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ</span>:<span class="monospaced">&lt;string</span></dt>
<dd>
<p>
VM のタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tdf</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
時間ドリフト修正の有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">テンプレート</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tpmstate0</span>:<span class="monospaced">[file=]&lt;volume&gt; [,size=&lt;DiskSize&gt;] [,version=&lt;v1.2|v2.0&gt;].</span></dt>
<dd>
<p>
TPMの状態を保存するDiskを設定します。フォーマットは<em>raw</em>固定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ディスクサイズ。これは単なる情報提供であり、何の効果もありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">version=&lt;v1</span><span class="monospaced">.2 | v2.0&gt;</span><em>(デフォルト =</em> <span class="monospaced">v1.2</span>)</dt>
<dd>
<p>
TPMインターフェースのバージョン。v2.0の方が新しいので、そちらを優先してください。これは後で変更できないことに注意してください。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">unused[n]</span>です：<span class="monospaced">[ファイル=]&lt;ボリューム</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">usb[n]</span>：<span class="monospaced">[[host=]&lt;HOSTUSBDEVICE|spice&gt;] [,mapping=&lt;mappingid&gt;] [,usb3=&lt;1|0[,mapping=&lt;mapping-id&gt;] [,usb3=&lt;1|0&gt;</span>] となります。</dt>
<dd>
<p>
USBデバイスを設定します（nは0～4、マシンのバージョンが7.1以上、かつostype l26またはwindows &gt; 7の場合、nは最大14まで）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">host=</span><span class="monospaced">&lt;HOSTUSBDEVICE</span><span class="monospaced">|spice&gt;です。</span></dt>
<dd>
<p>
ホスト USB デバイスまたはポート、または値の<em>スパイス</em>。HOSTUSBDEVICE 構文は次のとおりです：</p>
<div class="literalblock">
<div class="content monospaced">
<pre>'bus-port(.port)*'（10進数）または'vendor_id:product_id'（16進数）または'spice'</pre>
</div></div>
<div class="paragraph">
<p><em>lsusb -t</em>コマンドを使えば、既存の usb デバイスをリストアップできます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションは、ホストハードウェアへの直接アクセスを可能にします。そのため、このようなマシンの移行はもはや不可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p><em>spiceの</em>値は、spice用のusbリダイレクトデバイスを追加するために使用できます。</p></div>
<div class="paragraph">
<p>このキーまたは<em>マッピング・</em>キーのどちらかを設定する必要があります。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">マッピング</span><span class="monospaced">=&lt;マッピングID</span></dt>
<dd>
<p>
クラスタ全体のマッピングのID。このホストかdefault-key<em>ホストの</em>どちらかを設定する必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">usb3=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
与えられたホストオプションが USB3 デバイスかポートかを指定します。最近のゲスト (マシンのバージョン &gt;= 7.1 および ostype l26 と Windows &gt; 7) では、このフラグは無関係です (すべてのデバイスは xhci コントローラに接続されています)。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vcpus</span>:<span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされたvcpusの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vga</span>:<span class="monospaced">[[タイプ=]&lt;enum&gt;] ]</span>。<span class="monospaced">[クリップボード=&lt;vnc&gt;] [,メモリ=&lt;整数］</span></dt>
<dd>
<p>
VGAハードウェアを設定します。高解像度モード（&gt;= 1280x1024x16）を使用したい場合は、VGAメモリオプションを増やす必要があるかもしれません。QEMU 2.9以降、デフォルトのVGAディスプレイタイプは、<em>cirrusを</em>使用する一部のWindowsバージョン（XPおよびそれ以前）以外のすべてのOSタイプで<em>標準となって</em>います。<em>qxl</em>オプションは SPICE ディスプレイサーバーを有効にします。また、シリアルデバイスを端末として使用し、グラフィックカードなしで実行することもできます。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">クリップボード=</span><span class="monospaced">&lt;vnc</span></dt>
<dd>
<p>
特定のクリップボードを有効にします。設定されていない場合、ディスプレイの種類に応じて SPICE のものが追加されます。VNCクリップボードとの移行はまだサポートされていません！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">メモリ=&lt;整数&gt;</span><span class="monospaced">(4 - 512</span>)</dt>
<dd>
<p>
VGA メモリ（MiB）を設定します。シリアル表示には影響しません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&lt;cirrus</span><span class="monospaced">| none | qxl | qxl2 | qxl3 | qxl4 | serial0 | serial1 | serial2 | serial3 | std | virtio | virtio-gl | vmware&gt;</span><em>(デフォルト =</em> <span class="monospaced">std</span>)</dt>
<dd>
<p>
VGA タイプを選択します。<em>cirrus</em>タイプの使用はお勧めしません。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">virtio[n]</span>です：<span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;秒&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt; ]。] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームを VIRTIO ハード ディスクとして使用します (n は 0 ～ 15)。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&lt;io_uring</span><span class="monospaced">｜ネイティブ｜スレッド&gt;。</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&lt;bps&gt;</span></dt>
<dd>
<p>
最大r/w速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&lt;bps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&lt;bps&gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&lt;directsync</span><span class="monospaced">| none | unsafe | writeback | writethrough&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
ドライブのキャッシュ・モード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cys</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のシリンダ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">detect_</span><span class="monospaced">zeroes</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ゼロの書き込みを検出し、最適化を試みるかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&lt;無視</span><span class="monospaced">｜オン</span></dt>
<dd>
<p>
破棄/トリム要求を基礎となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
ドライブのバックアップ・ボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">format=&lt;cloop</span><span class="monospaced">｜cow｜qcow｜qcow2｜qed｜raw｜vmdk&gt;。</span></dt>
<dd>
<p>
ドライブのバックアップ・ファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">heads</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリが特定のヘッド数を持つように強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&lt;iops&gt;</span></dt>
<dd>
<p>
最大r/w I/O（オペレーション毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&lt;iops&gt;</span></dt>
<dd>
<p>
スロットルされていないr/w I/Oプールの最大オペレーション/秒。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&lt;iops&gt;</span></dt>
<dd>
<p>
1秒あたりの最大読み取りI/O。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルされていない最大読み取りI/Oプール（1秒あたりの処理数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_</span><span class="monospaced">wr</span><span class="monospaced">=&lt;アイオプス&gt;。</span></dt>
<dd>
<p>
最大書き込みI/O（オペレーション/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&lt;iops&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みI/Oプール（1秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&lt;seconds&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iothread</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
このドライブにiothreadsを使用するかどうか</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大R/W速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大スロットルなしR/Wプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&lt;mbps&gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルのない最大読み取りプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&lt;mbps&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
スロットルなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&lt;cdrom</span><span class="monospaced">| disk&gt;</span><em>(デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディア・タイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ドライブをレプリケーション・ジョブの対象とするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&lt;ignore</span><span class="monospaced">| report | stop&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
読み取りエラー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
ドライブが読み取り専用かどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">secs</span><span class="monospaced">=&lt;整数</span></dt>
<dd>
<p>
ドライブの物理ジオメトリを特定のセクタ数に強制します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル=</span><span class="monospaced">&lt;シリアル</span></dt>
<dd>
<p>
報告されたドライブのシリアル・ナンバー（URLエンコード、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、ボリュームを自動的に共有しません！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ディスクサイズ。これは単なる情報提供であり、何の効果もありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">snapshot=&lt;boolean&gt;</span></dt>
<dd>
<p>
qemu のスナップショットモード機能を制御します。有効な場合、ディスクに加えられた変更は一時的なもので、VM がシャットダウンされると破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trans=&lt;自動</span><span class="monospaced">| lba | なし&gt;。</span></dt>
<dd>
<p>
強制ディスクジオメトリバイオス変換モード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&lt;enospc</span><span class="monospaced">｜無視｜報告｜停止&gt;。</span></dt>
<dd>
<p>
書き込みエラーアクション。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vmgenid</span>:<span class="monospaced">&lt;UUID&gt;</span><em>(デフォルト =</em> <span class="monospaced">1 (自動生成</span>))</dt>
<dd>
<p>
VM generation ID (vmgenid) デバイスは、128 ビットの整数値識別子をゲスト OS に公開します。これにより、仮想マシンが異なるコンフィギュレーション（スナップショットの実行やテンプレートからの作成など）で実行された場合に、ゲストOSに通知することができます。ゲスト OS はこの変更に気付き、分散データベースのコピーをダーティとしてマークしたり、乱数ジェネレーターを再初期化したりするなど、適切に対応することができます。自動作成は、API/CLI の作成または更新メソッドによって実行される場合にのみ機能し、設定ファイルを手動で編集する場合には機能しないことに注意してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vmstatestorage</span>:<span class="monospaced">&lt;ストレージID&gt;。</span></dt>
<dd>
<p>
VM 状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">watchdog</span>:<span class="monospaced">[[model=]&lt;i6300esb|ib700&gt;][アクション］</span></dt>
<dd>
<p>
仮想ハードウェアウォッチドッグデバイスを作成します。いったん (ゲストのアクションによって) 有効になると、ウォッチドッグはゲスト内部のエージェントによって定期的にポーリングされる必要があります。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">action=&lt;debug</span><span class="monospaced">| none | pause | poweroff | reset | shutdown&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
アクティブ化後、ゲストが時間内にウォッチドッグのポーリングに失敗した場合に実行するアクション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">model=&lt;i6300esb</span><span class="monospaced">| ib700&gt;</span><em>(デフォルト =</em> <span class="monospaced">i6300esb</span>)</dt>
<dd>
<p>
エミュレートするウォッチドッグ・タイプ。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_locks">
<span>10.15.ロック</span> <a class="headerlink" href="#_locks" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>オンライン・マイグレーション、スナップショット、およびバックアップ<span class="monospaced">（vzdump</span>）は、影響を受けるVMに対する互換性のない同時アクションを防止するためにロックを設定します。時々、このようなロックを手動で削除する必要があります（電源障害後など）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm unlock &lt;vmid&gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ロックを設定したアクションがもう実行されていないことを確認した場合のみ、この操作を行ってください。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pct">
11.Proxmox コンテナツールキット<a class="headerlink" href="#chapter_pct" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>コンテナは完全に仮想化されたマシン（VM）に代わる軽量なもので、完全なオペレーティング・システム（OS）をエミュレートする代わりに、実行するホスト・システムのカーネルを使用します。つまり、コンテナはホストシステム上のリソースに直接アクセスできます。</p></div>
<div class="paragraph">
<p>コンテナの実行コストは低く、通常は無視できます。しかし、考慮すべき欠点もあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
Proxmoxコンテナで実行できるのはLinuxディストリビューションのみです。例えば、FreeBSDやMicrosoft Windowsのような他のオペレーティングシステムをコンテナ内で実行することはできません。</p>
</li>
<li>
<p>
セキュリティ上の理由から、ホストリソースへのアクセスを制限する必要があります。 そのため、コンテナはそれぞれ別の名前空間で実行されます。さらに、一部のシステムコール（Linuxカーネルに対するユーザー空間の要求）はコンテナ内で許可されていません。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは、基盤となるコンテナ技術として<a href="https://linuxcontainers.org/lxc/introduction/">Linux Containers (LXC)を</a>使用しています。Proxmox Container Toolkit」<span class="monospaced">（pct</span>）は、複雑なタスクを抽象化するインターフェイスを提供することで、LXCの使用と管理を簡素化します。</p></div>
<div class="paragraph">
<p>コンテナはProxmox VEと緊密に統合されています。つまり、コンテナはクラスタのセットアップを認識し、仮想マシンと同じネットワークおよびストレージリソースを使用できます。Proxmox VEのファイアウォールを使用したり、HAフレームワークを使用してコンテナを管理することもできます。</p></div>
<div class="paragraph">
<p>私たちの主な目標は、VMを使用する利点を提供しながら、追加のオーバーヘッドがない環境を提供することです。つまり、Proxmox Containersは "アプリケーションコンテナ "ではなく、"システムコンテナ "に分類されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">アプリケーションコンテナ、例えば<em>Docker</em>イメージを実行する場合は、Proxmox QEMU VM内で実行することをお勧めします。これにより、アプリケーション・コンテナ化のすべての利点が得られるだけでなく、ホストからの強力な分離や、コンテナでは不可能なライブ・マイグレーション機能など、VMが提供する利点も得られます。</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_technology_overview">
<span>11.1.技術概要</span> <a class="headerlink" href="#_technology_overview" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
LXC<a href="https://linuxcontainers.org/">(https://linuxcontainers.org/)</a></p>
</li>
<li>
<p>
Proxmox VE グラフィカル・ウェブ・ユーザー・インターフェイス(GUI)に統合</p>
</li>
<li>
<p>
使いやすいコマンドラインツール<span class="monospaced">pct</span></p>
</li>
<li>
<p>
Proxmox VE REST API経由でのアクセス</p>
</li>
<li>
<p>
コンテナ化された /proc ファイルシステムを提供する<em>lxcfs</em></p>
</li>
<li>
<p>
リソースの分離と制限のためのコントロールグループ<em>（cgroups）</em></p>
</li>
<li>
<p>
セキュリティを向上させる<em>AppArmorと</em> <em>seccomp</em></p>
</li>
<li>
<p>
最新のLinuxカーネル</p>
</li>
<li>
<p>
イメージベースのデプロイメント<a href="#pct_supported_distributions">（テンプレート）</a></p>
</li>
<li>
<p>
Proxmox VE<a href="#chapter_storage">ストレージライブラリを</a>使用</p>
</li>
<li>
<p>
ホストからのコンテナ設定（ネットワーク、DNS、ストレージなど）</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="pct_supported_distributions">
<span>11.2.対応ディストリビューション</span> <a class="headerlink" href="#pct_supported_distributions" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>公式にサポートされているディストリビューションのリストは以下にあります。</p></div>
<div class="paragraph">
<p>以下のディストリビューション用のテンプレートは、私たちのリポジトリから入手できます。<a href="#pct_container_images">pveam</a>tool または Graphical User Interface を使ってダウンロードできます。</p></div>
<div class="sect3">
<h4 id="_alpine_linux">11.2.1.アルパイン Linux<a class="headerlink" href="#_alpine_linux" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Alpine Linux は、musl libc と busybox をベースにしたセキュリティ重視の軽量 Linux ディストリビューションです。</p></div>
</div>
<div class="attribution">
- https://alpinelinux.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://alpinelinux.org/releases/">https://alpinelinux.org/releases/</a></p></div>
</div>
<div class="sect3">
<h4 id="_arch_linux">11.2.2.Arch Linux<a class="headerlink" href="#_arch_linux" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Arch Linux は軽量で柔軟な Linux® ディストリビューションです。</p></div>
</div>
<div class="attribution">
- https://archlinux.org/</div></div>
<div class="paragraph">
<p>Arch Linux はローリングリリースモデルを採用しています、詳しくは wiki を見て下さい：</p></div>
<div class="paragraph">
<p><a href="https://wiki.archlinux.org/title/Arch_Linux">https://wiki.archlinux.org/title/Arch_Linux</a></p></div>
</div>
<div class="sect3">
<h4 id="_centos_almalinux_rocky_linux">11.2.3.CentOS、Almalinux、Rocky Linux<a class="headerlink" href="#_centos_almalinux_rocky_linux" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_centos_centos_stream">CentOS / CentOS Stream<a class="headerlink" href="#_centos_centos_stream" title="Permalink to this heading"></a></h5>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>CentOS Linux ディストリビューションは、Red Hat Enterprise Linux (RHEL) のソースから派生した、安定した、予測可能な、管理可能な、再現可能なプラットフォームです。</p></div>
</div>
<div class="attribution">
- https://centos.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/CentOS#End-of-support_schedule">https://en.wikipedia.org/wiki/CentOS#End-of-support_schedule</a></p></div>
</div>
<div class="sect4">
<h5 id="_almalinux">Almalinux<a class="headerlink" href="#_almalinux" title="Permalink to this heading"></a></h5>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>オープンソース、コミュニティが所有し管理する、永久無料のエンタープライズLinuxディストリビューションで、長期的な安定性に重点を置き、堅牢なプロダクショングレードのプラットフォームを提供します。AlmaLinux OSはRHEL®とプレストリームCentOSと1:1のバイナリ互換性があります。</p></div>
</div>
<div class="attribution">
- https://almalinux.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/AlmaLinux#Releases">https://en.wikipedia.org/wiki/AlmaLinux#Releases</a></p></div>
</div>
<div class="sect4">
<h5 id="_rocky_linux">ロッキーリナックス<a class="headerlink" href="#_rocky_linux" title="Permalink to this heading"></a></h5>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Rocky Linuxは、下流のパートナーが方向転換した現在、アメリカのトップエンタープライズLinuxディストリビューションと100％バグ互換性を持つように設計されたコミュニティ・エンタープライズ・オペレーティング・システムです。</p></div>
</div>
<div class="attribution">
- https://rockylinux.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Rocky_Linux#Releases">https://en.wikipedia.org/wiki/Rocky_Linux#Releases</a></p></div>
</div>
</div>
<div class="sect3">
<h4 id="_debian">11.2.4.Debian<a class="headerlink" href="#_debian" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Debian はフリーなオペレーティングシステムであり、Debian プロジェクトによって開発・保守されています。フリーな Linux ディストリビューションで、 ユーザのニーズを満たす数千のアプリケーションがあります。</p></div>
</div>
<div class="attribution">
- https://www.debian.org/intro/index#software</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://www.debian.org/releases/stable/releasenotes">https://www.debian.org/releases/stable/releasenotes</a></p></div>
</div>
<div class="sect3">
<h4 id="_devuan">11.2.5.デヴアン<a class="headerlink" href="#_devuan" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Devuan GNU+Linux は systemd を使わない Debian のフォークで、不要な絡みを避け Init Freedom を確保することで、ユーザがシステムの制御を取り戻すことを可能にします。</p></div>
</div>
<div class="attribution">
- https://www.devuan.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://www.devuan.org/os/releases">https://www.devuan.org/os/releases</a></p></div>
</div>
<div class="sect3">
<h4 id="_fedora">11.2.6.Fedora<a class="headerlink" href="#_fedora" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Fedoraは、ハードウェア、クラウド、コンテナのための革新的で無償のオープンソースプラットフォームを作成し、ソフトウェア開発者とコミュニティメンバーがユーザーのためにカスタマイズされたソリューションを構築することを可能にします。</p></div>
</div>
<div class="attribution">
- https://getfedora.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://fedoraproject.org/wiki/Releases">https://fedoraproject.org/wiki/Releases</a></p></div>
</div>
<div class="sect3">
<h4 id="_gentoo">11.2.7.Gentoo<a class="headerlink" href="#_gentoo" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>柔軟性の高いソースベースのLinuxディストリビューションです。</p></div>
</div>
<div class="attribution">
- https://www.gentoo.org</div></div>
<div class="paragraph">
<p>Gentooはローリングリリースモデルを使用しています。</p></div>
</div>
<div class="sect3">
<h4 id="_opensuse">11.2.8.OpenSUSE<a class="headerlink" href="#_opensuse" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>システム管理者、開発者、デスクトップ・ユーザーのためのメーカー選択です。</p></div>
</div>
<div class="attribution">
- https://www.opensuse.org</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://get.opensuse.org/leap/">https://get.opensuse.org/leap/</a></p></div>
</div>
<div class="sect3">
<h4 id="_ubuntu">11.2.9.Ubuntu<a class="headerlink" href="#_ubuntu" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Ubuntuは、エンタープライズ・サーバー、デスクトップ、クラウド、IoT向けのLinuxの最新オープンソース・オペレーティング・システムです。</p></div>
</div>
<div class="attribution">
- https://ubuntu.com/</div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては、こちらをご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://wiki.ubuntu.com/Releases">https://wiki.ubuntu.com/Releases</a></p></div>
</div>
</div>
<div class="sect2">
<h3 id="pct_container_images">
<span>11.3.コンテナイメージ</span> <a class="headerlink" href="#pct_container_images" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>コンテナイメージは、「テンプレート」または「アプライアンス」とも呼ばれることがあり、コンテナを実行するためのすべてを含む<span class="monospaced">tar</span>アーカイブです。</p></div>
<div class="paragraph">
<p>Proxmox VE自体は、<a href="#pct_supported_distributions">最も一般的なLinuxディストリビューション</a>用のさまざまな基本テンプレートを提供しています。  これらのテンプレートは、GUIまたは<span class="monospaced">pveam</span>（Proxmox VE Appliance Managerの略）コマンドラインユーティリティを使用してダウンロードできます。  さらに、<a href="https://www.turnkeylinux.org/">TurnKey Linux</a>コンテナテンプレートもダウンロードできます。</p></div>
<div class="paragraph">
<p>利用可能なテンプレートのリストは<em>pve-daily-update</em>タイマーによって毎日更新されます。手動で更新することもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>#pveam アップデート</pre>
</div></div>
<div class="paragraph">
<p>利用可能な画像のリストを表示するには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>#pveam available</pre>
</div></div>
<div class="paragraph">
<p>基本的な<span class="monospaced">システム</span>画像など、興味のある<span class="monospaced">セクションを</span>指定することで、この大きなリストを制限することができます：</p></div>
<div class="listingblock">
<div class="title">利用可能なシステムイメージのリスト</div>
<div class="content monospaced">
<pre># pveam available --section system system alpine-3.12-default_20200823_amd64.tar.xz system alpine-3.13-default_20210419_amd64.tar.xz system alpine-3.14-default_20210623_amd64.tar.xz system archlinux-base_20210420-1_amd64.tar.gz system centos-7-default_20190926_amd64.tar.xz system centos-8-default_20201210_amd64.tar.xz system debian-9.0-standard_9.7-1_amd64.tar.gz system debian-10-standard_10.7-1_amd64.tar.gz system devuan-3.0-standard_3.0_amd64.tar.gz system fedora-33-default_20201115_amd64.tar.xz system fedora-34-default_20210427_amd64.tar.xz system gentoo-current-default_20200310_amd64.tar.xz system opensuse-15.2-default_20200824_amd64.tar.xz system ubuntu-16.04-standard_16.04.5-1_amd64.tar.gz system ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz system ubuntu-20.04-standard_20.04-1_amd64.tar.gz system ubuntu-20.10-standard_20.10-1_amd64.tar.gz system ubuntu-21.04-standard_21.04-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>このようなテンプレートを使用する前に、いずれかのストレージにダウンロードする必要があります。どのストレージかわからない場合は、<span class="monospaced">ローカルの</span>名前付きストレージを使用することができます。クラスタ化されたインストールでは、すべてのノードがこれらのイメージにアクセスできるように共有ストレージを使用することが推奨されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam download local debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>これで、そのイメージを使ってコンテナを作成する準備が整いました。また、ダウンロードしたすべてのイメージを<span class="monospaced">ローカル</span>ストレージに一覧表示することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam list local local:vztmpl/debian-10.0-standard_10.0-1_amd64.tar.gz 219.95MB</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">また、Proxmox VEウェブインタフェースGUIを使用して、コンテナテンプレートのダウンロード、一覧表示、削除を行うこともできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">pctは</span>、例えば新しいコンテナを作成するためにこれらを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct create 999 local:vztmpl/debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドは、完全なProxmox VEボリューム識別子を表示します。この識別子にはストレージ名が含まれており、他のほとんどの Proxmox VE コマンドはこの識別子を使用できます。例えば、後でそのイメージを削除するには、次のようにします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam remove local:vztmpl/debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pct_settings">
<span>11.4.コンテナ設定</span> <a class="headerlink" href="#pct_settings" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="pct_general">11.4.1.一般設定<a class="headerlink" href="#pct_general" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-general.png">
<img src="images/screenshot/gui-create-ct-general.png" alt="screenshot/gui-create-ct-general.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>コンテナの一般的な設定には以下が含まれます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ノード</strong>: コンテナが実行される物理サーバー</p>
</li>
<li>
<p>
<strong>CT ID</strong>：コンテナを識別するために使用されるProxmox VEのインストールで一意の番号です。</p>
</li>
<li>
<p>
<strong>ホスト名</strong>：コンテナのホスト名</p>
</li>
<li>
<p>
<strong>リソースプール</strong>：コンテナとVMの論理グループ</p>
</li>
<li>
<p>
<strong>パスワード</strong>：コンテナのルートパスワード</p>
</li>
<li>
<p>
<strong>SSH公開鍵</strong>：SSH経由でルート・アカウントに接続するための公開鍵。</p>
</li>
<li>
<p>
<strong>非特権コンテナ</strong>：このオプションでは、特権コンテナまたは非特権コンテナを作成するかどうかを作成時に選択できます。</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_unprivileged_containers">非特権コンテナ<a class="headerlink" href="#_unprivileged_containers" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>非特権コンテナは、ユーザーネームスペースと呼ばれる新しいカーネル機能を使用します。 コンテナ内のルート UID 0 は、コンテナ外の非特権ユーザーにマッピングされます。つまり、これらのコンテナにおけるほとんどのセキュリティ問題（コンテナのエスケープ、リソースの乱用など）は、ランダムな非特権ユーザーに影響し、LXCの問題ではなく一般的なカーネルセキュリティバグになります。LXCチームは、非特権コンテナは設計上安全であると考えています。</p></div>
<div class="paragraph">
<p>これは、新しいコンテナを作成するときのデフォルトのオプションです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナが init システムとして systemd を使用している場合、コンテナ内で実行されている systemd のバージョンは 220 以上でなければならないことに注意してください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_privileged_containers">特権コンテナ<a class="headerlink" href="#_privileged_containers" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>コンテナのセキュリティは、強制的なアクセス制御<em>AppArmor</em>制限、<em>seccomp</em>フィルタ、Linux カーネル名前空間を使用することで達成されます。LXCチームはこの種のコンテナを安全でないと見なしており、新たなコンテナ・エスケープ悪用をCVEや迅速な修正に値するセキュリティ問題とは見なしません。 そのため、特権コンテナは信頼できる環境でのみ使用する必要があります。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pct_cpu">11.4.2.CPU<a class="headerlink" href="#pct_cpu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-cpu.png">
<img src="images/screenshot/gui-create-ct-cpu.png" alt="screenshot/gui-create-ct-cpu.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><span class="monospaced">cores</span>オプションを使用して、コンテナ内の可視CPU数を制限できます。これは、Linuxの<em>cpuset</em>cgroup<strong>（制御</strong> <strong>グループ</strong>）を使用して実装されます。<span class="monospaced">pvestatd</span>内部の特別なタスクは、実行中のコンテナを利用可能なCPUに定期的に分散しようとします。 割り当てられたCPUを表示するには、次のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct cpusets --------------------- 102: 6 7 105: 2 3 4 5 108: 0 1 ------------------------</pre>
</div></div>
<div class="paragraph">
<p>コンテナはホストカーネルを直接使用します。コンテナ内のすべてのタスクは、ホストCPUスケジューラによって処理されます。Proxmox VEは、デフォルトでLinux<em>CFS</em><strong>(Completely</strong><strong>Fair</strong> <strong>Scheduler</strong>)スケジューラを使用します。</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<span class="monospaced">cpulimit</span>：<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
このオプションを使用すると、割り当てられた CPU 時間をさらに制限できます。 これは浮動小数点数なので、コンテナに 2 つのコアを割り当てても、全体の CPU 消費を半分のコアに制限することはまったく問題ありません。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>コア: 2 cpulimit: 0.5</pre>
</div></div>
</td>
</tr>
<tr>
<td class="hdlist1">
<span class="monospaced">cpuunits</span>：<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
これは、カーネルスケジューラに渡される相対的な重みです。数値が大きいほど、このコンテナの CPU 時間は長くなります。数値は、実行中の他のすべてのコンテナの重みに対する相対値です。デフォルトは<span class="monospaced">100</span>（ホストがレガシー cgroup v1 を使用している場合は<span class="monospaced">1024</span>）です。この設定を使用して、一部のコンテナに優先順位を付けることができます。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="pct_memory">11.4.3.メモリー<a class="headerlink" href="#pct_memory" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-memory.png">
<img src="images/screenshot/gui-create-ct-memory.png" alt="screenshot/gui-create-ct-memory.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>コンテナ・メモリは、cgroupメモリ・コントローラを使用して制御されます。</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<span class="monospaced">メモリ</span>：<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
全体のメモリ使用量を制限します。これは<span class="monospaced">memory.limit_in_bytes</span>cgroup 設定に対応します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<span class="monospaced">スワップ</span><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
コンテナがホストのスワップ領域から追加のスワップメモリを使用できるようにします。これは<span class="monospaced">memory.memsw.limit_in_bytes</span>cgroup 設定に対応し、両方の値<span class="monospaced">（メモリ + スワップ</span>）の合計に設定されます。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="pct_mount_points">11.4.4.マウントポイント<a class="headerlink" href="#pct_mount_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-root-disk.png">
<img src="images/screenshot/gui-create-ct-root-disk.png" alt="screenshot/gui-create-ct-root-disk.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ルート・マウント・ポイントは、<span class="monospaced">rootfs</span>プロパティで設定します。さらに最大256個のマウントポイントを設定できます。対応するオプションは<span class="monospaced">mp0</span>から<span class="monospaced">mp255</span> と呼ばれます。これらのオプションには、以下の設定を含めることができます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">rootfs</span>：<span class="monospaced">ボリューム=]&lt;ボリューム&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,quota=&lt;1|0&gt;] [,replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;1|0&gt;[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナ・ルートとして使用します。すべてのオプションの詳細については、以下を参照してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp[n]</span>：<span class="monospaced">ボリューム=]&lt;ボリューム&gt; ,mp=&lt;Path&gt; [,acl=&lt;1|0&gt;] [,backup=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,quota=&lt;1|0&gt;] [,replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;1|0&gt;] [,マウントオプション=&lt;opt[;opt...[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナ・マウント・ポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acl</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ACL サポートを明示的に有効または無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
マウント・ポイントをバックアップに含めるかどうか（ボリューム・マウント・ポイントにのみ使用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mountoptions=&lt;opt</span><span class="monospaced">[;opt...]&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
rootfs/mps 用の追加マウントオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp</span><span class="monospaced">=&lt;パス</span></dt>
<dd>
<p>
コンテナ内部から見たマウントポイントへのパス。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">セキュリティ上の理由から、シンボリックリンクを含んではいけません。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">quota=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
コンテナ内でユーザークォータを有効化（zfsサブボリュームではサポートされていません。）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このボリュームをストレージ・レプリカ・ジョブに含めます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
読み取り専用のマウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この非ボリュームマウントポイントをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、マウントポイントを自動的に共有するのではなく、すでに共有されていると仮定します！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ボリュームサイズ（読み取り専用値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ボリューム</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
コンテナにマウントするボリューム、デバイス、またはディレクトリ。</p>
</dd>
</dl></div>
</dd>
</dl></div>
<div class="paragraph">
<p>現在、マウントポイントには、ストレージバックアップマウントポイント、バインドマウント、デバイスマウントの3種類があります。</p></div>
<div class="listingblock">
<div class="title">典型的なコンテナ<span class="monospaced">rootfs</span>構成</div>
<div class="content monospaced">
<pre>rootfs: thin1:base-100-disk-1,size=8G。</pre>
</div></div>
<div class="sect4">
<h5 id="_storage_backed_mount_points">ストレージバックアップされたマウントポイント<a class="headerlink" href="#_storage_backed_mount_points" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ストレージバックアップマウントポイントはProxmox VEストレージサブシステムによって管理され、3つの異なる種類があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
イメージベース：単一のext4フォーマットされたファイルシステムを含むrawイメージです。</p>
</li>
<li>
<p>
ZFSサブボリューム：これらは技術的にはバインドマウントですが、管理されたストレージを持つため、サイズ変更とスナップショットが可能です。</p>
</li>
<li>
<p>
ディレクトリ：<span class="monospaced">size=0を</span>渡すと、生イメージの代わりにディレクトリが作成される特殊なケースが発生します。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージバックマウントポイントボリューム用の特別なオプション構文<span class="monospaced">STORAGE_ID:SIZE_IN_GBは</span>、指定されたストレージ上に指定されたサイズのボリュームを自動的に割り当てます。例えば</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre>pct set 100 -mp0 thin1:10,mp=/path/in/container</pre>
</div></div>
<div class="paragraph">
<p>は、ストレージ<span class="monospaced">thin1</span>上に10GBのボリュームを割り当て、ボリュームIDのプレースホルダー<span class="monospaced">10を</span>割り当てられたボリュームIDに置き換え、コンテナ内の<span class="monospaced">/path/in/containerに</span>マウトポイントを設定します。</p></div>
</div>
<div class="sect4">
<h5 id="_bind_mount_points">バインド・マウント・ポイント<a class="headerlink" href="#_bind_mount_points" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>バインドマウントを使用すると、コンテナ内のProxmox VEホストから任意のディレクトリにアクセスできます。以下のような使用例が考えられます：</p></div>
<div class="ulist"><ul>
<li>
<p>
ゲストのホームディレクトリへのアクセス</p>
</li>
<li>
<p>
ゲスト内のUSBデバイスディレクトリへのアクセス</p>
</li>
<li>
<p>
ゲストのホストからNFSマウントへのアクセス</p>
</li>
</ul></div>
<div class="paragraph">
<p>バインド・マウントはストレージ・サブシステムによって管理されていないと見なされるため、コンテナ内からスナップショットを作成したりクォータを処理したりすることはできません。非特権コンテナでは、ユーザーマッピングに起因するパーミッションの問題に遭遇する可能性があり、ACLを使用できません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">vzdumpを</span>使用すると、バインドマウントポイントの内容はバックアップされません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">セキュリティ上の理由から、バインドマウントは、この目的のために特別に確保されたソースディレクトリ（たとえば<span class="monospaced">/mnt/bindmounts</span> 以下のディレクトリ階層）を使用してのみ確立する必要があります。マウント・システム・ディレクトリ<span class="monospaced">（/、/var</span>、<span class="monospaced">/etcなど</span>）をコンテナにバインドしてはいけません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">バインドマウントソースパスにはシンボリックリンクを含んではいけません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>たとえば、ID<span class="monospaced">100</span>のコンテナで、<span class="monospaced">/shared という</span>パスの下にある<span class="monospaced">/mnt/bindmounts/shared という</span>ディレクトリにアクセスできるようにするには、次のような設定行を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mp0: /mnt/bindmounts/shared,mp=/shared</pre>
</div></div>
<div class="paragraph">
<p>を<span class="monospaced">/etc/pve/lxc/100.conf</span> に追加します。</p></div>
<div class="paragraph">
<p>または<span class="monospaced">pct</span>ツールを使うこともできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pct set 100 -mp0 /mnt/bindmounts/shared,mp=/shared</pre>
</div></div>
<div class="paragraph">
<p>同じ結果を得るために。</p></div>
</div>
<div class="sect4">
<h5 id="_device_mount_points">デバイスのマウントポイント<a class="headerlink" href="#_device_mount_points" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デバイスマウントポイントを使用すると、ホストのブロックデバイスをコンテナに直接マウントできます。バインドマウントと同様に、デバイスマウントは Proxmox VE のストレージサブシステムによって管理されませんが、<span class="monospaced">クォータと</span> <span class="monospaced">acl</span>オプションは尊重されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デバイス・マウント・ポイントは、特別な状況下でのみ使用すべきです。ほとんどの場合、ストレージバックされたマウントポイントは、同じパフォーマンスとより多くの機能を提供します。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">vzdumpを</span>使用すると、デバイスのマウントポイントの内容はバックアップされません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pct_container_network">11.4.5.ネットワーク<a class="headerlink" href="#pct_container_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-network.png">
<img src="images/screenshot/gui-create-ct-network.png" alt="screenshot/gui-create-ct-network.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>対応するオプションは<span class="monospaced">net0</span>～<span class="monospaced">net9</span> と呼ばれ、以下の設定を含めることができます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">net[n]</span>:<span class="monospaced">name=&lt;string&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,hwaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,ip=&lt;(IPv4/CIDR|dhcp|manual)&gt;] [,ip6=&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;] [,link_down=&lt;1|0&gt;] [,mtu=&lt;integer&gt;] [,rate=&lt;mbps&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,type=&lt;veth&gt;</span>]</dt>
<dd>
<p>
コンテナのネットワーク・インタフェースを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ブリッジ</span></dt>
<dd>
<p>
ネットワークデバイスを接続するブリッジ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">firewall=&lt;boolean&gt;</span></dt>
<dd>
<p>
このインターフェイスのファイアウォールルールを使用するかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw=&lt;ゲートウェイ</span><span class="monospaced">IPv</span><span class="monospaced">4</span></dt>
<dd>
<p>
IPv4トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw</span><span class="monospaced">6=&lt;ゲートウェイIPv6</span></dt>
<dd>
<p>
IPv6トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hwaddr=&lt;XX</span><span class="monospaced">:XX:XX:XX:XX:XX&gt;となります。</span></dt>
<dd>
<p>
I/G（Individual/Group）ビットが設定されていない共通のMACアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=</span><span class="monospaced">&lt;(IPv4/CIDR|dhcp|マニュアル)&gt;</span>です。</dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=</span><span class="monospaced">&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;</span>です。</dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">link_</span><span class="monospaced">down</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
このインターフェイスを切断するかどうか（プラグを抜くように）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mtu=&lt;整数&gt;</span><span class="monospaced">(64 - 65535</span>)</dt>
<dd>
<p>
インタフェースの最大転送単位。(lxc.network.mtu)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">name</span><span class="monospaced">=&lt;文字列</span></dt>
<dd>
<p>
コンテナ内部から見たネットワークデバイスの名前。(lxc.network.name)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">レート=</span><span class="monospaced">&lt;mbps</span></dt>
<dd>
<p>
インターフェイスにレート制限を適用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ=&lt;整数&gt;</span><span class="monospaced">(1 - 4094</span>)</dt>
<dd>
<p>
このインターフェイスの VLAN タグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trunks=&lt;vlanid</span><span class="monospaced">[;vlanid...]&gt;</span>です。</dt>
<dd>
<p>
インターフェイスを通過するVLAN ID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タイプ</span><span class="monospaced">=&lt;</span><span class="monospaced">ベス</span></dt>
<dd>
<p>
ネットワークインターフェースのタイプ。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pct_startup_and_shutdown">11.4.6.コンテナの自動スタートとシャットダウン<a class="headerlink" href="#pct_startup_and_shutdown" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ホスト・システムの起動時にコンテナを自動的に起動するには、Web インターフェイスのコンテナの<em>オプション・</em>パネルで<em>［Start at boot］</em>オプションを選択するか、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set CTID -onboot 1</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-edit-start-order.png">
<img src="images/screenshot/gui-qemu-edit-start-order.png" alt="screenshot/gui-qemu-edit-start-order.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">スタートとシャットダウンの順序</div><p>コンテナの起動順序を微調整したい場合は、以下のパラメータを使用できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>スタート/シャットダウン順</strong>：開始順序の優先順位を定義します。例えば、CTを最初に起動させたい場合は1に設定します。(シャットダウンには逆の起動順序を使用するため、起動順序が1のコンテナは最後にシャットダウンされます)</p>
</li>
<li>
<p>
<strong>起動遅延</strong>：このコンテナの起動と後続のコンテナの起動の間隔を定義します。たとえば、他のコンテナを起動する前に 240 秒待つ場合は 240 に設定します。</p>
</li>
<li>
<p>
<strong>シャットダウンタイムアウト</strong>：Proxmox VEがシャットダウンコマンドを発行した後、コンテナがオフラインになるまで待機する時間を秒単位で定義します。 デフォルトでこの値は60に設定されています。つまり、Proxmox VEはシャットダウン要求を発行し、マシンがオフラインになるまで60秒待機し、60秒経過してもマシンがオンラインの場合はシャットダウンアクションが失敗したことを通知します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Start/Shutdown順序パラメータが設定されていないコンテナは、常にパラメータが設定されているコンテナの後に開始することに注意してください。</p></div>
<div class="paragraph">
<p>ホストのブートと最初のコンテナのブートの間に遅延が必要な場合は、<a href="#first_guest_boot_delay">Proxmox VE Node Managementの</a>セクションを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="_hookscripts_2">11.4.7.フックスクリプト<a class="headerlink" href="#_hookscripts_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>設定プロパティ<span class="monospaced">hookscriptで</span>CTにフックスクリプトを追加できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set 100 -hookscript local:snippets/hookscript.pl</pre>
</div></div>
<div class="paragraph">
<p>このスクリプトはゲストが生きている間の様々な局面で呼び出されます。  例とドキュメントは<span class="monospaced">/usr/share/pve-docs/examples/guest-example-hookscript.pl</span> にあるサンプルスクリプトを参照してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_security_considerations">
<span>11.5.セキュリティに関する考察</span> <a class="headerlink" href="#_security_considerations" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>コンテナはホストシステムのカーネルを使用します。そのため、悪意のあるユーザーにとって攻撃対象が露出することになります。一般的に、完全な仮想マシンの方がより優れた分離を提供します。コンテナを未知の人や信頼できない人に提供する場合は、この点を考慮する必要があります。</p></div>
<div class="paragraph">
<p>攻撃対象領域を減らすために、LXCはAppArmor、CGroups、カーネル・ネームスペースなどの多くのセキュリティ機能を使用しています。</p></div>
<div class="sect3">
<h4 id="_apparmor">11.5.1.AppArmor<a class="headerlink" href="#_apparmor" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>AppArmorプロファイルは、危険な可能性のあるアクションへのアクセスを制限するために使用されます。 一部のシステムコール（<span class="monospaced">マウントなど</span>）は実行が禁止されています。</p></div>
<div class="paragraph">
<p>AppArmorのアクティビティをトレースするには、以下を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep apparmor</pre>
</div></div>
<div class="paragraph">
<p>推奨されませんが、AppArmorはコンテナに対して無効にすることができます。これにはセキュリティ・リスクが伴います。システムが誤って設定されている場合や、LXCまたはLinuxカーネルに脆弱性が存在する場合、コンテナ内で一部のシステムコールを実行すると、特権の昇格につながる可能性があります。</p></div>
<div class="paragraph">
<p>コンテナの AppArmor を無効にするには、<span class="monospaced">/etc/pve/lxc/CTID.conf</span> にあるコンテナ構成ファイルに以下の行を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lxc.apparmor.profile=アンコンファインド</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">本番用にはお勧めできませんのでご注意ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pct_cgroup">11.5.2.コントロールグループ<em>(cgroup</em>)<a class="headerlink" href="#pct_cgroup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>cgroup</em>は、プロセスを階層的に整理し、システムリソースを分配するために使用されるカーネルのメカニズムです。</p></div>
<div class="paragraph">
<p><em>cgroupsによって</em>制御される主なリソースは、CPU時間、メモリとスワップの制限、デバイスノードへのアクセスです。<em>cgroupsは</em>、スナップショットを取得する前にコンテナを「フリーズ」するためにも使用されます。</p></div>
<div class="paragraph">
<p><em>cgroups</em>には現在、<a href="https://www.kernel.org/doc/html/v5.11/admin-guide/cgroup-v1/index.html">legacy</a>と<a href="https://www.kernel.org/doc/html/v5.11/admin-guide/cgroup-v2.html"><em>cgroupv2</em></a> の 2 つのバージョンがあります。</p></div>
<div class="paragraph">
<p>Proxmox VE 7.0 以降、デフォルトは純粋な<em>cgroupv2</em>環境です。以前は「ハイブリッド」セットアップが使用され、リソース制御は主に<em>cgroupv1</em>で行われ、<em>cgroup_no_v1</em>カーネルコマンドラインパラメータで一部のサブシステムを引き継ぐことができる<em>cgroupv2</em>コントローラーが追加されていました。(詳細は<a href="https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html">カーネルパラメータのドキュメントを</a>参照してください）。</p></div>
<div class="sect4">
<h5 id="pct_cgroup_compat">CGroup バージョン互換性<a class="headerlink" href="#pct_cgroup_compat" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VE に関する純粋な<em>cgroupv2</em>と従来のハイブリッド環境の主な違いは、<em>cgroupv2</em>ではメモリとスワップが独立して制御されるようになったことです。以前はメモリの上限とメモリとスワップの<strong>合計の</strong>上限しか制限できませんでしたが、コンテナのメモリとスワップの設定はこれらの値に直接マッピングできます。</p></div>
<div class="paragraph">
<p>もう1つの重要な違いは、<em>デバイス</em>コントローラが全く異なる方法で設定されることです。このため、純粋な<em>cgroupv2</em>環境では、ファイルシステムクォータは現在サポートされていません。</p></div>
<div class="paragraph">
<p>純粋な<em>cgroupv2</em>環境で実行するには、コンテナの OS による<em>cgroupv2</em>サポートが必要です。<em>systemd</em>バージョン 231 以降を実行しているコンテナは<em>cgroupv2 を</em>サポートします<span class="footnote"><br>[Proxmox VE が出荷するコンテナテンプレートの最新メジャーバージョンすべてが含まれます]<br></span> 、init システムとして<em>systemd を</em>使用していないコンテナも同様です<span class="footnote"><br>[Alpine Linux など]<br></span> 。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="paragraph">
<p>CentOS 7とUbuntu 16.10は、<em>cgroupv2</em>環境で実行するには古すぎる<em>systemd</em>バージョンを持つ2つの著名なLinuxディストリビューションのリリースです。</p></div>
<div class="ulist"><ul>
<li>
<p>
ディストリビューション全体を新しいリリースにアップグレードします。上記の例では、Ubuntu 18.04や20.04、CentOS 8（またはAlmaLinuxやRocky LinuxのようなRHEL/CentOSの派生版）などが考えられます。これには、最新のバグやセキュリティの修正、多くの場合新機能の追加、そしてEOLの時期を未来にずらすという利点があります。</p>
</li>
<li>
<p>
Containers systemd のバージョンをアップグレードします。ディストリビューションが backports リポジトリを提供している場合、これは簡単で迅速な応急処置になります。</p>
</li>
<li>
<p>
コンテナまたはそのサービスを仮想マシンに移動します。仮想マシンはホストとのインタラクションが非常に少ないため、何十年も前のバージョンのOSをインストールしても問題ありません。</p>
</li>
<li>
<p>
レガシーの<em>cgroup</em>コントローラに戻します。これは有効な解決策ですが、永久的なものではないことに注意してください。Proxmox VE 9.0以降、レガシーコントローラはサポートされなくなります。</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="pct_cgroup_change_version">CGグループバージョンの変更<a class="headerlink" href="#pct_cgroup_change_version" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイルシステムのクォータが必要なく、すべてのコンテナが<em>cgroupv2を</em>サポートしている場合は、新しいデフォルトに固執することをお勧めします。</td>
</tr></table>
</div>
<div class="paragraph">
<p>以前のバージョンに戻すには、以下のカーネルコマンドラインパラメーターを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemd.unified_cgroup_hierarchy=0</pre>
</div></div>
<div class="paragraph">
<p>パラメータを追加する場所については、カーネルブートコマンドラインの編集に関する<a href="#sysboot_edit_kernel_cmdline">このセクションを</a>参照してください。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_guest_operating_system_configuration">
<span>11.6.ゲストオペレーティングシステムの構成</span> <a class="headerlink" href="#_guest_operating_system_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはコンテナ内のLinuxディストリビューションを検出しようとし、いくつかのファイルを変更します。以下は、コンテナ起動時に実行されることの簡単なリストです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
etc/hostname を設定します。</dt>
<dd>
<p>
コンテナ名の設定</p>
</dd>
<dt class="hdlist1">
etc/hosts を修正</dt>
<dd>
<p>
ローカルホスト名の検索を許可するには</p>
</dd>
<dt class="hdlist1">
ネットワーク設定</dt>
<dd>
<p>
完全なネットワーク・セットアップをコンテナに渡します。</p>
</dd>
<dt class="hdlist1">
DNSの設定</dt>
<dd>
<p>
DNSサーバーに関する情報を渡します。</p>
</dd>
<dt class="hdlist1">
initシステムの適応</dt>
<dd>
<p>
例えば、gettyプロセスの生成数を修正します。</p>
</dd>
<dt class="hdlist1">
ルートパスワードの設定</dt>
<dd>
<p>
新規コンテナ作成時</p>
</dd>
<dt class="hdlist1">
ssh_host_keys を書き換えます。</dt>
<dd>
<p>
各コンテナが一意のキーを持つように</p>
</dd>
<dt class="hdlist1">
crontabのランダム化</dt>
<dd>
<p>
全てのコンテナでcronが同時に起動しないようにします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>Proxmox VEによる変更はコメントマーカーで囲まれています：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># BEGIN PVE --- &lt;data&gt; # --- END PVE ---</pre>
</div></div>
<div class="paragraph">
<p>これらのマーカーはファイル内の適切な位置に挿入されます。そのようなセクションがすでに存在する場合、そのセクションはそのまま更新され、移動されることはありません。</p></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">/etc/.pve-ignore.hosts</span>ファイルが存在する場合、<span class="monospaced">/etc/hosts</span>ファイルは変更されません。これは単純な空のファイルでも構いません：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># touch /etc/.pve-ignore.hosts</pre>
</div></div>
<div class="paragraph">
<p>ほとんどの修正はOSに依存するため、ディストリビューションやバージョンによって異なります。手動で<span class="monospaced">ostypeを</span> <span class="monospaced">unmanagedに</span>設定することで、修正を完全に無効にすることができます。</p></div>
<div class="paragraph">
<p>OS タイプの検出は、コンテナ内の特定のファイルをテストすることで行います。Proxmox VEは、最初に<span class="monospaced">/etc/os-release</span>ファイル<span class="footnote"><br>[/etc/os-releaseは、ディストリビューションごとの多数のリリースファイル<a href="https://manpages.debian.org/stable/systemd/os-release.5.en.html">https://manpages.debian.org/stable/systemd/os-release.5.en.html]</a><br></span> をチェックします。このファイルが存在しないか、明確に認識できるディストリビューション識別子が含まれていない場合は、次のディストリビューション固有のリリースファイルがチェックされます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ウブントゥ</dt>
<dd>
<p>
etc/lsb-release<span class="monospaced">(DISTRIB_ID=Ubuntu</span>) を検査します。</p>
</dd>
<dt class="hdlist1">
デビアン</dt>
<dd>
<p>
test /etc/debian_version</p>
</dd>
<dt class="hdlist1">
フェドラ</dt>
<dd>
<p>
test /etc/fedora-release</p>
</dd>
<dt class="hdlist1">
RedHat または CentOS</dt>
<dd>
<p>
test /etc/redhat-release</p>
</dd>
<dt class="hdlist1">
ArchLinux</dt>
<dd>
<p>
test /etc/arch-release</p>
</dd>
<dt class="hdlist1">
アルパイン</dt>
<dd>
<p>
テスト /etc/alpine-release</p>
</dd>
<dt class="hdlist1">
ジェンツー</dt>
<dd>
<p>
test /etc/gentoo-release</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">設定された<span class="monospaced">ostype が</span>自動検出されたタイプと異なる場合、コンテナの起動に失敗します。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pct_container_storage">
<span>11.7.コンテナ保管</span> <a class="headerlink" href="#pct_container_storage" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE LXCコンテナストレージモデルは、従来のコンテナストレージモデルよりも柔軟です。コンテナは複数のマウントポイントを持つことができます。これにより、各アプリケーションに最適なストレージを使用できます。</p></div>
<div class="paragraph">
<p>例えば、コンテナのルートファイルシステムは低速で安価なストレージに置き、データベースは2つ目のマウントポイントを経由して高速で分散ストレージに置くことができます。詳細については、「<a href="#pct_mount_points">マウントポイント</a>」を参照してください。</p></div>
<div class="paragraph">
<p>Proxmox VEストレージライブラリがサポートするストレージタイプであれば何でも使用できます。つまり、コンテナはローカル（<span class="monospaced">lvm</span>、<span class="monospaced">zfs</span>、ディレクトリなど）、共有外部（<span class="monospaced">iSCSI</span>、<span class="monospaced">NFSなど</span>）、あるいはCephのような分散ストレージシステムにも保存できます。基礎となるストレージがサポートしていれば、スナップショットやクローンのような高度なストレージ機能も使用できます。<span class="monospaced">vzdump</span>バックアップツールは、スナップショットを使用して一貫性のあるコンテナバックアップを提供できます。</p></div>
<div class="paragraph">
<p>さらに、<em>バインドマウントを使って</em>ローカルデバイスやローカルディレクトリを直接マウントすることもできます。これにより、実質的にオーバーヘッドゼロでコンテナ内のローカルリソースにアクセスできます。バインドマウントは、コンテナ間でデータを共有する簡単な方法として使用できます。</p></div>
<div class="sect3">
<h4 id="_fuse_mounts">11.7.1.FUSEマウント<a class="headerlink" href="#_fuse_mounts" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">Linuxカーネルのフリーザーサブシステムには既存の問題があるため、コンテナ内でFUSEマウントを使用することは強くお勧めできません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>FUSEマウントを他のマウント機構やストレージ技術で置き換えることができない場合は、Proxmoxホスト上でFUSEマウントを確立し、バインドマウントポイントを使用してコンテナ内でアクセスできるようにすることができます。</p></div>
</div>
<div class="sect3">
<h4 id="_using_quotas_inside_containers">11.7.2.コンテナ内でのクォータの使用<a class="headerlink" href="#_using_quotas_inside_containers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クオータは、コンテナ内で各ユーザが使用できるディスク容量の制限を設定することができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これには現在、レガシーの<em>cgroupを</em>使用する必要があります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これはext4イメージベースのストレージタイプでのみ動作し、現在のところ特権コンテナでのみ動作します。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">quota</span>オプションを有効にすると、マウント・ポイントに次のマウント・オプションが使用されます：<span class="monospaced">usrjquota=aquota.user,grpjquota=aquota.group,jqfmt=vfsv0</span></p></div>
<div class="paragraph">
<p>これにより、他のシステムと同様にクォータを使用することができます。を実行することで<span class="monospaced">/aquota.userと</span> <span class="monospaced">/aquota.group</span>ファイルを初期化することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># quotacheck -cmug / # quotaon /</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">edquota</span>コマンドを使用してクォータを編集します。詳細については、コンテナ内で実行されているディストリビューションのドキュメントを参照してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">上記のコマンドをマウントポイントごとに実行する必要があります。その際、<span class="monospaced">/だけ</span>でなくマウントポイントのパスを渡す必要があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_using_acls_inside_containers">11.7.3.コンテナ内部でのACLの使用<a class="headerlink" href="#_using_acls_inside_containers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>標準のPosix<strong>アクセス</strong> <strong>制御</strong> <strong>リストも</strong>コンテナ内で利用できます。ACL を使用すると、従来のユーザー/グループ/その他モデルよりも詳細なファイル所有権を設定できます。</p></div>
</div>
<div class="sect3">
<h4 id="_backup_of_container_mount_points">11.7.4.コンテナマウントポイントのバックアップ<a class="headerlink" href="#_backup_of_container_mount_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>マウントポイントをバックアップに含めるには、コンテナ構成でそのマウントポイントの<span class="monospaced">バックアップ</span>オプションを有効にします。既存のマウントポイント<span class="monospaced">mp0 の</span>場合</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mp0: ゲスト:subvol-100-disk-1,mp=/root/files,size=8G</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">backup=1 を</span>追加して有効にします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mp0: guests:subvol-100-disk-1,mp=/root/files,size=8G,backup=1。</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">GUIで新しいマウントポイントを作成する場合、このオプションはデフォルトで有効になっています。</td>
</tr></table>
</div>
<div class="paragraph">
<p>マウント・ポイントのバックアップを無効にするには、上記の方法で<span class="monospaced">backup=0 を</span>追加するか、GUI の<strong>Backup</strong>チェックボックスのチェックを外します。</p></div>
</div>
<div class="sect3">
<h4 id="_replication_of_containers_mount_points">11.7.5.コンテナマウントポイントのレプリケーション<a class="headerlink" href="#_replication_of_containers_mount_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、ルートディスクがレプリケートされると、追加のマウントポイントもレプリケー トされます。Proxmox VE ストレージのレプリケーション機構でマウントポイントをスキップしたい場合は、そのマウントポイントに［<strong>レプリケーションをスキップ</strong>］オプションを設定します。 Proxmox VE 5.0 では、レプリケーションには<span class="monospaced">zfspool</span> タイプのストレージが必要です。コンテナでレプリケーションが設定されているときに別のタイプのストレージにマウントポイントを追加するには、そのマウントポイントで<strong>レプリケーションをスキップする</strong>オプションを有効にする必要があります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_backup_and_restore">
<span>11.8.バックアップとリストア</span> <a class="headerlink" href="#_backup_and_restore" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_container_backup">11.8.1.コンテナバックアップ<a class="headerlink" href="#_container_backup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>コンテナのバックアップに<span class="monospaced">vzdump</span>ツールを使用することは可能です。詳細は<span class="monospaced">vzdumpの</span>マニュアルページをご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="_restoring_container_backups">11.8.2.コンテナバックアップのリストア<a class="headerlink" href="#_restoring_container_backups" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">vzdump</span>で作成したコンテナのバックアップをリストアするには、<span class="monospaced">pct restore</span>コマンドを使用します。デフォルトでは、<span class="monospaced">pct restore</span>はバックアップされたコンテナ構成を可能な限り復元しようとします。コマンドラインでコンテナオプションを手動で設定することで、バックアップされた構成を上書きすることができます（詳細については<span class="monospaced">pct の</span>マニュアルページを参照してください）。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">pvesm extractconfig を</span>使用すると、vzdump アーカイブに含まれるバックアップされた設定を表示できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>基本的なリストアモードは2つあり、マウントポイントの扱いだけが異なります：</p></div>
<div class="sect4">
<h5 id="_8220_simple_8221_restore_mode">"シンプル "リストアモード<a class="headerlink" href="#_8220_simple_8221_restore_mode" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">rootfs</span>パラメーターもオプションの<span class="monospaced">mpX</span>パラメーターも明示的に設定されていない場合、バックアップされた設定ファイルからマウントポイントの設定が以下の手順で復元されます：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
バックアップからマウントポイントとそのオプションを抽出</p>
</li>
<li>
<p>
<span class="monospaced">storage</span>パラメーター（デフォルト：<span class="monospaced">ローカル</span>）で指定されたストレージ上に、ストレージバックされたマウントポイント用のボリュームを作成します。</p>
</li>
<li>
<p>
バックアップアーカイブからファイルを抽出</p>
</li>
<li>
<p>
リストアされた設定にバインドポイントとデバイスマウントポイントを追加（rootユーザーに限定</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">バインドとデバイスのマウントポイントは決してバックアップされないので、最後のステップではファイルはリストアされず、設定オプションだけがリストアされます。このようなマウントポイントは、別のメカニズム（多くのコンテナにバインドマウントされているNFSスペースなど）でバックアップされているか、まったくバックアップされることを意図していないかのいずれかであることが前提です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このシンプル・モードは、ウェブ・インターフェイスのコンテナ・リストア操作でも使用されます。</p></div>
</div>
<div class="sect4">
<h5 id="_8220_advanced_8221_restore_mode">"高度な "復元モード<a class="headerlink" href="#_8220_advanced_8221_restore_mode" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">rootfs</span>パラメータ (およびオプションで<span class="monospaced">mpX</span>パラメータの任意の組み合わせ) を設定することで、<span class="monospaced">pct restore</span>コマンドは自動的にアドバンスモードに切り替わります。このアドバンスモードは、バックアップアーカイブに含まれる<span class="monospaced">rootfs</span>と<span class="monospaced">mpX の</span>設定オプションを完全に無視し、代わりにパラメータとして明示的に提供されたオプションのみを使用します。</p></div>
<div class="paragraph">
<p>このモードでは、リストア時などにマウントポイントの設定を柔軟に設定できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
各マウントポイントのターゲットストレージ、ボリュームサイズ、その他のオプションを個別に設定します。</p>
</li>
<li>
<p>
新しいマウントポイントスキームに従ってバックアップされたファイルを再配布します。</p>
</li>
<li>
<p>
デバイスおよび/またはバインドマウントポイントへのリストア（rootユーザーに限定）</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_containers_with_span_class_monospaced_pct_span">
<span>11.9.<span class="monospaced">pct</span>によるコンテナの管理</span> <a class="headerlink" href="#_managing_containers_with_span_class_monospaced_pct_span" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox Container Toolkit"<span class="monospaced">(pct</span>)はProxmox VEコンテナを管理するコマンドラインツールです。コンテナの作成や破棄、コンテナ実行の制御（開始、停止、再起動、マイグレーションなど）が可能です。また、コンテナの設定ファイルにパラメータを設定することもできます。</p></div>
<div class="sect3">
<h4 id="_cli_usage_examples_2">11.9.1.CLIの使用例<a class="headerlink" href="#_cli_usage_examples_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Debian テンプレートに基づいてコンテナを作成します (ウェブインタフェースからテンプレートをダウンロード済みの場合)。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct create 100 /var/lib/vz/template/cache/debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>コンテナ 100</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct start 100</pre>
</div></div>
<div class="paragraph">
<p>gettyによるログインセッションの開始</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct コンソール 100</pre>
</div></div>
<div class="paragraph">
<p>LXCネームスペースに入り、rootユーザーとしてシェルを実行します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct enter 100</pre>
</div></div>
<div class="paragraph">
<p>設定の表示</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct config 100</pre>
</div></div>
<div class="paragraph">
<p>ホストブリッジ<span class="monospaced">vmbr0に</span>ブリッジされた<span class="monospaced">eth0という</span>ネットワークインターフェースを追加し、アドレスとゲートウェイを設定します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set 100 -net0 name=eth0,bridge=vmbr0,ip=192.168.15.147/24,gw=192.168.15.1。</pre>
</div></div>
<div class="paragraph">
<p>コンテナのメモリを512MBに削減。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set 100 -memory 512</pre>
</div></div>
<div class="paragraph">
<p>コンテナを破棄すると、常にアクセス制御リストからコンテナが削除され、常にコンテナのファイアウォール構成が削除されます。レプリケーション・ジョブ、バックアップ・ジョブ、およびHAリソース構成からもコンテナを削除する場合は、<em>-purgeを</em>有効にする必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct destroy 100 --purge</pre>
</div></div>
<div class="paragraph">
<p>マウントポイントボリュームを別のストレージに移動します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct move-volume 100 mp0 other-storage</pre>
</div></div>
<div class="paragraph">
<p>ボリュームを別のCT に再割り当てします。これにより、ソースCTからボリューム<span class="monospaced">mp0が</span>削除され、ターゲットCTに<span class="monospaced">mp1として</span>アタッチされます。バックグランドでは、ボリュームの名前が新しい所有者と一致するように変更されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct move-volume 100 mp0 --target-vmid 200 --target-volume mp1</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_obtaining_debugging_logs">11.9.2.デバッグ・ログの取得<a class="headerlink" href="#_obtaining_debugging_logs" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">pct startが</span>特定のコンテナを起動できない場合、<span class="monospaced">--debug</span>フラグ（<span class="monospaced">CTIDを</span>コンテナのCTIDに置き換える）を渡してデバッグ出力を収集すると便利です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct start CTID --debug</pre>
</div></div>
<div class="paragraph">
<p>代わりに、以下の<span class="monospaced">lxc-start</span>コマンドを使用することもできます。このコマンドは、<span class="monospaced">-o</span>outputオプションで指定されたファイルにデバッグ・ログを保存します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lxc-start -n CTID -F -l DEBUG -o /tmp/lxc-CTID.log</pre>
</div></div>
<div class="paragraph">
<p>このコマンドは、フォアグラウンド・モードでコンテナを起動しようとします。コンテナを停止するには、2 番目のターミナルで<span class="monospaced">pct shutdown CTID</span>または<span class="monospaced">pct stop CTID</span>を実行します。</p></div>
<div class="paragraph">
<p>収集されたデバッグログは<span class="monospaced">/tmp/lxc-CTID.logに</span>書き込まれます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最後に<span class="monospaced">pct start</span> で起動を試みてからコンテナの構成を変更した場合は、少なくとも 1 回<span class="monospaced">pct start を</span>実行して<span class="monospaced">lxc-start</span> で使用する構成も更新する必要があります。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pct_migration">
<span>11.10.マイグレーション</span> <a class="headerlink" href="#pct_migration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタがある場合、コンテナのマイグレーションは</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct migrate &lt;ctid&gt; &lt;target&gt;</pre>
</div></div>
<div class="paragraph">
<p>これは、コンテナがオフラインである限り動作します。ローカルボリュームまたはマウントポイントが定義されている場合、同じストレージがターゲットホストに定義されていれば、移行はネットワーク経由でコンテンツをターゲットホストにコピーします。</p></div>
<div class="paragraph">
<p>実行中のコンテナは、技術的な制限によりライブマイグレーションできません。再起動マイグレーションは可能で、シャットダウンしてコンテナを移動し、ターゲットノードでコンテナを再度起動します。コンテナは非常に軽量であるため、通常は数百ミリ秒のダウンタイムしか発生しません。</p></div>
<div class="paragraph">
<p>マイグレーションの再開は、ウェブ・インターフェイスから行うか、<span class="monospaced">pct migrate</span>コマンドで<span class="monospaced">--restart</span>フラグを使用して行うことができます。</p></div>
<div class="paragraph">
<p>再起動マイグレーションはコンテナをシャットダウンし、指定されたタイムアウト（デフォルトは180秒）の後にコンテナを強制終了します。その後、オフラインマイグレーションのようにコンテナをマイグレーションし、終了するとターゲットノード上でコンテナを起動します。</p></div>
</div>
<div class="sect2">
<h3 id="pct_configuration">
<span>11.11.コンフィギュレーション</span> <a class="headerlink" href="#pct_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">etc/pve/lxc/&lt;CTID&gt;.conf</span>ファイルにはコンテナ構成が格納されます。<span class="monospaced">&lt;CTID&gt;</span>は指定されたコンテナの数値 ID です。<span class="monospaced">etc/pve/</span> 内に格納されている他のすべてのファイルと同様に、他のすべてのクラスタ ノードに自動的に複製されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">CTID &lt; 100は内部用に予約されており、CTIDはクラスタ全体で一意である必要があります。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">コンテナの構成例</div>
<div class="content monospaced">
<pre>ostype: debian arch: amd64 hostname: www memory：512 スワップ512 net0: bridge=vmbr0,hwaddr=66:64:66:64:64:36,ip=dhcp,name=eth0,type=veth rootfs: local:107/vm-107-disk-1.raw,size=7G</pre>
</div></div>
<div class="paragraph">
<p>設定ファイルは単純なテキストファイルです。通常のテキストエディタ、たとえば<span class="monospaced">vi</span>や<span class="monospaced">nano</span> を使用して編集できます。 小さな修正を行うのに便利な場合もありますが、そのような変更を適用するにはコンテナを再起動する必要があることに注意してください。</p></div>
<div class="paragraph">
<p>そのため、通常は<span class="monospaced">pct</span>コマンドを使用してこれらのファイルを生成および変更するか、GUI を使用してすべてを行う方がよいでしょう。 私たちのツールキットは、実行中のコンテナに対してほとんどの変更を即座に適用できるほど賢いです。この機能は「ホットプラグ」と呼ばれ、この場合、コンテナを再起動する必要はありません。</p></div>
<div class="paragraph">
<p>ホットプラグできない変更の場合、保留中の変更として登録されます（GUI では赤色で表示されます）。 変更はコンテナを再起動した後にのみ適用されます。</p></div>
<div class="sect3">
<h4 id="_file_format_2">11.11.1.ファイルフォーマット<a class="headerlink" href="#_file_format_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>コンテナ設定ファイルでは、コロンで区切られた単純なキー/値形式を使用します。各行の書式は以下のとおりです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># これはコメントです。</pre>
</div></div>
<div class="paragraph">
<p>これらのファイルの空白行は無視され、<span class="monospaced">#</span>文字で始まる行はコメントとして扱われ、これも無視されます。</p></div>
<div class="paragraph">
<p>例えば、低レベルのLXCスタイルのコンフィギュレーションを直接追加することも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lxc.init_cmd：/sbin/my_own_init</pre>
</div></div>
<div class="paragraph">
<p>または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lxc.init_cmd = /sbin/my_own_init</pre>
</div></div>
<div class="paragraph">
<p>この設定は、LXCの低レベルツールに直接渡されます。</p></div>
</div>
<div class="sect3">
<h4 id="pct_snapshots">11.11.2.スナップショット<a class="headerlink" href="#pct_snapshots" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>スナップショットを作成すると、<span class="monospaced">pct は</span>スナップショット時の設定を同じ設定ファイル内の別のスナップショットセクションに保存します。例えば、"testsnapshot" というスナップショットを作成した後、設定ファイルは次のようになります：</p></div>
<div class="listingblock">
<div class="title">スナップショットによるコンテナ構成</div>
<div class="content monospaced">
<pre>メモリ512 swap：512 parent: testsnaphot ... [testsnaphot] memory：512 swap：512 snaptime: 1457170803 ...</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">parent</span>や<span class="monospaced">snaptime の</span>ようなスナップショット関連のプロパティがいくつかあります。<span class="monospaced">parent</span>プロパティはスナップショット間の親子関係を保存するために使用されます。<span class="monospaced">snaptime</span>はスナップショットの作成タイムスタンプ (Unix epoch) です。</p></div>
</div>
<div class="sect3">
<h4 id="pct_options">11.11.3.オプション<a class="headerlink" href="#pct_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">arch</span>:<span class="monospaced">&lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&gt;</span><em>(デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャの種類。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cmode</span>:<span class="monospaced">&lt;コンソール | シェル | tty&gt;</span><em>(デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、consoleコマンドは利用可能なttyデバイスの1つに接続を開こうとします。cmode を<em>console</em>に設定すると、代わりに /dev/console にアタッチしようとします。cmode を<em>shell</em> に設定すると、コンテナ内で単にシェルを起動します（ログインはしません）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">console</span>:<span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンテナにコンソールデバイス（/dev/console）をアタッチします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">コア</span>:<span class="monospaced">&lt;整数&gt; (1 - 8192</span>)</dt>
<dd>
<p>
コンテナに割り当てられたコアの数。コンテナは、デフォルトで使用可能なすべてのコアを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpulimit</span>:<span class="monospaced">&lt;数値&gt; (0 - 8192)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2つの</em>CPU時間があります。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpuunits</span>:<span class="monospaced">&lt;整数&gt; (0 - 500000)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナの CPU ウェイト。引数は、カーネルのフェアスケジューラで使用されます。数値が大きいほど、このコンテナはより多くの CPU 時間を得ます。数値は、他のすべての実行中のゲストの重みに対する相対値です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">debug</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
もっと冗長にしてみてください。今のところ、これは起動時にデバッグログレベルを有効にするだけです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">説明</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェイスCTのサマリーに表示されます。これは設定ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">dev[n]</span>：<span class="monospaced">[[パス=]&lt;パス&gt;] [,gid=&lt;整数[,deny-write=&lt;1|0&gt;][,gid=&lt;整数&gt;][,mode=&lt;オクタルのアクセスモード&gt;][,uid=&lt;整数］</span></dt>
<dd>
<p>
コンテナへの通過装置</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">deny</span><span class="monospaced">-write=&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">0）</span></dt>
<dd>
<p>
コンテナのデバイスへの書き込みを拒否</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gid=&lt;整数&gt;</span><span class="monospaced">(0 - N</span>)</dt>
<dd>
<p>
デバイスノードに割り当てるグループID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mode=</span><span class="monospaced">&lt;オクタルアクセスモード</span></dt>
<dd>
<p>
デバイス・ノードで設定するアクセス・モード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">パス=</span><span class="monospaced">&lt;パス</span></dt>
<dd>
<p>
コンテナに通すデバイスへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">uid=&lt;整数&gt;</span><span class="monospaced">(0 - N</span>)</dt>
<dd>
<p>
デバイスノードに割り当てられるユーザーID</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
の<span class="monospaced">機能が</span>あります：[<span class="monospaced">force_rw_sys=&lt;1|0&gt;] [,fuse=&lt;1|0&gt;] [,keyctl=&lt;1|0&gt;] [,mknod=&lt;1|0&gt;] [,mount=&lt;fstype;fstype;...&gt;] [,nesting=&lt;1|0&gt;]</span>です。</dt>
<dd>
<p>
コンテナが高度な機能にアクセスできるようにします。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">force_rw_sys=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
非特権コンテナの /sys を<span class="monospaced">mixed ではなく</span> <span class="monospaced">rw</span>でマウントするようにしました。これは、新しい (&gt;= v245) systemd-network の使用下でネットワークを壊す可能性があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fuse=</span><span class="monospaced">&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">0）</span></dt>
<dd>
<p>
コンテナ内での<em>fuse</em>ファイルシステムの使用を許可します。fuse と freezer cgroup の相互作用により、I/O デッドロックが発生する可能性があることに注意してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keyctl</span><span class="monospaced">=&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
非特権コンテナ専用：keyctl() システムコールの使用を許可します。これは、コンテナ内で docker を使用するために必要です。デフォルトでは、非特権コンテナはこのシステムコールを存在しないと見なします。これは主に systemd-networkd の回避策で、keyctl() の操作がパーミッション不足でカーネルに拒否された場合に致命的なエラーとして扱われます。基本的には、systemd-networkd を走らせるか docker を走らせるかを選ぶことができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mknod=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
非特権コンテナが mknod() を使用して特定のデバイスノードを追加できるようにしました。これには、ユーザ空間への seccomp トラップがサポートされたカーネルが必要です (5.3 以降)。これは実験的なものです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mount=&lt;fstype</span><span class="monospaced">;fstype;...&gt;</span>です。</dt>
<dd>
<p>
特定のタイプのファイルシステムのマウントを許可します。これは、mount コマンドで使用するファイルシステムタイプのリストである必要があります。これは、コンテナのセキュリティに悪影響を及ぼす可能性があることに注意してください。ループデバイスへのアクセスでは、ファイルをマウントするとデバイス cgroup の mknod パーミッションを回避できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nesting=</span><span class="monospaced">&lt;boolean</span><em>&gt;（デフォルト =</em> <span class="monospaced">0）</span></dt>
<dd>
<p>
ネストを許可します。id マッピングを追加した非特権コンテナで使用するのが最適です。これは、ホストの procfs と sysfs の内容をゲストに公開することに注意してください。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">フックスクリプト</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのライフタイムのさまざまなステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ホスト名</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">lock</span>:<span class="monospaced">&lt;バックアップ|作成|破棄|ディスク|fstrim|マイグレーション|マウント|ロールバック|スナップショット|スナップショット削除&gt;。</span></dt>
<dd>
<p>
コンテナのロック/アンロック</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">メモリ</span>：<span class="monospaced">&lt;整数&gt; (16 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp[n]</span>：<span class="monospaced">ボリューム=]&lt;ボリューム&gt; ,mp=&lt;Path&gt; [,acl=&lt;1|0&gt;] [,backup=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,quota=&lt;1|0&gt;] [,replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;1|0&gt;] [,マウントオプション=&lt;opt[;opt...[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナ・マウント・ポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acl</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ACL サポートを明示的に有効または無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
マウント・ポイントをバックアップに含めるかどうか（ボリューム・マウント・ポイントにのみ使用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mountoptions=&lt;opt</span><span class="monospaced">[;opt...]&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
rootfs/mps 用の追加マウントオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp</span><span class="monospaced">=&lt;パス</span></dt>
<dd>
<p>
コンテナ内部から見たマウントポイントへのパス。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">セキュリティ上の理由から、シンボリックリンクを含んではいけません。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">quota</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
コンテナ内でユーザークォータを有効化（zfsサブボリュームではサポートされていません。）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このボリュームをストレージ・レプリカ・ジョブに含めます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
読み取り専用のマウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この非ボリュームマウントポイントをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、マウントポイントを自動的に共有するのではなく、すでに共有されていると仮定します！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ボリュームサイズ（読み取り専用値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ボリューム</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
コンテナにマウントするボリューム、デバイス、またはディレクトリ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネームサーバー</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの DNS サーバー IP アドレスを設定します。searchdomainもnameserverも設定しない場合、Createは自動的にホストの設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">net[n]</span>:<span class="monospaced">name=&lt;string&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,hwaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,ip=&lt;(IPv4/CIDR|dhcp|manual)&gt;] [,ip6=&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;] [,link_down=&lt;1|0&gt;] [,mtu=&lt;integer&gt;] [,rate=&lt;mbps&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,type=&lt;veth&gt;</span>]</dt>
<dd>
<p>
コンテナのネットワーク・インタフェースを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ブリッジ</span></dt>
<dd>
<p>
ネットワークデバイスを接続するブリッジ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">firewall=&lt;boolean&gt;</span></dt>
<dd>
<p>
このインターフェイスのファイアウォールルールを使用するかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw=&lt;ゲートウェイ</span><span class="monospaced">IPv</span><span class="monospaced">4</span></dt>
<dd>
<p>
IPv4トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw</span><span class="monospaced">6=&lt;ゲートウェイIPv6</span></dt>
<dd>
<p>
IPv6トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hwaddr=&lt;XX</span><span class="monospaced">:XX:XX:XX:XX:XX&gt;となります。</span></dt>
<dd>
<p>
I/G（Individual/Group）ビットが設定されていない共通のMACアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=</span><span class="monospaced">&lt;(IPv4/CIDR|dhcp|マニュアル)&gt;</span>です。</dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=</span><span class="monospaced">&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;</span>です。</dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">link_</span><span class="monospaced">down</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
このインターフェイスを切断するかどうか（プラグを抜くように）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mtu=&lt;整数&gt;</span><span class="monospaced">(64 - 65535</span>)</dt>
<dd>
<p>
インタフェースの最大転送単位。(lxc.network.mtu)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">name</span><span class="monospaced">=&lt;文字列</span></dt>
<dd>
<p>
コンテナ内部から見たネットワークデバイスの名前。(lxc.network.name)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">レート=</span><span class="monospaced">&lt;mbps</span></dt>
<dd>
<p>
インターフェイスにレート制限を適用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ=&lt;整数&gt;</span><span class="monospaced">(1 - 4094</span>)</dt>
<dd>
<p>
このインターフェイスの VLAN タグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trunks=&lt;vlanid</span><span class="monospaced">[;vlanid...]&gt;</span>です。</dt>
<dd>
<p>
インターフェイスを通過するVLAN ID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タイプ</span><span class="monospaced">=&lt;</span><span class="monospaced">ベス</span></dt>
<dd>
<p>
ネットワークインターフェースのタイプ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">onboot</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ostype</span>:<span class="monospaced">&lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse |ubuntu | unmanaged&gt;.</span></dt>
<dd>
<p>
OS タイプ。これは、コンテナ内の設定を行うために使用され、/usr/share/lxc/config/&lt;ostype&gt;.common.conf 内の lxc 設定スクリプトに対応します。値<em>unmanaged</em>は、OS 固有のセットアップをスキップするために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、CT または CT のディスクの削除/更新操作を防止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rootfs</span>：<span class="monospaced">ボリューム=]&lt;ボリューム&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,quota=&lt;1|0&gt;] [,replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;1|0&gt;[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acl</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
ACL サポートを明示的に有効または無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mountoptions=&lt;opt</span><span class="monospaced">[;opt...]&gt;</span>です<span class="monospaced">。</span></dt>
<dd>
<p>
rootfs/mps 用の追加マウントオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">quota</span><span class="monospaced">=&lt;ブール値</span></dt>
<dd>
<p>
コンテナ内でユーザークォータを有効化（zfsサブボリュームではサポートされていません。）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このボリュームをストレージ・レプリカ・ジョブに含めます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=</span><span class="monospaced">&lt;ブール</span><span class="monospaced">値</span></dt>
<dd>
<p>
読み取り専用のマウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この非ボリュームマウントポイントをすべてのノードで使用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションは、マウントポイントを自動的に共有するのではなく、すでに共有されていると仮定します！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=</span><span class="monospaced">&lt;ディスク</span><span class="monospaced">サイズ</span></dt>
<dd>
<p>
ボリュームサイズ（読み取り専用値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ボリューム</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
コンテナにマウントするボリューム、デバイス、またはディレクトリ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">searchdomain</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定しない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">を起動</span>します：order=]♪ [,up=♪] [,down=♪ `)</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">swap</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
MB単位のコンテナのSWAP量。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ</span>:<span class="monospaced">&lt;string</span></dt>
<dd>
<p>
コンテナのタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">テンプレート</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">timezone</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナで使用するタイムゾーン。オプションが設定されていない場合は、何も行われません。ホストのタイムゾーンに合わせるために<em>host</em>を設定するか、/usr/share/zoneinfo/zone.tab から任意のタイムゾーンオプションを設定することができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tty</span>:<span class="monospaced">&lt;整数&gt; (0 - 6)</span><em>(デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナで利用可能なttyの数を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">unprivileged</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します。(手動で変更してはいけません)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">unused[n]</span>です：<span class="monospaced">[ボリューム=]&lt;ボリューム</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ボリューム</span><span class="monospaced">=&lt;</span><span class="monospaced">ボリューム</span></dt>
<dd>
<p>
現在使用されていないボリューム。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_locks_2">
<span>11.12.ロック</span> <a class="headerlink" href="#_locks_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>コンテナの移行、スナップショット、およびバックアップ<span class="monospaced">（vzdump</span>）は、影響を受けるコンテナに対する互換性のない同時アクションを防止するためにロックを設定します。このようなロックを手動で削除する必要がある場合があります（電源障害後など）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct アンロック &lt;CTID</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ロックを設定したアクションがもう実行されていないことを確認している場合のみ、この操作を行ってください。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pvesdn">
12.ソフトウェア定義ネットワーク<a class="headerlink" href="#chapter_pvesdn" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEのSDN(<strong>Software-</strong><strong>Defined</strong> <strong>Network</strong>)機能は、仮想ゾーンとネットワーク(VNet)の作成を可能にします。この機能により、高度なネットワーク構成とマルチテナントの設定が簡素化されます。</p></div>
<div class="sect2">
<h3 id="pvesdn_overview">
<span>12.1.はじめに</span> <a class="headerlink" href="#pvesdn_overview" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE SDN は、柔軟でソフトウェア制御のコンフィギュレーションを使用して、仮想ゲストネットワークの分離ときめ細かな制御を可能にします。</p></div>
<div class="paragraph">
<p>分離は<strong>ゾーン</strong>、仮想ネットワーク<strong>（VNets）</strong>、<strong>サブネットによって</strong>管理されます。  ゾーンは仮想的に分離された独自のネットワーク領域です。  VNetはゾーンに属する仮想ネットワークです。サブネットはVNet内のIP範囲です。</p></div>
<div class="paragraph">
<p>ゾーンのタイプによって、ネットワークの動作は異なり、特定の機能、利点、制限を提供します。</p></div>
<div class="paragraph">
<p>SDN のユースケースは、個々のノード上の孤立したプライベートネットワークから、異なる場所にある複数の PVE クラスタにまたがる複雑なオーバーレイネットワークまで多岐にわたります。</p></div>
<div class="paragraph">
<p>クラスタ全体のデータセンタ SDN 管理インターフェイスで VNet を設定した後、各ノードでローカルに共通の Linux ブリッジとして利用でき、VM やコンテナに割り当てることができます。</p></div>
</div>
<div class="sect2">
<h3 id="pvesdn_support_status">
<span>12.2.サポート状況</span> <a class="headerlink" href="#pvesdn_support_status" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_history">12.2.1.ヒストリー<a class="headerlink" href="#_history" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE SDN スタックは 2019 年から実験的な機能として提供され、多くの開発者とユーザによって継続的に改良とテストが行われてきました。 Proxmox VE 6.2 でウェブインタフェースに統合されたことで、より広範な統合に向けた重要なマイルストーンが達成されました。 Proxmox VE 7 のリリースサイクルでは、多くの改良と機能が追加されました。 ユーザからのフィードバックに基づき、基本的な設計の選択とその実装は非常に健全で安定していることが明らかになりました。Proxmox VE 8 では、ネットワークとインタフェースの管理を Proxmox VE アクセス制御スタックのコアコンポーネントに昇格させることで、SDN 機能の完全な統合のための基礎を築くことが決定されました。
Proxmox VE 8.1 では、二つの大きなマイルストーンが達成されました。第一に、IP アドレス管理 (IPAM) 機能に DHCP の統合が追加され、第二に、SDN の統合がデフォルトでインストールされました。</p></div>
</div>
<div class="sect3">
<h4 id="_current_status">12.2.2.現状<a class="headerlink" href="#_current_status" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>SDN インストールの様々なレイヤーの現在のサポート状況は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
VNet 管理と Proxmox VE スタックとの統合を含むコア SDN は完全にサポートされています。</p>
</li>
<li>
<p>
仮想ゲストのDHCP管理を含むIPAMは技術プレビュー中です。</p>
</li>
<li>
<p>
FRRoutingとコントローラ統合による複雑なルーティングは技術プレビュー中です。</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_installation">
<span>12.3.インストール</span> <a class="headerlink" href="#pvesdn_installation" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_sdn_core">12.3.1.SDN コア<a class="headerlink" href="#_sdn_core" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE 8.1 以降、Software-Defined Network (SDN) のコアパッケージがデフォルトでインストールされます。</p></div>
<div class="paragraph">
<p>古いバージョンからアップグレードする場合は、各ノードに<span class="monospaced">libpve-network-perl</span>パッケージをインストールする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update apt install libpve-network-perl</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEバージョン7.0以上では、デフォルトで<span class="monospaced">ifupdown2</span>パッケージがインストールされています。それ以前のバージョンでシステムをインストールした場合は、<span class="monospaced">ifupdown2</span>パッケージを明示的にインストールする必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>インストール後、全てのノードで<span class="monospaced">/etc/network/interfaces</span>設定ファイルの最後に以下の行があることを確認する必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ソースは /etc/network/interfaces.d/* です。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvesdn_install_dhcp_ipam">12.3.2.DHCP IPAM<a class="headerlink" href="#pvesdn_install_dhcp_ipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>PVE</em>内蔵IPアドレス管理スタックへのDHCP統合は、現在DHCPリースの提供に<span class="monospaced">dnsmasqを</span>使用しています。これは現在オプトインです。</p></div>
<div class="paragraph">
<p>この機能を使うには、各ノードに<span class="monospaced">dnsmasq</span>パッケージをインストールする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update apt install dnsmasq # デフォルトのインスタンスを無効にする systemctl disable --now dnsmasq</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvesdn_install_frrouting">12.3.3.FRRouting<a class="headerlink" href="#pvesdn_install_frrouting" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE SDN スタックは高度なセットアップのために<a href="https://frrouting.org/">FRRouting</a>プロジェクトを使います。これは現在オプトインです。</p></div>
<div class="paragraph">
<p>SDNルーティングの統合を使うには、すべてのノードに<span class="monospaced">frr-pythontools</span>パッケージをインストールする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update apt install frr-pythontools</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_main_configuration">
<span>12.4.構成の概要</span> <a class="headerlink" href="#pvesdn_main_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>設定はデータセンター・レベルのWeb UIで行われ、以下のセクションに分かれています：</p></div>
<div class="ulist"><ul>
<li>
<p>
SDN:: ここで現在のアクティブな SDN 状態の概要が得られ、保留中のすべての変更をクラスタ全体に適用できます。</p>
</li>
<li>
<p>
<a href="#pvesdn_config_zone">ゾーン</a>仮想的に分離されたネットワークゾーンの作成と管理</p>
</li>
<li>
<p>
<a href="#pvesdn_config_vnet">VNets</a>VNets: 仮想ネットワークブリッジの作成とサブネットの管理</p>
</li>
</ul></div>
<div class="paragraph">
<p>Optionsカテゴリでは、SDNセットアップで使用する追加サービスを追加・管理できます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="#pvesdn_config_controllers">コントローラー</a>：複雑なセットアップでのレイヤー3ルーティング制御用</p>
</li>
<li>
<p>
DHCP：IPAM内のゲストにIPを自動的に割り当て、DHCP経由でゲストにリースするゾーンのDHCPサーバーを定義します。</p>
</li>
<li>
<p>
<a href="#pvesdn_config_ipam">IPAM</a>：ゲストの外部IPアドレス管理を有効にします。</p>
</li>
<li>
<p>
<a href="#pvesdn_config_dns">DNS</a>：仮想ゲストのホスト名と IP アドレスを登録するための DNS サーバーの統合を定義します。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="pvesdn_tech_and_config_overview">
<span>12.5.テクノロジーとコンフィギュレーション</span> <a class="headerlink" href="#pvesdn_tech_and_config_overview" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE Software-Defined Network の実装は可能な限り標準的な Linux ネットワークを使います。その理由は、最新の Linux ネットワーキングは SDN 実装に必要なほとんど全ての機能を提供し、外部依存の追加を避け、壊れる可能性のあるコンポーネントの総量を減らすことができるからです。</p></div>
<div class="paragraph">
<p>Proxmox VE SDN 設定は<span class="monospaced">/etc/pve/sdn</span> にあり、Proxmox VE<a href="#chapter_pmxcfs">設定ファイルシステムを通して</a>他の全てのクラスタノードと共有されます。 これらの設定は、基礎となるネットワークスタックを管理するツール (例えば<span class="monospaced">ifupdown2</span>や<span class="monospaced">frr</span>) のそれぞれの設定フォーマットに変換されます。</p></div>
<div class="paragraph">
<p>新しい変更はすぐに適用されるのではなく、まず保留として記録されます。その後、ウェブインターフェイスのメインの<em>SDN</em>概要パネルで一連の異なる変更を一度に適用することができます。このシステムは様々な変更を単一のアトミックなものとしてロールアウトすることができます。</p></div>
<div class="paragraph">
<p>SDN は<em>/etc/pve/sdn</em> にある<em>.running-config</em>と<em>.version</em>ファイルを通してロールアウトされた状態を追跡します。</p></div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_zone">
<span>12.6.ゾーン</span> <a class="headerlink" href="#pvesdn_config_zone" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ゾーンは仮想的に分離されたネットワークを定義します。ゾーンは特定のノードに制限され、特定のゾーンとその中に含まれるVNetsにユーザーを制限するために、パーミッションが割り当てられます。</p></div>
<div class="paragraph">
<p>分離にはさまざまな技術を用いることができます：</p></div>
<div class="ulist"><ul>
<li>
<p>
シンプル：孤立ブリッジ。シンプルなレイヤ3ルーティングブリッジ(NAT)</p>
</li>
<li>
<p>
VLAN：仮想LANは、LANを細分化する古典的な方法です。</p>
</li>
<li>
<p>
QinQ：スタックドVLAN（正式名称：<span class="monospaced">IEEE 802.1ad）</span></p>
</li>
<li>
<p>
VXLAN：UDPトンネル経由のレイヤー2 VXLANネットワーク</p>
</li>
<li>
<p>
evpn (bgp evpn)：レイヤ3ルーティングを確立するためのBGP付きVXLAN</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="pvesdn_config_common_options">12.6.1.共通オプション<a class="headerlink" href="#pvesdn_config_common_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>以下のオプションはすべてのゾーンタイプで利用可能です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
ゾーンと関連するVNetsを配置するノード。</p>
</dd>
<dt class="hdlist1">
アイパム</dt>
<dd>
<p>
ゾーン内のIPを管理するためにIPアドレス管理(IPAM)ツールを使用します。オプション、デフォルトは<span class="monospaced">pve</span>。</p>
</dd>
<dt class="hdlist1">
DNS</dt>
<dd>
<p>
DNS APIサーバー。オプション。</p>
</dd>
<dt class="hdlist1">
リバースDNS</dt>
<dd>
<p>
リバースDNS APIサーバー。オプション。</p>
</dd>
<dt class="hdlist1">
DNSゾーン</dt>
<dd>
<p>
DNSドメイン名。<span class="monospaced">&lt;ホスト名&gt;.&lt;ドメイン名&gt;の</span>ようにホスト名を登録するときに使用します<span class="monospaced">。</span>DNSゾーンはDNSサーバー上にすでに存在している必要があります。オプション。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_simple">12.6.2.シンプルゾーン<a class="headerlink" href="#pvesdn_zone_plugin_simple" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これは最もシンプルなプラグインです。孤立したVNetブリッジを作成します。  このブリッジは物理インターフェイスにリンクされておらず、VMトラフィックは各ノード上でローカルにのみ行われます。 NATまたはルーティングされたセットアップで使用できます。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_vlan">12.6.3.VLAN ゾーン<a class="headerlink" href="#pvesdn_zone_plugin_vlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VLAN プラグインは、既存のローカル Linux または OVS ブリッジを使用してノードの物理インターフェイスに接続します。  VLAN プラグインは、VNet で定義された VLAN タギングを使用してネットワークセグメントを分離します。  これにより、異なるノード間でのVMの接続が可能になります。</p></div>
<div class="paragraph">
<p>VLAN ゾーン設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ブリッジ</dt>
<dd>
<p>
ノード間の接続を可能にする、<strong>各ノードに</strong>設定済みのローカルブリッジまたはOVSスイッチ。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_qinq">12.6.4.QinQゾーン<a class="headerlink" href="#pvesdn_zone_plugin_qinq" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QinQ は VLAN スタッキングとも呼ばれ、複数の VLAN タグを使用して分離します。  QinQゾーンは外側のVLANタグ（<em>サービスVLAN</em>）を定義し、内側のVLANタグはVNetによって定義されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この構成では、物理ネットワークスイッチがスタックドVLANをサポートしている必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>QinQゾーン設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ブリッジ</dt>
<dd>
<p>
各ローカルノードに設定済みのローカルVLAN対応ブリッジ</p>
</dd>
<dt class="hdlist1">
サービスVLAN</dt>
<dd>
<p>
このゾーンのメインVLANタグ</p>
</dd>
<dt class="hdlist1">
サービスVLANプロトコル</dt>
<dd>
<p>
802.1q（デフォルト）または 802.1ad サービス VLAN タイプを選択できます。</p>
</dd>
<dt class="hdlist1">
エムティーユー</dt>
<dd>
<p>
例えば、物理インターフェイスの MTU が<span class="monospaced">1500</span> の場合、MTU を<span class="monospaced">1496 に</span>下げる必要があります。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_vxlan">12.6.5.VXLAN ゾーン<a class="headerlink" href="#pvesdn_zone_plugin_vxlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VXLANプラグインは、既存のネットワーク（アンダーレイ）の上にトンネル（オーバーレイ）を確立します。  これは、レイヤー2のイーサネットフレームを、デフォルトの宛先ポート<span class="monospaced">4789を</span>使用するレイヤー4のUDPデータグラム内にカプセル化します。</p></div>
<div class="paragraph">
<p>すべてのピア間でUDP接続を有効にするには、アンダーレイネットワークを自分で設定する必要があります。</p></div>
<div class="paragraph">
<p>例えば、パブリック・インターネットの上にVXLANオーバーレイ・ネットワークを作成し、あたかもVMが同じローカル・レイヤ2ネットワークを共有しているかのように見せることができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">VXLANは、それ自体では暗号化を提供しません。VXLAN経由で複数のサイトに参加する場合は、サイト間VPNを使用するなどして、サイト間で安全な接続を確立してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>VXLANゾーン設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ピアアドレスリスト</dt>
<dd>
<p>
VXLANゾーン内の各ノードのIPアドレスのリスト。このIPアドレスで到達可能な外部ノードでもかまいません。 クラスタ内のすべてのノードをここに記載する必要があります。</p>
</dd>
<dt class="hdlist1">
エムティーユー</dt>
<dd>
<p>
VXLAN カプセル化は 50 バイトを使用するため、MTU は発信物理インターフェイスより 50 バイト低くする必要があります。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_evpn">12.6.6.EVPN ゾーン<a class="headerlink" href="#pvesdn_zone_plugin_evpn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>EVPNゾーンは、複数のクラスタにまたがるルーティング可能なレイヤ3ネットワークを構築します。これは、VPNを確立し、ルーティングプロトコルとしてBGPを利用することで実現されます。</p></div>
<div class="paragraph">
<p>EVPN の VNet はエニーキャスト IP アドレスおよび/または MAC アドレスを持つことができます。ブリッジ IP は各ノードで同じで、仮想ゲストがゲートウェイとしてこのアドレスを使用できることを意味します。</p></div>
<div class="paragraph">
<p>VRF（Virtual Routing and Forwarding）インターフェイスを通じて、異なるゾーンのVNet間でルーティングを行うことができます。</p></div>
<div class="paragraph">
<p>EVPN ゾーン設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
VRF VXLAN ID</dt>
<dd>
<p>
Vネット間の専用ルーティング相互接続に使用されるVXLAN-ID。 VネットのVXLAN-IDとは異なる必要があります。</p>
</dd>
<dt class="hdlist1">
コントローラー</dt>
<dd>
<p>
このゾーンで使用するEVPNコントローラ。(コントローラのプラグインのセクションを参照)。</p>
</dd>
<dt class="hdlist1">
VNet MACアドレス</dt>
<dd>
<p>
このゾーン内のすべてのVネットに割り当てられるエニーキャストMACアドレス。  定義されていない場合は自動生成されます。</p>
</dd>
<dt class="hdlist1">
出口ノード</dt>
<dd>
<p>
EVPNネットワークから実ネットワークを経由する出口ゲートウェイとして設定されるノード。  設定されたノードはEVPNネットワークのデフォルトルートをアナウンスします。  オプション。</p>
</dd>
<dt class="hdlist1">
一次出口ノード</dt>
<dd>
<p>
複数の出口ノードを使用する場合は、すべてのノードで負荷分散を行う代わりに、このプライマリ出口ノードを介してトラフィックを強制します。  オプションですが、SNATを使用する場合、またはアップストリームルーターがECMPをサポートしていない場合は必要です。</p>
</dd>
<dt class="hdlist1">
出口ノード ローカルルーティング</dt>
<dd>
<p>
これは、出口ノードからVM/CTサービスに到達する必要がある場合の特別なオプションです。(デフォルトでは、出口ノードはリアルネットワークとEVPNネットワーク間のトラフィック転送のみを許可します)。  オプションです。</p>
</dd>
<dt class="hdlist1">
サブネットの広告</dt>
<dd>
<p>
EVPNネットワーク内のフルサブネットをアナウンスします。 サイレントVM/CTがある場合(例えば、複数のIPがあり、エニーキャストゲートウェイがこれらのIPからのトラフィックを見ない場合、IPアドレスはEVPNネットワーク内に到達できません)。  オプション。</p>
</dd>
<dt class="hdlist1">
ARP ND抑制の無効化</dt>
<dd>
<p>
ARPやND（Neighbor Discovery）パケットを抑制しないでください。  これは、VMでフローティングIPを使用している場合に必要です（IPアドレスとMACアドレスがシステム間で移動されます）。  オプション。</p>
</dd>
<dt class="hdlist1">
ルートターゲットインポート</dt>
<dd>
<p>
外部 EVPN ルートターゲットのリストをインポートできるようにします。クロスDCまたは異なるEVPNネットワークの相互接続に使用します。  オプションです。</p>
</dd>
<dt class="hdlist1">
エムティーユー</dt>
<dd>
<p>
VXLAN カプセル化は 50 バイトを使用するため、MTU は発信物理インターフェイスの最大 MTU よりも 50 バイト少なくする必要があります。  オプションで、デフォルトは 1450 です。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_vnet">
<span>12.7.VNets</span> <a class="headerlink" href="#pvesdn_config_vnet" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>SDN GUI で仮想ネットワーク（VNet）を作成すると、各ノードで同じ名前のローカルネットワークインタフェースが利用可能になります。ゲストを VNet に接続するには、インターフェイスをゲストに割り当て、それに応じて IP アドレスを設定します。</p></div>
<div class="paragraph">
<p>ゾーンによって、これらのオプションの意味は異なり、本書の各ゾーンのセクションで説明されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">現状では、一部のオプションは効果がなかったり、特定のゾーンで機能しないことがあります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>VNet設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
身分証明書</dt>
<dd>
<p>
VNetを識別するための最大8文字のID</p>
</dd>
<dt class="hdlist1">
コメント</dt>
<dd>
<p>
より説明的な識別子。インターフェースのエイリアスとして割り当てられます。オプション</p>
</dd>
<dt class="hdlist1">
ゾーン</dt>
<dd>
<p>
このVNetの関連ゾーン</p>
</dd>
<dt class="hdlist1">
タグ</dt>
<dd>
<p>
固有のVLANまたはVXLAN ID</p>
</dd>
<dt class="hdlist1">
VLAN対応</dt>
<dd>
<p>
インターフェイスの vlan 対応オプションを有効にし、ゲストでの設定を有効にします。</p>
</dd>
<dt class="hdlist1">
ポートの分離</dt>
<dd>
<p>
このインターフェースのすべてのゲストポートに対して分離フラグを設定します。つまり、ゲストは非絶縁ブリッジポート (ブリッジ自体) にのみトラフィックを送信できます。この設定を有効にするには、影響を受けるゲストを再起動する必要があります。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ポートの分離は各ホストに対してローカルに行われます。ノード間で VNET のトラフィックをさらに分離するには<a href="#pvesdn_firewall_integration">VNET ファイアウォールを</a>使用します。例えば、デフォルトでDROPし、IPサブネットからゲートウェイへのトラフィックのみを許可します。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_subnet">
<span>12.8.サブネット</span> <a class="headerlink" href="#pvesdn_config_subnet" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>サブネットは、CIDRネットワーク・アドレスによって記述される特定のIP範囲を定義します。 各VNetは、1つまたは複数のサブネットを持つことができます。</p></div>
<div class="paragraph">
<p>サブネットは</p></div>
<div class="ulist"><ul>
<li>
<p>
特定のVNetに定義できるIPアドレスの制限</p>
</li>
<li>
<p>
レイヤー3ゾーンのVNetにルート/ゲートウェイを割り当て</p>
</li>
<li>
<p>
レイヤー3ゾーンのVNetでSNATを有効化</p>
</li>
<li>
<p>
IPAMプラグインによる仮想ゲスト(VMまたはCT)へのIP自動割り当て</p>
</li>
<li>
<p>
DNSプラグインによるDNS登録</p>
</li>
</ul></div>
<div class="paragraph">
<p>サブネットゾーンにIPAMサーバーが関連付けられている場合、サブネットプレフィックスは自動的にIPAMに登録されます。</p></div>
<div class="paragraph">
<p>サブネット構成オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
身分証明書</dt>
<dd>
<p>
CIDRネットワークアドレス（例：10.0.0.0/8</p>
</dd>
<dt class="hdlist1">
ゲートウェイ</dt>
<dd>
<p>
ネットワークのデフォルトゲートウェイのIPアドレス。レイヤー3ゾーン（Simple/EVPNプラグイン）では、VNet上に配置されます。</p>
</dd>
<dt class="hdlist1">
SNAT</dt>
<dd>
<p>
パケットをノードの送信インターフェイスに転送することで、VNet内部からのVMが外部ネットワークに接続できるようにするソースNATを有効にします。EVPNゾーンでは、転送はEVPNゲートウェイノードで行われます。 オプション。</p>
</dd>
<dt class="hdlist1">
DNSゾーンプレフィックス</dt>
<dd>
<p>
&lt;ホスト名&gt;.prefix.&lt;ドメイン&gt;のように、ドメイン登録にプレフィックスを追加します。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_controllers">
<span>12.9.コントローラー</span> <a class="headerlink" href="#pvesdn_config_controllers" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ゾーンによっては、制御プレーンとデータプレーンを分離して実装しているため、VNetの制御プレーンを管理する外部コントローラが必要になります。</p></div>
<div class="paragraph">
<p>現在、外部コントローラを必要とするのは<span class="monospaced">EVPN</span>ゾーンのみです。</p></div>
<div class="sect3">
<h4 id="pvesdn_controller_plugin_evpn">12.9.1.EVPN コントローラ<a class="headerlink" href="#pvesdn_controller_plugin_evpn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">EVPN</span>ゾーンは、コントロールプレーンを管理する外部コントローラを必要とします。 EVPNコントローラのプラグインは、Free Range Routing (frr)ルータを設定します。</p></div>
<div class="paragraph">
<p>EVPNコントローラを有効にするには、EVPNゾーンに参加するすべてのノードにfrrをインストールする必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install frr frr-pythontools</pre>
</div></div>
<div class="paragraph">
<p>EVPN コントローラーの設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ASN #</dt>
<dd>
<p>
一意のBGP ASN番号。プライベートな ASN 番号 (64512 - 65534, 4200000000 - 4294967294) を使用することを強くお勧めします。</p>
</dd>
<dt class="hdlist1">
ピアーズ</dt>
<dd>
<p>
EVPNゾーンの全ノードのIPリスト。  (外部ノードまたはルートリフレクタサーバも可能)</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_controller_plugin_BGP">12.9.2.BGPコントローラ<a class="headerlink" href="#pvesdn_controller_plugin_BGP" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>BGPコントローラはゾーンによって直接使用されません。 BGPピアを管理するためにFRRを設定するために使用することができます。</p></div>
<div class="paragraph">
<p>BGP-EVPNでは、ノードごとに異なるASNを定義してEBGPを行うために使用できます。 また、外部のBGPピアにEVPNルートをエクスポートするためにも使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デフォルトでは、シンプルなフルメッシュEVPNの場合、BGPコントローラを定義する必要はありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>BGPコントローラの設定オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
このBGPコントローラのノード</p>
</dd>
<dt class="hdlist1">
ASN #</dt>
<dd>
<p>
一意のBGP ASN番号。(64512～65534)または(4200000000～4294967294)の範囲のプライベートASN番号を使用することを強くお勧めします。</p>
</dd>
<dt class="hdlist1">
ピア</dt>
<dd>
<p>
基礎となるBGPネットワークを使用して通信したいピアIPアドレスのリスト。</p>
</dd>
<dt class="hdlist1">
EBGP</dt>
<dd>
<p>
ピアのリモートASが異なる場合、EBGPを有効にします。</p>
</dd>
<dt class="hdlist1">
ループバックインターフェース</dt>
<dd>
<p>
EVPNネットワークのソースとしてループバックまたはダミーインターフェイスを使用します（マルチパス用）。</p>
</dd>
<dt class="hdlist1">
エブグップミューティホップ</dt>
<dd>
<p>
ピアが直接接続されていない場合やループバックを使用している場合は、ピアに到達するためのホップ数を増やします。</p>
</dd>
<dt class="hdlist1">
bgp-multipath-as-path-relax</dt>
<dd>
<p>
ピアのASNが異なる場合、ECMPを許可します。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_controller_plugin_ISIS">12.9.3.ISIS コントローラ<a class="headerlink" href="#pvesdn_controller_plugin_ISIS" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ISISコントローラはゾーンによって直接使用されません。 ISISドメインにEVPNルートをエクスポートするためにFRRを設定するために使用できます。</p></div>
<div class="paragraph">
<p>ISIS コントローラ構成オプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
この ISIS コントローラのノード。</p>
</dd>
<dt class="hdlist1">
ドメイン</dt>
<dd>
<p>
ISIS独自のドメイン。</p>
</dd>
<dt class="hdlist1">
ネットワークエンティティ名</dt>
<dd>
<p>
このノードを識別する一意の ISIS ネットワーク・アドレス。</p>
</dd>
<dt class="hdlist1">
インターフェース</dt>
<dd>
<p>
ISIS が使用する物理インターフェースのリスト。</p>
</dd>
<dt class="hdlist1">
ループバック</dt>
<dd>
<p>
EVPNネットワークのソースとしてループバックまたはダミーインターフェイスを使用します（マルチパス用）。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_ipam">
<span>12.10.IPAM</span> <a class="headerlink" href="#pvesdn_config_ipam" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>IPアドレス管理(IPAM)ツールはネットワーク上のクライアントのIPアドレスを管理します。Proxmox VE の SDN は IPAM を使用して、例えば新しいゲストのために空いている IP アドレスを見つけます。</p></div>
<div class="paragraph">
<p>1つのIPAMインスタンスは、1つまたは複数のゾーンに関連付けることができます。</p></div>
<div class="sect3">
<h4 id="pvesdn_ipam_plugin_pveipam">12.10.1.PVE IPAM プラグイン<a class="headerlink" href="#pvesdn_ipam_plugin_pveipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEクラスタのデフォルトの組み込みIPAMです。</p></div>
<div class="paragraph">
<p>PVE IPAM Plugin の現在のステータスは、データセンター設定の SDN セクションにある IPAM パネルで確認できます。この UI を使用して、IP マッピングの作成、更新、および削除を行うことができます。<a href="#pvesdn_config_dhcp">DHCP</a>機能と併用すると特に便利です。</p></div>
<div class="paragraph">
<p>DHCP を使用している場合、IPAM パネルを使用して特定の VM のリースを作成または編集することができます。DHCP を使用している VM の IP を編集する場合は、ゲストに新しい DHCP リースを取得させる必要があります。これは通常、ゲストのネットワークスタックをリロードするか、ゲストを再起動することで可能です。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_ipam_plugin_netbox">12.10.2.NetBox IPAM プラグイン<a class="headerlink" href="#pvesdn_ipam_plugin_netbox" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://github.com/netbox-community/netbox">NetBoxは</a>、オープンソースのIPアドレス管理（IPAM）およびデータセンター・インフラストラクチャ管理（DCIM）ツールです。</p></div>
<div class="paragraph">
<p>NetBox と Proxmox VE SDN を統合するには、以下の手順に従って NetBox で API トークンを作成<a href="https://docs.netbox.dev/en/stable/integrations/rest-api/#tokens">します: https://docs.netbox.dev/en/stable/integrations/rest-api/#tokens</a></p></div>
<div class="paragraph">
<p>NetBoxの設定プロパティは以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
URL</dt>
<dd>
<p>
NetBox REST API エンドポイント<span class="monospaced">: http://yournetbox.domain.com/api</span></p>
</dd>
<dt class="hdlist1">
トークン</dt>
<dd>
<p>
APIアクセストークン</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_ipam_plugin_phpipam">12.10.3. phpIPAM プラグイン<a class="headerlink" href="#pvesdn_ipam_plugin_phpipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://phpipam.net/">phpIPAMでは</a>、"アプリケーション "を作成し、アプリケーションに管理者権限を持つAPIトークンを追加する必要があります。</p></div>
<div class="paragraph">
<p>phpIPAM の設定プロパティは次のとおりです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
URL</dt>
<dd>
<p>
REST-API エンドポイント<span class="monospaced">: http://phpipam.domain.com/api/&lt;appname&gt;/</span></p>
</dd>
<dt class="hdlist1">
トークン</dt>
<dd>
<p>
APIアクセストークン</p>
</dd>
<dt class="hdlist1">
セクション</dt>
<dd>
<p>
整数の ID。セクションは phpIPAM のサブネットのグループです。デフォルトのインストールでは、顧客に<span class="monospaced">sectionid=1 を</span>使用します。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_dns">
<span>12.11.DNS</span> <a class="headerlink" href="#pvesdn_config_dns" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE SDN の DNS プラグインは、ホスト名と IP アドレスを登録するための DNS API サーバを定義するために使用します。DNS 設定は 1 つ以上のゾーンに関連付けられ、ゾーンに設定されたすべてのサブネット IP に対して DNS 登録を提供します。</p></div>
<div class="sect3">
<h4 id="pvesdn_dns_plugin_powerdns">12.11.1.PowerDNSプラグイン<a class="headerlink" href="#pvesdn_dns_plugin_powerdns" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://doc.powerdns.com/authoritative/http-api/index.html">https://doc.powerdns.com/authoritative/http-api/index.html</a></p></div>
<div class="paragraph">
<p>PowerDNSの設定で、ウェブサーバーとAPIを有効にする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>api=yes api-key=arandomgeneratedstring webserver=yes webserver-port=8081</pre>
</div></div>
<div class="paragraph">
<p>PowerDNSの設定オプションは以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
url</dt>
<dd>
<p>
REST API エンドポイント<a href="http://yourpowerdnserver.domain.com:8081/api/v1/servers/localhost">: http://yourpowerdnserver.domain.com:8081/api/v1/servers/localhost</a></p>
</dd>
<dt class="hdlist1">
キー</dt>
<dd>
<p>
APIアクセスキー</p>
</dd>
<dt class="hdlist1">
トル</dt>
<dd>
<p>
レコードのデフォルト TTL</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_dhcp">
<span>12.12.DHCP</span> <a class="headerlink" href="#pvesdn_config_dhcp" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE SDN の DHCP プラグインを使用すると、ゾーンに DHCP サーバを自動的に配置できます。DHCP 範囲が設定されているゾーン内のすべてのサブネットに DHCP を提供します。現在、DHCP で使用可能なバックエンドプラグインは dnsmasq プラグインだけです。</p></div>
<div class="paragraph">
<p>DHCPプラグインは、VM/CTに新しいネットワークインターフェイスを追加する際に、ゾーンに設定されたIPAMプラグインでIPを割り当てることで動作します。IPAMの設定方法については、<a href="#pvesdn_config_ipam">ドキュメントの各セクションを</a>参照してください。</p></div>
<div class="paragraph">
<p>VMが起動すると、ゾーンのDHCPプラグインにMACアドレスとIPのマッピングが作成されます。ネットワークインターフェイスが削除されるか、VM/CTが破棄されると、IPAMとDHCPサーバのエントリも削除されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">現在、一部の機能（IPマッピングの追加/編集/削除）は、<a href="#pvesdn_ipam_plugin_pveipam">PVE IPAMプラグインを</a>使用した場合にのみ利用可能です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_15">12.12.1.コンフィギュレーション<a class="headerlink" href="#_configuration_15" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Web UIでゾーンの自動DHCPを有効にするには、「ゾーン」パネルを使用し、ゾーンの詳細オプションでDHCPを有効にします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">現在、自動DHCPをサポートしているのはシンプルゾーンのみです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ゾーンで自動DHCPを有効にした後、ゾーン内のサブネットにDHCP範囲を設定する必要があります。そのためには、[Vnets]パネルに移動して、DHCP範囲を設定したいサブネットを選択します。編集ダイアログでは、それぞれのタブでDHCP範囲を設定できます。または、以下のCLIコマンドを使用して、サブネットのDHCP範囲を設定することもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvesh set /cluster/sdn/vnets/&lt;vnet&gt;/subnets/&lt;subnet&gt; -dhcp-range start-address=10.0.1.100,end-address=10.0.1.200 -dhcp-range start-address=10.0.2.100,end-address=10.0.2.200</pre>
</div></div>
<div class="paragraph">
<p>また、サブネットにゲートウェイを設定する必要があります - そうしないと自動DHCPが機能しません。</p></div>
<div class="paragraph">
<p>DHCPプラグインは、設定された範囲でのみIPAM内のIPを割り当てます。</p></div>
<div class="paragraph">
<p><a href="#pvesdn_install_dhcp_ipam">dnsmasq DHCPプラグ</a>インのインストール手順も忘れないでください。</p></div>
</div>
<div class="sect3">
<h4 id="_plugins">12.12.2.プラグイン<a class="headerlink" href="#_plugins" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_dnsmasq_plugin">Dnsmasq プラグイン<a class="headerlink" href="#_dnsmasq_plugin" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>現在、これは唯一のDHCPプラグインであり、したがってゾーンでDHCPを有効にするときに使用されるプラグインです。</p></div>
<div class="paragraph">
<div class="title">インストール</div><p>インストールについては、「<a href="#pvesdn_install_dhcp_ipam">DHCP IPAM」の</a>セクションを参照してください。</p></div>
<div class="paragraph">
<div class="title">構成</div><p>プラグインは dnsmasq がデプロイされるゾーンごとに新しい systemd サービスを作成します。サービス名は<span class="monospaced">dnsmasq@&lt;zone&gt;</span> です。このサービスのライフサイクルは DHCP プラグインによって管理されます。</p></div>
<div class="paragraph">
<p>プラグインは、<span class="monospaced">/etc/dnsmasq.d/&lt;zone&gt;</span>フォルダに以下の設定ファイルを自動的に生成します：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">00-default.conf</span></dt>
<dd>
<p>
dnsmasqインスタンスのデフォルトのグローバル構成が含まれます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">10-&lt;zone&gt;-&lt;subnet_cidr&gt;.conf</span></dt>
<dd>
<p>
このファイルは、DHCP経由で設定されるべきDNSサーバーなど、サブネットの特定のオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">10-&lt;zone&gt;-&lt;subnet_cidr&gt;.ranges.conf</span></dt>
<dd>
<p>
このファイルは、dnsmasqインスタンスのDHCP範囲を構成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">エーテル</span></dt>
<dd>
<p>
このファイルには、IPAMプラグインからのMACアドレスとIPマッピングが含まれています。これらのマッピングを上書きするには、dnsmasqプラグインによって上書きされるため、このファイルを編集するのではなく、それぞれのIPAMプラグインを使用してください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>上記のファイルはDHCPプラグインによって管理されるため、編集してはいけません。dnsmasqの設定をカスタマイズするには、設定フォルダに追加のファイル（<span class="monospaced">90-custom.confなど</span>）を作成します。</p></div>
<div class="paragraph">
<p>設定ファイルは順番に読み込まれるので、カスタム設定ファイルに適切な名前を付けることで、 設定ディレクティブの順番を制御することができます。</p></div>
<div class="paragraph">
<p>DHCPリースは<span class="monospaced">/var/lib/misc/dnsmasq.&lt;zone&gt;.leases</span>ファイルに保存されます。</p></div>
<div class="paragraph">
<p>PVE IPAMプラグインを使用すると、DHCPリースの更新、作成、削除ができます。 詳細については、<a href="#pvesdn_ipam_plugin_pveipam">PVE IPAMプラグ</a>インのドキュメントを参照してください。他のIPAMプラグインでは、DHCPリースの変更は現在サポートされていません。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_firewall_integration">
<span>12.13.ファイアウォールの統合</span> <a class="headerlink" href="#pvesdn_firewall_integration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>SDN は、ファイアウォールルールのソース/宛先フィールドで参照できる IPSet を自動的に生成することで Proxmox VE ファイアウォールと統合します。これは VNets と IPAM エントリに対して自動的に行われます。</p></div>
<div class="sect3">
<h4 id="_vnets_and_subnets">12.13.1.VNetsとサブネット<a class="headerlink" href="#_vnets_and_subnets" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイアウォールはすべてのVNetに対して、SDNスコープ内に以下のIPSetを自動的に生成します：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ネットオール</span></dt>
<dd>
<p>
  VNet内のすべてのサブネットのCIDRを含みます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ブイネットゲートウェイ</span></dt>
<dd>
<p>
  VNet内のすべてのサブネットのゲートウェイのIPを含みます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vnet-no-gateway</span></dt>
<dd>
<p>
  VNet内のすべてのサブネットのCIDRを含みますが、ゲートウェイは含みません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vnet-dhcp</span></dt>
<dd>
<p>
  VNetのサブネットに設定されたすべてのDHCPレンジを含みます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>設定を変更すると、IPSetsは自動的に更新されるため、サブネットの設定を変更する際にファイアウォールルールを更新する必要はありません。</p></div>
<div class="sect4">
<h5 id="_simple_zone_example">シンプルゾーンの例<a class="headerlink" href="#_simple_zone_example" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>VNetとそのサブネットについて、以下のコンフィギュレーションを仮定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/sdn/vnets.cfg vnet: vnet0 zone simple # /etc/pve/sdn/subnets.cfg subnet: simple-192.0.2.0-24 vnet vnet0 dhcp-range start-address=192.0.2.100,end-address=192.0.2.199 gateway 192.0.2.1 subnet: simple-2001:db8::-64 vnet vnet0 dhcp-range start-address=2001:db8::1000,end-address=2001:db8::1999 gateway 2001:db8::1</pre>
</div></div>
<div class="paragraph">
<p>この例では、<em>192.0.2.0/24を</em>IPレンジ、<em>192.0.2.</em>1をゲートウェイ、<em>192.0.2.100</em>～<em>192.0.2.199を</em>DHCPレンジとして、VNet<span class="monospaced">vnet0に</span>IPv4サブネットを設定しました。</p></div>
<div class="paragraph">
<p>さらに、<em>2001:db8::/64を</em>IPレンジ、<em>2001:db8::</em>1をゲートウェイ、<em>2001:db8::1000</em>～<em>2001:db8::1999を</em>DHCPレンジとするIPv6サブネットを設定しました。</p></div>
<div class="paragraph">
<p>vnet0用に自動生成されたIPセットには、以下の要素が含まれます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">vnet0-all</span></dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.0/24</em></p>
</li>
<li>
<p>
<em>2001:db8::/64</em></p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vnet0-ゲートウェイ</span></dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.1</em></p>
</li>
<li>
<p>
<em>2001:db8::1</em></p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vnet0-no-gateway</span></dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.0/24</em></p>
</li>
<li>
<p>
<em>2001:db8::/64</em></p>
</li>
<li>
<p>
!<em>192.0.2.1</em></p>
</li>
<li>
<p>
<em>2001:db8::1</em></p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vnet0-dhcp</span></dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.100 - 192.0.2.199</em></p>
</li>
<li>
<p>
<em>2001:db8::1000 - 2001:db8::1999</em></p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect3">
<h4 id="_ipam">12.13.2.IPAM<a class="headerlink" href="#_ipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>内蔵の PVE IPAM を使用している場合、ファイアウォールは IPAM にエントリがあるゲストごとに IP セットを自動的に生成します。ID 100のゲスト用のそれぞれのIPセットは<span class="monospaced">guest-ipam-100に</span>なります。これは、すべてのIPAMエントリからのすべてのIPアドレスを含みます。したがって、ゲスト 100 が複数の VNets のメンバーである場合、IPset には<strong>すべての</strong>VNets からの IP が含まれます。</p></div>
<div class="paragraph">
<p>エントリーが追加/更新/削除されると、それに応じてそれぞれのIPSetが更新されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ゲストのすべてのエントリを削除したときに、自動生成されたIPSセットを参照するファイアウォールルールが残っていると、ファイアウォールは存在しないIPSセットを参照するため、ルールセットの更新に失敗します。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_setup_examples">
<span>12.14.例</span> <a class="headerlink" href="#pvesdn_setup_examples" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>この節では、一般的な SDN のユースケースに合わせた複数の設定例を示します。利用可能な設定オプションの理解を深めるために追加的な詳細を提供し、具体的な実装を提供することを目的としています。</p></div>
<div class="sect3">
<h4 id="pvesdn_setup_example_simple">12.14.1.シンプルゾーンの例<a class="headerlink" href="#pvesdn_setup_example_simple" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>シンプルゾーンネットワークは、単一のホスト上のゲストが相互に接続するための隔離されたネットワークを作成します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ゲスト間の接続は、すべてのゲストが同じホストに存在し、他のノードに到達できない場合に可能です。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">simpleという</span>名前のシンプルなゾーンを作成します。</p>
</li>
<li>
<p>
VNet名<span class="monospaced">vnet</span>1を追加します。</p>
</li>
<li>
<p>
ゲートウェイとSNATオプションを有効にしてサブネットを作成します。</p>
</li>
<li>
<p>
これにより、ノード上にネットワークブリッジ<span class="monospaced">vnet1が</span>作成されます。このブリッジをネットワークに参加するゲストに割り当て、IPアドレスを設定します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>2つのVMのネットワーク・インターフェイスのコンフィギュレーションは、10.0.1.0/24ネットワーク経由で通信できるように、次のようになります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>allow-hotplug ens19 iface ens19 inet static address 10.0.1.14/24</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre>allow-hotplug ens19 iface ens19 inet static address 10.0.1.15/24</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_nat">12.14.2.ソースNATの例<a class="headerlink" href="#pvesdn_setup_example_nat" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>シンプルネットワークゾーンでゲストの発信接続を許可する場合、シンプルゾーンにはソースNAT（SNAT）オプションがあります。</p></div>
<div class="paragraph">
<p><a href="#pvesdn_setup_example_simple">上記の</a>設定から、VNet<span class="monospaced">vnet</span>1にサブネットを追加し、ゲートウェイIPを設定し、SNATオプションを有効にします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サブネット：172.16.0.0/24 ゲートウェイ：172.16.0.1 SNAT：チェック済み</pre>
</div></div>
<div class="paragraph">
<p>ゲストでは、サブネットのIPレンジ内で静的IPアドレスを設定します。</p></div>
<div class="paragraph">
<p>ノード自体はゲートウェイIP<em>172.16.0.</em>1でこのネットワークに参加し、サブネット範囲内のゲストのためのNATゲートウェイとして機能します。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_vlan">12.14.3.VLAN設定例<a class="headerlink" href="#pvesdn_setup_example_vlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>異なるノード上のVMが分離されたネットワークを介して通信する必要がある場合、VLANゾーンはVLANタグを使用してネットワークレベルの分離を可能にします。</p></div>
<div class="paragraph">
<p><span class="monospaced">myvlanzone</span> という名前の VLAN ゾーンを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvlanzone ブリッジ: vmbr0</pre>
</div></div>
<div class="paragraph">
<p>VLANタグ10と先に作成した<span class="monospaced">myVlanzoneで</span> <span class="monospaced">myVnet1という</span>VNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvnet1 Zone: myvlanzone Tag：10</pre>
</div></div>
<div class="paragraph">
<p>メイン SDN パネルから設定を適用し、各ノードにローカルに VNets を作成します。</p></div>
<div class="paragraph">
<p>node1 上に Debian ベースの仮想マシン<em>(vm1)</em> を<span class="monospaced">myvnet1</span> 上の vNIC で作成します。</p></div>
<div class="paragraph">
<p>このVMには、以下のネットワーク構成を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.3.100/24</pre>
</div></div>
<div class="paragraph">
<p>ノード2上に、vm1と同じVNet<span class="monospaced">myvnet1</span>上のvNICを持つ2台目の仮想マシン<em>（vm2</em>）を作成します。</p></div>
<div class="paragraph">
<p>このVMには、以下のネットワーク構成を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.3.101/24</pre>
</div></div>
<div class="paragraph">
<p>これに従って、そのネットワークを使用して両方のVM間でpingを実行できるはずです。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_qinq">12.14.4.QinQセットアップの例<a class="headerlink" href="#pvesdn_setup_example_qinq" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この例では、2つのQinQゾーンを設定し、各ゾーンに2つのVMを追加して、より分離されたVLANの設定を可能にするVLANタグの追加レイヤを示します。</p></div>
<div class="paragraph">
<p>この構成の典型的なユースケースは、ホスティング・プロバイダーがVM通信のために顧客に隔離されたネットワークを提供し、VMを他の顧客から隔離する場合です。</p></div>
<div class="paragraph">
<p>サービスVLAN 20で<span class="monospaced">qinqzone1という</span>QinQゾーンを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID：qinqzone1ブリッジ：vmbr0サービスVLAN：20</pre>
</div></div>
<div class="paragraph">
<p>サービスVLAN 30で<span class="monospaced">qinqzone2という</span>別のQinQゾーンを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID：qinqzone2ブリッジ：vmbr0サービスVLAN：30</pre>
</div></div>
<div class="paragraph">
<p>先に作成した<span class="monospaced">qinqzone1</span>ゾーンに、VLAN-ID 100の<span class="monospaced">myVnet1という</span>VNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: qinqvnet1 Zone: qinqzone1 Tag：100</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">qinqzone2</span>ゾーンにVLAN-ID 100の<span class="monospaced">myVnet2を</span>作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: qinqvnet2 Zone: qinqzone2 Tag：100</pre>
</div></div>
<div class="paragraph">
<p>メインの SDN ウェブインタフェースパネルで設定を適用して、各ノードでローカルに VNets を作成します。</p></div>
<div class="paragraph">
<p>Debian ベースの仮想マシンを 4 台 (vm1、vm2、vm3、vm4) 作成し、vm1 と vm2 にブリッジ<span class="monospaced">qinqvnet1</span>を、vm3 と vm4 にブリッジ<span class="monospaced">qinqvnet2</span> を使用してネットワークインターフェイスを追加します。</p></div>
<div class="paragraph">
<p>VM内部では、<span class="monospaced">/etc/network/interfacesなどで</span>インターフェースのIPアドレスを設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.3.101/24</pre>
</div></div>
<div class="paragraph">
<p>4つのVMすべてに<em>10.0.3.101</em>～<em>10.0.3.104の</em>IPアドレスを設定します。</p></div>
<div class="paragraph">
<p>これで、VM<em>vm</em>1と<em>vm2の</em>間、および<em>vm</em>3と<em>vm4の</em>間でpingを打つことができるはずです。しかし、VM<em>vm1</em>、<em>vm2の</em>どちらも、VM<em>vm3</em>、<em>vm4に対して</em>pingを打つことができません。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_vxlan">12.14.5.VXLAN セットアップ例<a class="headerlink" href="#pvesdn_setup_example_vxlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この例では、ノードIPアドレスが192.168.0.1、192.168.0.2、192.168.0.3の3つのノードを持つクラスタを想定しています。</p></div>
<div class="paragraph">
<p><span class="monospaced">myvxlanzone</span>という名前の VXLAN ゾーンを作成し、ノードからのすべての IP をピアアドレスリストに追加します。デフォルトの MTU 1450 を使用するか、適宜設定します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID：myvxlanzoneピアのアドレスリスト：192.168.0.1,192.168.0.2,192.168.0.3</pre>
</div></div>
<div class="paragraph">
<p>先に作成したVXLANゾーン<span class="monospaced">myvxlanzoneを</span>使用して、<span class="monospaced">vxvnet1という</span>VNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: vxvnet1 Zone: myvxlanzone Tag：100000</pre>
</div></div>
<div class="paragraph">
<p>メインの SDN ウェブインタフェースパネルで設定を適用して、各ノードにローカルに VNets を作成します。</p></div>
<div class="paragraph">
<p>ノード1にDebianベースの仮想マシン<em>(vm1)</em>を作成し、<span class="monospaced">vxvnet</span>1にvNICを設定します。</p></div>
<div class="paragraph">
<p>このVMには、以下のネットワーク構成を使用します（MTUが低いことに注意してください）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.3.100/24 mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>vm1と同じVNet<span class="monospaced">vxvnet1</span>上にvNICを持つ2台目の仮想マシン<em>（vm2</em>）をnode3上に作成します。</p></div>
<div class="paragraph">
<p>このVMには、以下のネットワーク構成を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.3.101/24 mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>すると、<em>vm</em>1と<em>vm2の</em>間でpingが送れるようになるはずです。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_evpn">12.14.6.EVPNセットアップ例<a class="headerlink" href="#pvesdn_setup_example_evpn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この例では、IPアドレスが192.168.0.1、192.168.0.2、192.168.0.3の3つのノード（node1、node2、node3）を持つクラスタを想定しています。</p></div>
<div class="paragraph">
<p>プライベートASN番号と上記のノードアドレスをピアとして使用して、EVPNコントローラを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myevpnctl ASN#: 65000 Peers：192.168.0.1,192.168.0.2,192.168.0.3</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">myevpnzoneという</span>名前のEVPNゾーンを作成し、先に作成したEVPN-コントローラーを割り当て、<em>node</em>1と<em>node</em>2を出口ノードとして定義します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myevpnzone VRF VXLAN Tag：10000 コントローラ： myevpnctl MTU： 1450 VNet MAC アドレス：32:F4:05:FE:6C:0A 終了ノード：node1,node2</pre>
</div></div>
<div class="paragraph">
<p>EVPNゾーン<span class="monospaced">myevpnzoneを</span>使用して、<span class="monospaced">myvnet1という</span>最初のVNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvnet1 Zone: myevpnzone Tag：11000</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">myvnet</span>1にサブネットを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サブネット：10.0.1.0/24 ゲートウェイ：10.0.1.1</pre>
</div></div>
<div class="paragraph">
<p>同じEVPNゾーン<span class="monospaced">myevpnzoneを</span>使用して、<span class="monospaced">myvnet2という</span>名前の2番目のVNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvnet2 Zone: myevpnzone Tag：12000</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">myvnet2`に</span>別のサブネットを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サブネット：10.0.2.0/24 ゲートウェイ：10.0.2.1</pre>
</div></div>
<div class="paragraph">
<p>メイン SDN ウェブインタフェースパネルからコンフィグレーションを適用して、各ノードにローカルに VNets を作成し、FRR コンフィグレーションを生成します。</p></div>
<div class="paragraph">
<p>node1 上に Debian ベースの仮想マシン<em>(vm1)</em> を<span class="monospaced">myvnet1</span> 上の vNIC で作成します。</p></div>
<div class="paragraph">
<p><em>vm1には</em>以下のネットワーク構成を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.1.100/24 gateway 10.0.1.1 mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>もう1つのVNet<span class="monospaced">myvnet2</span>上にvNICを持つ2つ目の仮想マシン<em>（vm2</em>）をnode2上に作成します。</p></div>
<div class="paragraph">
<p><em>vm2には</em>以下のネットワーク構成を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0 iface eth0 inet static address 10.0.2.100/24 gateway 10.0.2.1 mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>これでvm1からvm2に、vm1からvm2にpingを送れるようになります。</p></div>
<div class="paragraph">
<p>ゲートウェイでないnode3の<em>vm</em>2から外部IPにpingを打つと、パケットは設定された<em>myvnet2</em>ゲートウェイに行き、その後、出口ノード<em>（node1</em>または<em>node2</em>）にルーティングされ、そこからnode1またはnode2に設定されたデフォルトゲートウェイを経由してそれらのノードから離脱します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">外部ゲートウェイのnode1とnode2に<em>10.0.1.0/24と</em> <em>10.0.2.0/24</em>ネットワークのリバースルートを追加して、パブリックネットワークが返信できるようにする必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>外部BGPルータを設定した場合、BGP-EVPNルート（この例では10.0.1.0/24と10.0.2.0/24）は動的にアナウンスされます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_notes">
<span>12.15.備考</span> <a class="headerlink" href="#pvesdn_notes" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_multiple_evpn_exit_nodes">12.15.1.複数のEVPN出口ノード<a class="headerlink" href="#_multiple_evpn_exit_nodes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>複数のゲートウェイノードがある場合、<span class="monospaced">rp_filter</span>(Strict Reverse Path Filter) オプションを無効にする必要があります。</p></div>
<div class="paragraph">
<p><span class="monospaced">etc/sysctl.confに</span>以下を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>net.ipv4.conf.default.rp_filter=0 net.ipv4.conf.all.rp_filter=0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_vxlan_ipsec_encryption">12.15.2.VXLAN IPSEC 暗号化<a class="headerlink" href="#_vxlan_ipsec_encryption" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VXLAN の上に IPSEC 暗号化を追加するために、この例では<span class="monospaced">strongswan</span> を使用する方法を示します。</p></div>
<div class="paragraph">
<p>暗号化を処理するために、IPv4の場合は60バイト、IPv6の場合は80バイト、<em>MTUを</em>減らす必要があります。</p></div>
<div class="paragraph">
<p>つまり、デフォルトの実質1500のMTUでは、1370のMTUを使用する必要があります（1370 + 80 (IPSEC) + 50 (VXLAN) == 1500）。</p></div>
<div class="paragraph">
<p>ホストにstrongswanをインストールします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install strongswan</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">etc/ipsec.conf</span> に設定を追加します。VXLAN UDP ポート<em>4789</em> からのトラフィックだけを暗号化する必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>conn %default ike=aes256-sha1-modp1024！  # leftfirewall=yes # これはProxmox VEのファイアウォールルールを使用する際に必要です conn output rightsubnet=%dynamic[udp/4789] right=%any type=transport authby=psk auto=route conn input leftsubnet=%dynamic[udp/4789] type=transport authby=psk auto=route</pre>
</div></div>
<div class="paragraph">
<p>で事前共有キーを生成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>openssl rand -base64 128</pre>
</div></div>
<div class="paragraph">
<p>そして、その鍵を<span class="monospaced">/etc/ipsec.secretsに</span>追加して、ファイルの内容が次のようになるようにします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>:PSK &lt;generatedbase64key&gt;。</pre>
</div></div>
<div class="paragraph">
<p>VXLANネットワークに参加しているすべてのノードにPSKとコンフィグレーションをコピーします。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pve_firewall">
13.Proxmox VE ファイアウォール<a class="headerlink" href="#chapter_pve_firewall" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VE Firewallは、ITインフラストラクチャを保護する簡単な方法を提供します。クラスタ内のすべてのホストのファイアウォールルールを設定したり、仮想マシンやコンテナのルールを定義したりできます。ファイアウォールマクロ、セキュリティグループ、IPセット、エイリアスなどの機能が、このタスクを容易にします。</p></div>
<div class="paragraph">
<p>すべての設定はクラスタ・ファイル・システムに保存されますが、<span class="monospaced">iptablesベースの</span>ファイアウォール・サービスは各クラスタ・ノード上で実行されるため、仮想マシン間で完全に分離されます。また、このシステムは分散型であるため、中央のファイアウォール・ソリューションよりもはるかに高い帯域幅を提供します。</p></div>
<div class="paragraph">
<p>ファイアウォールはIPv4とIPv6をフルサポートしています。IPv6のサポートは完全に透過的で、デフォルトで両方のプロトコルのトラフィックをフィルタリングします。そのため、IPv6用に別のルールセットを維持する必要はありません。</p></div>
<div class="sect2">
<h3 id="_directions_amp_zones">
<span>13.1.方向とゾーン</span> <a class="headerlink" href="#_directions_amp_zones" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEファイアウォールはネットワークを複数の論理ゾーンにグループ化します。各ゾーンのルールは個別に定義できます。ゾーンに応じて、受信、送信、転送トラフィックのルールを定義できます。</p></div>
<div class="sect3">
<h4 id="_directions">13.1.1.道順<a class="headerlink" href="#_directions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ゾーンのルールを定義する際、3つの方向から選ぶことができます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
で</dt>
<dd>
<p>
ゾーンに到着しているトラフィック。</p>
</dd>
<dt class="hdlist1">
アウト</dt>
<dd>
<p>
ゾーンを出るトラフィック。</p>
</dd>
<dt class="hdlist1">
フォワード</dt>
<dd>
<p>
ゾーンを通過するトラフィック。ホストゾーンでは、ルーティングされたトラフィックになります（ホストがゲートウェイとして動作している場合やNATを実行している場合）。VNetレベルでは、ブリッジ接続されたネットワークインターフェイスのトラフィックを含め、VNetを通過するすべてのトラフィックに影響します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">転送されたトラフィックのルールを作成することは、現在のところ、新しい<a href="#pve_firewall_nft">nftables ベースの proxmox-firewall を</a>使用している場合にのみ可能です。いかなる転送ルールも純正の<span class="monospaced">pve-firewallでは</span>無視され、何の効果もありません！</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_zones">13.1.2.ゾーン<a class="headerlink" href="#_zones" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイアウォールルールを定義できるゾーンは3種類あります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ホスト</dt>
<dd>
<p>
このゾーンのルールは、データ センタ レベルまたはホスト レベルで定義できます。ホスト レベルのルールは、データセンター レベルのルールよりも優先されます。</p>
</dd>
<dt class="hdlist1">
かそうけいさんき</dt>
<dd>
<p>
VMまたはCTを発着するトラフィック。 転送されるトラフィックに対してルールを定義することはできません。</p>
</dd>
<dt class="hdlist1">
ブイネット</dt>
<dd>
<p>
SDN VNet を通過するトラフィックは、ゲストからゲストへ、またはホストからゲストへ、あるいはその逆です。 このトラフィックは常に転送されるトラフィックなので、方向が forward のルールしか作成できません。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">VNet レベルでのルール作成は現在、新しい<a href="#pve_firewall_nft">nftables ベースの proxmox-firewall</a> を使っている場合にのみ可能です。VNet レベルのルールは純正の<span class="monospaced">pve-firewall</span>では無視され、何の効果もありません！</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_files">
<span>13.2.設定ファイル</span> <a class="headerlink" href="#_configuration_files" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォール関連の設定はすべてproxmoxクラスタファイルシステムに保存されます。そのため、これらのファイルは自動的にすべてのクラスタノードに配布され、<span class="monospaced">pve-firewall</span>サービスは変更時に自動的に基礎となる<span class="monospaced">iptables</span>ルールを更新します。</p></div>
<div class="paragraph">
<p>GUI（<strong>データセンター</strong>→<strong>ファイアウォール</strong>、または<strong>ノード</strong>→<strong>ファイアウォール</strong>）を使用して何でも設定できます。また、お好みのエディタを使用して設定ファイルを直接編集することもできます。</p></div>
<div class="paragraph">
<p>ファイアウォール設定ファイルには、キーと値のペアのセクションがあります。<span class="monospaced">で</span>始まる行と空白行はコメントとみなされます。セクションは<span class="monospaced">[</span>と<span class="monospaced">]</span> で囲まれたセクション名を含むヘッダー行で始まります。</p></div>
<div class="sect3">
<h4 id="pve_firewall_cluster_wide_setup">13.2.1.クラスタ全体のセットアップ<a class="headerlink" href="#pve_firewall_cluster_wide_setup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタ全体のファイアウォール設定は、次の場所に保存されます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/firewall/cluster.fw</pre>
</div></div>
<div class="paragraph">
<p>コンフィギュレーションには以下のセクションがあります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション］</span></dt>
<dd>
<p>
クラスタ全体のファイアウォールオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ebtables</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
クラスタ全体でebtablesルールを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
ファイアウォールクラスター全体を有効または無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_ratelimit</span>:<span class="monospaced">[enable=]&lt;1|0&gt; [,burst=&lt;integer&gt;] [,rate=&lt;rate&gt;</span>] です。</dt>
<dd>
<p>
ログ・レイトリミットの設定</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">burst=&lt;整数&gt;</span><span class="monospaced">(0 - N)</span><em>(デフォルト =</em> <span class="monospaced">5</span>)</dt>
<dd>
<p>
レートが適用される前に常に記録されるパッケージの初期バースト</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable=&lt;boolean&gt;</span><em>（デフォルト =</em> <span class="monospaced">1）</span></dt>
<dd>
<p>
ログレート制限の有効化または無効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rate=</span><span class="monospaced">&lt;rate</span><em>&gt;（デフォルト=</em> <span class="monospaced">1/秒）</span></dt>
<dd>
<p>
バーストバケツが補充される頻度</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_forward</span>:<span class="monospaced">&lt;ACCEPT | DROP&gt;</span>です。</dt>
<dd>
<p>
前向きな方針。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_in</span>:<span class="monospaced">&lt;ACCEPT | DROP | REJECT&gt;</span>です。</dt>
<dd>
<p>
入力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_out</span>:<span class="monospaced">&lt;ACCEPT | DROP | REJECT&gt;</span>です。</dt>
<dd>
<p>
出力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[ルール］</span></dt>
<dd>
<p>
このセクションには、全ノードのクラスタ全体のファイアウォールルールが含まれます。</p>
</dd>
<dt class="hdlist1">
[<span class="monospaced">IPSET &lt;名前&gt;]。</span></dt>
<dd>
<p>
クラスタ全体のIPセット定義。</p>
</dd>
<dt class="hdlist1">
[<span class="monospaced">GROUP &lt;名前&gt;]。</span></dt>
<dd>
<p>
クラスタ全体のセキュリティグループ定義。</p>
</dd>
<dt class="hdlist1">
[<span class="monospaced">ALIASES］</span></dt>
<dd>
<p>
クラスタ全体のエイリアス定義。</p>
</dd>
</dl></div>
<div class="sect4">
<h5 id="_enabling_the_firewall">ファイアウォールの有効化<a class="headerlink" href="#_enabling_the_firewall" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ファイアウォールはデフォルトでは完全に無効になっていますので、ここで有効オプションを設定する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[OPTIONS] # enable firewall (クラスタ全体の設定。デフォルトは無効) enable：1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">ファイアウォールを有効にすると、デフォルトですべてのホストへのトラフィックがブロックされます。唯一の例外は、ローカルネットワークからのWebGUI(8006)とssh(22)です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>リモートから Proxmox VE ホストを管理する場合は、リモート IP から Web GUI (ポート 8006) へのトラフィックを許可するルールを作成する必要があります。また、ssh(ポート22)やSPICE(ポート3128)も許可する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイアウォールを有効にする前に、Proxmox VEホストの1つにSSH接続を開いてください。そうすれば、何か問題が発生してもホストにアクセスできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この作業を単純化するには、代わりに「管理」という名前のIPSセットを作成し、すべてのリモートIPをそこに追加します。これにより、リモートからGUIにアクセスするために必要なファイアウォールルールがすべて作成されます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pve_firewall_host_specific_configuration">13.2.2.ホスト固有構成<a class="headerlink" href="#pve_firewall_host_specific_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ホスト関連の設定を読み込みます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/nodes/&lt;nodename&gt;/host.fw</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">cluster.fw</span>設定からルールを上書きしたい場合に便利です。また、ログの冗長性を上げたり、ネットフィルタ関連のオプションを設定することもできます。コンフィギュレーションには以下のセクションを含めることができます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション］</span></dt>
<dd>
<p>
ホスト関連のファイアウォールオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ホストファイアウォールルールを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_forward</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
転送トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_in</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
受信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_out</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
発信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_nf_conntrack</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
conntrack 情報のロギングを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ndp</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NDP（Neighbor Discovery Protocol）を有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_allow_invalid</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
接続追跡時に無効なパケットを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_helpers</span>:<span class="monospaced">&lt;string&gt;</span><em>(デフォルトは</em>``)</dt>
<dd>
<p>
特定のプロトコルに対して conntrack ヘルパーを有効にします。サポートされているプロトコル: amanda, ftp, irc, netbios-ns, pptp, sane, sip, snmp, tftp</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_max</span>:<span class="monospaced">&lt;整数&gt; (32768 - N)</span><em>(デフォルト =</em> <span class="monospaced">262144</span>)</dt>
<dd>
<p>
追跡接続の最大数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_tcp_timeout_established</span>:<span class="monospaced">&lt;整数&gt; (7875 - N)</span><em>(デフォルト =</em> <span class="monospaced">432000</span>)</dt>
<dd>
<p>
CONNTRACK がタイムアウトしました。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_tcp_timeout_syn_recv</span>:<span class="monospaced">&lt;整数&gt; (30 - 60)</span><em>(デフォルト =</em> <span class="monospaced">60</span>)</dt>
<dd>
<p>
Conntrack syn recv タイムアウト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nftables</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
nftablesベースのファイアウォールの有効化（技術プレビュー）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nosmurfs</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
SMURFSフィルターを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection_synflood</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
シ ン フ ラ ッ ド 防御の有効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection_synflood_burst</span>:<span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
ip srcによるシンフラッドプロテクションレートバースト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection_synflood_rate</span>:<span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">200</span>)</dt>
<dd>
<p>
ip srcによるシン・フラッド・プロテクション・レート syn/sec。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">smurf_log_level</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
SMURFSフィルターのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tcp_flags_log_level</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
不正なtcpフラグフィルターのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tcpflags</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
TCP フラグの不正な組み合わせをフィルタリングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[ルール］</span></dt>
<dd>
<p>
このセクションにはホスト固有のファイアウォールルールが含まれます。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pve_firewall_vm_container_configuration">13.2.3.VM/コンテナ構成<a class="headerlink" href="#pve_firewall_vm_container_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VM のファイアウォール設定を読み込みます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/ファイアウォール/&lt;VMID&gt;.fw</pre>
</div></div>
<div class="paragraph">
<p>そして以下のデータを含んでいます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション］</span></dt>
<dd>
<p>
VM/Container 関連のファイアウォールオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">dhcp</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
DHCPを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイアウォールルールを有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ipfilter</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
デフォルトIPフィルタを有効にします。これは各インターフェイスに空の ipfilter-net&lt;id&gt; ipset を追加するのと同じです。このようなipsetは、IPv6リンクのローカルアドレスをインターフェイスのMACアドレスに由来するものに制限するような、まともなデフォルトの制限を暗黙的に含んでいます。コンテナに対しては、設定されたIPアドレスが暗黙的に追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_in</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
受信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_out</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
発信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">macfilter</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
MACアドレスフィルターの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ndp</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NDP（Neighbor Discovery Protocol）を有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_in</span>:<span class="monospaced">&lt;ACCEPT | DROP | REJECT&gt;</span>です。</dt>
<dd>
<p>
入力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_out</span>:<span class="monospaced">&lt;ACCEPT | DROP | REJECT&gt;</span>です。</dt>
<dd>
<p>
出力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">radv</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ルーター広告の送信を許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[ルール］</span></dt>
<dd>
<p>
このセクションには、VM/コンテナファイアウォールルールが含まれます。</p>
</dd>
<dt class="hdlist1">
[<span class="monospaced">IPSET &lt;名前&gt;]。</span></dt>
<dd>
<p>
IPセットの定義。</p>
</dd>
<dt class="hdlist1">
[<span class="monospaced">ALIASES］</span></dt>
<dd>
<p>
IPエイリアスの定義。</p>
</dd>
</dl></div>
<div class="sect4">
<h5 id="_enabling_the_firewall_for_vms_and_containers">VM とコンテナのファイアウォールの有効化<a class="headerlink" href="#_enabling_the_firewall_for_vms_and_containers" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各仮想ネットワーク・デバイスは、それぞれ独自のファイアウォール有効フラグを持っています。そのため、インターフェイスごとにファイアウォールを選択的に有効にすることができます。これは、一般的なファイアウォール<span class="monospaced">有効</span>オプションに加えて必要です。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pve_firewall_vnet_configuration">13.2.4.VNet コンフィギュレーション<a class="headerlink" href="#pve_firewall_vnet_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VNet関連のコンフィギュレーションを読み込みます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/sdn/firewall/&lt;vnet_name&gt;.fw</pre>
</div></div>
<div class="paragraph">
<p>VNet 内の各 VM に対して個別にファイアウォール・ルールを設定することなく、VNet レベルでグローバルにファイアウォール設定を行うことができます。受信トラフィックと送信トラフィックの概念がないため、<span class="monospaced">FORWARD</span>方向のルールのみを含めることができます。これは、ホスト・インタフェースを含め、ブリッジ・ポートから別のポートに移動するすべてのトラフィックに影響します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">この機能は現在、新しい<a href="#pve_firewall_nft">nftables ベースの proxmox-firewall でのみ</a>利用可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">FORWARD</span>チェインを通過するトラフィックは双方向なので、トラフィックを双方向に通過させたい場合は、双方向のルールを作成する必要があります。例えば、特定のホストに対するHTTPトラフィックを許可する場合、以下のルールを作成する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>FORWARD ACCEPT -dest 10.0.0.1 -dport 80 FORWARD ACCEPT -source 10.0.0.1 -sport 80</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション］</span></dt>
<dd>
<p>
VNet 関連のファイアウォールオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイアウォールルールを有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_forward</span>:<span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span>です。</dt>
<dd>
<p>
転送トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_forward</span>:<span class="monospaced">&lt;ACCEPT | DROP&gt;</span>です。</dt>
<dd>
<p>
前向きな方針。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[ルール］</span></dt>
<dd>
<p>
このセクションには、VNet 固有のファイアウォール ルールが含まれています。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_firewall_rules">
<span>13.3.ファイアウォールルール</span> <a class="headerlink" href="#_firewall_rules" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォールルールは、方向<span class="monospaced">（IN</span>、<span class="monospaced">OUT</span>、<span class="monospaced">FORWARD</span>）とアクション<span class="monospaced">（ACCEPT</span>、<span class="monospaced">DENY</span>、<span class="monospaced">REJECT</span>）で構成されます。マクロ名を指定することもできます。マクロには、定義済みのルールとオプションのセットが含まれます。ルールの前に<span class="monospaced">|</span> を付けると、ルールを無効にできます。</p></div>
<div class="listingblock">
<div class="title">ファイアウォールルールの構文</div>
<div class="content monospaced">
<pre>[ルール] DIRECTION ACTION [オプション] |DIRECTION ACTION [オプション] # 無効ルール DIRECTION MACRO(ACTION) [オプション] # 定義済みマクロの使用</pre>
</div></div>
<div class="paragraph">
<p>以下のオプションを使用して、ルールの一致を絞り込むことができます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--dest</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
パケットの宛先アドレスを制限します。これは、単一のIPアドレス、IPセット<em>(+ipsetname</em>)、またはIPエイリアスの定義を参照できます。また、<em>20.34.101.207-201.3.9.99の</em>ようなアドレス範囲、またはIPアドレスとネットワークのリスト（エントリはカンマで区切られます）を指定することもできます。このようなリストの中にIPv4アドレスとIPv6アドレスを混在させないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dport</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
TCP/UDP宛先ポートを制限します。<em>etc/services</em> で定義されているように、サービス名または単純な番号 (0 ～ 65535) を使用できます。ポート範囲は、<em>80:85 の</em>ように<em> ㊟+:㊟+</em> で指定でき、カンマ区切りのリストを使って複数のポートまたはポート範囲に一致させることができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--icmp-type</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
icmp-type を指定します。proto が<em>icmp</em>または<em>icmpv6/ipv6-icmp</em> <em>の</em>場合のみ有効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--iface</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ネットワークインターフェース名。VMとコンテナにはネットワーク構成キー名を使用する必要があります<em>（netd+）。</em>ホスト関連のルールでは、任意の文字列を使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ログ</span> <span class="monospaced">&lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
ファイアウォールルールのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-プロト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
IPプロトコル。<em>etc/protocolsで</em>定義されているプロトコル名<em>（tcp/</em><em>udp</em>）や単純な数字を使うことができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソース</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
パケットの送信元アドレスを制限します。これは、単一のIPアドレス、IPセット<em>(+ipsetname</em>)、またはIPエイリアスの定義を参照できます。また、<em>20.34.101.207-201.3.9.99の</em>ようなアドレス範囲、またはIPアドレスとネットワークのリスト（エントリはカンマで区切られます）を指定することもできます。このようなリストの中にIPv4アドレスとIPv6アドレスを混在させないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スポーツ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
TCP/UDPソース・ポートを制限します。<em>etc/services</em> で定義されているように、サービス名または単純な番号 (0 ～ 65535) を使用できます。ポート範囲は、<em>80:85 の</em>ように<em> ㊟+:㊟+</em> で指定することができます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>いくつか例を挙げましょう：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[RULES] IN SSH(ACCEPT) -i net0 IN SSH(ACCEPT) -i net0 # コメント IN SSH(ACCEPT) -i net0 -source 192.168.2.192 # 192.168.2.192からのSSHだけを許可。168.2.192 IN SSH(ACCEPT) -i net0 -source 10.0.0.1-10.0.0.10 # IPレンジのSSHを受け入れる IN SSH(ACCEPT) -i net0 -source 10.0.0.1,10.0.0.2,10.0.0.3 #accept ssh for IP list IN SSH(ACCEPT) -i net0 -source +mynetgroup # accept ssh for ipset mynetgroup IN SSH(ACCEPT) -i net0 -source myserveralias #accept ssh for alias myserveralias |IN SSH(ACCEPT) -i net0 # disabled rule IN DROP # drop all incoming packages OUT ACCEPT # accept all outgoing packages</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_security_groups">
<span>13.4.セキュリティグループ</span> <a class="headerlink" href="#pve_firewall_security_groups" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>セキュリティ・グループとは、クラスタ・レベルで定義されるルールの集まりで、すべての VM のルールで使用できます。例えば、<em>http</em>と<em>https の</em>ポートを開くルールを持つ "webserver" という名前のグループを定義することができます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw [group webserver] IN ACCEPT -p tcp -dport 80 IN ACCEPT -p tcp -dport 443</pre>
</div></div>
<div class="paragraph">
<p>次に、このグループをVMのファイアウォールに追加します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/&lt;VMID&gt;.fw [RULES] GROUP webserver</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_ip_aliases">
<span>13.5.IPエイリアス</span> <a class="headerlink" href="#pve_firewall_ip_aliases" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>IPエイリアスを使用すると、ネットワークのIPアドレスを名前に関連付けることができます。そして、その名前を参照することができます：</p></div>
<div class="ulist"><ul>
<li>
<p>
インサイドIPセット定義</p>
</li>
<li>
<p>
ファイアウォールルールの<span class="monospaced">送信元と</span> <span class="monospaced">送信先の</span>プロパティで</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_standard_ip_alias_span_class_monospaced_local_network_span">13.5.1.標準IPエイリアス<span class="monospaced">local_network</span> <a class="headerlink" href="#_standard_ip_alias_span_class_monospaced_local_network_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このエイリアスは自動的に定義されます。割り当てられた値を確認するには、以下のコマンドを使用してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pve-firewall localnet local hostname: example local IP address：192.168.2.100 network auto detect: 192.168.0.0/20 using detected local_network：192.168.0.0/20</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールは、このエイリアスを使用してクラスタ通信（corosync、API、SSH）に必要なすべてのものを許可するルールを自動的に設定します。</p></div>
<div class="paragraph">
<p>ユーザは<span class="monospaced">cluster.fw</span>aliasセクションでこれらの値を上書きできます。パブリックネットワーク上で単一のホストを使用する場合は、明示的にローカルIPアドレス</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw [ALIASES] local_network 1.2.3.4 # 単一IPアドレスを使用</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_firewall_ip_sets">
<span>13.6.IPセット</span> <a class="headerlink" href="#pve_firewall_ip_sets" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>IP セットは、ネットワークとホストのグループを定義するために使用できます。ファイアウォールルールの<span class="monospaced">source</span>と<span class="monospaced">dest</span>プロパティで '+name` を使って参照できます。</p></div>
<div class="paragraph">
<p>以下の例では、<span class="monospaced">管理</span>IPセットからのHTTPトラフィックを許可しています。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>IN HTTP(ACCEPT) -ソース +管理</pre>
</div></div>
<div class="sect3">
<h4 id="_standard_ip_set_span_class_monospaced_management_span">13.6.1.標準IPセット<span class="monospaced">管理</span> <a class="headerlink" href="#_standard_ip_set_span_class_monospaced_management_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この IP セットはホストファイアウォールのみに適用されます(VM ファイアウォールではありません)。  これらのIPは、通常の管理タスク(Proxmox VE GUI、VNC、SPICE、SSH)を実行できます。</p></div>
<div class="paragraph">
<p>ローカルクラスタネットワークは自動的にこのIPセット(alias<span class="monospaced">cluster_network</span>)に追加され、ホスト間のクラスタ通信を可能にします。(マルチキャスト、ssh、...)</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw [IPSET 管理] 192.168.2.10 192.168.2.10/24</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_standard_ip_set_span_class_monospaced_blacklist_span">13.6.2.標準IPセット<span class="monospaced">ブラックリスト</span> <a class="headerlink" href="#_standard_ip_set_span_class_monospaced_blacklist_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これらのIPからのトラフィックは、各ホストとVMのファイアウォールによってドロップされます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw [IPSET ブラックリスト] 77.240.159.182 213.87.123.0/24</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pve_firewall_ipfilter_section">13.6.3.標準IPセット<span class="monospaced">ipfilter-net*</span> <a class="headerlink" href="#pve_firewall_ipfilter_section" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これらのフィルターはVMのネットワーク・インターフェースに属し、主にIPスプーフィングを防ぐために使用されます。このようなセットがインターフェイスに存在する場合、そのインターフェイスの対応するipfilterセットに一致しないソースIPを持つ発信トラフィックはすべてドロップされます。</p></div>
<div class="paragraph">
<p>IPアドレスが設定されているコンテナでは、これらのセットが存在する場合（またはVMのファイアウォールの<strong>オプション</strong>タブで一般的な<span class="monospaced">IPフィルター</span>オプションを使用して有効になっている場合）、関連するIPアドレスが暗黙的に含まれます。</p></div>
<div class="paragraph">
<p>仮想マシンとコンテナの両方で、近隣発見プロトコルを動作させるために、標準のMAC由来のIPv6リンクローカルアドレスも暗黙的に含まれています。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>/etc/pve/firewall/&lt;VMID&gt;.fw [IPSET ipfilter-net0] # net0 192.168.2.10上の指定されたIPのみを許可します。</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_firewall_services_commands">
<span>13.7.サービスとコマンド</span> <a class="headerlink" href="#pve_firewall_services_commands" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォールは各ノードで2つのサービス・デーモンを実行します：</p></div>
<div class="ulist"><ul>
<li>
<p>
pvefw-logger：NFLOG デーモン (ulogd の置き換え)。</p>
</li>
<li>
<p>
pve-firewall: iptables ルールの更新</p>
</li>
</ul></div>
<div class="paragraph">
<p>また、<span class="monospaced">pve-firewallという</span>CLIコマンドもあり、これを使用してファイアウォールサービスを開始および停止することができます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pve-firewall start # pve-firewall stop</pre>
</div></div>
<div class="paragraph">
<p>ステータスを取得するには</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pve-firewall status</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドはすべてのファイアウォールルールを読み込んでコンパイルするので、ファイアウォールの設定にエラーがある場合は警告が表示されます。</p></div>
<div class="paragraph">
<p>生成されたiptablesのルールを見たい場合は、次のようにします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># iptables-save</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_default_rules">
<span>13.8.デフォルトのファイアウォールルール</span> <a class="headerlink" href="#pve_firewall_default_rules" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>デフォルトのファイアウォール設定では、以下のトラフィックがフィルタリングされます：</p></div>
<div class="sect3">
<h4 id="_datacenter_incoming_outgoing_drop_reject">13.8.1.データセンター着信/発信 DROP/REJECT<a class="headerlink" href="#_datacenter_incoming_outgoing_drop_reject" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイアウォールの入力または出力ポリシーがDROPまたはREJECTに設定されている場合でも、クラスタ内のすべてのProxmox VEホストで次のトラフィックが許可されます：</p></div>
<div class="ulist"><ul>
<li>
<p>
ループバックインターフェース上のトラフィック</p>
</li>
<li>
<p>
すでに確立された接続</p>
</li>
<li>
<p>
IGMPプロトコルを使用したトラフィック</p>
</li>
<li>
<p>
ウェブインターフェースへのアクセスを許可するため、管理ホストからのTCPトラフィックをポート8006へ</p>
</li>
<li>
<p>
管理ホストからのTCPトラフィックは、VNCウェブコンソールのトラフィックを許可するポート範囲5900～5999へ。</p>
</li>
<li>
<p>
管理ホストからの TCP トラフィックは、SPICE プロキシへの接続用にポート 3128 に送られます。</p>
</li>
<li>
<p>
管理ホストからのTCPトラフィックをポート22に送り、sshアクセスを許可します。</p>
</li>
<li>
<p>
クラスタネットワークのUDPトラフィックをポート5405-5412に送ってcorosyncします。</p>
</li>
<li>
<p>
クラスタネットワークのUDPマルチキャストトラフィック</p>
</li>
<li>
<p>
ICMPトラフィック・タイプ3（宛先到達不能）、4（輻輳制御）、または11（時間超過</p>
</li>
</ul></div>
<div class="paragraph">
<p>以下のトラフィックはドロップされますが、ロギングを有効にしてもログには記録されません：</p></div>
<div class="ulist"><ul>
<li>
<p>
無効な接続状態のTCPコネクション</p>
</li>
<li>
<p>
corosyncに関連しないブロードキャスト、マルチキャスト、エニーキャストのトラフィック、すなわちポート5405-5412を経由しないトラフィック</p>
</li>
<li>
<p>
ポート43へのTCPトラフィック</p>
</li>
<li>
<p>
ポート135と445へのUDPトラフィック</p>
</li>
<li>
<p>
UDPトラフィックはポート範囲137から139へ</p>
</li>
<li>
<p>
送信元ポート137からポート範囲1024～65535へのUDPトラフィック</p>
</li>
<li>
<p>
ポート1900へのUDPトラフィック</p>
</li>
<li>
<p>
135、139、445番ポートへのTCPトラフィック</p>
</li>
<li>
<p>
送信元ポート53からのUDPトラフィック</p>
</li>
</ul></div>
<div class="paragraph">
<p>残りのトラフィックは、それぞれドロップまたは拒否され、ログにも記録されます。 これは、NDP、SMURFS、TCPフラグフィルタリングなど、<strong>ファイアウォール</strong>→<strong>オプションで</strong>有効になっている追加オプションによって異なる場合があります。</p></div>
<div class="paragraph" id="pve_firewall_iptables_inspect">
<p>の出力を確認してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># iptables-save</pre>
</div></div>
<div class="paragraph">
<p>この出力は<span class="monospaced">システム・レポートにも</span>含まれ、Web GUI のノードのサブスクリプション・タブ、または<span class="monospaced">pvereport</span>コマンドライン・ツールからアクセスできます。</p></div>
</div>
<div class="sect3">
<h4 id="_vm_ct_incoming_outgoing_drop_reject">13.8.2.VM/CT 着信/発信 DROP/REJECT<a class="headerlink" href="#_vm_ct_incoming_outgoing_drop_reject" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>設定されたコンフィグレーションに応じて、DHCP、NDP、ルーター広告、MAC、IP フィルタリングなどの例外を除き、VM へのすべてのトラフィックをドロップまたは拒否します。  パケットをドロップ/拒否するルールはデータセンターから引き継がれ、ホストの送受信トラフィックの例外は適用されません。</p></div>
<div class="paragraph">
<p>繰り返しになりますが、<a href="#pve_firewall_iptables_inspect">iptables-save (上記参照)</a>を使って、適用されたすべてのルールとチェインを検査することができます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_logging_of_firewall_rules">
<span>13.9.ファイアウォールルールのログ</span> <a class="headerlink" href="#_logging_of_firewall_rules" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>デフォルトでは、ファイアウォールルールによってフィルタリングされたトラフィックのロギングはすべて無効になっています。 ロギングを有効にするには、受信トラフィックおよび/または送信トラフィックの<span class="monospaced">ログレベルを</span> <strong>ファイアウォール</strong>→<strong>オプションで</strong>設定する必要があります。これは、ホストだけでなく、VM/CT ファイアウォールに対しても個別に行うことができます。これにより、Proxmox VEの標準ファイアウォールルールのロギングが有効になり、<strong>ファイアウォール</strong>→<strong>ログで</strong>出力を確認できます。 さらに、標準ルールでは、一部のドロップまたは拒否されたパケットのみがログに記録されます（<a href="#pve_firewall_default_rules">デフォルトのファイアウォールルールを</a>参照）。</p></div>
<div class="paragraph">
<p><span class="monospaced">loglevel</span>は、フィルタされたトラフィックがどの程度ログに記録されるかに影響しません。これは、フィルタリングと後処理を容易にするために、ログ出力に接頭辞として付加される<span class="monospaced">LOGIDを</span>変更します。</p></div>
<div class="paragraph">
<p><span class="monospaced">loglevel</span>は以下のフラグのいずれかです：</p></div>
<table class="tableblock frame-all grid-all" id="pve_firewall_log_levels" style="
width:25%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">ログレベル </th>
<th class="tableblock halign-left valign-top">ロジッド</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ノログ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">エマージェンシー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">アラート</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">クリティック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">誤る</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">警告</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">お知らせ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">インフォメーション</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">デバッグ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>典型的なファイアウォールのログ出力は次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>vmid logid chain timestamp policy：PACKET_DETAILS</pre>
</div></div>
<div class="paragraph">
<p>ホストファイアウォールの場合、<span class="monospaced">VMIDは</span>0になります。</p></div>
<div class="sect3">
<h4 id="_logging_of_user_defined_firewall_rules">13.9.1.ユーザー定義ファイアウォールルールのログ<a class="headerlink" href="#_logging_of_user_defined_firewall_rules" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザー定義のファイアウォールルールによってフィルタリングされたパケットをログに記録するために、各ルールに対して個別にログレベルパラメータを設定することができます。 これにより、<strong>ファイアウォール</strong>→<strong>オプションで</strong>標準ルールに定義されたログレベルとは独立して、きめ細かくログを記録することができます。</p></div>
<div class="paragraph">
<p>個々のルールの<span class="monospaced">ログレベルは</span>、ルールの作成中または変更中に Web UI で簡単に定義または変更できますが、対応する<span class="monospaced">pvesh</span>API 呼び出しによっても設定できます。</p></div>
<div class="paragraph">
<p>さらに、選択したルールに<span class="monospaced">-log &lt;loglevel&gt;</span>を追加することで、ファイアウォール設定ファイル経由でログレベルを設定することもできます (<a href="#pve_firewall_log_levels">可能なログレベルを</a>参照)。</p></div>
<div class="paragraph">
<p>例えば、次の2つは同じです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>IN REJECT -p icmp -log nolog IN REJECT -p icmp</pre>
</div></div>
<div class="paragraph">
<p>一方</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>IN REJECT -p icmp -log debug</pre>
</div></div>
<div class="paragraph">
<p>は、<span class="monospaced">デバッグ・</span>レベルのフラグが付いたログ出力を生成します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_tips_and_tricks">
<span>13.10.ヒントとコツ</span> <a class="headerlink" href="#_tips_and_tricks" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_how_to_allow_ftp">13.10.1.FTP<a class="headerlink" href="#_how_to_allow_ftp" title="Permalink to this heading"></a>を許可する方法</h4>
<div class="paragraph">
<p>FTPは、ポート21と他のいくつかの動的ポートを使用する古いスタイルのプロトコルです。そのため、ポート21を受け入れるルールが必要です。さらに、<span class="monospaced">ip_conntrack_ftp</span>モジュールをロードする必要があります。 ですから、実行してください：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>modprobe ip_conntrack_ftp</pre>
</div></div>
<div class="paragraph">
<p>を追加し、<span class="monospaced">/etc/modules</span>に<span class="monospaced">ip_conntrack_ftp を</span>追加します（再起動後も動作するように）。</p></div>
</div>
<div class="sect3">
<h4 id="_suricata_ips_integration">13.10.2.スリカタIPS統合<a class="headerlink" href="#_suricata_ips_integration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://suricata.io/">Suricata IPS</a>(Intrusion Prevention System)を使用したい場合は可能です。</p></div>
<div class="paragraph">
<p>パケットは、ファイアウォールがACCEPTした後にのみIPSに転送されます。</p></div>
<div class="paragraph">
<p>リジェクト/ドロップされたファイアウォールのパケットは IPS に送られません。</p></div>
<div class="paragraph">
<p>suricataをproxmoxホストにインストールします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-get install suricata # modprobe nfnetlink_queue</pre>
</div></div>
<div class="paragraph">
<p>次回のリブートのために、<span class="monospaced">/etc/modulesに</span> <span class="monospaced">nfnetlink_queueを</span>追加することを忘れないでください。</p></div>
<div class="paragraph">
<p>次に、特定のVMに対してIPSを有効にします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/&lt;VMID&gt;.fw [OPTIONS] ips：1 ips_queues: 0</pre>
</div></div>
<div class="paragraph">
<p>ips_<span class="monospaced">queuesは</span>このVMに特定のCPUキューをバインドします。</p></div>
<div class="paragraph">
<p>利用可能なキューは</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># etc/default/suricata NFQUEUE=0</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_notes_on_ipv6">
<span>13.11.IPv6</span> <a class="headerlink" href="#_notes_on_ipv6" title="Permalink to this heading"></a><span>。</span></h3>
<div class="paragraph">
<p>ファイアウォールにはIPv6特有のオプションがいくつかあります。IPv6はARPプロトコルを使用せず、代わりにIPレベルで動作するNDP（Neighbor Discovery Protocol）を使用するため、成功するにはIPアドレスが必要です。このため、インターフェイスのMACアドレスに由来するリンクローカルアドレスが使用されます。デフォルトでは、ホストとVMの両方のレベルで<span class="monospaced">NDP</span>オプションが有効になっており、近隣探索（NDP）パケットの送受信が可能になっています。</p></div>
<div class="paragraph">
<p>NDPは近隣探索以外にも、自動コンフィグレーションやルーターの広告など、いくつかのことに使用されます。</p></div>
<div class="paragraph">
<p>デフォルトでは、VMはルーター勧誘メッセージの送信（ルーターへの問い合わせ）とルーター広告パケットの受信を許可されています。これにより、ステートレス自動コンフィグレーションを使用できます。一方、"Allow Router Advertisement"<span class="monospaced">(radv: 1</span>)オプションが設定されていない限り、VMは自分自身をルーターとしてアドバタイズすることはできません。</p></div>
<div class="paragraph">
<p>NDPに必要なリンク・ローカル・アドレスについては、"IP Filter"<span class="monospaced">(ipfilter: 1</span>) オプションを有効にすることで、対応するリンク・ローカル・アドレスを含むVMの各ネットワーク・インターフェースに<span class="monospaced">ipfilter-net*</span>ipsetを追加するのと同じ効果が得られます。  (詳細については、<a href="#pve_firewall_ipfilter_section">標準 IP セット<span class="monospaced">ipfilter-net*</span></a>のセクションを参照してください)。</p></div>
</div>
<div class="sect2">
<h3 id="_ports_used_by_proxmox_ve">
<span>13.12.Proxmox VEが使用するポート</span> <a class="headerlink" href="#_ports_used_by_proxmox_ve" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
ウェブインターフェース8006（TCP、HTTP/1.1 over TLS）</p>
</li>
<li>
<p>
VNCウェブコンソール5900-5999 (TCP、WebSocket)</p>
</li>
<li>
<p>
SPICE プロキシ：3128 (TCP)</p>
</li>
<li>
<p>
sshd (クラスタアクションに使用)：22 (TCP)</p>
</li>
<li>
<p>
rpcbind: 111 (UDP)</p>
</li>
<li>
<p>
sendmail：25 (TCP、送信)</p>
</li>
<li>
<p>
corosyncクラスタのトラフィック：5405-5412 UDP</p>
</li>
<li>
<p>
ライブマイグレーション（VMメモリとローカルディスクのデータ）：60000-60050 (tcp)</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_nft">
<span>13.13. nftables</span> <a class="headerlink" href="#pve_firewall_nft" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">pve-firewallの</span>代替として、私たちは<span class="monospaced">proxmox-firewallを</span>提供しています。これはiptablesではなく、より新しい<a href="https://wiki.nftables.org/wiki-nftables/index.php/What_is_nftables%3F">nftablesを</a>ベースにしたProxmox VEファイアウォールの実装です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">proxmox-firewall</span>は現在技術プレビュー中です。バグやオリジナルのファイアウォールとの非互換性があるかもしれません。現在のところ本番環境での使用には適していません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この実装では、同じ設定ファイルと設定フォーマットを使用します。いくつかの例外を除いて、まったく同じ機能を提供します：</p></div>
<div class="ulist"><ul>
<li>
<p>
REJECTは現在、ゲストラフィックにはできません（代わりにトラフィックはドロップされます）。</p>
</li>
<li>
<p>
<span class="monospaced">NDP</span>、<span class="monospaced">ルーター広告</span>、または<span class="monospaced">DHCP</span>オプションを使用すると、デフォルトのポリシーに関係なく、<strong>常に</strong>ファイアウォールルールが作成されます。</p>
</li>
<li>
<p>
ゲスト用のファイアウォールルールは、conntrackテーブルエントリを持つ接続でも評価されます。</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_installation_and_usage">13.13.1.インストールと使用方法<a class="headerlink" href="#_installation_and_usage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">proxmox-firewall</span>パッケージをインストールします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>ホストの Web UI (ホスト &gt; ファイアウォール &gt; オプション &gt; nftables)、またはホストの構成ファイル<span class="monospaced">(/etc/pve/nodes/&lt;ノード名&gt;/host.fw</span>) で nftables バックエンドを有効にします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[OPTIONS] nftables: 1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">proxmox-firewall を</span>有効/無効にした後、古い/新しいファイアウォールを正しく動作させるために、実行中のすべての VM とコンテナを再起動する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">nftables</span>設定キーを設定すると、新しい<span class="monospaced">proxmox-firewall</span>サービスが引き継がれます。新しいサービスが動作しているかどうかは、<span class="monospaced">proxmox-firewallの</span>systemctl statusをチェックすることで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl status proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>生成されたルールセットを調べることもできます。これについては<a href="#pve_firewall_nft_helpful_commands">ヘルプコマンド</a> を参照してください。<span class="monospaced">pve-firewall</span>が iptables ルールを生成しなくなったかどうかも確認してください。</p></div>
<div class="paragraph">
<p>古いファイアウォールに戻すには、設定値を0/Noに戻すだけです。</p></div>
</div>
<div class="sect3">
<h4 id="_usage">13.13.2.使用法<a class="headerlink" href="#_usage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">proxmox-firewallは</span><span class="monospaced">proxmox-firewall</span>サービスによって管理される2つのテーブル:<span class="monospaced">proxmox-firewallと</span> <span class="monospaced">proxmox-firewall-guestsを</span>作成します。Proxmox VE ファイアウォール設定の外側にあるカスタムルールを作成したい場合は、カスタムファイアウォールルールを管理するために独自のテーブルを作成できます。<span class="monospaced">proxmox-firewall</span>は生成したテーブルにしか触れないので、独自のテーブルを追加することで簡単に<span class="monospaced">proxmox-firewall</span>の動作を拡張・変更できます。</p></div>
<div class="paragraph">
<p><span class="monospaced">pve-firewall</span>コマンドを使う代わりに、nftables ベースのファイアウォールは<span class="monospaced">proxmox-firewall を</span>使います。これは systemd サービスなので、<span class="monospaced">systemctl</span> で起動と停止ができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl start proxmox-firewall systemctl stop proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールサービスを停止すると、生成されたルールがすべて削除されます。</p></div>
<div class="paragraph">
<p>ファイアウォールのステータスを照会するには、systemctl サービスのステータスを照会します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl status proxmox-firewall</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pve_firewall_nft_helpful_commands">13.13.3.役立つコマンド<a class="headerlink" href="#pve_firewall_nft_helpful_commands" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>生成されたルールセットは、以下のコマンドで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>nftリストルールセット</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-firewallを</span>デバッグしたい場合は、<span class="monospaced">RUST_LOG</span>環境変数を<span class="monospaced">traceに</span>設定してデーモンをフォアグラウンドで実行するだけです。これにより詳細なデバッグ出力が得られるはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>RUST_LOG=trace /usr/libexec/proxmox/proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールデーモンの詳細な出力を得たい場合は、systemctlサービスを編集することもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl proxmox-firewall を編集します。</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">RUST_LOG</span>環境変数のオーバーライドを追加する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[サービス] Environment="RUST_LOG=trace"</pre>
</div></div>
<div class="paragraph">
<p>これは大量のログを素早く生成するので、デバッグ目的でのみ使用してください。他の、より冗長でないログレベルは<span class="monospaced">info</span>と<span class="monospaced">debug</span> です。</p></div>
<div class="paragraph">
<p>フォアグラウンドで実行すると、ログ出力がSTDERRに書き込まれるので、以下のコマンドでリダイレクトできます（コミュニティフォーラムにログを提出する場合など）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>RUST_LOG=trace /usr/libexec/proxmox/proxmox-firewall 2&gt; firewall_log_$(hostname).txt</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールルールをデバッグするために、異なるチェーンを経由するパケットフ ローをトレースすると便利です。これは、追跡したいパケットに対して<span class="monospaced">nftrace を</span>1 に設定することで実現できます。<strong>すべての</strong>パケットにこのフラグを設定しないことをお勧めします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>#!/usr/sbin/nft -f
table bridge tracebridge
delete table bridge tracebridge

table bridge tracebridge {
    chain trace {
        meta l4proto icmp meta nftrace set 1
    }

    chain prerouting {
        type filter hook prerouting priority -350; policy accept;
        jump trace
    }

    chain postrouting {
        type filter hook postrouting priority -350; policy accept;
        jump trace
    }
}</pre>
</div></div>
<div class="paragraph">
<p>このファイルを保存し、実行可能にしてから 1 回実行すると、それぞれのトレースチェー ンが作成されます。トレース出力は、Proxmox VE Web UI (Firewall &gt; Log) または<span class="monospaced">nft monitor trace</span> で確認できます。</p></div>
<div class="paragraph">
<p>上記の例では、すべてのブリッジのトラフィックをトレースしていますが、これは通常、ゲストのトラフィックが流れる場所です。ホストのトラフィックを調べたい場合は、<span class="monospaced">ブリッジ</span>テーブルの代わりに<span class="monospaced">inet</span>テーブルにこれらのチェーンを作成します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これは<strong>大量の</strong>ログスパムを生成し、ネットワークスタックのパフォーマンスを著しく低下させる可能性があることに注意してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>以下のコマンドを実行することで、トレースルールを削除することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>nft テーブル削除ブリッジトレース</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user_mgmt">
14.ユーザー管理<a class="headerlink" href="#user_mgmt" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEは、Linux PAM、統合Proxmox VE認証サーバ、LDAP、Microsoft Active Directory、OpenID Connectなど、複数の認証ソースをサポートしています。</p></div>
<div class="paragraph">
<p>すべてのオブジェクト（VM、ストレージ、ノードなど）に対してロールベースのユーザーと権限管理を使用することで、きめ細かなアクセスを定義できます。</p></div>
<div class="sect2">
<h3 id="pveum_users">
<span>14.1.ユーザー</span> <a class="headerlink" href="#pveum_users" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE はユーザ属性を<span class="monospaced">/etc/pve/user.cfg</span> に保存します。 パスワードはここには保存されず、ユーザは後述する<a href="#pveum_authentication_realms">認証レルムに</a>関連付けられます。 したがって、ユーザは内部的にはユーザ名とレルムによって<span class="monospaced">&lt;userid&gt;@&lt;realm&gt;</span> という形式で識別されることがよくあります。</p></div>
<div class="paragraph">
<p>このファイルの各ユーザー・エントリには、以下の情報が含まれています：</p></div>
<div class="ulist"><ul>
<li>
<p>
名前</p>
</li>
<li>
<p>
姓</p>
</li>
<li>
<p>
メールアドレス</p>
</li>
<li>
<p>
団体会員</p>
</li>
<li>
<p>
任意の有効期限</p>
</li>
<li>
<p>
このユーザーに関するコメント</p>
</li>
<li>
<p>
このユーザーが有効か無効か</p>
</li>
<li>
<p>
オプションの二要素認証キー</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ユーザーを無効化または削除した場合、または設定された有効期限が過去の場合、このユーザーは新しいセッションにログインしたり、新しいタスクを開始したりできなくなります。このユーザーによってすでに開始されているすべてのタスク（ターミナル・セッションなど）は、このようなイベントによって自動的に終了する<strong>ことは</strong>ありません。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_system_administrator">14.1.1.システム管理者<a class="headerlink" href="#_system_administrator" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>システムのルート・ユーザーは、Linux PAMレルムを介して常にログインでき、制約のない管理者です。このユーザは削除できませんが、属性は変更できます。システムメールはこのユーザに割り当てられたメールアドレスに送信されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pveum_groups">
<span>14.2.グループ</span> <a class="headerlink" href="#pveum_groups" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>各ユーザーは複数のグループのメンバーになることができます。グループは、アクセス許可を整理するための好ましい方法です。個々のユーザーではなく、常にグループにアクセス許可を与えるべきです。そうすることで、よりメンテナンスしやすいアクセス制御リストを得ることができます。</p></div>
</div>
<div class="sect2">
<h3 id="pveum_tokens">
<span>14.3.APIトークン</span> <a class="headerlink" href="#pveum_tokens" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>APIトークンを使用すると、別のシステム、ソフトウェア、またはAPIクライアントからREST APIのほとんどの部分にステートレスでアクセスできます。トークンは個々のユーザーのために生成することができ、アクセスの範囲と期間を制限するために個別の権限と有効期限を与えることができます。APIトークンが漏洩した場合、ユーザー自身を無効にすることなく、トークンを失効させることができます。</p></div>
<div class="paragraph">
<p>APIトークンには基本的に2つのタイプがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
権限の分離：トークンには ACL による明示的なアクセスが必要です。 トークンの有効な権限は、ユーザー権限とトークン権限を交差させて計算されます。</p>
</li>
<li>
<p>
完全な権限：トークンの権限は、関連付けられたユーザーの権限と同じです。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">トークンの値は、トークンが生成されたときに一度だけ表示/返されます。後からAPI経由で再度取得することはできません！</td>
</tr></table>
</div>
<div class="paragraph">
<p>API トークンを使用するには、API リクエストの際に HTTP ヘッダ<em>Authorization</em>に<span class="monospaced">PVEAPIToken=USER@REALM!TOKENID=UUID</span>の形式で表示される値を設定するか、API クライアントのドキュメントを参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="pveum_resource_pools">
<span>14.4.リソースプール</span> <a class="headerlink" href="#pveum_resource_pools" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-pool-window.png">
<img src="images/screenshot/gui-datacenter-pool-window.png" alt="screenshot/gui-datacenter-pool-window.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>リソースプールは、仮想マシン、コンテナ、およびストレージデバイスのセットです。リソースごとに管理する必要がなく、単一のパーミッションを一連の要素に適用することができるため、特定のユーザーが特定のリソース・セットへのアクセスを制御する必要がある場合のパーミッション処理に便利です。リソース・プールはしばしばグループと同時に使用され、グループのメンバーはマシンとストレージのセットに対するパーミッションを持っています。</p></div>
</div>
<div class="sect2">
<h3 id="pveum_authentication_realms">
<span>14.5.認証領域</span> <a class="headerlink" href="#pveum_authentication_realms" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのユーザは、外部レルムに存在するユーザのカウンターパートに過ぎないので、レルムは<span class="monospaced">/etc/pve/domains.cfgで</span>設定する必要があります。 以下のレルム(認証方法)が利用可能です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Linux PAM 標準認証</dt>
<dd>
<p>
Linux PAMは、システム全体のユーザー認証のためのフレームワークです。これらのユーザは、ホストシステム上で<span class="monospaced">adduser</span> などのコマンドを使用して作成します。PAM ユーザーが Proxmox VE ホストシステムに存在する場合、対応するエントリを Proxmox VE に追加して、これらのユーザーがシステムのユーザー名とパスワードでログインできるようにすることができます。</p>
</dd>
<dt class="hdlist1">
Proxmox VE 認証サーバー</dt>
<dd>
<p>
これは Unix ライクなパスワードストアで、ハッシュ化されたパスワードを<span class="monospaced">/etc/pve/priv/shadow.cfg</span> に保存します。パスワードは SHA-256 ハッシュアルゴリズムを使ってハッシュされます。これは、ユーザがProxmox VEの外部にアクセスする必要がない小規模な（あるいは中規模の）インストールに最も便利な領域です。この場合、ユーザはProxmox VEによって完全に管理され、GUIを介して自分のパスワードを変更することができます。</p>
</dd>
<dt class="hdlist1">
ライトウェイトディレクトリアクセスプロトコル</dt>
<dd>
<p>
LDAP (Lightweight Directory Access Protocol) は、ディレクトリサービスを使った認証のための、オープンでクロスプラットフォームなプロトコルです。OpenLDAP は、LDAP プロトコルの一般的なオープンソース実装です。</p>
</dd>
<dt class="hdlist1">
Microsoft Active Directory (AD)</dt>
<dd>
<p>
Microsoft Active Directory (AD)はWindowsドメインネットワーク用のディレクトリサービスで、Proxmox VEの認証レルムとしてサポートされています。認証プロトコルとしてLDAPをサポートしています。</p>
</dd>
<dt class="hdlist1">
OpenID Connect</dt>
<dd>
<p>
OpenID Connectは、OATH 2.0プロトコルの上にIDレイヤーとして実装されています。クライアントは、外部の認証サーバによって実行された認証に基づいて、ユーザの身元を確認することができます。</p>
</dd>
</dl></div>
<div class="sect3">
<h4 id="user-realms-pam">14.5.1.Linux PAM 標準認証<a class="headerlink" href="#user-realms-pam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Linux PAM はホスト・システム・ユーザーに対応するため、ユーザーがログインを許可される各ノードにシステム・ユーザーが存在する必要があります。ユーザーは通常のシステムパスワードで認証します。このレルムはデフォルトで追加され、削除することはできません。設定可能な点では、管理者はレルムからのログインで二要素認証を要求したり、レルムをデフォルトの認証レルムとして設定したりすることができます。</p></div>
</div>
<div class="sect3">
<h4 id="user-realms-pve">14.5.2.Proxmox VE 認証サーバ<a class="headerlink" href="#user-realms-pve" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE認証サーバのレルムは、シンプルなUnixライクなパスワードストアです。 レルムはデフォルトで作成され、Linux PAMと同様に、利用可能な設定項目は、レルムのユーザに二要素認証を要求する機能と、ログイン時のデフォルトレルムとして設定する機能のみです。</p></div>
<div class="paragraph">
<p>他のProxmox VEレルムタイプとは異なり、ユーザは他のシステムに対して認証するのではなく、Proxmox VEを通じて作成および認証されます。したがって、このタイプのユーザーは作成時にパスワードを設定する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="user-realms-ldap">14.5.3.LDAP<a class="headerlink" href="#user-realms-ldap" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザ認証に外部LDAPサーバを使用することもできます(OpenLDAPなど)。このレルム・タイプでは、ユーザは<em>ユーザ属性名</em><span class="monospaced">(user_attr</span>)フィールドで指定されたユーザ名属性を使用して、<em>ベース・ドメイン名</em><span class="monospaced">(base_dn</span>)の下で検索されます。</p></div>
<div class="paragraph">
<p>サーバーとオプションのフォールバック・サーバーを設定し、SSLで接続を暗号化することができます。さらに、ディレクトリとグループに対してフィルタを設定することができます。フィルタにより、レルムの範囲をさらに制限することができます。</p></div>
<div class="paragraph">
<p>例えば、あるユーザーが次のようなLDIFデータセットで表現されているとします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># user1 of People at ldap-test.com dn: uid=user1,ou=People,dc=ldap-test,dc=com objectClass: top objectClass: person objectClass: organizationalPerson objectClass: inetOrgPerson uid: user1 cn：テストユーザー1 sn: Testers description：これは最初のテストユーザーです。</pre>
</div></div>
<div class="paragraph">
<p><em>ベース・ドメイン</em>名は<span class="monospaced">ou=People,dc=ldap-test,dc=comで</span>、ユーザ属性は<span class="monospaced">uid</span>です。</p></div>
<div class="paragraph">
<p>Proxmox VE がユーザーを照会および認証する前に LDAP サーバーに認証 (バインド) する必要がある場合、<span class="monospaced">/etc/pve/domains.cfg</span> の<span class="monospaced">bind_dn</span>プロパティでバインド ドメイン名を構成できます。そのパスワードは、<span class="monospaced">/etc/pve/priv/ldap/&lt;realmname&gt;.pw</span>(例えば、<span class="monospaced">/etc/pve/priv/ldap/my-ldap.pw</span>) に格納する必要があります。このファイルには、生のパスワードを1行で記述します。</p></div>
<div class="paragraph">
<p>証明書を検証するには、<span class="monospaced">capath を</span>設定する必要があります。LDAPサーバのCA証明書を直接設定するか、信頼されたCA証明書を含むシステムパス<span class="monospaced">(/etc/ssl/certs</span>)を設定することができます。 さらに、<span class="monospaced">verify</span>オプションを設定する必要があり、これはウェブインターフェイス上でも行うことができます。</p></div>
<div class="paragraph">
<p>LDAPサーバ・レルムの主な設定オプションは以下のとおりです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">レルム</span><span class="monospaced">(realm</span>)：Proxmox VEユーザのレルム識別子</p>
</li>
<li>
<p>
<span class="monospaced">ベース・ドメイン名</span><span class="monospaced">(base_dn</span>)：ユーザーを検索するディレクトリ</p>
</li>
<li>
<p>
<span class="monospaced">ユーザ属性名</span><span class="monospaced">(user_attr</span>)：ユーザがログインするユーザ名を含むLDAP属性</p>
</li>
<li>
<p>
<span class="monospaced">サーバー</span><span class="monospaced">(server1</span>)：LDAPディレクトリをホストするサーバー</p>
</li>
<li>
<p>
<span class="monospaced">予備サーバー</span><span class="monospaced">（server2</span>）：プライマリサーバが到達不能な場合のフォールバックサーバアドレス（オプション</p>
</li>
<li>
<p>
<span class="monospaced">Port</span><span class="monospaced">（ポート</span>）：LDAPサーバーがリッスンするポート</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">特定のユーザにLDAPサーバを使用した認証を許可するには、Proxmox VEサーバからそのレルムのユーザとして追加する必要があります。これは<a href="#pveum_ldap_sync">同期によって</a>自動的に実行できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="user-realms-ad">14.5.4.Microsoft Active Directory (AD)<a class="headerlink" href="#user-realms-ad" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Microsoft ADをレルムとして設定するには、サーバアドレスと認証ドメインを指定する必要があります。Active Directoryは、オプションのフォールバックサーバ、ポート、SSL暗号化など、LDAPと同じプロパティのほとんどをサポートしています。 さらに、設定後、<a href="#pveum_ldap_sync">同期</a>操作によってユーザをProxmox VEに自動的に追加することができます。</p></div>
<div class="paragraph">
<p>LDAPと同様に、Proxmox VEがADサーバにバインドする前に認証が必要な場合は、<em>バインド・ユーザ</em><span class="monospaced">（bind_dn</span>）プロパティを構成する必要があります。このプロパティは通常、Microsoft ADではデフォルトで必要です。</p></div>
<div class="paragraph">
<p>Microsoft Active Directoryの主な構成設定は以下のとおりです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">レルム</span><span class="monospaced">(realm</span>)：Proxmox VEユーザのレルム識別子</p>
</li>
<li>
<p>
<span class="monospaced">ドメイン</span><span class="monospaced">（domain</span>）：サーバーのADドメイン</p>
</li>
<li>
<p>
<span class="monospaced">サーバー</span><span class="monospaced">（server1</span>）：サーバーのFQDNまたはIPアドレス</p>
</li>
<li>
<p>
<span class="monospaced">予備サーバー</span><span class="monospaced">（server2</span>）：プライマリサーバが到達不能な場合のフォールバックサーバアドレス（オプション</p>
</li>
<li>
<p>
<span class="monospaced">Port</span><span class="monospaced">（ポート</span>）：Microsoft ADサーバーがリッスンするポート。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Microsoft ADは通常、大文字と小文字を区別せずにユーザー名のような値をチェックします。Proxmox VEでも同じようにするには、Web UIでrealmを編集するか、CLIを使用して(realm IDで<span class="monospaced">IDを</span>変更して)、デフォルトの<span class="monospaced">大文字小文字を区別する</span>オプションを無効にします:<span class="monospaced">pveum realm modify ID --case-sensitive 0</span></td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveum_ldap_sync">14.5.5.LDAPベースのレルムの同期<a class="headerlink" href="#pveum_ldap_sync" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-realm-add-ldap.png">
<img src="images/screenshot/gui-datacenter-realm-add-ldap.png" alt="screenshot/gui-datacenter-realm-add-ldap.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>LDAP ベースのレルム(LDAP &amp; Microsoft Active Directory)のユーザーとグループを Proxmox VE に手動で追加するのではなく、自動的に同期することができます。 同期オプションには、Web インターフェイスの<span class="monospaced">Authentication</span>パネルの Add/Edit ウィンドウ、または<span class="monospaced">pveum realm add/modify</span>コマンドからアクセスできます。その後、GUI の<span class="monospaced">Authentication</span>パネルから、または以下のコマンドを使用して同期操作を実行できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveum realm sync &lt;realm&gt;</pre>
</div></div>
<div class="paragraph">
<p>ユーザとグループはクラスタ全体の構成ファイル<span class="monospaced">/etc/pve/user.cfg</span> に同期されます。</p></div>
<div class="sect4">
<h5 id="_attributes_to_properties">属性からプロパティへ<a class="headerlink" href="#_attributes_to_properties" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>同期レスポンスにユーザ属性が含まれている場合、それらは<span class="monospaced">user.cfg</span>内の一致するユーザ・プロパティに同期されます。例：<span class="monospaced">firstname</span>または<span class="monospaced">lastname</span>。</p></div>
<div class="paragraph">
<p>属性の名前がProxmox VEのプロパティと一致しない場合は、<span class="monospaced">sync_attributes</span>オプションを使用して、コンフィグでカスタムフィールド間マップを設定できます。</p></div>
<div class="paragraph">
<p>このようなプロパティが消えた場合にどのように処理されるかは、後述の同期オプションで制御できます。</p></div>
</div>
<div class="sect4">
<h5 id="_sync_configuration">同期設定<a class="headerlink" href="#_sync_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>LDAPベースのレルムを同期するための設定オプションは、[追加/編集]ウィンドウの[<span class="monospaced">同期オプション]</span>タブにあります。</p></div>
<div class="paragraph">
<p>設定オプションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">バインド・ユーザー</span><span class="monospaced">（bind_dn</span>）：ユーザとグループの問い合わせに使用する LDAP アカウントを指します。このアカウントは、必要なエントリすべてにアクセスできる必要があります。このアカウントが設定されている場合、検索はバインド経由で行われます。ユーザは完全なLDAP形式の識別名(DN)でなければなりません、例えば、<span class="monospaced">cn=admin,dc=example,dc=com</span>です。</p>
</li>
<li>
<p>
グループ名attr（group_name_attr）：ユーザのグループを表します。<span class="monospaced">user.cfgの</span>通常の文字制限に従ったエントリのみが同期されます。グループは、名前の衝突を避けるために、名前に<span class="monospaced">-$realmが</span>付加された状態で同期されます。同期によって手動で作成したグループが上書きされないようにしてください。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザー・クラス</span><span class="monospaced">（user_classes</span>）：ユーザーに関連するオブジェクト・クラス。</p>
</li>
<li>
<p>
<span class="monospaced">グループ・クラス</span><span class="monospaced">（group_classes</span>）：グループに関連するオブジェクト・クラス。</p>
</li>
<li>
<p>
<span class="monospaced">Eメール属性</span>：LDAPベースのサーバでユーザの電子メールアドレスが指定されている場合、ここで関連する属性を設定することで、これらの電子メールアドレスも同期に含めることができます。これはコマンドラインから<span class="monospaced">--sync_attributes</span>パラメータを指定することで実現できます。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザーフィルター</span><span class="monospaced">（filter</span>）：特定のユーザーをターゲットとするフィルタオプションです。</p>
</li>
<li>
<p>
<span class="monospaced">グループ・フィルター</span><span class="monospaced">（group_filter</span>）：特定のグループをターゲットとするフィルタオプション。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">フィルタを使用すると、追加の一致基準を作成して、同期の範囲を絞り込 むことができます。利用可能な LDAP フィルタの種類とその使用方法については、<a href="https://ldap.com/ldap-filters/">ldap.com</a> を参照してください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="pveum_ldap_sync_options">同期オプション<a class="headerlink" href="#pveum_ldap_sync_options" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-realm-add-ldap-sync-options.png">
<img src="images/screenshot/gui-datacenter-realm-add-ldap-sync-options.png" alt="screenshot/gui-datacenter-realm-add-ldap-sync-options.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>前のセクションで指定したオプションに加えて、同期操作の動作を記述するさらなるオプションを設定することもできます。</p></div>
<div class="paragraph">
<p>これらのオプションは同期の前にパラメータとして設定するか、レルムオプション<span class="monospaced">sync-defaults-options</span> でデフォルトとして設定します。</p></div>
<div class="paragraph">
<p>同期の主なオプションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">スコープ</span><span class="monospaced">（範囲</span>）：同期するものの範囲。<span class="monospaced">ユーザー</span>、<span class="monospaced">グループ</span>、または<span class="monospaced">その両方を</span>指定できます。</p>
</li>
<li>
<p>
<span class="monospaced">新規を有効にする</span><span class="monospaced">（enable-new</span>）：設定すると、新しく同期されたユーザが有効になり、ログインできるようになります。デフォルトは<span class="monospaced">true</span>です。</p>
</li>
<li>
<p>
<span class="monospaced">Remove Vanished</span><span class="monospaced">(remove-vanished</span>)：これはオプションのリストで、有効にすると、同期レスポンスから返されなかったときに削除されるかどうかを決定します。オプションは次のとおりです：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ACL</span><span class="monospaced">(acl)：</span>同期応答で返されなかったユーザーとグループの ACL を削除します。多くの場合、<span class="monospaced">Entry</span> と一緒に使用します。</p>
</li>
<li>
<p>
<span class="monospaced">エントリ</span><span class="monospaced">（entry</span>）：エントリ（entry）：同期応答で返されなかったエントリ（ユーザーやグループなど）を削除します。</p>
</li>
<li>
<p>
<span class="monospaced">Properties</span><span class="monospaced">（プロパティ</span>）：プロパティ（properties）：シンク応答のユーザーがそれらの属性を含んでいないエントリのプロパティを削除します。こ れはすべてのプ ロパテ ィ を含み、 一度も同期に よ っ て設定 さ れていない も の も 含みます。こ れ ら は こ のオプシ ョ ンを有効に し て も保持 さ れます。</p>
</li>
</ul></div>
</li>
<li>
<p>
<span class="monospaced">プレビュー</span><span class="monospaced">（ドライラン</span>）：データはコンフィグに書き込まれません。どのユーザとグループが<span class="monospaced">user.cfgに</span>同期されるかを確認したい場合に便利です。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="pveum_ldap_reserved_characters">予約文字<a class="headerlink" href="#pveum_ldap_reserved_characters" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>特定の文字は予約されており（<a href="https://www.ietf.org/rfc/rfc2253.txt">RFC2253</a>参照）、適切にエスケープされないとDNの属性値で簡単に使用できません。</p></div>
<div class="paragraph">
<p>以下の文字はエスケープが必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
先頭または末尾にスペース( )</p>
</li>
<li>
<p>
先頭に数字記号<span class="monospaced">(#</span>)</p>
</li>
<li>
<p>
カンマ(<span class="monospaced">,</span>)</p>
</li>
<li>
<p>
プラス記号<span class="monospaced">(+</span>)</p>
</li>
<li>
<p>
ダブルクォート（<span class="monospaced">"）</span></p>
</li>
<li>
<p>
スラッシュ<span class="monospaced">(/</span>)</p>
</li>
<li>
<p>
角括弧<span class="monospaced">(&lt;&gt;)</span></p>
</li>
<li>
<p>
セミコロン(<span class="monospaced">;</span>)</p>
</li>
<li>
<p>
等号<span class="monospaced">(=)</span></p>
</li>
</ul></div>
<div class="paragraph">
<p>こ の よ う な文字を DN で使用す る には、 属性値を ダブル ク ォーテーシ ョ ンで囲みます。 た と えば、 CN （共通名）<span class="monospaced">Example, User</span> を持つユーザ と バ イ ン ド す る には、<span class="monospaced">bind_dn</span> の値 と し て<span class="monospaced">CN="Example, User",OU=people,DC=example,DC=com</span>を用います。</p></div>
<div class="paragraph">
<p>これは<span class="monospaced">base_dn</span> 属性、<span class="monospaced">bind_dn</span> 属性、<span class="monospaced">group_dn</span>属性に適用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コロンとスラッシュはユーザー名の予約文字であるため、同期できません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pveum_openid">14.5.6.OpenID Connect<a class="headerlink" href="#pveum_openid" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OpenID Connectの主な設定オプションは以下のとおりです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">発行者URL</span><span class="monospaced">(issuer-url</span>)：ProxmoxはOpenID Connect Discoveryプロトコルを使用して、自動的に詳細を設定します。</p>
<div class="paragraph">
<p>暗号化されていない<span class="monospaced">http://</span>URL を使用することも可能ですが、暗号化された<span class="monospaced">https://</span>接続を使用することを強くお勧めします。</p></div>
</li>
<li>
<p>
<span class="monospaced">レルム</span><span class="monospaced">(realm</span>)：Proxmox VEユーザのレルム識別子</p>
</li>
<li>
<p>
<span class="monospaced">クライアントID</span><span class="monospaced">（client-id</span>）：  OpenIDクライアントID。</p>
</li>
<li>
<p>
<span class="monospaced">クライアント・キー</span><span class="monospaced">(client-key</span>)：オプションの OpenID クライアント鍵。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザーの自動作成</span><span class="monospaced">（autocreate</span>）：ユーザが存在しない場合、自動的にユーザを作成します。認証はOpenIDサーバで行われますが、すべてのユーザはProxmox VEのユーザ設定にエントリが必要です。手動で追加するか、<span class="monospaced">自動作成</span>オプションを使用して新しいユーザを自動的に追加します。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザ名請求</span><span class="monospaced">(</span><span class="monospaced">username-</span><span class="monospaced">claim</span>)：一意なユーザ名<span class="monospaced">(件名</span>、<span class="monospaced">ユーザ名</span>、または<span class="monospaced">メールアドレス</span>) を生成するために使用される OpenID claim。</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_username_mapping">ユーザー名のマッピング<a class="headerlink" href="#_username_mapping" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>OpenID Connectの仕様では、<span class="monospaced">subjectという</span>一意な属性<em>（</em>OpenID用語では<em>claim</em>）が定義されています。デフォルトでは、この属性の値を使ってProxmox VEのユーザ名を生成します。</p></div>
<div class="paragraph">
<p>残念なことに、ほとんどのOpenIDサーバは<span class="monospaced">DGH76OKH34BNG3245SBの</span>ようなランダムな文字列を<span class="monospaced">件名に使って</span>いるので、典型的なユーザ名は<span class="monospaced">DGH76OKH34BNG3245SB@yourrealmの</span>ようになります。ユニークではありますが、人間がこのようなランダムな文字列を覚えておくのは難しいので、実際のユーザと関連付けるのはかなり不可能です。</p></div>
<div class="paragraph">
<p><span class="monospaced">username-claim</span>設定では、ユーザー名のマッピングに他の属性を使用することができます。OpenID Connect サーバがその属性を提供し、一意性が保証されている場合は<span class="monospaced">username</span>を指定することを推奨します。</p></div>
<div class="paragraph">
<p>もう1つのオプションは<span class="monospaced">emailを</span>使うことで、こちらも人間が読めるユーザ名が得られます。繰り返しますが、サーバがこの属性の一意性を保証している場合にのみ、この設定を使用してください。</p></div>
</div>
<div class="sect4">
<h5 id="_examples_9">例<a class="headerlink" href="#_examples_9" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Google を使って OpenID レルムを作成する例です。<span class="monospaced">client-idと</span> <span class="monospaced">--client-keyは</span>、Google OpenIDの設定の値で置き換える必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveum realm add myrealm1 --type openid --issuer-url https://accounts.google.com --client-id XXXX --client-key YYYY --username-claim email</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドでは<span class="monospaced">--username-claim email を</span>使用しているため、Proxmox VE 側のユーザー名は<span class="monospaced">example.user@google.com@myrealm1</span> のようになります。</p></div>
<div class="paragraph">
<p>Keycloak<a href="https://www.keycloak.org/">（https://www.keycloak.org/</a>）は、OpenID Connectをサポートするオープンソースのアイデンティティおよびアクセス管理ツールです。以下の例では、<span class="monospaced">--issuer-urlと</span> <span class="monospaced">--client-idを</span>あなたの情報で置き換える必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveum realm add myrealm2 --type openid --issuer-url https://your.server:8080/realms/your-realm --client-id XXX --username-claim ユーザー名</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">username-claimユーザー名を</span>使用すると、Proxmox VE側で<span class="monospaced">example.user@myrealm2の</span>ようなシンプルなユーザー名を使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ユーザーが（Keycloakサーバー上で）ユーザー名の設定を自分で編集できないようにする必要があります。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pveum_tfa_auth">
<span>14.6.二要素認証</span> <a class="headerlink" href="#pveum_tfa_auth" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>二要素認証を使用するには2つの方法があります：</p></div>
<div class="paragraph">
<p>これは、<em>TOTP</em>(Time-based One-Time Password) または<em>YubiKey OTP の</em>いずれかの認証レルムによって要求されます。この場合、新しく作成されたユーザは、すぐに鍵を追加する必要があります。<em>TOTPの</em>場合、最初にログインできれば、後から<em>TOTPを</em>変更することも可能です。</p></div>
<div class="paragraph">
<p>あるいは、たとえレルムが2ファクタ認証を強制していなくても、ユーザは後から2ファクタ認証を選択することもできます。</p></div>
<div class="sect3">
<h4 id="_available_second_factors">14.6.1.利用可能なセカンドファクター<a class="headerlink" href="#_available_second_factors" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>スマートフォンやセキュリティーキーを紛失してアカウントから永久にロックされる事態を避けるため、複数のセカンドファクターを設定することができます。</p></div>
<div class="paragraph">
<p>レルム強制 TOTP、YubiKey OTP に加え、以下の二要素認証が利用可能です：</p></div>
<div class="ulist"><ul>
<li>
<p>
ユーザーが設定するTOTP<a href="https://en.wikipedia.org/wiki/Time-based_One-Time_Password">（時間ベースのワンタイムパスワード</a>）。 共有シークレットと現在時刻から導き出される短いコードで、30秒ごとに変更されます。</p>
</li>
<li>
<p>
WebAuthn<a href="https://en.wikipedia.org/wiki/WebAuthn">(Web Authentication</a>) 認証の一般的な標準。コンピュータやスマートフォンのハードウェアキーやTPM（Trusted Platform Module）など、さまざまなセキュリティデバイスによって実装されます。</p>
</li>
<li>
<p>
シングルユースのリカバリーキー。プリントアウトして安全な場所に施錠するか、電子保管庫にデジタル保存する必要があるキーのリスト。各キーは1回のみ使用できます。他のすべてのセカンドファクターが紛失または破損した場合でも、ロックアウトされないようにするのに最適なキーです。</p>
</li>
</ul></div>
<div class="paragraph">
<p>WebAuthn がサポートされる前は、U2F はユーザーが設定できました。既存のU2Fファクターは引き続き使用できますが、サーバー上で設定された後は、WebAuthnに切り替えることをお勧めします。</p></div>
</div>
<div class="sect3">
<h4 id="_realm_enforced_two_factor_authentication">14.6.2.レルム強制二要素認証<a class="headerlink" href="#_realm_enforced_two_factor_authentication" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これは、認証レルムを追加または編集する際に、<em>TFA</em>ドロップダウン・ボックスで利用可能な方法の1つを選択することで行うことができます。 レルムがTFAを有効にすると、それが要件となり、TFAが設定されたユーザのみがログインできるようになります。</p></div>
<div class="paragraph">
<p>現在、2つの方法があります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
タイムベースOATH（TOTP）</dt>
<dd>
<p>
これは標準的な HMAC-SHA1 アルゴリズムを使用し、現在時刻はユーザーが設定したキーでハッシュ化されます。時間ステップとパスワードの長さのパラメータは設定可能です。</p>
<div class="paragraph">
<p>ユーザーは複数のキーを（スペースで区切って）設定することができ、キーはBase32（RFC3548）または16進数表記で指定できます。</p></div>
<div class="paragraph">
<p>Proxmox VEは、<span class="monospaced">oathtool</span>コマンドラインツールやAndroid Google Authenticator、FreeOTP、andOTPなどの様々なOTPツールで直接使用できるBase32記法のランダムキーを出力するキー生成ツール<span class="monospaced">（oathkeygen</span>）を提供しています。</p></div>
</dd>
<dt class="hdlist1">
YubiKey OTP</dt>
<dd>
<p>
YubiKeyで認証を行うには、Yubico API ID、API KEY、認証サーバURLが設定されており、ユーザがYubiKeyを持っている必要があります。YubiKeyからキーIDを取得するには、YubiKeyをUSBで接続した後、一度YubiKeyを起動し、入力されたパスワードの最初の12文字をユーザーの<em>キーIDs</em>フィールドにコピーします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><a href="https://www.yubico.com/products/services-software/yubicloud/">YubiCloudを</a>使用する方法、または<a href="https://developers.yubico.com/Software_Projects/Yubico_OTP/YubiCloud_Validation_Servers/">独自の認証サーバをホスト</a>する方法については、<a href="https://developers.yubico.com/OTP/">YubiKey OTPの</a>ドキュメントを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="pveum_tfa_lockout">14.6.3.二要素認証の制限とロックアウト<a class="headerlink" href="#pveum_tfa_lockout" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>第二の要因は、パスワードが何らかの形で漏れたり推測されたりした場合に、ユーザーを保護するためのものです。しかし、いくつかの要素は総当たりで破られる可能性があります。このため、第2要素によるログインに何度も失敗すると、ユーザーはロックアウトされます。</p></div>
<div class="paragraph">
<p>TOTPの場合、8回失敗すると、ユーザーのTOTPファクターは無効になります。回復キーでログインすると解除されます。TOTP が唯一の利用可能な要素であった場合、管理者の介入が必要であり、ユーザに直ちにパスワードの変更を要求することが強く推奨されます。</p></div>
<div class="paragraph">
<p>FIDO2/Webauthnとリカバリキーはブルートフォースアタックの影響を受けにくいため、リミットは高くなりますが（100回）、それを超えるとすべてのセカンドファクターが1時間ブロックされます。</p></div>
<div class="paragraph">
<p>管理者は、UIのユーザーリストまたはコマンドラインから、いつでもユーザーの二要素認証を解除することができます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum ユーザー tfa ロック解除 joe@pve</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="pveum_user_configured_totp">14.6.4.ユーザが設定したTOTP認証<a class="headerlink" href="#pveum_user_configured_totp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザは、ログイン時に<em>TOTP</em>または<em>WebAuthn</em>を第二要素として有効にするかどうかを、ユーザ一覧の<em>TFA</em>ボタンから選択できます (レルムが<em>YubiKey OTP を</em>強制している場合を除く)。</p></div>
<div class="paragraph">
<p>ユーザーはいつでも1回限りの<em>リカバリーキーを</em>追加して使用できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-two-factor.png">
<img src="images/screenshot/gui-datacenter-two-factor.png" alt="screenshot/gui-datacenter-two-factor.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><em>TFA</em>ウィンドウを開くと、<em>TOTP</em>認証を設定するためのダイアログが表示されます。<em>Secret」</em>フィールドには鍵を入力します。鍵は「<em>Randomize」</em>ボタンでランダムに生成することができます。ほとんどの<em>TOTP</em>アプリは、<em>発行</em>者名と対応する<em>OTP</em>値を表示します。ユーザ名は<em>TOTP</em>アプリの QR コードにも含まれます。</p></div>
<div class="paragraph">
<p>キーを生成すると、FreeOTP などのほとんどの OTP アプリで使用できる QR コードが表示されます。その後、ユーザーは、現在のユーザーパスワード（<em>root</em> としてログインしている場合を除く）と、<em>TOTP</em>キーを正しく使用できることを、現在の<em>OTP</em>値を<em>Verification Code</em>フィールドに入力して<em>Apply</em>ボタンを押すことで確認する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="user_tfa_setup_totp">14.6.5.TOTP<a class="headerlink" href="#user_tfa_setup_totp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-gui-tfa-add-totp.png">
<img src="images/screenshot/pve-gui-tfa-add-totp.png" alt="screenshot/pve-gui-tfa-add-totp.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>サーバーの設定は不要です。スマートフォンにTOTPアプリ（例えば<a href="https://freeotp.github.io/">FreeOTP</a>）をインストールし、Proxmox VEのウェブインターフェースを使用してTOTPファクターを追加するだけです。</p></div>
</div>
<div class="sect3">
<h4 id="user_tfa_setup_webauthn">14.6.6.WebAuthn<a class="headerlink" href="#user_tfa_setup_webauthn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>WebAuthnを動作させるには、2つのものが必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
信頼できる HTTPS 証明書 (<a href="https://pve.proxmox.com/wiki/Certificate_Management">Let's Encrypt を</a>使用するなど)。 信頼できない証明書でもおそらく動作しますが、ブラウザによっては信頼できない証明書を使用すると警告が表示されたり、WebAuthn の操作が拒否されたりすることがあります。</p>
</li>
<li>
<p>
WebAuthn 設定を設定します（Proxmox VE ウェブインターフェースの<strong>Datacenter → Options → WebAuthn Settings</strong>を参照）。これはほとんどのセットアップで自動入力できます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>これらの両方の要件を満たすと、[<strong>Datacenter] → [Permissions] → [Two Factor]</strong> の<strong>[Two Factor]</strong>パネルで WebAuthn 設定を追加できます。</p></div>
</div>
<div class="sect3">
<h4 id="user_tfa_setup_recovery_keys">14.6.7.リカバリーキー<a class="headerlink" href="#user_tfa_setup_recovery_keys" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-gui-tfa-add-recovery-keys.png">
<img src="images/screenshot/pve-gui-tfa-add-recovery-keys.png" alt="screenshot/pve-gui-tfa-add-recovery-keys.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><strong>データセンター → 権限 → Two</strong> <strong>FactorのTwo Factor</strong>パネルで回復キーのセットを作成するだけです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">回復用鍵は、1 ユーザーにつき 1 セットのみ使用できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveum_configure_webauthn">14.6.8.サーバー側 Webauthn 設定<a class="headerlink" href="#pveum_configure_webauthn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-webauthn-edit.png">
<img src="images/screenshot/gui-datacenter-webauthn-edit.png" alt="screenshot/gui-datacenter-webauthn-edit.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>ユーザーが<em>WebAuthn</em>認証を使用できるようにするには、有効な SSL 証明書を持つ有効なドメインを使用する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>WebAuthn の</em>設定を変更すると、既存のすべての<em>WebAuthn</em>登録が使用できなくなる可能性があります！</td>
</tr></table>
</div>
<div class="paragraph">
<p>これは<span class="monospaced">/etc/pve/datacenter.cfgで</span>行います。例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>webauthn: rp=mypve.example.com,origin=https://mypve.example.com:8006,id=mypve.example.com</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pveum_configure_u2f">14.6.9.サーバ側U2F設定<a class="headerlink" href="#pveum_configure_u2f" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">代わりにWebAuthnを使用することをお勧めします。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ユーザーが<em>U2F</em>認証を使用できるようにするには、有効なSSL証明書を持つ有効なドメインを使用する必要がある場合があります。そうでない場合、ブラウザによっては警告が表示されたり、U2Fの使用を完全に拒否したりする場合があります。最初に、<em>AppId</em><span class="footnote"><br>[AppId<a href="https://developers.yubico.com/U2F/App_ID.html">https://developers.yubico.com/U2F/App_ID.html]</a><br></span>を設定する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>AppIdを</em>変更すると、既存のすべての<em>U2F</em>登録が使用できなくなります！</td>
</tr></table>
</div>
<div class="paragraph">
<p>これは<span class="monospaced">/etc/pve/datacenter.cfgで</span>行います。例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>u2f: appid=https://mypve.example.com:8006</pre>
</div></div>
<div class="paragraph">
<p>1つのノードの場合、<em>AppIdは</em>単純にウェブインターフェースのアドレスで、ブラウザで使用されているものと全く同じで、上記のように<em>https://</em>、ポートも含みます。ブラウザによっては、<em>AppIdの</em>マッチングが他のブラウザよりも厳しい場合があることに注意してください。</p></div>
<div class="paragraph">
<p>複数のノードを使用する場合、<span class="monospaced">appid.json</span><span class="footnote"><br>[Multi-facet apps:<a href="https://developers.yubico.com/U2F/App_ID.html">https://developers.yubico.com/U2F/App_ID.html]</a><br></span>ファイルを提供する別の<span class="monospaced">https</span>サーバーを用意するのが、ほとんどのブラウザと互換性があるようです。すべてのノードが同じトップレベルドメインのサブドメインを使用している場合、<em>AppId</em> として TLD を使用すれば十分かもしれません。ただし、ブラウザによってはこれを受け入れない場合があることに注意してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>AppIdが</em>正しくないと通常はエラーになりますが、特にChromiumでサブドメイン経由でアクセスされるノードにトップレベルドメインの<em>AppIdを</em>使用している場合、エラーにならないことがあります。このため、後で<em>AppIdを</em>変更すると既存の<em>U2F</em>登録が使用できなくなるため、複数のブラウザで設定をテストすることをお勧めします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveum_user_configured_u2f">14.6.10.ユーザーとしてのU2Fの有効化<a class="headerlink" href="#pveum_user_configured_u2f" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>U2F</em>認証を有効にするには、<em>TFA</em>ウィンドウの<em>U2F</em>タブを開き、現在のパスワードを入力し（rootでログインしていない場合）、<em>Register</em>ボタンを押します。 サーバーが正しくセットアップされ、ブラウザがサーバーから提供された<em>AppIdを</em>受け入れると、<em>U2F</em>デバイスのボタンを押すよう促すメッセージが表示されます（<em>YubiKeyの</em>場合、ボタンのランプが1秒間に約2回、安定して点滅するはずです）。</p></div>
<div class="paragraph">
<p>Firefoxユーザーは<em>U2F</em>トークンを使う前に<em>about:configで</em> <em>security.webauth.u2fを</em>有効にする必要があるかもしれません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pveum_permission_management">
<span>14.7.パーミッション管理</span> <a class="headerlink" href="#pveum_permission_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ユーザがアクション（VMのコンフィギュレーションの一部を一覧表示、変更、削除など）を実行するには、そのユーザに適切なパーミッションが必要です。</p></div>
<div class="paragraph">
<p>Proxmox VEは、ロールおよびパスベースの権限管理システムを使用しています。パーミッションテーブルのエントリは、<em>オブジェクトや</em> <em>パスに</em>アクセスする際に、ユーザー、グループ、トークンが特定の役割を担うことを許可します。つまり、アクセスルールは<em>(パス、ユーザー、ロール)</em>、<em>(パス、グループ、ロール)</em>、<em>(パス、トークン、ロール)の</em>トリプルとして表すことができます。</p></div>
<div class="sect3">
<h4 id="pveum_roles">14.7.1.役割<a class="headerlink" href="#pveum_roles" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ロールは単に権限のリストです。Proxmox VEには定義済みのロールが多数用意されており、ほとんどの要件を満たすことができます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">管理者</span>：すべての権限があります。</p>
</li>
<li>
<p>
<span class="monospaced">NoAccess</span>: 権限を持たない (アクセスを禁止するために使用)</p>
</li>
<li>
<p>
<span class="monospaced">PVEAdmin</span>：ほとんどのタスクを実行できますが、システム設定（<span class="monospaced">Sys.PowerMgmt</span>、<span class="monospaced">Sys.Modify</span>、<span class="monospaced">Realm.Allocate</span>）やパーミッション（<span class="monospaced">Permissions.Modify</span>）を変更する権限はありません。</p>
</li>
<li>
<p>
<span class="monospaced">PVEAuditor</span>: 読み取り専用</p>
</li>
<li>
<p>
<span class="monospaced">PVEDatastoreAdmin</span>: バックアップ領域とテンプレートの作成と割り当て</p>
</li>
<li>
<p>
<span class="monospaced">PVEDatastoreUser</span>: バックアップ領域の割り当てとストレージの表示</p>
</li>
<li>
<p>
<span class="monospaced">PVEMappingAdmin</span>: リソースマッピングの管理</p>
</li>
<li>
<p>
<span class="monospaced">PVEMappingUser</span>: リソースマッピングの表示と使用</p>
</li>
<li>
<p>
<span class="monospaced">PVEPoolAdmin</span>: プールの割り当て</p>
</li>
<li>
<p>
<span class="monospaced">PVEPoolUser</span>: プールを見る</p>
</li>
<li>
<p>
<span class="monospaced">PVESDNAdmin</span>: SDN コンフィギュレーションの管理</p>
</li>
<li>
<p>
<span class="monospaced">PVESDNUser</span>: ブリッジ/ネットへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">PVESysAdmin</span>: 監査、システムコンソール、システムログ</p>
</li>
<li>
<p>
<span class="monospaced">PVETemplateUser</span>: テンプレートの表示とクローン</p>
</li>
<li>
<p>
<span class="monospaced">PVEUserAdmin</span>: ユーザーの管理</p>
</li>
<li>
<p>
<span class="monospaced">PVEVMAdmin</span>: VM を完全に管理します。</p>
</li>
<li>
<p>
<span class="monospaced">PVEVMUser</span>：表示、バックアップ、CD-ROM設定、VMコンソール、VM電源管理</p>
</li>
</ul></div>
<div class="paragraph">
<p>GUIで定義済みのロール一式を見ることができます。</p></div>
<div class="paragraph">
<p>GUIまたはコマンドラインから新しいロールを追加できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-role-add.png">
<img src="images/screenshot/gui-datacenter-role-add.png" alt="screenshot/gui-datacenter-role-add.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>GUIから<em>Datacenterの</em> <em>Permissions → Roles</em>タブに移動し、<em>Create</em>ボタンをクリックします。そこでロール名を設定し、<em>Privileges</em>ドロップダウンメニューから必要な権限を選択できます。</p></div>
<div class="paragraph">
<p>コマンドラインからロールを追加するには、例えば<em>pveum</em>CLIツールを使用します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveum role add VM_Power-only --privs<span style="color: #FF0000">"VM.PowerMgmt VM.Console"</span>pveum role add Sys_Power-only --privs<span style="color: #FF0000">"Sys.PowerMgmt Sys.Console"</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">PVEで</span>始まるロールは常に組み込みのものであり、カスタムロールはこの予約接頭辞を使用することはできません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_privileges">14.7.2.特権<a class="headerlink" href="#_privileges" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>権限とは、特定のアクションを実行する権利のことです。管理を簡単にするために、権限のリストはロールにグループ化されます。権限はロールの一部でなければユーザやパスに直接割り当てることができないことに注意してください。</p></div>
<div class="paragraph">
<p>現在、以下の特権をサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード / システム関連権限</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Group.Allocate</span>：グループの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">Mapping.Audit</span>：リソースマッピングの表示</p>
</li>
<li>
<p>
<span class="monospaced">Mapping.Modify</span>：リソースマッピングの管理</p>
</li>
<li>
<p>
<span class="monospaced">Mapping.Use</span>：リソースマッピングの使用</p>
</li>
<li>
<p>
<span class="monospaced">Permissions.Modify</span>：アクセス許可の変更</p>
</li>
<li>
<p>
<span class="monospaced">Pool.Allocate</span>：プールの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">Pool.Audit</span>：プールの表示</p>
</li>
<li>
<p>
<span class="monospaced">Realm.AllocateUser</span>: ユーザーをレルムに割り当てる</p>
</li>
<li>
<p>
<span class="monospaced">Realm.Allocate</span>: 認証レルムの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">SDN.Allocate</span>: SDNコンフィギュレーションの管理</p>
</li>
<li>
<p>
<span class="monospaced">SDN.Audit</span>：SDNコンフィギュレーションの表示</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Audit</span>：ノードステータス/設定、Corosyncクラスタ設定、HA設定の表示</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Console</span>: ノードへのコンソールアクセス</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Incoming</span>：他のクラスタからの受信データストリームを許可（実験的）</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Modify</span>: ノード・ネットワーク・パラメータの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">Sys.PowerMgmt</span>: ノードの電源管理 (スタート、ストップ、リセット、シャットダウンなど)</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Syslog</span>: syslogの表示</p>
</li>
<li>
<p>
<span class="monospaced">User.Modify</span>：ユーザーアクセスと詳細の作成/変更/削除。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
仮想マシン関連権限</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">SDN.Use</span>: SDN ネットワークとローカルネットワークのブリッジにアクセスします。</p>
</li>
<li>
<p>
<span class="monospaced">VM.Allocate</span>：サーバー上のVMの作成/削除</p>
</li>
<li>
<p>
<span class="monospaced">VM.Audit</span>：VMコンフィグを表示</p>
</li>
<li>
<p>
<span class="monospaced">VM.Backup</span>：VMのバックアップ/リストア</p>
</li>
<li>
<p>
<span class="monospaced">VM.Clone</span>: VMのクローン/コピー</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.CDROM</span>: CD-ROM の取り出し/交換</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.CPU</span>: CPU設定の変更</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Cloudinit</span>: クラウドイットパラメータの変更</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Disk</span>: ディスクの追加/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.HWType</span>: エミュレートされたハードウェアタイプを変更します。</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Memory</span>: メモリ設定の変更</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Network</span>: ネットワークデバイスの追加/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Options</span>：その他のVM設定を変更します。</p>
</li>
<li>
<p>
<span class="monospaced">VM.Console</span>: VMへのコンソールアクセス</p>
</li>
<li>
<p>
<span class="monospaced">VM.Migrate</span>：クラスタ上の代替サーバにVMを移行</p>
</li>
<li>
<p>
<span class="monospaced">VM.Monitor</span>：VMモニター（kvm）へのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">VM.PowerMgmt</span>: 電源管理 (スタート、ストップ、リセット、シャットダウンなど)</p>
</li>
<li>
<p>
<span class="monospaced">VM.Snapshot.Rollback</span>：VMをスナップショットの1つにロールバックします。</p>
</li>
<li>
<p>
<span class="monospaced">VM.Snapshot</span>: VMスナップショットの作成/削除</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
ストレージ関連の権限</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Datastore.Allocate</span>: データストアの作成/変更/削除とボリュームの削除</p>
</li>
<li>
<p>
<span class="monospaced">Datastore.AllocateSpace</span>：データストアに領域を割り当てる</p>
</li>
<li>
<p>
<span class="monospaced">Datastore.AllocateTemplate</span>: テンプレートと ISO イメージの割り当て/アップロード</p>
</li>
<li>
<p>
<span class="monospaced">Datastore.Audit</span>：データストアの表示/閲覧</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">Permissions.Modifyと</span> <span class="monospaced">Sys.Modifyは</span>どちらも、危険であったり機密であったりするシステムやその設定の変更を許可するものであるため、取り扱いには注意が必要です。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">以下の継承に関するセクションを注意深く読んで、割り当てられたロール（およびその権限）がACLツリーに沿ってどのように伝搬するかを理解してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_objects_and_paths">14.7.3.オブジェクトとパス<a class="headerlink" href="#_objects_and_paths" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>アクセス許可は、仮想マシン、ストレージ、リソースプールなどのオブジェクトに割り当てられます。 ファイルシステムのようなパスを使用して、これらのオブジェクトにアクセスします。これらのパスは自然なツリーを形成し、上位レベル（より短いパス）のパーミッションは、オプションでこの階層内に伝搬することができます。</p></div>
<div class="paragraph" id="pveum_templated_paths">
<p>パスはテンプレート化できます。API 呼び出しがテンプレート化されたパスのパーミッションを必要とする場合、パスには API 呼び出しのパラメータへの参照が含まれることがあります。こ れ ら の参照は中かっ こ で指定 し ます。一部のパラメータは、APIコールのURIから暗黙的に取得されます。例えば、<em>/nodes/mynode/status を</em>呼び出すときのパーミッションパス<span class="monospaced">/nodes/{node}</span>は、<span class="monospaced">/nodes/mynode</span> のパーミッションを必要とし、<span class="monospaced">/access/acl</span>への PUT 要求のパス<span class="monospaced">{path}</span>は、メソッドの<span class="monospaced">パス</span>パラメータを参照します。</p></div>
<div class="paragraph">
<p>いくつか例を挙げましょう：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/ノード/{ノード}</span>：Proxmox VE サーバマシンへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/vms</span>：すべてのVMをカバー</p>
</li>
<li>
<p>
<span class="monospaced">/vms/{vmid}</span>です：特定の VM へのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/storage/{storeid}：</span>特定のストレージへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/pool/{プール名}</span>：特定の<a href="#pveum_pools">プールに</a>含まれるリソースへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/アクセス/グループ</span>グループ管理</p>
</li>
<li>
<p>
<span class="monospaced">/access/realms/{realmid}：</span>レルムへの管理者アクセス</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_inheritance">相続<a class="headerlink" href="#_inheritance" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>前述したように、オブジェクトのパスはファイルシステムのようなツリーを形成し、パーミッションはそのツリーの下のオブジェクトに継承されます（デフォルトではpropagateフラグが設定されています）。以下の継承ルールを使用します：</p></div>
<div class="ulist"><ul>
<li>
<p>
個人ユーザーに対するパーミッションは、常にグループパーミッションに取って代わります。</p>
</li>
<li>
<p>
グループに対するパーミッションは、ユーザーがそのグループのメンバーである場合に適用されます。</p>
</li>
<li>
<p>
より深いレベルのパーミッションは、上位レベルから継承されたものを置き換えます。</p>
</li>
<li>
<p>
<span class="monospaced">NoAccessは</span>、指定されたパス上の他のすべてのロールをキャンセルします。</p>
</li>
</ul></div>
<div class="paragraph">
<p>さらに、権限分離されたトークンは、関連するユーザーが持っていないパーミッションを、任意のパス上で持つことはできません。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pveum_pools">14.7.4.プール<a class="headerlink" href="#pveum_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>プールを使用すると、仮想マシンとデータストアのセットをグループ化できます。そして、プール<span class="monospaced">(/pool/{poolid}</span>) にパーミッションを設定するだけで、そのパーミッションはすべてのプールメンバーに継承されます。これは、アクセス制御を簡素化する素晴らしい方法です。</p></div>
</div>
<div class="sect3">
<h4 id="_which_permissions_do_i_need">14.7.5.どの権限が必要ですか？<a class="headerlink" href="#_which_permissions_do_i_need" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>必要なAPI権限は個々のメソッドごとに文書化されており、<a href="https://pve.proxmox.com/pve-docs/api-viewer/">https://pve.proxmox.com/pve-docs/api-viewer/。</a></p></div>
<div class="paragraph">
<p>パーミッションはリストとして指定され、ロジックとアクセスチェック関数のツリーとして解釈できます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">["および", &lt;subtests&gt;...]</span>および<span class="monospaced">["or", &lt;subtests&gt;...] 。</span></dt>
<dd>
<p>
現在のリストの各要素<span class="monospaced">(and</span>)またはそれ以上の要素<span class="monospaced">(any(or</span>))が真でなければなりません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["perm", &lt;path&gt;, [ &lt;privileges&gt;... ], &lt;options&gt;...]] 。</span></dt>
<dd>
<p>
<span class="monospaced">パスは</span>テンプレート化されたパラメータです（「<a href="#pveum_templated_paths">オブジェクトとパス</a>」参照）。列挙 さ れてい る 権限のすべて （または<span class="monospaced">any</span>オプシ ョ ンが用い ら れてい る 場合はいずれか） が、 指定 さ れたパス上で許 さ れてい る 必要があ り ます。<span class="monospaced">require-param</span>オプシ ョ ンが指定 さ れてい る と き は、 その API 呼び出 し の ス キーマがそれ以外にはそのパラ メ タ をオプシ ョ ナル と し て リ ス ト し てい る と き で も 、 その指定 さ れたパ ラ メ タ は必須です。</p>
</dd>
<dt class="hdlist1">
[<span class="monospaced">userid-group", [ &lt;privileges&gt;... ], &lt;options&gt;... ]。</span></dt>
<dd>
<p>
呼び出し元は、<span class="monospaced">/access/groupsに</span>リストされた特権のいずれかを持っていなければなりません。さらに、<span class="monospaced">groups_param</span>オプションが設定されているかどうかによって、2つのチェックが可能です：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">groups_param</span>が設定されています：APIコールに非オプションの<span class="monospaced">groups</span>パラメータがあり、呼び出し元がリストされたすべてのグループに対してリストされた特権のいずれかを持っている必要があります。</p>
</li>
<li>
<p>
<span class="monospaced">groups_param</span>が設定されていません：<span class="monospaced">userid</span>パラメータで渡されたユーザは、呼び出し元が(<span class="monospaced">/access/groups/&lt;group&gt;</span>パス経由で)リストされた権限のいずれかを持つグループに存在し、そのグループの一部でなければなりません。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">[userid-param", "self"]。</span></dt>
<dd>
<p>
APIコールの<span class="monospaced">userid</span>パラメータに提供される値は、アクションを実行するユーザーを参照する必要があります（通常、昇格権限を持っていなくても、ユーザーが自分自身に対してアクションを実行できるようにするために、<span class="monospaced">orと組み合わせて</span>使用されます）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["userid-param", "Realm.AllocateUser"]。</span></dt>
<dd>
<p>
ユーザは<span class="monospaced">Realm.AllocateUser で</span> <span class="monospaced">/access/realm/&lt;realm&gt;</span> にアクセスする必要があります。ユーザ ID は<span class="monospaced">&lt;username&gt;@&lt;realm&gt;</span> の形式で渡されますので、 レルムに関連付けるためにユーザが存在する必要はないことに注意してください<span class="monospaced">。</span></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["perm-modify","&lt;path&gt;"]。</span></dt>
<dd>
<p>
<span class="monospaced">パスは</span>テンプレート化されたパラメータです（「<a href="#pveum_templated_paths">オブジェクトとパス</a>」を参照）。ユーザは、<span class="monospaced">Permissions.Modify</span>特権か、パスによっては以下の特権で代用することができます：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/storage/...</span>: 'Datastore.Allocate` が必要です。</p>
</li>
<li>
<p>
<span class="monospaced">/vms/...</span>: 'VM.Allocate` が必要です。</p>
</li>
<li>
<p>
<span class="monospaced">/pool/...</span>: 'Pool.Allocate` が必要です。</p>
<div class="paragraph">
<p>パスが空の場合は、<span class="monospaced">/accessの</span> <span class="monospaced">Permissions.Modifyが</span>必要です。</p></div>
<div class="paragraph">
<p>ユーザーが<span class="monospaced">Permissions.Modify</span>権限を持っていない場合、指定されたパス上の自分の権限のサブセットのみを委譲することができます（例えば、<span class="monospaced">PVEVMAdminを</span>持つユーザーは<span class="monospaced">PVEVMUserを</span>委譲することはできますが、<span class="monospaced">PVEAdminを</span>委譲することはできません）。</p></div>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_tool">
<span>14.8.コマンドラインツール</span> <a class="headerlink" href="#_command_line_tool" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ほとんどのユーザーは GUI を使ってユーザーを管理します。しかし、<span class="monospaced">pveum</span>（"<strong>Proxmox</strong><strong>VE</strong> <strong>User</strong> <strong>Manager</strong>"の略）と呼ばれるフル機能のコマンドラインツールもあります。Proxmox VEのコマンドラインツールはすべてAPIのラッパーなので、REST APIからこれらの機能にアクセスすることもできます。</p></div>
<div class="paragraph">
<p>以下は簡単な使用例です。ヘルプを表示するには</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> はげ</tt></pre></div></div>
<div class="paragraph">
<p>または (特定のコマンドに関する詳細なヘルプを表示するには)</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum<span style="font-weight: bold"><span style="color: #0000FF">ヘルプ</span></span>ユーザー追加</tt></pre></div></div>
<div class="paragraph">
<p>新しいユーザーを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user add testuser@pve -comment<span style="color: #FF0000">"ただのテスト"</span></tt></pre></div></div>
<div class="paragraph">
<p>パスワードを設定または変更します（すべてのレルムでサポートされているわけではありません）：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum passwd testuser@pve</tt></pre></div></div>
<div class="paragraph">
<p>ユーザーを無効にします：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user modify testuser@pve -enable<span style="color: #993399">0</span></tt></pre></div></div>
<div class="paragraph">
<p>新しいグループを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveumグループ追加テストグループ</tt></pre></div></div>
<div class="paragraph">
<p>新しいロールを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum role add PVE_Power-only -privs<span style="color: #FF0000">"VM.PowerMgmt VM.Console"</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_real_world_examples">
<span>14.9.実例</span> <a class="headerlink" href="#_real_world_examples" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_administrator_group">14.9.1.管理者グループ<a class="headerlink" href="#_administrator_group" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>管理者が、（rootアカウントを使わずに）完全な管理者権限を持つユーザーグループを作りたいと思うことはあり得ます。</p></div>
<div class="paragraph">
<p>そのためには、まずグループを定義します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum group add admin -comment<span style="color: #FF0000">"システム管理者"</span></tt></pre></div></div>
<div class="paragraph">
<p>次に役割を割り当てます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify<span style="color: #990000">/</span>-group admin -role 管理者</tt></pre></div></div>
<div class="paragraph">
<p>最後に、新しい<em>管理者</em>グループにユーザーを追加します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user modify testuser@pve -group admin</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_auditors">14.9.2.監査役<a class="headerlink" href="#_auditors" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">PVEAuditor</span>ロールをユーザーまたはグループに割り当てることで、ユーザーに読み取り専用アクセス権を与えることができます。</p></div>
<div class="paragraph">
<p>例 1: ユーザ<span class="monospaced">joe@pve</span>にすべてを表示することを許可します。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify<span style="color: #990000">/</span>-user joe@pve -role PVEAuditor</tt></pre></div></div>
<div class="paragraph">
<p>例 2: ユーザ<span class="monospaced">joe@pve</span>にすべての仮想マシンを表示できるようにします。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /vms -user joe@pve -role PVEAuditor</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_delegate_user_management">14.9.3.ユーザー管理の委任<a class="headerlink" href="#_delegate_user_management" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザ管理をユーザ<span class="monospaced">joe@pveに</span>委譲したい場合は、次のようにします：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /access -user joe@pve -role PVEUserAdmin</tt></pre></div></div>
<div class="paragraph">
<p>ユーザ<span class="monospaced">joe@pveは</span>ユーザの追加と削除、パスワードなどのユーザ属性の変更ができるようになりました。これは非常に強力なロールであり、選択されたレルムとグループに制限したい場合がほとんどでしょう。以下の例では、<span class="monospaced">joe@pveは</span>レルム<span class="monospaced">pve</span>内のユーザを変更することができます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /access/realm/pve -user joe@pve -role PVEUserAdmin pveum acl modify /access/groups/customers -user joe@pve -role PVEUserAdmin</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">そのユーザーは他のユーザーを追加することができますが、そのユーザーが<span class="monospaced">customers</span>グループのメンバーであり、<span class="monospaced">pve</span>レルム内にいる場合に限られます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_limited_api_token_for_monitoring">14.9.4.監視用限定APIトークン<a class="headerlink" href="#_limited_api_token_for_monitoring" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>APIトークンの権限は、常に対応するユーザの権限のサブセットです。つまり、APIトークンを使用して、バックユーザが権限を持たないタスクを実行することはできません。このセクションでは、トークン所有者の権限をさらに制限するために、別の権限を持つAPIトークンを使用する方法を示します。</p></div>
<div class="paragraph">
<p>すべてのVMで、ユーザー<span class="monospaced">joe@pveに</span>ロールPVEVMAdminを与えます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /vms -user joe@pve -role PVEVMAdmin</tt></pre></div></div>
<div class="paragraph">
<p>別の権限を持つ新しいAPIトークンを追加します。このAPIトークンは、VM情報の表示のみ許可されます（監視目的など）：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user token add joe@pve monitoring -privsep<span style="color: #993399">1</span>pveum acl modify /vms -token<span style="color: #FF0000">'joe@pve!monitoring'</span>-role PVEAuditor</tt></pre></div></div>
<div class="paragraph">
<p>ユーザーとトークンの権限を確認します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum ユーザー権限 joe@pve pveum ユーザー・トークン権限 joe@pve モニタリング</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_resource_pools">14.9.5.リソースプール<a class="headerlink" href="#_resource_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>通常、企業はいくつかの小さな部門に分かれており、それぞれの部門にリソースを割り当てたり、管理タスクを委任したりするのが一般的です。ここでは、ソフトウェア開発部門のためのプールを設定したいとします。まず、グループを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum group add developers -コメント<span style="color: #FF0000">"Our software developers"</span></tt></pre></div></div>
<div class="paragraph">
<p>次に、そのグループのメンバーである新しいユーザーを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user add developer1@pve -group developers -password</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">password "パラメーターはパスワードの入力を要求します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>そして、開発部門が使用するリソース・プールを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum pool add dev-pool --comment<span style="color: #FF0000">"IT開発プール"</span></tt></pre></div></div>
<div class="paragraph">
<p>最後に、そのプールに権限を割り当てることができます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify<span style="color: #990000">/pool/dev-pool/</span>-group developers -role PVEAdmin</tt></pre></div></div>
<div class="paragraph">
<p>当社のソフトウェア開発者は、そのプールに割り当てられたリソースを管理できるようになりました。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_ha_manager">
15.高可用性<a class="headerlink" href="#chapter_ha_manager" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>私たちの現代社会は、ネットワークを通じてコンピューターから提供される情報に大きく依存しています。モバイル機器は、人々がいつでもどこからでもネットワークにアクセスできるため、その依存度を高めています。このようなサービスを提供する場合、常に利用可能であることが非常に重要です。</p></div>
<div class="paragraph">
<p>可用性を数学的に定義すると、(A)、ある間隔の間にサービスが使用可能な合計時間と、(B)、間隔の長さの比率となります。これは通常、ある年の稼働時間のパーセンテージで表されます。</p></div>
<table class="tableblock frame-all grid-all" style="
width:60%;
">
<caption class="title">表18.可用性 - 年間ダウンタイム</caption>
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">空室率 </th>
<th class="tableblock halign-left valign-top">年間ダウンタイム</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.65日</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.76時間</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52分56秒</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.26分</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.9999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31.5秒</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.99999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.15秒</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>可用性を高める方法はいくつかあります。最もエレガントな解決策は、ソフトウェアを書き換えて、複数のホストで同時に実行できるようにすることです。ソフトウェア自体がエラーを検出し、フェイルオーバーを行う方法が必要です。読み取り専用のウェブページを提供するだけなら、これは比較的簡単です。しかし、これは一般的に複雑で、ソフトウェアを自分で修正することができないため、不可能な場合もあります。以下の解決策は、ソフトウェアを修正することなく動作します：</p></div>
<div class="ulist"><ul>
<li>
<p>
信頼性の高い「サーバー」コンポーネントの使用</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">同じ機能を持つコンピュータ・コンポーネントでも、コンポーネントの品質によって信頼性の数値は異なります。ほとんどのベンダーは、信頼性の高いコンポーネントを「サーバー」コンポーネントとして販売しています。</td>
</tr></table>
</div>
</li>
<li>
<p>
単一障害点の排除（冗長コンポーネント）</p>
<div class="ulist"><ul>
<li>
<p>
無停電電源装置（UPS）の使用</p>
</li>
<li>
<p>
サーバーに冗長電源を使用</p>
</li>
<li>
<p>
ECC-RAMを使用</p>
</li>
<li>
<p>
冗長ネットワークハードウェアの使用</p>
</li>
<li>
<p>
ローカルストレージにRAIDを使用</p>
</li>
<li>
<p>
VMデータに分散冗長ストレージを使用</p>
</li>
</ul></div>
</li>
<li>
<p>
ダウンタイムの削減</p>
<div class="ulist"><ul>
<li>
<p>
迅速にアクセス可能な管理者（24時間365日）</p>
</li>
<li>
<p>
スペアパーツの入手可能性 (Proxmox VEクラスタの他のノード)</p>
</li>
<li>
<p>
自動エラー検出(<span class="monospaced">ha-managerによって</span>提供されます)</p>
</li>
<li>
<p>
自動フェイルオーバー(<span class="monospaced">ha-managerにより</span>提供)</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEのような仮想化環境では、「ハードウェア」への依存がなくなるため、高可用性の実現が非常に容易になります。また、冗長ストレージやネットワークデバイスのセットアップと使用もサポートされているため、1台のホストに障害が発生した場合でも、クラスタ内の別のホストでそれらのサービスを開始するだけで済みます。</p></div>
<div class="paragraph">
<p>さらに良いことに、Proxmox VEは<span class="monospaced">ha-managerと</span>呼ばれるソフトウェアスタックを提供しています。自動的にエラーを検出し、自動フェイルオーバーを行うことができます。</p></div>
<div class="paragraph">
<p>Proxmox VE<span class="monospaced">ha-managerは</span>"自動化された "管理者のように動作します。まず、管理すべきリソース（VM、コンテナなど）を設定します。次に、<span class="monospaced">ha-</span> <span class="monospaced">managerは</span>正しい機能を監視し、エラーが発生した場合に別のノードへのサービスフェイルオーバーを処理します。</p></div>
<div class="paragraph">
<p>しかし、高い可用性には代償が伴います。高品質の部品は高価であり、冗長化することでコストは少なくとも2倍になります。スペアパーツを追加すれば、コストはさらに増加します。そのため、利点を慎重に計算し、追加コストと比較する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">可用性を99%から99.9%に高めるのは比較的簡単です。しかし、99.9999%から99.99999%に可用性を高めるのは非常に難しく、コストがかかります。<span class="monospaced">ha-managerの</span>典型的なエラー検出とフェイルオーバーの時間は約2分なので、99.999%以上の可用性を得ることはできません。</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_requirements_3">
<span>15.1.要件</span> <a class="headerlink" href="#_requirements_3" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>HAを始める前に、以下の条件を満たしている必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
少なくとも3つのクラスタノード（信頼できるクォーラムを取得するため）</p>
</li>
<li>
<p>
VMとコンテナ用の共有ストレージ</p>
</li>
<li>
<p>
ハードウェアの冗長性</p>
</li>
<li>
<p>
信頼性の高い「サーバー」コンポーネントを使用</p>
</li>
<li>
<p>
ハードウェア・ウォッチドッグ - 利用できない場合は、Linuxカーネル・ソフトウェア・ウォッチドッグ<span class="monospaced">（ソフトドッグ</span>）にフォールバックします。</p>
</li>
<li>
<p>
オプションのハードウェア・フェンス装置</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="ha_manager_resources">
<span>15.2.リソース</span> <a class="headerlink" href="#ha_manager_resources" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">ha-managerが</span>扱う主要な管理単位をリソースと呼びます。リソース(「サービス」とも呼ばれます)はサービスID(SID)によって一意に識別されます。SIDはリソースのタイプとタイプ固有のIDで構成され、例えば<span class="monospaced">vm:100の</span>ようになります。例えば、<span class="monospaced">vm</span>:100のようなIDを持つ<span class="monospaced">vm</span>(仮想マシン)タイプのリソースです。</p></div>
<div class="paragraph">
<p>仮想マシンとコンテナです。ここでの基本的な考え方の1つは、関連するソフトウェアをこのような仮想マシンやコンテナにバンドルすることができるということで、<span class="monospaced">rgmanagerの</span>ように他のサービスから1つの大きなサービスを構成する必要はありません。一般的に、HAが管理するリソースは他のリソースに依存すべきではありません。</p></div>
</div>
<div class="sect2">
<h3 id="_management_tasks">
<span>15.3.管理タスク</span> <a class="headerlink" href="#_management_tasks" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このセクションでは、一般的な管理タスクの簡単な概要を説明します。最初のステップは、リソースのHAを有効にすることです。これは、リソースをHAリソース設定に追加することで行います。これはGUIを使用して行うこともできますし、単にコマンドラインツールなどを使用することもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager add vm:100</pre>
</div></div>
<div class="paragraph">
<p>HAスタックはリソースを起動し、実行し続けようとします。要求された」リソースの状態を設定できることに注意してください。例えば、HAスタックにリソースを停止させたい場合があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager set vm:100 --state stopped</pre>
</div></div>
<div class="paragraph">
<p>また後でやり直します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager set vm:100 --state started</pre>
</div></div>
<div class="paragraph">
<p>通常のVMやコンテナ管理コマンドも使用できます。コマンドは自動的にHAスタックに転送されるので</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 100</pre>
</div></div>
<div class="paragraph">
<p>は単に要求された状態を<span class="monospaced">started</span> に設定します。<span class="monospaced">qm stop</span> も同様で、要求された状態を<span class="monospaced">stopped</span> に設定します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">HAスタックは完全に非同期で動作し、他のクラスタメンバーと通信する必要があります。そのため、このようなアクションの結果が表示されるまで数秒かかります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>現在のHAリソース設定を表示するには</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager config vm:100 state stopped</pre>
</div></div>
<div class="paragraph">
<p>そして、実際のHAマネージャーとリソースの状態を見ることができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager status quorum OK master node1 (active, Wed Nov 23 11:07:23 2016) lrm elsa (active, Wed Nov 23 11:07:19 2016) service vm:100 (node1, started)</pre>
</div></div>
<div class="paragraph">
<p>他のノードへのリソース移行を開始することもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager migrate vm:100 node2</pre>
</div></div>
<div class="paragraph">
<p>これはオンラインマイグレーションを使用し、VMを実行し続けようとします。オンライン・マイグレーションでは、使用済みのメモリをすべてネットワーク経由で転送する必要があるため、VMを停止してから新しいノードで再起動した方が速い場合があります。これは<span class="monospaced">relocate</span>コマンドで実行できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager relocate vm:100 node2</pre>
</div></div>
<div class="paragraph">
<p>最後に、以下のコマンドを使用して、HA構成からリソースを削除できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager remove vm:100</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これはリソースを開始したり停止したりするものではありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>しかし、HA関連のタスクはすべてGUIで行えるので、コマンドラインを使う必要はまったくありません。</p></div>
</div>
<div class="sect2">
<h3 id="_how_it_works_2">
<span>15.4.仕組み</span> <a class="headerlink" href="#_how_it_works_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このセクションでは、Proxmox VE HAマネージャの内部について詳しく説明します。関係するすべてのデーモンとその連携方法について説明します。HAを提供するために、各ノードで2つのデーモンが実行されます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">プベ・ハ・ルム</span></dt>
<dd>
<p>
ローカル・リソース・マネージャ（LRM）は、ローカル・ノード上で実行されているサービスを制御します。現在のマネージャステータスファイルからサービスの要求状態を読み取り、それぞれのコマンドを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">PVE-HA-CRM</span></dt>
<dd>
<p>
クラスタ全体の意思決定を行うクラスタリソースマネージャ（CRM）。LRMにコマンドを送信し、結果を処理し、何か障害が発生した場合はリソースを他のノードに移動します。CRMはノードのフェンシングも行います。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="title">LRM と CRM のロック</div>ロックは分散コンフィギュレーション・ファイル・システム(pmxcfs)によって提供され、各LRMが一度だけアクティブになって動作することを保証するために使用されます。LRMはロックを保持しているときのみアクションを実行するため、ロックを取得することができれば、障害が発生したノードをフェンスされたノードとしてマークすることができます。これは、現在未知の障害ノードからの干渉を受けることなく、障害となったHAサービスを安全に復旧させることができます。 これはすべて、現在マネージャ・マスター・ロックを保持しているCRMによって監視されます。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="ha_manager_service_states">15.4.1.サービス状態<a class="headerlink" href="#ha_manager_service_states" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CRM はサービス状態の列挙を使用して現在のサービス状態を記録します。この状態はGUIに表示され、<span class="monospaced">ha-manager</span>コマンドラインツールを使用して照会できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager status quorum OK master elsa (active, Mon Nov 21 07:23:29 2016) lrm elsa (active, Mon Nov 21 07:23:22 2016) service ct:100 (elsa, stopped) service ct:102 (elsa, started) service vm:501 (elsa, started)</pre>
</div></div>
<div class="paragraph">
<p>以下は可能な状態のリストです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
停止</dt>
<dd>
<p>
サービスが停止しました（LRM で確認）。LRM は停止したサービスがまだ実行中であることを検出すると、再度停止します。</p>
</dd>
<dt class="hdlist1">
リクエストストップ</dt>
<dd>
<p>
サービスを停止してください。CRM は LRM からの確認を待ちます。</p>
</dd>
<dt class="hdlist1">
へいせん</dt>
<dd>
<p>
停止要求の保留。しかし、CRMは今のところリクエストを受け取っていません。</p>
</dd>
<dt class="hdlist1">
開始</dt>
<dd>
<p>
サービスがアクティブな場合、LRM は、まだ実行中でなければ、早急にサービスを開始する必要があります。 サービスが失敗し、実行中でないことが検出された場合、LRM はサービスを再起動します（「<a href="#ha_manager_start_failure_policy">開始失敗ポリシー</a>」を参照）。</p>
</dd>
<dt class="hdlist1">
スタート</dt>
<dd>
<p>
開始要求を保留中です。しかし、CRMはLRMからサービスが実行されていることを確認していません。</p>
</dd>
<dt class="hdlist1">
フェンス</dt>
<dd>
<p>
サービス・ノードがクォーレート・クラスター・パーティション内にないため、ノードのフェンシングを待ちます（<a href="#ha_manager_fencing">フェンシングを</a>参照）。 ノードのフェンシングが成功すると、サービスはリカバリ状態になります。</p>
</dd>
<dt class="hdlist1">
回復</dt>
<dd>
<p>
サービスの復旧を待ちます。HAマネージャは、サービスが実行可能な新しいノードを見つけようとします。この検索は、オンラインノードとクォーレートノードのリストだけでなく、サービスがグループメンバーかどうか、そのようなグループがどのように制限されているかにも依存します。 新しい利用可能なノードが見つかり次第、サービスはそこに移動され、最初は停止状態になります。実行するように設定されている場合は、新しいノードが実行します。</p>
</dd>
<dt class="hdlist1">
凍る</dt>
<dd>
<p>
サービス状態には触れないでください。この状態はノードのリブート時やLRMデーモンの再起動時に使用します(<a href="#ha_manager_package_updates">パッケージの更新を</a>参照)。</p>
</dd>
<dt class="hdlist1">
無視</dt>
<dd>
<p>
一時的にサービスを完全に管理したい場合に便利です．</p>
</dd>
<dt class="hdlist1">
マイグレート</dt>
<dd>
<p>
他のノードにサービス（ライブ）を移行します。</p>
</dd>
<dt class="hdlist1">
エラー</dt>
<dd>
<p>
LRM エラーが原因でサービスが無効になっています。手動操作が必要です（<a href="#ha_manager_error_recovery">エラー回復を</a>参照）。</p>
</dd>
<dt class="hdlist1">
キューに入れられた</dt>
<dd>
<p>
サービスは新しく追加されたもので、CRMは今のところ見ていません。</p>
</dd>
<dt class="hdlist1">
使用禁止</dt>
<dd>
<p>
サービスが停止し、<span class="monospaced">無効と</span>マークされました。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="ha_manager_lrm">15.4.2.ローカル・リソース・マネージャー<a class="headerlink" href="#ha_manager_lrm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ローカルリソースマネージャ<span class="monospaced">（pve-ha-lrm</span>）は起動時にデーモンとして起動され、HAクラスタがクォーレートされ、クラスタ全体のロックが機能するまで待機します。</p></div>
<div class="paragraph">
<p>それは3つの状態です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
エージェントロック待ち</dt>
<dd>
<p>
LRMは排他的ロックを待ちます。これは、サービスが設定されていない場合、アイドル状態としても使用されます。</p>
</dd>
<dt class="hdlist1">
アクティブ</dt>
<dd>
<p>
LRMは排他的ロックを保持し、サービスが設定されています。</p>
</dd>
<dt class="hdlist1">
エージェントロックの紛失</dt>
<dd>
<p>
LRMがロックを失いました。これは障害が発生し、クォーラムが失われたことを意味します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>LRMはアクティブな状態になると、<span class="monospaced">/etc/pve/ha/manager_statusに</span>あるマネージャ・ステータス・ファイルを読み込んで、所有するサービスに対して実行するコマンドを決定します。 各コマンドに対してワーカーが起動され、これらのワーカーは並列に実行され、デフォルトでは最大4つまでに制限されています。このデフォルト設定は、データセンター設定キー<span class="monospaced">max_worker</span> で変更することができます。 ワーカープロセスは終了すると収集され、その結果は CRM のために保存されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">最大同時作業者数調整のヒント</div>デフォルトの最大同時ワーカー数 4 は、特定の設定には適さない場合があります。例えば、4つのライブマイグレーションが同時に発生すると、低速なネットワークや大きな（メモリの）サービスではネットワークが混雑する可能性があります。また、最悪の場合、<span class="monospaced">max_workerの</span>値を下げてでも、輻輳が最小になるようにしてください。逆に、特にパワフルでハイエンドなセットアップを使用している場合は、max_workerの値を大きくすることもできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>CRM が要求する各コマンドは UID で一意に識別できます。ワーカーが終了すると、その結果は処理され、LRM ステータスファイル<span class="monospaced">/etc/pve/nodes/&lt;nodename&gt;/lrm_status</span> に書き込まれます。そこで CRM はそれを収集し、コマンドの出力に応じたステートマシンを動作させることができます。</p></div>
<div class="paragraph">
<p>通常、CRM と LRM 間の各サービスのアクションは常に同期しています。 これは、CRM が UID で一意にマークされた状態を要求し、LRM がそのアクションを<strong>1 回</strong>実行し、同じ UID で識別可能な結果を書き戻すことを意味します。この動作は、LRM が古いコマンドを実行しないようにするために必要です。 この動作の唯一の例外は、<span class="monospaced">停止</span>コマンドと<span class="monospaced">エラー</span>コマンドです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="title">ログを読む</div>HA Stackはすべての動作をログに記録します。これはクラスタ内で何が、そしてなぜ何かが起こるのかを理解するのに役立ちます。ここでは、LRMとCRMの両方のデーモンが何を行ったかを確認することが重要です。サービスが存在するノード上では<span class="monospaced">journalctl -u pve-ha-lrm を</span>、現在のマスタであるノード上では pve-ha-crm に対して同じコマンドを使用することができます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="ha_manager_crm">15.4.3.クラスタリソースマネージャ<a class="headerlink" href="#ha_manager_crm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタリソースマネージャ<span class="monospaced">(pve-ha-crm</span>)は各ノード上で起動し、一度に1つのノードのみが保持できるマネージャロックを待ちます。  マネージャーロックの取得に成功したノードはCRMマスターに昇格します。</p></div>
<div class="paragraph">
<p>それは3つの状態です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
エージェントロック待ち</dt>
<dd>
<p>
CRMは排他的ロックを待ちます。サービスが設定されていない場合、これはアイドル状態としても使用されます。</p>
</dd>
<dt class="hdlist1">
アクティブ</dt>
<dd>
<p>
CRMは排他的なロックを保持し、サービスが設定されています。</p>
</dd>
<dt class="hdlist1">
エージェントロックの紛失</dt>
<dd>
<p>
CRMのロックが失われました。これは障害が発生し、クォーラムが失われたことを意味します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>その主なタスクは、高可用性に設定されたサービスを管理し、常に要求された状態を強制しようとすることです。例えば、要求された状態のサービスが<em>開始されている</em>場合、そのサービスがまだ実行されていなければ開始されます。このように、CRM は LRM が実行する必要のあるアクションを指示します。</p></div>
<div class="paragraph">
<p>ノードがクラスタ・クォーラムから離脱すると、そのノードの状態は不明（unknown）に変更されます。 その後、現在のCRMが故障したノードのロックを確保できれば、サービスは<em>盗まれて</em>別のノードで再起動されます。</p></div>
<div class="paragraph">
<p>クラスタ・メンバがクラスタ・クォーラムから外れたと判断すると、LRMは新しいクォーラムが形成されるのを待ちます。クォーラムがない限り、ノードはウォッチドッグをリセットできません。これにより、ウォッチドッグがタイムアウトした後（これは60秒後に発生します）、再起動がトリガされます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_ha_simulator">
<span>15.5.HAシミュレータ</span> <a class="headerlink" href="#_ha_simulator" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-status.png">
<img src="images/screenshot/gui-ha-manager-status.png" alt="screenshot/gui-ha-manager-status.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>HAシミュレータを使用すると、Proxmox VE HAソリューションのすべての機能をテストし、学習することができます。</p></div>
<div class="paragraph">
<p>デフォルトでは、シミュレータは6つのVMを持つ実際の3ノードクラスタの動作を監視し、テストすることができます。また、VMやコンテナを追加したり削除したりすることもできます。</p></div>
<div class="paragraph">
<p>実際のクラスタをセットアップしたり設定したりする必要はありません。</p></div>
<div class="paragraph">
<p>aptでインストールします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install pve-ha-simulator</pre>
</div></div>
<div class="paragraph">
<p>他のProxmox VEパッケージがないDebianベースのシステムにもインストールできます。  その場合、パッケージをダウンロードし、インストールするシステムにコピーする必要があります。  ローカルファイルシステムから apt を使ってパッケージをインストールすると、必要な依存関係も解決されます。</p></div>
<div class="paragraph">
<p>リモートマシンでシミュレータを起動するには、現在のシステムへの X11 リダイレクトが必要です。</p></div>
<div class="paragraph">
<p>Linuxマシンであれば、これを使うことができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ssh root@&lt;IPofPVE&gt;-Y。</pre>
</div></div>
<div class="paragraph">
<p>Windowsでは<a href="https://mobaxterm.mobatek.net/">mobaxtermで</a>動作します。</p></div>
<div class="paragraph">
<p>シミュレータがインストールされた既存の Proxmox VE に接続するか、ローカルの Debian ベースのシステムに手動でインストールした後、以下のようにして試すことができます。</p></div>
<div class="paragraph">
<p>まず、シミュレータが現在の状態を保存し、デフォルトの設定を書き込む作業ディレクトリを作成する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mkdir 作業中</pre>
</div></div>
<div class="paragraph">
<p>そして、作成したディレクトリを<em>pve-ha-simulatorに</em>パラメータとして渡すだけです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve-ha-シミュレータ作業/</pre>
</div></div>
<div class="paragraph">
<p>その後、シミュレーションしたHAサービスを開始、停止、移行したり、ノード障害時に何が起こるかをチェックすることもできます。</p></div>
</div>
<div class="sect2">
<h3 id="_configuration_16">
<span>15.6.コンフィギュレーション</span> <a class="headerlink" href="#_configuration_16" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>HAスタックはProxmox VE APIにうまく統合されています。例えば、<span class="monospaced">ha-manager</span>コマンドラインインタフェースや Proxmox VE ウェブインタフェースで HA を設定することができます。自動化ツールはAPIを直接使用できます。</p></div>
<div class="paragraph">
<p>すべてのHA設定ファイルは<span class="monospaced">/etc/pve/ha/</span>内にあるため、クラスタノードに自動的に配布され、すべてのノードが同じHA設定を共有します。</p></div>
<div class="sect3">
<h4 id="ha_manager_resource_config">15.6.1.リソース<a class="headerlink" href="#ha_manager_resource_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-status.png">
<img src="images/screenshot/gui-ha-manager-status.png" alt="screenshot/gui-ha-manager-status.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>リソース設定ファイル<span class="monospaced">/etc/pve/ha/resources.cfgは</span>、<span class="monospaced">ha-managerが</span>管理するリソースのリストを保存します。そのリスト内のリソース設定は以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&lt;type&gt;: &lt;name&gt; &lt;property&gt; &lt;value&gt; ...</pre>
</div></div>
<div class="paragraph">
<p>リソースIDは、リソースの種類から始まり、コロンで区切られたリソース固有の名前が続きます。これはすべての<span class="monospaced">ha-manager</span>コマンドでリソースを一意に識別するために使用されます(例:<span class="monospaced">vm:100</span>または<span class="monospaced">ct:101</span>)。次の行は追加のプロパティです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">コメント</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">group</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">max_relocate</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
サービスの起動に失敗した場合のサービス再配置の最大試行回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">max_restart</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
起動に失敗したノードでサービスを再起動する最大回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">state</span>:<span class="monospaced">&lt;無効 | 有効 | 無視 | 開始 | 停止&gt;</span><em>(デフォルト =</em> <span class="monospaced">開始</span>)</dt>
<dd>
<p>
要求されたリソースの状態。CRMはこの状態を読み取り、それに従って動作します。<span class="monospaced">enabledは</span>単に<span class="monospaced">startedの</span>別名であることに注意してください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">開始</span></dt>
<dd>
<div class="paragraph">
<p>CRM がリソースの起動を試みます．起動に成功すると，サービス状態は<span class="monospaced">startedに</span>設定されます．ノードに障害が発生した場合，または起動に失敗した場合，リソースの復旧を試みます．  すべて失敗した場合，サービス状態は<span class="monospaced">エラーに</span>設定されます．</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">停止</span></dt>
<dd>
<div class="paragraph">
<p>CRMはリソースを<span class="monospaced">停止</span>状態に維持しようとしますが、ノード障害時にはリソースの再配置を試みます。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">使用禁止</span></dt>
<dd>
<div class="paragraph">
<p>CRMはリソースを<span class="monospaced">停止</span>状態にしようとしますが、ノードの障害時にリソースを再配置しようとはしません。この状態の主な目的はエラーリカバリーで、リソースを<span class="monospaced">エラー</span>状態から移動させる唯一の方法だからです。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">無視</span></dt>
<dd>
<div class="paragraph">
<p>リソースはマネージャーステータスから削除されるため、CRMとLRMはもうリソースに触れることはありません。このリソースに影響する全ての{pve}APIコールが実行されます。このリソースに影響を与えるAPIコールは、HAスタックを直接バイパスして実行されます。ソースがこの状態にある間、CRMコマンドは破棄されます。リソースはノード障害時に再配置されません。</p></div>
</dd>
</dl></div>
</dd>
</dl></div>
<div class="paragraph">
<p>以下は、1つのVMと1つのコンテナを使った実際の例です。ご覧の通り、これらのファイルの構文は実にシンプルなので、お気に入りのエディタを使ってファイルを読んだり編集したりすることも可能です：</p></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/ha/resources.cfg</span>)</div>
<div class="content monospaced">
<pre>vm: 501 state started max_relocate 2 ct: 102 # 注意: 全てデフォルト設定を使用してください。</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-add-resource.png">
<img src="images/screenshot/gui-ha-manager-add-resource.png" alt="screenshot/gui-ha-manager-add-resource.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>上記のコンフィグは<span class="monospaced">ha-manager</span>コマンドラインツールを使って生成されました：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager add vm:501 --state started --max_relocate 2 # ha-manager add ct:102</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="ha_manager_groups">15.6.2.グループ<a class="headerlink" href="#ha_manager_groups" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-groups-view.png">
<img src="images/screenshot/gui-ha-manager-groups-view.png" alt="screenshot/gui-ha-manager-groups-view.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>クラスタノードのグループを定義するには、HAグループ設定ファイル<span class="monospaced">/etc/pve/ha/groups.cfgを</span>使用します。リソースの実行を制限することができます。グループ設定は以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>group: &lt;group&gt; nodes &lt;node_list&gt; &lt;property&gt; &lt;value&gt; ...</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">コメント</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nodes</span>:<span class="monospaced">&lt;node&gt;[:&lt;pri&gt;]{,&lt;node&gt;[:&lt;pri&gt;]}*.</span></dt>
<dd>
<p>
クラスタノードメンバーのリストで、各ノードに優先順位を与えることができます。グループにバインドされたリソースは、最も高い優先度を持つ利用可能なノード上で実行されます。最も優先度の高いクラスのノードが多い場合、サービスはそれらのノードに分散されます。優先順位は相対的な意味しか持ちません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nofailback</span>:<span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CRM は最も優先度の高いノードでサービスを実行しようとします。より優先度の高いノードがオンラインになると、CRM はサービスをそのノードに移行します。nofailback を有効にすると、この動作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">restricted</span>:<span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
制限付きグループにバインドされたリソースは、グループによって定義されたノード上でのみ実行できます。グループ・ノードのメンバがオンラインでない場合、リソースは停止状態になります。非制限グループのリソースは、グループ・メンバがすべてオフラインの場合、どのクラスタ・ノードでも実行できますが、グループ・メンバがオンラインになるとすぐに元に戻ります。メンバが1人だけの制限なしグループを使用して、<em>優先ノードの</em>動作を実装できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-add-group.png">
<img src="images/screenshot/gui-ha-manager-add-group.png" alt="screenshot/gui-ha-manager-add-group.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>一般的な要件として、リソースは特定のノードで実行する必要があります。通常、リソースは他のノードでも実行できるので、単一のメンバーで制限のないグループを定義できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager groupadd prefer_node1 --nodes node1</pre>
</div></div>
<div class="paragraph">
<p>大規模なクラスタでは、より詳細なフェイルオーバー動作を定義することが理にかなっています。例えば、可能であれば<span class="monospaced">node</span>1で一連のサービスを実行したいとします。<span class="monospaced">node1が</span>利用できない場合は、<span class="monospaced">node</span>2と<span class="monospaced">node</span>3で均等にサービスを実行します。これらのノードにも障害が発生した場合は、<span class="monospaced">node4で</span>サービスを実行する必要があります。これを実現するには、ノードリストを次のように設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager groupadd mygroup1 -nodes "node1:2,node2:1,node3:1,node4"</pre>
</div></div>
<div class="paragraph">
<p>もう1つのユースケースは、リソースが特定のノード（例えば<span class="monospaced">node</span>1と<span class="monospaced">node2</span>）でのみ利用可能な他のリソースを使用する場合です。HAマネージャが他のノードを使用しないようにする必要があるため、当該ノードで制限グループを作成する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager groupadd mygroup2 -nodes "node1,node2" -restricted</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドにより、以下のグループ設定ファイルが作成されました：</p></div>
<div class="listingblock">
<div class="title">設定例<span class="monospaced">(/etc/pve/ha/groups.cfg</span>)</div>
<div class="content monospaced">
<pre>group: prefer_node1 nodes node1 group: mygroup1 nodes node2:1,node4,node1:2,node3:1 group: mygroup2 nodes node2,node1 restricted 1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">nofailback</span>オプションは、管理タスク中に不要なリソースの移動を回避するのに便利です。例えば、あるサービスをグループ内で最も高い優先度を持たないノードに移行する必要がある場合、<span class="monospaced">nofailback</span>オプションを設定することで、このサービスを即座に戻さないようにHAマネージャに指示する必要があります。</p></div>
<div class="paragraph">
<p>もう一つのシナリオは、あるサービスがフェンスにかけられ、別のノードにリカバリされた場合です。管理者はフェンスで保護されたノードを修復して再びオンラインにし、障害の原因を調査して再び安定して動作するかどうかを確認しようとします。<span class="monospaced">nofailback</span>フラグを設定することで、復旧したサービスがそのままフェンスで保護されたノードに戻ることを防ぎます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_fencing">
<span>15.7.フェンシング</span> <a class="headerlink" href="#ha_manager_fencing" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ノードの障害時には、フェンシングによって、誤ったノードがオフラインであることが保証されます。これは、リソースが別のノードで復旧したときに2回実行されないようにするために必要です。これがないと、別のノードでリソースを回復できないため、これは本当に重要なタスクです。</p></div>
<div class="paragraph">
<p>もしノードがフェンスされなければ、共有リソースにアクセスできる可能性がある未知の状態になります。これは本当に危険です！ストレージ以外の全てのネットワークが壊れたとします。パブリック・ネットワークからはアクセスできませんが、VMはまだ稼働しており、共有ストレージに書き込んでいます。</p></div>
<div class="paragraph">
<p>このVMを別のノードで起動すると、両方のノードから書き込みを行うため、危険な競合状態が発生します。このような状態になると、VMのデータがすべて破壊され、VM全体が使用不能になる可能性があります。また、ストレージが複数マウントから保護されている場合、リカバリに失敗する可能性もあります。</p></div>
<div class="sect3">
<h4 id="_how_proxmox_ve_fences">15.7.1.Proxmox VEフェンスの仕組み<a class="headerlink" href="#_how_proxmox_ve_fences" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>例えば、ノードからの電力を遮断したり、通信を完全に無効にするフェンス・デバイスなどです。これらは非常に高価なことが多く、システムにさらに重要なコンポーネントを追加することになります。</p></div>
<div class="paragraph">
<p>そのため、外部ハードウェアを追加する必要のない、よりシンプルなフェンシング方法を統合したいと考えました。これにはウォッチドッグ・タイマーを使用します。</p></div>
<div class="ulist"><div class="title">可能なフェンスの方法</div><ul>
<li>
<p>
外部電源スイッチ</p>
</li>
<li>
<p>
スイッチ上のネットワーク・トラフィックを完全に無効にすることで、ノードを隔離します。</p>
</li>
<li>
<p>
ウォッチドッグタイマーを使用したセルフフェンシング</p>
</li>
</ul></div>
<div class="paragraph">
<p>ウォッチドッグ・タイマーは、マイクロコントローラーが登場した当初から、重要で信頼性の高いシステムで広く使用されてきました。ウォッチドッグ・タイマは、多くの場合、コンピュータの誤動作を検出して回復するために使用される、シンプルで独立した集積回路です。</p></div>
<div class="paragraph">
<p>通常動作中、<span class="monospaced">ha-managerは</span>定期的にウォッチドッグ・タイマーをリセットし、タイマーが経過しないようにします。ハードウェア障害またはプログラムエラーにより、コンピューターがウォッチドッグのリセットに失敗した場合、タイマーは経過し、サーバー全体のリセット（再起動）がトリガーされます。</p></div>
<div class="paragraph">
<p>最近のサーバー・マザーボードには、このようなハードウェア・ウォッチドッグが搭載されていることがよくありますが、これらを設定する必要があります。ウォッチドッグが利用できない、または設定されていない場合、Linuxカーネルの<em>ソフトドッグに</em>フォールバックします。それでも信頼性はありますが、サーバーのハードウェアから独立していないため、ハードウェア・ウォッチドッグよりも信頼性は低くなります。</p></div>
</div>
<div class="sect3">
<h4 id="_configure_hardware_watchdog">15.7.2.ハードウェア・ウォッチドッグの設定<a class="headerlink" href="#_configure_hardware_watchdog" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、すべてのハードウェア・ウォッチドッグ・モジュールはセキュリティ上の理由でブロックされています。正しく初期化されないと、装填された銃のようになります。ハードウェア・ウォッチドッグを有効にするには、例えば<em>/etc/default/pve-ha-manager</em> でロードするモジュールを指定する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ウォッチドッグモジュールの選択（デフォルトはソフトドッグ） WATCHDOG_MODULE=iTCO_wdt</pre>
</div></div>
<div class="paragraph">
<p>このコンフィギュレーションは<em>watchdog-mux</em>サービスによって読み取られ、起動時に指定されたモジュールがロードされます。</p></div>
</div>
<div class="sect3">
<h4 id="_recover_fenced_services">15.7.3.フェンスされたサービスの回復<a class="headerlink" href="#_recover_fenced_services" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノードに障害が発生し、そのフェンシングが成功した後、CRMは障害が発生したノードからオンライン状態のノードにサービスを移動しようとします。</p></div>
<div class="paragraph">
<p>サービスが回復されるノードの選択は、リソース<span class="monospaced">グループの</span>設定、現在アクティブなノードのリスト、およびそれぞれのアクティブなサービス数に影響されます。</p></div>
<div class="paragraph">
<p>CRMはまず、（<span class="monospaced">グループ</span>設定から）ユーザーが選択したノードと利用可能なノードの交点からセットを構築します。次に、最も優先順位の高いノードのサブセットを選択し、最後に最もアクティブなサービス数が少ないノードを選択します。これにより、ノードが過負荷になる可能性を最小限に抑えます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ノード障害が発生すると、CRMは残りのノードにサービスを分散します。これにより、これらのノードのサービス数が増加し、特に小規模なクラスタでは高負荷になる可能性があります。このような最悪のケースに対応できるようにクラスタを設計してください。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_start_failure_policy">
<span>15.8.スタート失敗ポリシー</span> <a class="headerlink" href="#ha_manager_start_failure_policy" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>起動失敗ポリシーは、あるノードでサービスが1回以上起動に失敗した場合に有効になります。このポリシーの目的は、特定のノードで共有リソースが一時的に利用できなくなるのを回避することです。例えば、共有ストレージがネットワークの問題などで利用できないが、他のノードではまだ利用できる場合、リロケート・ポリシーによってサービスを開始することができます。</p></div>
<div class="paragraph">
<p>各リソースに固有の設定を行うことができる2つのサービス開始回復ポリシー設定があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
最大再起動</dt>
<dd>
<p>
実際のノードで障害が発生したサービスの再起動を試行する最大回数。  デフォルトは1回です。</p>
</dd>
<dt class="hdlist1">
max_relocate</dt>
<dd>
<p>
サービスを別のノードに再配置する最大試行回数。 実際のノードでmax_restart値を超えた場合にのみ再配置が行われます。デフォルトは1です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">再配置カウントの状態は、サービスの起動が少なくとも1回成功した場合にのみゼロにリセットされます。つまり、エラーが修正されずにサービスが再スタートした場合、再スタートポリシーだけが繰り返されます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_error_recovery">
<span>15.9.エラーリカバリー</span> <a class="headerlink" href="#ha_manager_error_recovery" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>すべての試行の後、サービスの状態を回復できなかった場合、エラー状態になります。この状態では、サービスはもうHAスタックに接続されません。唯一の方法は、サービスを無効にすることです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager set vm:100 --state disabled</pre>
</div></div>
<div class="paragraph">
<p>これはウェブ・インターフェイスでも可能です。</p></div>
<div class="paragraph">
<p>エラー状態から回復するには、次のようにしてください：</p></div>
<div class="ulist"><ul>
<li>
<p>
リソースを安全で一貫性のある状態に戻す（例：サービスを停止できなかった場合、そのプロセスを終了させる</p>
</li>
<li>
<p>
リソースを無効にしてエラーフラグを外します。</p>
</li>
<li>
<p>
不具合の原因となったエラーを修正</p>
</li>
<li>
<p>
すべてのエラーを修正した<strong>後</strong>、サービスの再開をリクエストすることができます。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="ha_manager_package_updates">
<span>15.10.パッケージの更新</span> <a class="headerlink" href="#ha_manager_package_updates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ha-managerをアップデートする際は、様々な理由から一度に行わず、1ノードずつ行ってください。第一に、私たちはソフトウェアを徹底的にテストしていますが、あなたの特定のセットアップに影響するバグを完全に排除することはできません。 ノードを1つずつ更新し、更新終了後に各ノードの機能をチェックすることは、最終的な問題から回復するのに役立ちます。</p></div>
<div class="paragraph">
<p>また、Proxmox VE HAスタックは、クラスタとローカルリソースマネージャの間でアクションを実行するためにリクエストアクノリッジプロトコルを使用します。再起動のために、LRMはCRMにすべてのサービスをフリーズする要求を行います。これにより、LRMが再起動する短時間の間、クラスタがこれらのサービスに触れることを防ぎます。 その後、LRMは再起動中にウォッチドッグを安全に閉じることができます。 このような再起動は通常パッケージの更新中に発生し、すでに述べたように、LRMからの要求を確認するためにアクティブなマスターCRMが必要です。そうでない場合、更新処理に時間がかかりすぎ、最悪の場合、ウォッチドッグがリセッ トされる可能性があります。</p></div>
</div>
<div class="sect2">
<h3 id="ha_manager_node_maintenance">
<span>15.11.ノードのメンテナンス</span> <a class="headerlink" href="#ha_manager_node_maintenance" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ハードウェアの交換や新しいカーネルイメージのインストールなど、ノードのメンテナンスが必要になることがあります。これはHAスタックが使用されている間にも当てはまります。</p></div>
<div class="paragraph">
<p>HAスタックは主に2種類のメンテナンスをサポートします：</p></div>
<div class="ulist"><ul>
<li>
<p>
一般的なシャットダウンまたはリブートについては、<a href="#ha_manager_shutdown_policy">シャットダウンポリシーを</a>参照してください。</p>
</li>
<li>
<p>
シャットダウンや再起動を必要としないメンテナンス、または1回の再起動だけで自動的にオフにならないメンテナンスの場合、手動メンテナンスモードを有効にすることができます。</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_maintenance_mode">15.11.1.メンテナンス・モード<a class="headerlink" href="#_maintenance_mode" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>手動メンテナンスモードを使用すると、ノードをHA動作不可としてマークし、HAによって管理されるすべてのサービスが他のノードに移行するように促すことができます。</p></div>
<div class="paragraph">
<p>これらの移行のターゲットノードは、現在利用可能な他のノードから選択され、HAグループ構成と設定されたクラスタリソーススケジューラ（CRS）モードによって決定されます。 各移行の間、元のノードはHAマネージャの状態に記録されるため、メンテナンスモードが無効になってノードがオンラインに戻ると、サービスは再び自動的に移行されます。</p></div>
<div class="paragraph">
<p>現在、ha-manager CLIツールを使用してメンテナンスモードを有効または無効にすることができます。</p></div>
<div class="listingblock">
<div class="title">ノードのメンテナンスモードの有効化</div>
<div class="content monospaced">
<pre># ha-manager crm-command node-maintenance enable NODENAME</pre>
</div></div>
<div class="paragraph">
<p>これはCRMコマンドをキューに入れ、マネージャがこのコマンドを処理すると、マネージャのステータスにメンテナンスモードのリクエストが記録されます。これにより、メンテナンスモードにしたいノードだけでなく、どのノードでもコマンドを送信することができます。</p></div>
<div class="paragraph">
<p>各ノードの LRM がコマンドを拾うと、それ自身を利用不可としてマークしますが、すべてのマイグレーションコマンドを処理します。つまり、LRM のセルフフェンシング・ウォッチドッグは、すべてのアクティブなサービスが移動し、すべての実行中のワーカーが終了するまでアクティブなままです。</p></div>
<div class="paragraph">
<p>LRMのステータスが<span class="monospaced">メンテナンス</span>モードと表示されるのは、LRMが要求されたステータスを選択した時点であり、全てのサービスが移動した時点ではないことに注意してください。 今のところ、ノード上にアクティブなHAサービスが残っていないか確認するか、次のようなログ行を監視することができます:<span class="monospaced">pve-ha-lrm[PID]: watchdog closed (disabled)</span>ノードがいつメンテナンスモードへの移行を完了したかを知るには、次のようなログ行を監視してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">手動メンテナンスモードはノードのリブート時には自動的に削除されませんが、<span class="monospaced">ha-manager</span>CLIを使用して手動で解除するか、manager-statusを手動でクリアした場合にのみ削除されます。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ノードのメンテナンスモードの無効化</div>
<div class="content monospaced">
<pre># ha-manager crm-command node-maintenance disable NODENAME</pre>
</div></div>
<div class="paragraph">
<p>上記の<span class="monospaced">ha-manager</span>CLI コマンドを使用すると、CRM コマンドがキューに入れられ、それが処理されると、それぞれの LRM ノードが再び使用可能になります。</p></div>
<div class="paragraph">
<p>メンテナンスモードを解除すると、メンテナンスモードを有効にしたときにノード上にあったサービスはすべて元に戻ります。</p></div>
</div>
<div class="sect3">
<h4 id="ha_manager_shutdown_policy">15.11.2.シャットダウン・ポリシー<a class="headerlink" href="#ha_manager_shutdown_policy" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>以下に、ノードのシャットダウンに関するさまざまなHAポリシーの説明を示します。現在のところ、後方互換性のために<em>条件付きが</em>デフォルトになっています。 ユーザによっては、<em>Migrateの</em>方がより期待通りの動作をすると感じるかもしれません。</p></div>
<div class="paragraph">
<p>シャットダウン・ポリシーは、Web<span class="monospaced">UI（Datacenter</span>→<span class="monospaced">Options</span>→<span class="monospaced">HA Settings</span>）で設定するか、<span class="monospaced">datacenter.cfgで</span>直接設定することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ha: shutdown_policy=&lt;値&gt;です。</pre>
</div></div>
<div class="sect4">
<h5 id="_migrate">移行<a class="headerlink" href="#_migrate" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ローカルリソースマネージャ(LRM)がシャットダウン要求を受け取り、このポリシーが有効になると、現在のHAマネージャが利用できないようにマークします。 これにより、現在このノードに配置されているすべてのHAサービスがマイグレーションされます。 LRMは、実行中のサービスがすべて移動されるまで、シャットダウン処理を遅らせようとします。しかし、これは実行中のサービスが別のノードに移行<strong>できる</strong>ことを想定しています。つまり、ハードウェア・パススルーを使用するなどして、サービスがローカルにバインドされていない必要があります。グループメンバーでないノードは、グループメンバーが利用できない場合、実行可能なターゲットとみなされるため、一部のノードだけが選択されているHAグループを利用する場合でも、このポリシーを使用することができます。しかし，グループを<em>制限ノードとして</em>マークすることで，HAマネージャは選択されたノードセット以外ではサービスを実行できないことを伝えます．これらのノードがすべて利用できない場合、手動で介入するまでシャットダウンは停止します。シャットダウンされたノードが再びオンラインに戻ると、その間にまだ手動で移行されていなければ、以前に置き換えられたサービスは元に戻ります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ウォッチドッグは、シャットダウン時の移行プロセス中もアクティブです。 ノードがクォーラムを失った場合、フェンスされ、サービスは回復します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>現在メンテナンス中のノードで（以前に停止した）サービスを開始する場合、サービスを移動して別の利用可能なノードで開始できるように、そのノードをフェンスで囲む必要があります。</p></div>
</div>
<div class="sect4">
<h5 id="_failover">フェイルオーバー<a class="headerlink" href="#_failover" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このモードでは、現在のノードがすぐにオンラインにならない場合、すべてのサービスが停止されますが、リカバリも行われます。一度に多くのノードがパワーオフされるとVMのライブマイグレーションが不可能になる可能性がありますが、それでもHAサービスを確実にリカバリしてできるだけ早く再スタートさせたい場合など、クラスタ規模でメンテナンスを行う場合に便利です。</p></div>
</div>
<div class="sect4">
<h5 id="_freeze">フリーズ<a class="headerlink" href="#_freeze" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このモードでは、すべてのサービスが停止してフリーズし、現在のノードが再びオンラインになるまで復旧しないようにします。</p></div>
</div>
<div class="sect4">
<h5 id="_conditional">条件付き<a class="headerlink" href="#_conditional" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><em>条件付き</em>シャットダウンポリシーは、シャットダウンまたは再起動が要求されたかどうかを自動的に検出し、それに応じて動作を変更します。</p></div>
<div class="paragraph">
<div class="title">シャットダウン</div><p>シャットダウン<em>（電源オフ</em>）は通常、ノードがしばらくの間停止する予定がある場合に実行されます。この場合、LRMはすべての管理サービスを停止します。これは、その後、他のノードがこれらのサービスを引き継ぐことを意味します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最近のハードウェアは大量のメモリ（RAM）を搭載しています。そのため、すべてのリソースを停止してから再起動し、すべてのRAMのオンラインマイグレーションを回避します。オンライン・マイグレーションを使用したい場合は、ノードをシャットダウンする前に手動でそれを起動する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">再起動</div><p>ノードの再起動は<em>reboot</em>コマンドで行います。これは通常、新しいカーネルをインストールした後に行われます。これは「シャットダウン」とは異なることに注意してください。</p></div>
<div class="paragraph">
<p>LRM は CRM に再起動を指示し、CRM がすべてのリソースを<span class="monospaced">フリーズ</span>状態にするまで待ちます（<a href="#ha_manager_package_updates">Package Updates</a> と同じメカニズム）。これにより、これらのリソースが他のノードに移動することを防ぎます。代わりに、CRM は同じノード上で再起動後にリソースを起動します。</p></div>
</div>
<div class="sect4">
<h5 id="_manual_resource_movement">手動リソース移動<a class="headerlink" href="#_manual_resource_movement" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最後になりますが、ノードをシャットダウンまたは再起動する前に、手動でリソースを他のノードに移動することもできます。オンラインマイグレーションを使うかどうかは自分で決めることができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">pve-ha-crm</span>、<span class="monospaced">pve-ha-lrm</span>、<span class="monospaced">watchdog-muxの</span>ようなサービスを<em>停止</em>しないでください。これらはウォッチドッグを管理・使用しているため、ノードのリブートやリセットを引き起こす可能性があります。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_crs">
<span>15.12.クラスタリソーススケジューリング</span> <a class="headerlink" href="#ha_manager_crs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタリソーススケジューラ（CRS）モードは、シャットダウンポリシーによってトリガされる移行と同様に、サービスの復旧のためにHAがノードを選択する方法を制御します。デフォルトのモードは<span class="monospaced">basic</span>ですが、Web UI<span class="monospaced">(Datacenter</span>→<span class="monospaced">Options</span>)、または<span class="monospaced">datacenter.cfgで</span>直接変更できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>crs: ha=静的</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-options-crs.png">
<img src="images/screenshot/gui-datacenter-options-crs.png" alt="screenshot/gui-datacenter-options-crs.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>変更は次の監督ラウンドから有効になります（数秒後）。</p></div>
<div class="paragraph">
<p>復旧や移行が必要な各サービスに対して、スケジューラはそのサービスのグループ内で最も優先順位の高いノードの中から最適なノードを繰り返し選択します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">将来的には、（静的および動的な）負荷分散のモードを追加する予定です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_basic_scheduler">15.12.1.基本的なスケジューラー<a class="headerlink" href="#_basic_scheduler" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各ノードのアクティブなHAサービスの数は、リカバリノードを選択するために使用されます。 現在、非HA管理サービスはカウントされません。</p></div>
</div>
<div class="sect3">
<h4 id="_static_load_scheduler">15.12.2.静的負荷スケジューラ<a class="headerlink" href="#_static_load_scheduler" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">静的モードはまだ技術プレビューです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>各ノードのHAサービスからの静的な利用情報は、回復ノードを選択するために使用されます。HAで管理されていないサービスの利用は現在のところ考慮されていません。</p></div>
<div class="paragraph">
<p>この選択のために、各ノードは、関連するゲスト構成からのCPUとメモリ使用量を使用して、そのノード上でサービスがすでに実行されているかのように順番に検討されます。次に、このような各選択肢について、すべてのノードの CPU とメモリの使用量が考慮されます。CPUとメモリの両方について、ノード間で最も高い使用量（理想的にはどのノードもオーバーコミットされるべきではないため、より重み付けされます）と、すべてのノードの平均使用量（よりコミット率の高いノードがすでにある場合に区別できるようにするため）が考慮されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">サービスの数が多ければ多いほど、可能な組み合わせも増えるため、数千ものHAマネージドサービスをお持ちの場合は、現在のところ使用することはお勧めできません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_crs_scheduling_points">15.12.3.CRSスケジューリングポイント<a class="headerlink" href="#_crs_scheduling_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CRSアルゴリズムはラウンドごとにすべてのサービスに適用されるわけではありません。そのため、Proxmox VE HAマネージャはサービスを現在のノードに維持することを推奨しています。</p></div>
<div class="paragraph">
<p>CRSは現在、次のようなスケジューリングポイントで使用されています：</p></div>
<div class="ulist"><ul>
<li>
<p>
サービス復旧（常時アクティブ）。アクティブなHAサービスを持つノードが故障した場合、そのノードの全てのサービスを他のノードに復旧させる必要があります。CRSアルゴリズムは、残りのノードにバランスよく復旧させるために使用されます。</p>
</li>
<li>
<p>
HAグループ設定の変更（常にアクティブ）あるノードがグループから削除されたり、そのノードの優先度が下がったりすると、HAスタックはCRSアルゴリズムを使って、適応された優先度制約に合う、そのグループ内のHAサービスの新しいターゲットノードを見つけます。</p>
</li>
<li>
<p>
HAサービス停止→開始移行（オプトイン）。停止しているサービスを開始するように要求することは、CRSアルゴリズムに従って最適なノードをチェックする良い機会です。これは、データセンター設定で<strong><span class="monospaced">ha-rebalance-on-start</span></strong>CRS オプションを設定することで有効にできます。このオプションはWeb UIの<span class="monospaced">Datacenter</span>→<span class="monospaced">Options</span>→<span class="monospaced">Cluster Resource Schedulingでも</span>変更できます。</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_vzdump">
16.バックアップとリストア<a class="headerlink" href="#chapter_vzdump" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEは、各ストレージおよび各ゲストシステムタイプの機能を使用し、完全に統合されたソリューションを提供します。これにより、システム管理者はバックアップの一貫性とゲストシステムのダウンタイムを<span class="monospaced">モード</span>オプションで微調整することができます。</p></div>
<div class="paragraph">
<p>Proxmox VEのバックアップは、常にVM/CT設定とすべてのデータを含むフルバックアップです。  バックアップはGUIまたは<span class="monospaced">vzdump</span>コマンドラインツールから開始できます。</p></div>
<div class="paragraph">
<div class="title">バックアップ・ストレージ</div><p>バックアップを実行する前に、バックアップストレージを定義する必要があります。ストレージを追加する方法については、<a href="#chapter_storage">ストレージのドキュメントを</a>参照してください。Proxmox Backup Serverストレージの場合、バックアップは重複排除されたチャンクとメタデータとして保存され、ファイルレベルのストレージの場合、バックアップは通常のファイルとして保存されます。Proxmox Backup Serverは高度な機能を備えているため、専用ホストで使用することをお勧めします。NFSサーバを使用するのも良い方法です。どちらの場合も、バックアップをテープドライブに保存し、オフサイトアーカイブにすることができます。</p></div>
<div class="paragraph">
<div class="title">定期バックアップ</div><p>バックアップジョブは、選択可能なノードとゲストシステムに対して、特定の日時に自動的に実行されるようにスケジュールできます。詳細は<a href="#vzdump_jobs">バックアップジョブセクションを</a>参照してください。</p></div>
<div class="sect2">
<h3 id="_backup_modes">
<span>16.1.バックアップモード</span> <a class="headerlink" href="#_backup_modes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>一貫性（オプション<span class="monospaced">モード</span>）を提供するには、ゲストのタイプによっていくつかの方法があります。</p></div>
<div class="dlist"><div class="title">VMのバックアップモード：</div><dl>
<dt class="hdlist1">
<span class="monospaced">停止</span>モード</dt>
<dd>
<p>
このモードでは、VMの動作が短時間停止する代わりに、バックアップの一貫性が最も高くなります。このモードは、VMの整然としたシャットダウンを実行し、バックグラウンドでQEMUプロセスを実行してVMデータをバックアップします。バックアップの開始後、VMはフル稼働モードに移行します。ライブバックアップ機能を使用することで、一貫性が保証されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サスペンド</span>モード</dt>
<dd>
<p>
このモードは互換性のために提供されており、<span class="monospaced">スナップショット・</span>モードを呼び出す前にVMを一時停止します。VMをサスペンドするとダウンタイムが長くなり、データの一貫性が向上するとは限らないため、<span class="monospaced">スナップショット・</span>モードの使用をお勧めします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット</span>モード</dt>
<dd>
<p>
このモードは、わずかな不整合リスクを伴いますが、操作のダウンタイムを最小限に抑えます。このモードはProxmox VEのライブバックアップを実行することで機能し、VMの実行中にデータブロックがコピーされます。ゲストエージェントが有効<span class="monospaced">(エージェント: 1</span>) で実行中の場合、<span class="monospaced">guest-fsfreeze-freeze</span>と<span class="monospaced">guest-fsfreeze-thaw を呼び出して</span>整合性を向上させます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>QemuServer用Proxmox VEライブバックアップの技術概要は、<a href="https://git.proxmox.com/?p=pve-qemu.git;a=blob_plain;f=backup.txt">こちらを</a>ご覧ください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEライブバックアップは、あらゆるストレージタイプでスナップショットのようなセマンティクスを提供します。基礎となるストレージがスナップショットをサポートしている必要はありません。また、バックアップはバックグラウンドのQEMUプロセスで実行されるため、QEMUがVMディスクを読み込んでいる間、停止したVMは短時間実行されているように見えますが、VM自体は起動せず、ディスクが読み込まれるだけであることに注意してください。</td>
</tr></table>
</div>
<div class="dlist"><div class="title">コンテナのバックアップモード：</div><dl>
<dt class="hdlist1">
<span class="monospaced">停止</span>モード</dt>
<dd>
<p>
バックアップの間、コンテナを停止します。これにより、ダウンタイムが非常に長くなる可能性があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サスペンド</span>モード</dt>
<dd>
<p>
このモードでは、rsync を使用してコンテナのデータを一時的な場所にコピーします（オプション<span class="monospaced">--tmpdir</span> を参照）。その後、コンテナが一時停止され、2 回目の rsync で変更されたファイルがコピーされます。その後、コンテナが再び起動（再開）されます。この結果、ダウンタイムは最小限になりますが、コンテナのコピーを保持するための追加の領域が必要になります。</p>
<div class="paragraph">
<p>コンテナがローカル・ファイル・システム上にあり、バックアップのターゲット・ストレージが NFS/CIFS サーバである場合、<span class="monospaced">-tmpdir</span>もローカル・ファイル・システム上に存在するように設定する必要があります。  バックアップ・ストレージがNFSサーバの場合、サスペンド・モードでACLを使用してローカル・コンテナをバックアップする場合にも、ローカルの<span class="monospaced">tmpdirを</span>使用する必要があります。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット</span>モード</dt>
<dd>
<p>
このモードでは、基礎となるストレージのスナップショット機能を使用します。まず、データの一貫性を確保するためにコンテナが一時停止されます。 コンテナのボリュームの一時スナップショットが作成され、スナップショットの内容がtarファイルにアーカイブされます。最後に、一時スナップショットは再び削除されます。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">スナップショット・</span>モードでは、すべてのバックアップ・ボリュームがスナップショットをサポー トするストレージ上にある必要があります。<span class="monospaced">backup=no</span>マウントポイントオプションを使用すると、個々のボリュームをバックアップ（およびこの要件）から除外できます。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デフォルトでは、ルート ディスク マウント ポイント以外の追加のマウント ポイントはバッ クアップに含まれません。ボリューム マウント ポイントについては、<strong>バックアップ</strong>オプションを設定して、マウント ポイントをバックアップに含めることができます。デバイスマウントとバインドマウントは、コンテンツがProxmox VEストレージ ライブラリの外部で管理されるため、バックアップされることはありません。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_vm_backup_fleecing">16.1.1.VM Backup Fleecing<a class="headerlink" href="#_vm_backup_fleecing" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMのバックアップが開始されると、QEMUはブロック層に「copy-before-write」フィルタをインストールします。このフィルタは、新しいゲストの書き込み時に、バックアップにまだ必要な古いデータが最初にバックアップターゲットに送信されることを保証します。ゲストの書き込みはこの操作が終了するまでブロックされるため、まだバックアップされていないセクタへのゲストの IO はバックアップターゲットの速度によって制限されます。</p></div>
<div class="paragraph">
<p>バックアップフリークでは、そのような古いデータはバックアップターゲットに直接送信されるのではなく、フリークイメージにキャッシュされます。これはゲストのIOパフォーマンスを助け、特定のシナリオではハングを防ぐこともできますが、その代償としてより多くのストレージ容量が必要になります。</p></div>
<div class="paragraph">
<p>ストレージ<span class="monospaced">local-lvm</span>上に作成されたフリーキング・イメージを使用してVM<span class="monospaced">123の</span>バックアップを手動で開始するには、以下を実行します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vzdump 123 --fleecing enabled=1,storage=local-lvm。</pre>
</div></div>
<div class="paragraph">
<p>いつものように、<a href="#vzdump_configuration">設定</a>オプションを使用して、特定のバックアップジョブ、またはノード全体のフォールバックとしてオプションを設定できます。UIでは、fleecingはバックアップジョブの編集時に<em>Advanced</em>タブで設定できます。</p></div>
<div class="paragraph">
<p>フ リークするストレージは、シンプロビジョニングとディスカードサポートを備えた高速なローカル ストレージであるべきです。例えば、LVM-thin、RBD、ストレージ構成に<span class="monospaced">スパース1を</span>持つZFS、多くのファイルベースのストレージです。理想的には、fleecingストレージは専用ストレージで、フルに動作しても他のゲストには影響せず、バックアップに失敗するだけです。バックアップされたfleecingイメージの一部は、スペース使用量を低く抑えるために破棄されます。</p></div>
<div class="paragraph">
<p>破棄をサポートしないファイルベースのストレージ（例えば、バージョン4.2以前のNFS）の場合、ストレージの設定で<span class="monospaced">preallocationをoffに</span>設定する必要があります。<span class="monospaced">qcow2</span>（ストレージがサポートしている場合、fleecingイメージのフォーマットとして自動的に使用されます）と組み合わせることで、イメージの既に割り当てられた部分を後で再利用できるという利点があり、これでもかなりのスペースを節約できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">シンプリープロビジョニングされていないストレージ、例えば<span class="monospaced">スパースオプションの</span>ないLVMやZFSでは、オリジナルディスクのフルサイズを前もってフ リーシングイメージ用に予約しておく必要があります。シンプリープロビジョニングされたストレージでは、バックアップが別のディスクでビジーになっている間にゲストがディスク全体を再書き込みした場合にのみ、フリーキングイメージはオリジナルイメージと同じサイズまで成長できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_ct_change_detection_mode">16.1.2.CT変化検出モード<a class="headerlink" href="#_ct_change_detection_mode" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>変更検出モードを設定すると、pxar アーカイブのエンコード形式が定義され、Proxmox Backup Server をターゲットとしたコンテナバックアップで変更されたファイルや変更されていないファイルがどのように処理されるかが定義されます。</p></div>
<div class="paragraph">
<p>変更検出モードオプションは、ジョブの編集中に<em>Advanced</em>タブで個々のバックアップジョブに対して設定することができます。さらに、このオプションは<a href="#vzdump_configuration">設定オプションを介して</a>ノード全体のフォールバックとして設定することもできます。</p></div>
<div class="paragraph">
<p>3つの変化検出モードがあります：</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:20%;" />
<col style="width:80%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">モード     </th>
<th class="tableblock halign-left valign-top">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">デフォルト</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pxarフォーマットバージョン1を使用して、すべてのファイルを読み込み、単一のアーカイブにエンコードします。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">データ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのファイルを読み込み、エンコードしますが、pxarフォーマットバージョン2を使用して、データとメタデータを別々のストリームに分割します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">メタデータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ストリームを分割し、<span class="monospaced">Dataの</span>ようなアーカイブ・フォーマット・バージョン2を使用しますが、変更されていないファイルを検出するために以前のスナップショットのメタデータ・アーカイブ（存在する場合）を使用し、可能な限りディスクからファイルの内容を読み込まずにデータチャンクを再利用します。</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>変更検出モードの<span class="monospaced">メタデータを</span>使用してバックアップを実行するには、以下を実行します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vzdump 123 --storage pbs-storage --pbs-change-detection-mode metadata</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VMのバックアップやProxmox Backup Server以外のストレージバックエンドへのバックアップは、この設定の影響を受けません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backup_file_names">
<span>16.2.バックアップファイル名</span> <a class="headerlink" href="#_backup_file_names" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>vzdump の新しいバージョンでは、ゲストの種類とバックアップ時間がファイル名にエンコードされます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vzdump-lxc-105-2009_10_09-11_04_43.tar</pre>
</div></div>
<div class="paragraph">
<p>これにより、同じディレクトリに複数のバックアップを保存することができます。さまざまな<a href="#vzdump_retention">保持</a>オプションを使用して、保持するバックアップの数を制限できます。</p></div>
</div>
<div class="sect2">
<h3 id="_backup_file_compression">
<span>16.3.バックアップファイル圧縮</span> <a class="headerlink" href="#_backup_file_compression" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">lzo</span><span class="footnote"><br>[Lempel-Ziv-Oberhumer a lossless data compression algorithm<a href="https://en.wikipedia.org/wiki/Lempel-Ziv-Oberhumer">https://en.wikipedia.org/wiki/Lempel-Ziv-Oberhumer]</a><br></span>,<span class="monospaced">gzip</span> <span class="footnote"><br>[gzip - based on DEFLATE algorithm<a href="https://en.wikipedia.org/wiki/Gzip">https://en.wikipedia.org/wiki/Gzip]</a><br></span>or<span class="monospaced">zstd</span><span class="footnote"><br>[Zstandard a lossless data compression algorithm<a href="https://en.wikipedia.org/wiki/Zstandard">https://en.wikipedia.org/wiki/Zstandard]</a><br></span>.</p></div>
<div class="paragraph">
<p>現在、Zstandard (zstd)はこれら3つのアルゴリズムの中で最速です。 マルチスレッドはlzoとgzipに対するzstdのもう一つの利点です。Lzo と gzip はより広く使われており、しばしばデフォルトでインストールされます。</p></div>
<div class="paragraph">
<p>pigz<span class="footnote"><br>[pigz - parallel implementation of gzip<a href="https://zlib.net/pigz/">https://zlib.net/pigz/]</a><br></span>をインストールすることで、gzip の代替となり、マルチスレッドによるパフォーマンスが向上します。pigz と zstd では、スレッド数/コア数を調整できます。以下の<a href="#vzdump_configuration">設定</a>オプションを参照してください。</p></div>
<div class="paragraph">
<p>バックアップファイル名の拡張子から、どの圧縮アルゴリズムでバックアップが作成されたかを判断できます。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.zst</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zstandard (zstd) 圧縮</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.gz または .tgz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gzip圧縮</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.lzo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">エルゾ圧縮</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>バックアップファイル名が上記のファイル拡張子のいずれかで終わっていない場合、vzdumpによって圧縮されていません。</p></div>
</div>
<div class="sect2">
<h3 id="_backup_encryption">
<span>16.4.バックアップ暗号化</span> <a class="headerlink" href="#_backup_encryption" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox Backup Serverストレージでは、オプションでバックアップのクライアント側暗号化を設定できます<a href="#storage_pbs_encryption">。</a></p></div>
</div>
<div class="sect2">
<h3 id="vzdump_jobs">
<span>16.5.バックアップジョブ</span> <a class="headerlink" href="#vzdump_jobs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-overview.png">
<img src="images/screenshot/gui-cluster-backup-overview.png" alt="screenshot/gui-cluster-backup-overview.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>手動でバックアップをトリガーする以外に、すべての仮想ゲストまたは選択した仮想ゲストをストレージにバックアップする定期的なジョブを設定することもできます。ジョブは UI の<em>Datacenter</em>→<em>Backup</em>で管理するか、<span class="monospaced">/cluster/backup</span>API エンドポイント経由で管理できます。どちらも、<span class="monospaced">/etc/pve/jobs.cfg</span> にジョブエントリを生成し、<span class="monospaced">pvescheduler</span>デーモンによって解析および実行されます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-01-general.png">
<img src="images/screenshot/gui-cluster-backup-edit-01-general.png" alt="screenshot/gui-cluster-backup-edit-01-general.png" width="250" style="padding: 0 10px 0 0;float:left;" /></a>
<p>ジョブは全てのクラスタノードまたは特定のノードに対して設定され、指定されたスケジュールに従って実行されます。スケジュールのフォーマットは<span class="monospaced">systemd の</span><a href="#chapter_calendar_events">カレンダー</a>イベントによく似ています。UI の<em>Schedule</em>フィールドは自由に編集することができ、ドロップダウンリストには開始点として使える例がいくつかあります。</p></div>
<div class="paragraph">
<p>ストレージやノードの設定より優先されるジョブ固有の<a href="#vzdump_retention">保持オプションや</a>、バックアップと一緒に保存される追加情報の<a href="#vzdump_notes">メモのテンプレートを</a>設定できます。</p></div>
<div class="paragraph">
<p>スケジュールされたバックアップは、スケジュールされた時間中にホストがオフラインであったり、pveschedulerが無効であったりすると実行を逃すため、遅れを取り戻すための動作を設定することが可能です。<span class="monospaced">Repeat missed</span>オプション（UIの<em>Advanced</em>タブ、configの<span class="monospaced">repeat-missed</span>）を有効にすると、見逃したジョブをできるだけ早く実行するようスケジューラに指示できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-04-advanced.png">
<img src="images/screenshot/gui-cluster-backup-edit-04-advanced.png" alt="screenshot/gui-cluster-backup-edit-04-advanced.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>バックアップのパフォーマンスを調整するための設定がいくつかあります（そのうちのいくつかはUIの<em>Advanced</em>タブで公開されています）。最も顕著なものは、IO帯域幅を制限するための<span class="monospaced">bwlimit</span>です。さらに、<span class="monospaced">ionice</span>（BFQスケジューラ使用時）、<span class="monospaced">パフォーマンス</span>設定の一部として、<span class="monospaced">max-workers</span>（VMバックアップにのみ影響）、<span class="monospaced">pbs-entries-max</span>（コンテナバックアップにのみ影響）があります。詳細は<a href="#vzdump_configuration">設定オプションを</a>参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="vzdump_retention">
<span>16.6.バックアップの保持</span> <a class="headerlink" href="#vzdump_retention" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">prune-backups</span>オプションを使用すると、柔軟な方法で保持するバックアップを指定できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-02-retention.png">
<img src="images/screenshot/gui-cluster-backup-edit-02-retention.png" alt="screenshot/gui-cluster-backup-edit-02-retention.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>以下の保持オプションがあります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">keep-all &lt;ブール値</span></dt>
<dd>
<p>
すべてのバックアップを保持します。これが<span class="monospaced">trueの</span>場合、他のオプションは設定できません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キープラスト &lt;N</span></dt>
<dd>
<p>
最後の<span class="monospaced">&lt;N&gt;</span>個のバックアップを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">時間毎 &lt;N</span></dt>
<dd>
<p>
過去<span class="monospaced">&lt;N&gt;</span>時間のバックアップを保持します。1時間に複数のバックアップがある場合は、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キープデイリー&lt;N</span></dt>
<dd>
<p>
過去<span class="monospaced">&lt;N&gt;</span>日間のバックアップを保持します。1日に複数のバックアップがある場合は、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キープウィークリー&lt;N</span></dt>
<dd>
<p>
過去<span class="monospaced">&lt;N&gt;</span>週間分のバックアップを保持します。1週間に複数のバックアップがある場合は、最新のものだけが保持されます。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">週は月曜日に始まり、日曜日に終わります。このソフトウェアは<span class="monospaced">ISOの週日付システムを</span>使用し、年末の週を正しく処理します。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">キープマンスリー&lt;N</span></dt>
<dd>
<p>
過去<span class="monospaced">&lt;N&gt;</span>ヶ月分のバックアップを保持します。1つの月に複数のバックアップがある場合は、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">年間 &lt;N</span></dt>
<dd>
<p>
過去<span class="monospaced">&lt;N&gt;</span>年間のバックアップを保持します。1年分のバックアップが複数ある場合は、最新のものだけが保存されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>保持オプションは上記の順序で処理されます。各オプションは、その期間内のバックアップのみを対象とします。次のオプションでは、すでにカバーされているバックアップは処理されません。古いバックアップのみを考慮します。</p></div>
<div class="paragraph">
<p>使用したい保持オプションを、カンマ区切りのリストで指定します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --prune-バックアップ keep-last=3,keep-daily=13,keep-yearly=9。</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">prune-backupsを</span>直接<span class="monospaced">vzdumpに</span>渡すこともできますが、ストレージレベルで設定した方が賢明な場合が多く、ウェブインターフェイスから行うことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">古い<span class="monospaced">maxfiles</span>オプションは非推奨で、<span class="monospaced">keep-lastで</span>置き換えるか、<span class="monospaced">maxfilesが</span> <span class="monospaced">0の</span>場合は<span class="monospaced">keep-allで</span>置き換えるべきです。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_prune_simulator">16.6.1.プルーン・シミュレーター<a class="headerlink" href="#_prune_simulator" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://pbs.proxmox.com/docs/prune-simulator">Proxmox Backup Serverドキュメントの剪定シミュレータを</a>使用して、さまざまなバックアップスケジ ュールでさまざまな保持オプションの効果を調べることができます。</p></div>
</div>
<div class="sect3">
<h4 id="_retention_settings_example">16.6.2.保持設定例<a class="headerlink" href="#_retention_settings_example" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックアップの頻度や古いバックアップの保持は、データの変更頻度や、特定の作業負荷における古い状態の重要性によって異なります。 バックアップが企業の文書アーカイブとして機能する場合、バックアップの保持期間に関する法的要件がある場合もあります。</p></div>
<div class="paragraph">
<p>この例では、バックアップを毎日行い、保存期間を10年とし、保存されるバックアップの間隔は徐々に長くなっていくと仮定します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-last=3</span>- たとえ毎日バックアップを取るとしても、管理者は大きなアップグレードの直前や直後に追加のバックアップを取りたいと思うかもしれません。keep-lastを設定することで、これが確実になります。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-hourly</span>が設定されていません - 毎日のバックアップには関係ありません。keep-lastを使用することで、余分な手動バックアップをカバーできます。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-daily=13</span>- 少なくとも1日をカバーするkeep-lastと合わせて、少なくとも2週間分のバックアップを確保します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-weekly=8</span>- 少なくとも2ヶ月分の週次バックアップを確保します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-monthly=11</span>- 前回のkeep設定と合わせて、少なくとも1年間の月次バックアップを確保します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-yearly=9</span>- これは長期アーカイブ用です。前のオプションで現在の年をカバーしたので、残りの年についてはこれを9に設定し、合計で少なくとも10年間をカバーするようにします。</p></div>
<div class="paragraph">
<p>不必要に高いことが判明した場合は、いつでも期間を短縮できますが、一度削除されたバックアップを再作成することはできません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="vzdump_protection">
<span>16.7.バックアップ保護</span> <a class="headerlink" href="#vzdump_protection" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップを<span class="monospaced">保護</span>マークして削除できないようにすることができます。Proxmox VE の UI、CLI、または API を使用して保護されたバックアップを削除しようとすると、失敗します。ただし、これはProxmox VEによって強制されるものであり、ファイルシステムによって強制されるものではないため、バックアップファイル自体を手動で削除することは、基礎となるバックアップストレージへの書き込みアクセス権を持っている人であれば誰でも可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">保護されたバックアップはプルーニングによって無視され、保持設定にカウントされません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ファイルシステムベースのストレージの場合、保護はセンチネルファイル<span class="monospaced">&lt;backup-name&gt;.protectedを介して</span>実装されます。Proxmox Backup Serverの場合は、サーバ側で処理されます(Proxmox Backup Serverバージョン2.1から使用可能)。</p></div>
<div class="paragraph">
<p>ストレージオプションの<span class="monospaced">max-protected-backupsを</span>使用して、ゲストごとにストレージで許可される保護バックアップの数を制御します。無制限には<span class="monospaced">-1 を</span>使用します。デフォルトは、<span class="monospaced">Datastore.Allocate</span>権限を持つユーザは無制限、その他のユーザは<span class="monospaced">5</span>です。</p></div>
</div>
<div class="sect2">
<h3 id="vzdump_notes">
<span>16.8.バックアップノート</span> <a class="headerlink" href="#vzdump_notes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>UIの<em>Edit Notes</em>ボタンまたはストレージコンテンツAPIを使用して、バックアップにノートを追加できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-03-template.png">
<img src="images/screenshot/gui-cluster-backup-edit-03-template.png" alt="screenshot/gui-cluster-backup-edit-03-template.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>バックアップジョブや手動バックアップのノートを動的に生成するためのテンプレートを指定することもできます。テンプレート文字列には、2つの中括弧で囲まれた変数を含めることができ、バックアップの実行時に対応する値に置き換えられます。</p></div>
<div class="paragraph">
<p>現在サポートされているのは</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">{{cluster}}</span>もしあれば、クラスタ名。</p>
</li>
<li>
<p>
<span class="monospaced">{ゲスト名}}</span>仮想ゲストの割り当て名</p>
</li>
<li>
<p>
{バックアップが作成されるノードのホスト名<span class="monospaced">。</span></p>
</li>
<li>
<p>
<span class="monospaced">{{vmid}}</span>ゲストの数値 VMID です。</p>
</li>
</ul></div>
<div class="paragraph">
<p>APIやCLIで指定する場合は、1行で指定し、改行とバックスラッシュはそれぞれリテラル<span class="monospaced"> ∕∕∕∕として</span>エスケープする必要があります。</p></div>
</div>
<div class="sect2">
<h3 id="vzdump_restore">
<span>16.9.リストア</span> <a class="headerlink" href="#vzdump_restore" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップアーカイブは、Proxmox VEのWeb GUIまたは以下のCLIツールからリストアできます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">pct リストア</span></dt>
<dd>
<p>
コンテナ復元ユーティリティ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">qmrestore</span></dt>
<dd>
<p>
仮想マシン復元ユーティリティ</p>
</dd>
</dl></div>
<div class="paragraph">
<p>詳細は各マニュアルページをご覧ください。</p></div>
<div class="sect3">
<h4 id="_bandwidth_limit">16.9.1.帯域幅制限<a class="headerlink" href="#_bandwidth_limit" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>1つまたは複数の大きなバックアップをリストアする場合、多くのリソース、特にバックアップストレージからの読み取りとターゲットストレージへの書き込みの両方にストレージ帯域幅が必要になることがあります。ストレージへのアクセスが混雑するため、他の仮想ゲストに悪影響を及ぼす可能性があります。</p></div>
<div class="paragraph">
<p>これを回避するには、バックアップジョブに帯域幅制限を設定します。Proxmox VEはリストアとアーカイブの2種類の制限を実装しています：</p></div>
<div class="ulist"><ul>
<li>
<p>
リストアごとの制限: バックアップアーカイブからの読み取りの最大帯域幅を示します。</p>
</li>
<li>
<p>
ストレージごとの書き込み制限：特定のストレージへの書き込みに使用される最大帯域幅を示します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>読み込み制限は書き込み制限に間接的に影響します。ジョブごとの上限が小さいと、ストレージごとの上限が大きくても上書きされます。より大きなジョブごとの制限は、影響を受けるストレージに 'Data.Allocate' パーミッションがある場合にのみ、ストレージごとの制限を上書きします。</p></div>
<div class="paragraph">
<p>リストアCLIコマンドで '--bwlimit &lt;integer&gt;` オプションを使用すると、リストアジョブ固有の帯域幅制限を設定できます。KiB/sが制限の単位として使用されます。つまり、`10240'を渡すと、バックアップの読み取り速度が10MiB/sに制限され、実行中の仮想ゲストが残りのストレージ帯域幅を使用できるようになります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">bwlimit</span>パラメータに '0` を使用すると、特定のリストアジョブのすべての制限を無効にできます。これは非常に重要な仮想ゲストを可能な限り速くリストアする必要がある場合に役立ちます。(ストレージの `Data.Allocate' パーミッションが必要です)</td>
</tr></table>
</div>
<div class="paragraph">
<p>ほとんどの場合、ストレージの一般的に利用可能な帯域幅は時間の経過とともに変化しません。そのため、設定済みのストレージごとにデフォルトの帯域幅制限を設定できるようにしました：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm set STORAGEID --bwlimit restore=KIBs</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_live_restore">16.9.2.ライブリストア<a class="headerlink" href="#_live_restore" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>大きなバックアップのリストアには長い時間がかかり、その間にゲストが利用できなくなることがあります。Proxmox Backup Server上に保存されたVMバックアップの場合、ライブリストアオプションを使用することで、この待ち時間を短縮できます。</p></div>
<div class="paragraph">
<p>GUIのチェックボックスまたは<span class="monospaced">qmrestoreの</span> <span class="monospaced">-live-restore</span>引数のいずれかを使用してライブ・リストアを有効にすると、リストアが開始されると同時にVMが起動します。データはバックグラウンドでコピーされ、VMがアクティブにアクセスしているチャンクが優先されます。</p></div>
<div class="paragraph">
<p>なお、これには2つの注意点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ライブ・リストア中は、データをバックアップ・サーバーからロードする必要があるため、VMは制限されたディスク・リード速度で動作します（ただし、一度ロードされると、宛先ストレージですぐに利用できるため、データに2回アクセスしてもペナルティが発生するのは最初の1回だけです）。書き込み速度はほとんど影響を受けません。</p>
</li>
<li>
<p>
つまり、すべてのデータがバックアップからコピーされていない可能性があり、失敗したリストア操作中に書き込まれたデータを保持できない<em>可能性が高い</em>のです。</p>
</li>
</ul></div>
<div class="paragraph">
<p>この動作モードは、ウェブ・サーバーなど、初期動作に必要なデータ量が少ない大規模なVMに特に有効です。OSと必要なサービスが開始されると、VMは稼働し、バックグラウンド・タスクはあまり使用されないデータのコピーを続けます。</p></div>
</div>
<div class="sect3">
<h4 id="_single_file_restore">16.9.3.単一ファイルの復元<a class="headerlink" href="#_single_file_restore" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ストレージGUIの<em>［バックアップ］</em>タブにある<em>［ファイル復元</em>］ボタンを使用すると、バッ クアップに含まれるデータ上でファイルブラウザを直接開くことができます。この機能は Proxmox Backup Server 上のバックアップでのみ使用できます。</p></div>
<div class="paragraph">
<p>コンテナの場合、ファイルツリーの最初のレイヤには、含まれるすべての<em>pxar</em>アーカイブが表示され、自由に開いたり参照したりできます。VMの場合、最初のレイヤには含まれるドライブイメージが表示され、これを開くと、ドライブでサポートされているストレージ技術のリストが表示されます。最も基本的なケースでは、これはパーティションテーブルを表す<em>partと</em>呼ばれるエントリで、ドライブにある各パーティションのエントリを含んでいます。VMの場合、すべてのデータにアクセスできるわけではないことに注意してください（サポートされていないゲストファイルシステム、ストレージテクノロジーなど）。</p></div>
<div class="paragraph">
<p>ファイルやディレクトリは<em>ダウンロード</em>ボタンを使ってダウンロードすることができ、後者はその場でzipアーカイブに圧縮されます。</p></div>
<div class="paragraph">
<p>信頼できないデータを含む可能性のあるVMイメージへの安全なアクセスを可能にするために、一時的なVM（ゲストとして表示されない）が起動されます。これは、このようなアーカイブからダウンロードされたデータが本質的に安全であることを意味するものではありませんが、ハイパーバイザー・システムが危険にさらされるのを避けることができます。VMはタイムアウト後に停止します。このプロセス全体はユーザーから見て透過的に行われます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">トラブルシューティングのために、各一時的なVMインスタンスは<span class="monospaced">/var/log/proxmox-backup/file-restore/に</span>ログファイルを生成します。このログファイルには、バックアップアーカイブに含まれる個々のファイルのリストアやファイルシステムへのアクセスの試みが失敗した場合の追加情報が含まれている可能性があります。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vzdump_configuration">
<span>16.10.コンフィギュレーション</span> <a class="headerlink" href="#vzdump_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>グローバル設定は<span class="monospaced">/etc/vzdump.confに</span>保存されます。このファイルでは、コロンで区切られた単純なキー/値形式を使用します。各行の書式は次のとおりです：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>オプション：値</pre>
</div></div>
<div class="paragraph">
<p>ファイル内の空白行は無視され、<span class="monospaced">#</span>文字で始まる行はコメントとして扱われ、これも無視されます。このファイルの値はデフォルトとして使用され、コマンドラインで上書きすることができます。</p></div>
<div class="paragraph">
<p>現在、以下のオプションをサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bwlimit</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
I/Oバンド幅の制限（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">compress</span>:<span class="monospaced">&lt;0 | 1 | gzip | lzo | zstd&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ダンプファイルを圧縮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">dumpdir</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
結果のファイルを指定したディレクトリに保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">除外パス</span>:<span class="monospaced">&lt;配列</span></dt>
<dd>
<p>
特定のファイル/ディレクトリ（シェル・グロブ）を除外します。<em>で</em>始まるパスはコンテナのルートに固定され、その他のパスは各サブディレクトリに相対的に一致します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fleecing</span>：<span class="monospaced">[[enabled=]&lt;1|0&gt;] [[enabled=]&lt;1|0&gt;]です。[,ストレージ=&lt;ストレージID&gt;</span>]]。</dt>
<dd>
<p>
バックアップフリートのオプション（VMのみ）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">enabled=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
バックアップフリーを有効にします。新しいゲストの書き込みがバックアップターゲットに直接コピーする代わりに、指定されたストレージで発生するブロックからバックアップデータをキャッシュします。これにより、ゲストの IO パフォーマンスを向上させ、ハングを防止することができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ストレージ=&lt;ストレージ</span><span class="monospaced">ID</span></dt>
<dd>
<p>
このストレージは、ストレージフリーキングイメージに使用します。スペースを効率的に使用するには、廃棄とシンプロビジョニングまたはスパースファイルをサポートするローカルストレージを使用するのが最善です。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ionice</span>:<span class="monospaced">&lt;整数&gt; (0 - 8)</span><em>(デフォルト =</em> <span class="monospaced">7</span>)</dt>
<dd>
<p>
BFQスケジューラ使用時のIO優先度を設定します。VMのスナップショットとサスペンドモードのバックアップでは、これはコンプレッサにのみ影響します。値が8の場合はアイドル優先度が使用され、それ以外の場合は指定した値でベストエフォート優先度が使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">lockwait</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
グローバルロックの最大待機時間（分）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mailnotification</span>:<span class="monospaced">&lt;always | failure&gt;</span><em>(デフォルト =</em> <span class="monospaced">always</span>)</dt>
<dd>
<p>
非推奨: 代わりに通知ターゲット/マッチャーを使用してください。通知メールを送るタイミングを指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mailto</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
非推奨：代わりに通知ターゲット/マッチャーを使用してください。メール通知を受け取るメールアドレスまたはユーザのカンマ区切りリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">maxfiles</span>:<span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
非推奨: 代わりに<em>prune-backups を</em>使用してください。ゲストシステムごとのバックアップファイルの最大数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mode</span>:<span class="monospaced">&lt;スナップショット | 停止 | サスペンド&gt;</span><em>(デフォルト =</em> <span class="monospaced">スナップショット</span>)</dt>
<dd>
<p>
バックアップモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">notes-template</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップのメモを生成するためのテンプレート文字列。値で置き換えられる変数を含むことができます。現在サポートされているのは{{cluster}}, {{guestname}}, {{node}}, {{vmid}}ですが、今後追加されるかもしれません。改行とバックスラッシュは、それぞれ<em>「˶n</em>」と「<em>˶n</em>」としてエスケープする必要があります。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">ストレージ</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">notification-mode</span>:<span class="monospaced">&lt;auto | legacy-sendmail | notification-system&gt;</span><em>(デフォルト =</em> <span class="monospaced">auto</span>)</dt>
<dd>
<p>
使用する通知システムを決定します。<em>legacy-sendmail</em> に設定すると、vzdump は mailto/mailnotification パラメータを考慮し、<em>sendmail</em>コマンドで指定したアドレスにメールを送信します。<em>notification-systemに</em>設定すると、PVEの通知システム経由で通知が送信され、mailtoとmailnotificationは無視されます。<em>auto</em>(デフォルト設定) に設定すると、mailto が設定されていればメールが送信され、設定されていなければ通知システムが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">notification-policy</span>:<span class="monospaced">&lt;always | failure | never&gt;</span><em>(デフォルト =</em> <span class="monospaced">always</span>)</dt>
<dd>
<p>
非推奨：を使用しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">通知先</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
非推奨：を使用しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pbs-change-detection-mode</span>:<span class="monospaced">&lt;データ｜レガシー｜メタデータ&gt;。</span></dt>
<dd>
<p>
ファイルの変更を検出し、コンテナバックアップのエンコード形式を切り替えるために使用されるPBSモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">パフォーマンスを</span>向上させます：[<span class="monospaced">max-workers=&lt;integer&gt;] [,pbs-entries-max=&lt;integer&gt;</span>]。</dt>
<dd>
<p>
その他のパフォーマンス関連の設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">max-workers=&lt;integer&gt;</span><span class="monospaced">(1 - 256)</span><em>(デフォルト =</em> <span class="monospaced">16</span>)</dt>
<dd>
<p>
VMに適用されます。同時に最大この数のIOワーカーを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pbs-entries-max=&lt;integer&gt;</span><span class="monospaced">(1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1048576</span>)</dt>
<dd>
<p>
PBS に送信されるコンテナバックアップに適用されます。意図しない OOM 状況を回避するために、指定された時間にメモリ内で許可されるエントリ数を制限します。これを増やすと、大量のファイルを含むコンテナのバックアップが可能になります。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">pigz</span>:<span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
N&gt;0の場合はgzipの代わりにpigzを使用。N=1 はコアの半分を使用し、N&gt;1 は N をスレッド数として使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">プール</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたプールに含まれるすべての既知のゲストシステムをバックアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protected</span>:<span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
trueの場合、バックアップを保護マークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">ストレージ</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">を削除</span>します：[<span class="monospaced">keep-all=&lt;1|0&gt;] [,keep-daily=&lt;N&gt;] [,keep-hourly=&lt;N&gt;] [,keep-last=&lt;N&gt;] [,keep-monthly=&lt;N&gt;] [,keep-weekly=&lt;N&gt;] [,keep-yearly=&lt;N&gt;]</span><em>(default =</em> <span class="monospaced">keep-all=1</span>)</dt>
<dd>
<p>
ストレージ構成の保持オプションの代わりに、これらの保持オプションを使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">keep</span><span class="monospaced">-</span><span class="monospaced">all=&lt;ブール値</span></dt>
<dd>
<p>
すべてのバックアップを保持します。trueの場合、他のオプションと競合します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-daily=&lt;N&gt;</span></dt>
<dd>
<p>
過去&lt;N&gt;日分のバックアップを保持します。1日に複数のバックアップがある場合は、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-hourly=&lt;N&gt;</span></dt>
<dd>
<p>
最後の&lt;N&gt;異なる時間のバックアップを保持します。1時間に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-last=&lt;N&gt;</span></dt>
<dd>
<p>
最後の&lt;N&gt;個のバックアップを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-monthly=&lt;N&gt;</span></dt>
<dd>
<p>
過去&lt;N&gt;の異なる月のバックアップを保持します。1つの月に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-weekly=&lt;N&gt;</span></dt>
<dd>
<p>
過去&lt;N&gt;週間分のバックアップを保持します。1週間に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-yearly=&lt;N&gt;（</span><span class="monospaced">毎年</span></dt>
<dd>
<p>
過去&lt;N&gt;年分のバックアップを保持します。一つの年に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">remove</span>:<span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
<em>prune-backupsに従って</em>古いバックアップを削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スクリプト</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたフックスクリプトを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">stdexcludes</span>:<span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
一時ファイルとログを除外します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">stopwait</span>:<span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">10</span>)</dt>
<dd>
<p>
ゲストシステムが停止するまでの最大待機時間 (分)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ストレージ</span>:<span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
結果のファイルをこのストレージに保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tmpdir</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定したディレクトリに一時ファイルを保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">zstd</span>:<span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
Zstdスレッド。N=0は利用可能なコアの半分を使用し、Nが0より大きな値に設定された場合、Nはスレッド数として使用されます。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title"><span class="monospaced">vzdump.confの</span>設定例</div>
<div class="content monospaced">
<pre>tmpdir/mnt/fast_local_disk storage: my_backup_storage mode: snapshot bwlimit: 10000</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_hook_scripts">
<span>16.11.フックスクリプト</span> <a class="headerlink" href="#_hook_scripts" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>オプション<span class="monospaced">--script</span> でフックスクリプトを指定できます。このスクリプトはバックアップ処理の様々な段階で呼び出され、パラメータが適宜設定されます。ドキュメンテーションディレクトリに例があります<span class="monospaced">（vzdump-hook-script.pl</span>）。</p></div>
</div>
<div class="sect2">
<h3 id="_file_exclusions">
<span>16.12.ファイルの除外</span> <a class="headerlink" href="#_file_exclusions" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションはコンテナ・バックアップでのみ使用できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">vzdumpは</span>デフォルトで以下のファイルをスキップします（<span class="monospaced">--stdexcludes 0</span>オプションで無効にできます）。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/tmp/?* /var/tmp/?* /var/run/?*pid</pre>
</div></div>
<div class="paragraph">
<p>手動で（追加の）除外パスを指定することもできます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --exclude-path /tmp/ --exclude-path '/var/foo*'</pre>
</div></div>
<div class="paragraph">
<p>は、<span class="monospaced">/tmp/</span>ディレクトリと、<span class="monospaced">/var/foo</span>、<span class="monospaced">/var/foobarといった</span>名前のファイルやディレクトリを除外します。</p></div>
<div class="paragraph">
<p><span class="monospaced">で</span>始まらないパスは、コンテナのルートにアンカーされません。たとえば</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --exclude-path bar</pre>
</div></div>
<div class="paragraph">
<p>は、<span class="monospaced">/bar</span>、<span class="monospaced">/var/bar</span>、<span class="monospaced">/var/foo/bar</span> などのファイルやディレクトリを除外しますが、<span class="monospaced">/bar2 は</span>除外しません。</p></div>
<div class="paragraph">
<p>設定ファイルもバックアップアーカイブ内（<span class="monospaced">./etc/vzdump/</span>内）に保存され、正しくリストアされます。</p></div>
</div>
<div class="sect2">
<h3 id="_examples_10">
<span>16.13.例</span> <a class="headerlink" href="#_examples_10" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>単にゲスト777をダンプします - スナップショットはなく、デフォルトのダンプディレクトリ(通常は<span class="monospaced">/var/lib/vz/dump/</span>)にゲストのプライベート領域と設定ファイルをアーカイブするだけです。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777</pre>
</div></div>
<div class="paragraph">
<p>rsyncとサスペンド/レジュームを使ってスナップショットを作成します（ダウンタイムは最小限）。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --mode suspend</pre>
</div></div>
<div class="paragraph">
<p>すべてのゲストシステムをバックアップし、rootとadminに通知メールを送信します。<span class="monospaced">mailtoが</span>設定され、<span class="monospaced">notification-modeが</span>デフォルトで<span class="monospaced">autoに</span>設定されているため、通知メールは通知システムの代わりにシステムの<span class="monospaced">sendmail</span>コマンドで送信されます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump --all --mode suspend --mailto root --mailto admin</pre>
</div></div>
<div class="paragraph">
<p>スナップショットモード（ダウンタイムなし）とデフォルト以外のダンプディレクトリを使用します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --dumpdir /mnt/backup --mode snapshot</pre>
</div></div>
<div class="paragraph">
<p>複数のゲストのバックアップ（選択的）</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 101 102 103 --mailto root</pre>
</div></div>
<div class="paragraph">
<p>101と102を除く全ゲストをバックアップ</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump --mode suspend --exclude 101,102</pre>
</div></div>
<div class="paragraph">
<p>コンテナを新しいCT 600にリストア</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pct restore 600 /mnt/backup/vzdump-lxc-777.tar</pre>
</div></div>
<div class="paragraph">
<p>VM 601へのQemuServer VMのリストア</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># qmrestore /mnt/backup/vzdump-qemu-888.vma 601</pre>
</div></div>
<div class="paragraph">
<p>パイプを使用して、既存のコンテナ101を、4GBのルートファイルシステムを持つ新しいコンテナ300にクローンします。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 101 --stdout | pct restore --rootfs 4 300 -.</pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_notifications">
17.通知<a class="headerlink" href="#chapter_notifications" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">
<span>17.1.概要</span> <a class="headerlink" href="#_overview" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
Proxmox VEは、ストレージのレプリケーション障害、ノードのフェンシング、バックアップの完了/失敗、その他のイベントが発生した場合に<a href="#notification_events">通知イベントを</a>発行します。 これらのイベントは通知システムによって処理されます。通知イベントには、タイムスタンプ、重大度レベル、タイプ、その他のオプションのメタデータフィールドなどのメタデータがあります。</p>
</li>
<li>
<p>
<a href="#notification_matchers">通知マッチャーは</a>、通知イベントを1つ以上の通知ターゲットにルーティングします。マッチャーは、通知イベントのメタデータに基づいて選択的にルーティングするためのマッチルールを持つことができます。</p>
</li>
<li>
<p>
<a href="#notification_targets">通知ターゲットは</a>、マッチャーによって通知イベントがルーティングされる宛先です。 ターゲットには複数のタイプがあり、メールベース（SendmailとSMTP）とGotifyがあります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>バックアップジョブには設定可能な<a href="#notification_mode">通知モードが</a>あり、通知システムとレガシーモードのどちらかを選択して通知メールを送信できます。レガシーモードはProxmox VE 8.1以前の通知方法と同じです。</p></div>
<div class="paragraph">
<p>通知システムは、GUI の [データセンター] → [通知] で構成できます。この構成は、<span class="monospaced">/etc/pve/notifications.cfg</span>および<span class="monospaced">/etc/pve/priv/notifications.cfg</span>に保存されます。/<span class="monospaced">etc/pve/priv/notifications.cfg</span>には、 通知ターゲットのパスワードや認証トークンなど、機密性の高い構成オプションが含まれており、<span class="monospaced">root</span> によってのみ読み取ることができます。</p></div>
</div>
<div class="sect2">
<h3 id="notification_targets">
<span>17.2.通知対象</span> <a class="headerlink" href="#notification_targets" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは複数のタイプの通知先を提供します。</p></div>
<div class="sect3">
<h4 id="notification_targets_sendmail">17.2.1.Sendmail<a class="headerlink" href="#notification_targets_sendmail" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-sendmail.png">
<img src="images/screenshot/gui-datacenter-notification-sendmail.png" alt="screenshot/gui-datacenter-notification-sendmail.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>sendmail バイナリは、Unix 系オペレーティング・システムでよく見られる、電子メール・メッセージの送信を処理するプログラムです。 コマンドライン・ユーティリティで、ユーザーやアプリケーションは、コマンドラインやスクリプト内から直接電子メールを送信できます。</p></div>
<div class="paragraph">
<p>sendmail通知ターゲットは、<span class="monospaced">sendmail</span>バイナリを使用して、設定されたユーザまたはメールアドレスのリストに電子メールを送信します。ユーザが受信者として選択された場合、ユーザの設定で構成された電子メールアドレスが使用されます。<span class="monospaced">root@pam</span>ユーザの場合、これはインストール時に入力された電子メールアドレスです。 ユーザの電子メールアドレスは、<span class="monospaced">Datacenter → Permissions → Usersで</span>構成できます。 ユーザに関連する電子メールアドレスがない場合、電子メールは送信されません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEの標準インストールでは、<span class="monospaced">sendmail</span>バイナリはPostfixによって提供されます。外部メールリレー(スマートホスト)を設定するなどして、Postfixがメールを正しく配送できるように設定する必要があるかもしれません。 配送に失敗した場合は、Postfixデーモンによって記録されたメッセージをシステムログで確認してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Sendmail ターゲットプラグインの設定には以下のオプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">mailto</span>: 通知を送信するメールアドレス。複数の受信者に対応するために複数回設定することができます。</p>
</li>
<li>
<p>
<span class="monospaced">mailto-user</span>：メールを送信するユーザー。ユーザーのメールアドレスは<span class="monospaced">users.cfgで</span>検索されます。複数の受信者に対応するために、複数回設定することができます。</p>
</li>
<li>
<p>
<span class="monospaced">author</span>：メールの作成者を設定します。デフォルトは<span class="monospaced">Proxmox VE</span>です。</p>
</li>
<li>
<p>
<span class="monospaced">from-address</span>：メールの差出人アドレスを設定します。このパラメータが設定されていない場合、プラグインは<span class="monospaced">datacenter.cfgの</span> <span class="monospaced">email_from</span>設定にフォールバックします。このパラメータも設定されていない場合、プラグインのデフォルトは<span class="monospaced">root@$hostname</span> <span class="monospaced">（$hostnameは</span>ノードのホスト名）です。</p>
</li>
<li>
<p>
<span class="monospaced">コメント</span>このターゲットのコメント メールの<span class="monospaced">From</span>ヘッダは<span class="monospaced">$author &lt;$from-address&gt;に</span>設定されます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>設定例<span class="monospaced">(/etc/pve/notifications.cfg</span>)：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>sendmail: 例 mailto-user root@pam mailto-user admin@pve mailto max@example.com from-address pve1@example.com comment 複数のユーザー/アドレスに送信します。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="notification_targets_smtp">17.2.2.SMTP<a class="headerlink" href="#notification_targets_smtp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-smtp.png">
<img src="images/screenshot/gui-datacenter-notification-smtp.png" alt="screenshot/gui-datacenter-notification-smtp.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>SMTP通知ターゲットは、SMTPメール・リレーに直接電子メールを送信できます。 このターゲットは、電子メールを配信するためにシステムのMTAを使用しません。 sendmailターゲットと同様に、ユーザが受信者として選択されている場合、ユーザの設定された電子メールアドレスが使用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">sendmail ターゲットとは異なり、SMTP ターゲットにはメール配送に失敗した場合のキューイング/リトライ機構はありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>SMTP ターゲット・プラグインの設定には、以下のオプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">mailto</span>: 通知を送信するメールアドレス。複数の受信者に対応するために複数回設定することができます。</p>
</li>
<li>
<p>
<span class="monospaced">mailto-user</span>：メールを送信するユーザー。ユーザーのメールアドレスは<span class="monospaced">users.cfgで</span>検索されます。複数の受信者に対応するために、複数回設定することができます。</p>
</li>
<li>
<p>
<span class="monospaced">author</span>：メールの作成者を設定します。デフォルトは<span class="monospaced">Proxmox VE</span>です。</p>
</li>
<li>
<p>
<span class="monospaced">From-address</span>：メールのFromアドレスを設定します。SMTPリレーでは、なりすましを避けるためにこのアドレスがユーザのものであることを要求する場合があります。 メールの<span class="monospaced">From</span>ヘッダは<span class="monospaced">$author &lt;$from-address&gt;に</span>設定されます。</p>
</li>
<li>
<p>
<span class="monospaced">username</span>: 認証時に使用するユーザー名。ユーザ名が設定されていない場合は、認証は行われません。PLAIN および LOGIN 認証方式をサポートしています。</p>
</li>
<li>
<p>
<span class="monospaced">password</span>: 認証時に使用するパスワード。</p>
</li>
<li>
<p>
<span class="monospaced">モード</span>：暗号化モード<span class="monospaced">（insecure</span>、<span class="monospaced">starttls</span>、<span class="monospaced">tls</span>）を設定します。デフォルトは<span class="monospaced">tls</span>です。</p>
</li>
<li>
<p>
<span class="monospaced">サーバーを</span>指定します：SMTPリレーのアドレス/IP</p>
</li>
<li>
<p>
<span class="monospaced">ポート</span>：接続先ポート。設定されていない場合、使用されるポートのデフォルトは、<span class="monospaced">mode</span> の値に応じて 25<span class="monospaced">(安全でない</span>)、465<span class="monospaced">(tls</span>)、または 587<span class="monospaced">(starttls</span>) になります。</p>
</li>
<li>
<p>
<span class="monospaced">コメント</span>このターゲットに対するコメント</p>
</li>
</ul></div>
<div class="paragraph">
<p>設定例<span class="monospaced">(/etc/pve/notifications.cfg</span>)：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>smtp: example mailto-user root@pam mailto-user admin@pve mailto max@example.com from-address pve1@example.com username pve1 server mail.example.com mode starttls</pre>
</div></div>
<div class="paragraph">
<p>シークレットトークンを含む<span class="monospaced">/etc/pve/priv/notifications.cfgの</span>一致するエントリ：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>smtp: example パスワード somepassword</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="notification_targets_gotify">17.2.3.Gotify<a class="headerlink" href="#notification_targets_gotify" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-gotify.png">
<img src="images/screenshot/gui-datacenter-notification-gotify.png" alt="screenshot/gui-datacenter-notification-gotify.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p><a href="http://gotify.net">Gotifyは</a>、様々なデバイスやアプリケーションにプッシュ通知を送受信できるオープンソースのセルフホスト型通知サーバーです。シンプルなAPIとウェブインターフェースを提供し、様々なプラットフォームやサービスと簡単に統合することができます。</p></div>
<div class="paragraph">
<p>Gotifyターゲットプラグインの設定には以下のオプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">サーバーを</span>指定します：GotifyサーバーのベースURL、例:<span class="monospaced">http://&lt;ip&gt;:8888</span></p>
</li>
<li>
<p>
<span class="monospaced">トークン</span>：認証トークン。トークンはGotifyのWebインターフェイス内で生成することができます。</p>
</li>
<li>
<p>
<span class="monospaced">コメント</span>このターゲットに対するコメント</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Gotify ターゲットプラグインは、<a href="#datacenter_configuration_file">データセンター設定からの</a>HTTP プロキシ設定を尊重します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>設定例<span class="monospaced">(/etc/pve/notifications.cfg</span>)：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>gotify: サーバ例 http://gotify.example.com:8888 コメント 複数のユーザ/アドレスへの送信</pre>
</div></div>
<div class="paragraph">
<p>シークレットトークンを含む<span class="monospaced">/etc/pve/priv/notifications.cfgの</span>一致するエントリ：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>gotify: トークンの例 Someesecrettoken</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="notification_targets_webhook">17.2.4.Webhook<a class="headerlink" href="#notification_targets_webhook" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Webhook 通知ターゲットは、構成可能な URL への HTTP リクエストを実行します。</p></div>
<div class="paragraph">
<p>以下の設定オプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">url</span>：HTTP リクエストを実行する URL。 メッセージの内容、メタデータ、秘密を注入するためのテンプレートをサポートしています。</p>
</li>
<li>
<p>
<span class="monospaced">メソッドを</span>使用します：使用する HTTP メソッド (POST/PUT/GET)</p>
</li>
<li>
<p>
<span class="monospaced">ヘッダの</span>配列です：リクエストに対して設定されるべき HTTP ヘッダの配列。 メッセージの内容、メタデータ、秘密を注入するためのテンプレート化をサポートします。</p>
</li>
<li>
<p>
<span class="monospaced">ボディ</span>：メッセージの内容、メタデータ、秘密を注入するためのテンプレート化をサポートします。</p>
</li>
<li>
<p>
<span class="monospaced">secret</span>: 秘密のキーと値のペアの配列。これらはrootだけが読める保護された設定ファイルに保存されます。秘密は<span class="monospaced">secrets</span>名前空間を通してbody/header/URLテンプレートでアクセスできます。</p>
</li>
<li>
<p>
<span class="monospaced">コメント</span>このターゲットに対するコメント。</p>
</li>
</ul></div>
<div class="paragraph">
<p>テンプレート化をサポートする構成オプションでは、<a href="https://handlebarsjs.com/">Handlebars</a>構文を使用して、以下のプロパティにアクセスできます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">{タイトル }}</span>：レンダリングされた通知のタイトル</p>
</li>
<li>
<p>
<span class="monospaced">{メッセージ }}</span>：レンダリングされた通知本文</p>
</li>
<li>
<p>
<span class="monospaced">{{ severity }}</span>：通知の重大度<span class="monospaced">(情報</span>、<span class="monospaced">通知</span>、<span class="monospaced">警告</span>、<span class="monospaced">エラー</span>、<span class="monospaced">不明</span>)</p>
</li>
<li>
<p>
<span class="monospaced">{{ timestamp }}</span>：通知のタイムスタンプをUNIXエポック（秒単位）で指定します。</p>
</li>
<li>
<p>
<span class="monospaced">{{ fields.&lt;name&gt; }}</span>：通知のメタデータフィールドのサブ名前空間。例えば、<span class="monospaced">fields.typeは</span> <a href="#notification_events">通知</a>タイプを含んでいます。</p>
</li>
<li>
<p>
<span class="monospaced">{{ secrets.&lt;name&gt; }}</span>：secretsのサブ名前空間。例えば、<span class="monospaced">tokenという</span>名前の秘密は<span class="monospaced">secrets.tokenから</span>アクセスできます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>便宜上、以下のヘルパーを用意しています：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">{{ url-encode &lt;value/property&gt; }}</span>：プロパティ/リテラルをURLエンコードします。</p>
</li>
<li>
<p>
<span class="monospaced">{{ escape &lt;value/property&gt; }}</span>：JSON文字列として安全に表現できない制御文字をエスケープします。</p>
</li>
<li>
<p>
<span class="monospaced">{{ json &lt;value/property&gt; }}</span>：値をJSONとしてレンダリングします。これは、JSONペイロードの一部としてサブ名前空間全体(<span class="monospaced">fieldsなど</span>)を渡すのに便利です(例<span class="monospaced">{{ json fields }}</span>)。</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_examples_11">例<a class="headerlink" href="#_examples_11" title="Permalink to this heading"></a></h5>
<div class="sect5">
<h6 id="_span_class_monospaced_ntfy_sh_span"><span class="monospaced">ntfy.sh</span> <a class="headerlink" href="#_span_class_monospaced_ntfy_sh_span" title="Permalink to this heading"></a></h6>
<div class="ulist"><ul>
<li>
<p>
メソッド<span class="monospaced">POST</span></p>
</li>
<li>
<p>
URL:<span class="monospaced">https://ntfy.sh/{{ secrets.channel }}</span></p>
</li>
<li>
<p>
ヘッダー</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">マークダウン</span> <span class="monospaced">はい</span></p>
</li>
</ul></div>
</li>
<li>
<p>
ボディ</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>``` {{ メッセージ }} ```</pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
秘密：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">チャネル</span>:<span class="monospaced">&lt;あなたの ntfy.sh チャネル&gt;。</span></p>
</li>
</ul></div>
</li>
</ul></div>
</div>
<div class="sect5">
<h6 id="_discord">Discord<a class="headerlink" href="#_discord" title="Permalink to this heading"></a></h6>
<div class="ulist"><ul>
<li>
<p>
メソッド<span class="monospaced">POST</span></p>
</li>
<li>
<p>
URL:<span class="monospaced">https://discord.com/api/webhooks/{{ secrets.token }}</span></p>
</li>
<li>
<p>
ヘッダー</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">コンテンツタイプ</span>:<span class="monospaced">application/json</span></p>
</li>
</ul></div>
</li>
<li>
<p>
ボディ</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>{ "内容"："`` {{ エスケープメッセージ }}``" }.</pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
秘密：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">トークン</span>:<span class="monospaced">&lt;トークン</span></p>
</li>
</ul></div>
</li>
</ul></div>
</div>
<div class="sect5">
<h6 id="_slack">スラック<a class="headerlink" href="#_slack" title="Permalink to this heading"></a></h6>
<div class="ulist"><ul>
<li>
<p>
メソッド<span class="monospaced">POST</span></p>
</li>
<li>
<p>
URL:<span class="monospaced">https://hooks.slack.com/services/{{ secrets.token }}</span></p>
</li>
<li>
<p>
ヘッダー</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">コンテンツタイプ</span>:<span class="monospaced">application/json</span></p>
</li>
</ul></div>
</li>
<li>
<p>
ボディ</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>{ "text"："`` {{エスケープメッセージ}}``", "type"：「mrkdwn" }.</pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
秘密：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">トークン</span>:<span class="monospaced">&lt;トークン</span></p>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="notification_matchers">
<span>17.3.通知マッチャー</span> <a class="headerlink" href="#notification_matchers" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-matcher.png">
<img src="images/screenshot/gui-datacenter-notification-matcher.png" alt="screenshot/gui-datacenter-notification-matcher.png" width="250" style="padding: 0 0 0 10px;float:right;" /></a>
<p>通知マッチャーは、マッチングルールに基づいて通知を通知ターゲットにルーティングします。これらのルールは、タイムスタンプ<span class="monospaced">(match-calendar</span>)、通知の重大度<span class="monospaced">(match-severity</span>)、またはメタデータフィールド<span class="monospaced">(match-field</span>)など、通知の特定のプロパティにマッチすることができます。 通知がマッチャーによってマッチされると、マッチャー用に構成されたすべてのターゲットが通知を受け取ります。</p></div>
<div class="paragraph">
<p>任意の数のマッチャーを作成することができ、それぞれが独自のマッチングルールと通知するターゲットを持ちます。 ターゲットが複数のマッチャーで使用されている場合でも、すべてのターゲットは通知のたびに最大一度だけ通知されます。</p></div>
<div class="paragraph">
<p>マッチング・ルールのないマッチャーは常にtrueになり、設定されたターゲットは常に通知されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>matcher: always-matches target admin comment このマッチャーは、常に次のものにマッチします。</pre>
</div></div>
<div class="sect3">
<h4 id="_matcher_options">17.3.1.マッチャーのオプション<a class="headerlink" href="#_matcher_options" title="Permalink to this heading"></a></h4>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ターゲット</span>：マッチャーがマッチした場合、どのターゲットに通知するかを決定します。複数のターゲットに通知するために複数回使用することができます。</p>
</li>
<li>
<p>
<span class="monospaced">invert-match</span>：マッチャ全体の結果を反転します。</p>
</li>
<li>
<p>
<span class="monospaced">モード</span>：マッチャー全体の結果を計算するために、個々のマッチ・ルールがどのように評価されるかを決定します。<span class="monospaced">all</span> に設定すると、すべての一致ルールが一致しなければなりません。<span class="monospaced">any</span> に設定すると、少なくとも 1 つのルールが一致する必要があります。デフォルトは<span class="monospaced">all</span> です。</p>
</li>
<li>
<p>
<span class="monospaced">match-calendar</span>：通知のタイムスタンプをスケジュールとマッチさせます。</p>
</li>
<li>
<p>
<span class="monospaced">match-field</span>：通知のメタデータフィールドにマッチします。</p>
</li>
<li>
<p>
<span class="monospaced">match-severity</span>：通知の重大度にマッチ</p>
</li>
<li>
<p>
<span class="monospaced">コメント</span>このマッチャーのコメント</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="notification_matchers_calendar">17.3.2.カレンダー一致ルール<a class="headerlink" href="#notification_matchers_calendar" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>カレンダーマッチャーは、通知が送信される時刻を設定可能なスケジュールと照合します。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">マッチカレンダー 8-12</span></p>
</li>
<li>
<p>
<span class="monospaced">試合カレンダー 8:00-15:30</span></p>
</li>
<li>
<p>
<span class="monospaced">試合カレンダー 月～金 9:00～17:00</span></p>
</li>
<li>
<p>
<span class="monospaced">試合カレンダー 日・火・水・金 9-17</span></p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="notification_matchers_field">17.3.3.フィールド・マッチング・ルール<a class="headerlink" href="#notification_matchers_field" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>通知には、マッチング可能なメタデータ・フィールドの選択肢があります。 マッチング・モードとして<span class="monospaced">"exact "</span>を使用する場合、<span class="monospaced">,</span>を区切り文字として使用できます。 マッチング・ルールは、メタデータ・フィールドが指定された値の<strong>いずれかを</strong>持つ場合にマッチングします。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">match-field exact:type=vzdump</span>バックアップに関する通知のみにマッチします。</p>
</li>
<li>
<p>
<span class="monospaced">match-field exact:type=replication,fencing</span> <span class="monospaced">レプリケーションと</span> <span class="monospaced">フェンシングの</span>通知にマッチします。</p>
</li>
<li>
<p>
<span class="monospaced">match-field regex:hostname=^.+.example.com$</span>ノードのホスト名にマッチします。</p>
</li>
</ul></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">match-field regex:hostname=.*</span>ディレクティブは任意の<span class="monospaced">ホスト名</span>メタデータフィールドを持つ通知のみにマッチしますが、そのフィールドが存在しない場合はマッチしません。</p></div>
</div>
<div class="sect3">
<h4 id="notification_matchers_severity">17.3.4.重大度一致ルール<a class="headerlink" href="#notification_matchers_severity" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>通知には、一致させることができる関連する重大度があります。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">match-severity エラー</span>：マッチエラーのみ</p>
</li>
<li>
<p>
<span class="monospaced">match-severity警告,エラー</span>：マッチの警告とエラー</p>
</li>
</ul></div>
<div class="paragraph">
<p>次の深刻度が使用されています：<span class="monospaced">info</span>、<span class="monospaced">notice</span>、<span class="monospaced">warning</span>、<span class="monospaced">error</span>、<span class="monospaced">unknown</span>。</p></div>
</div>
<div class="sect3">
<h4 id="_examples_12">17.3.5.例<a class="headerlink" href="#_examples_12" title="Permalink to this heading"></a></h4>
<div class="listingblock">
<div class="content monospaced">
<pre>matcher: workday match-calendar mon-fri 9-17 target admin comment 就業時間中に管理者に通知 matcher: night-and-weekend match-calendar mon-fri 9-17 invert-match true target on-call-admins comment 就業時間外用にターゲットを分離</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre>matcher: backup-failures match-field exact:type=vzdump match-severity error target backup-admins comment ある管理者グループにバックアップ失敗の通知を送信 matcher: cluster-failures match-field exact:type=replication,fencing target cluster-admins comment 別の管理者グループにクラスタ関連の通知を送信</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="notification_events">
<span>17.4.通知イベント</span> <a class="headerlink" href="#notification_events" title="Permalink to this heading"></a></h3>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">イベント            </th>
<th class="tableblock halign-left valign-top"><span class="monospaced">タイプ</span>        </th>
<th class="tableblock halign-left valign-top">重大性 </th>
<th class="tableblock halign-left valign-top">メタデータフィールド（<span class="monospaced">タイプに加えて）</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">システムのアップデートが可能</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">パッケージ更新</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">インフォメーション</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスターノードのフェンス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">フェンシング</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">エラー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ストレージ・レプリケーション・ジョブの失敗</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">レプリケーション</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">エラー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span>,<span class="monospaced">job-id</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バックアップ成功</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ブイエスダンプ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">インフォメーション</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span>、<span class="monospaced">ジョブID</span>(バックアップジョブのみ)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バックアップ失敗</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ブイエスダンプ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">エラー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span>、<span class="monospaced">ジョブID</span>(バックアップジョブのみ)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ルートへのメール</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">システムメール</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">不明</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">フィールド名        </th>
<th class="tableblock halign-left valign-top">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">タイプ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">通知の種類</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ドメイン名を除いたホスト名 (例:<span class="monospaced">pve1</span>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ジョブID</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ジョブID</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">バックアップジョブの通知には、バックアップジョブがスケジュールに基づいて自動的に実行された場合のみ<span class="monospaced">job-idが</span>設定されます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_system_mail_forwarding">
<span>17.5.システム・メール転送</span> <a class="headerlink" href="#_system_mail_forwarding" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">smartdなどの</span>特定のローカル・システム・デーモンは、最初にローカル・<span class="monospaced">ルート・</span>ユーザーに向けられた通知メールを生成します。Proxmox VEはこれらのメールを通知システムに、タイプ<span class="monospaced">system-mail</span>、深刻度<span class="monospaced">unknownの</span>通知として送ります。</p></div>
<div class="paragraph">
<p>メールが sendmail ターゲットに転送される場合、メールの内容とヘッダーはそのまま転送されます。それ以外のターゲットに対しては、システムはメールのコンテンツから件名と本文の両方を抽出しようとします。メールがHTMLコンテンツのみで構成されている場合、このプロセスでプレーンテキスト形式に変換されます。</p></div>
</div>
<div class="sect2">
<h3 id="_permissions_2">
<span>17.6.パーミッション</span> <a class="headerlink" href="#_permissions_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>通知ターゲットの構成を変更/表示するには、<span class="monospaced">/mapping/notifications</span>ACL ノードの<span class="monospaced">Mapping.Modify/Mapping.Audit</span>パーミッションが必要です。</p></div>
<div class="paragraph">
<p>ターゲットをテストするには、<span class="monospaced">/mapping/notifications</span>の<span class="monospaced">Mapping.Use</span>、<span class="monospaced">Mapping.Audit</span>、または<span class="monospaced">Mapping.Modify のいずれかの</span>パーミッションが必要です。</p></div>
</div>
<div class="sect2">
<h3 id="notification_mode">
<span>17.7.通知モード</span> <a class="headerlink" href="#notification_mode" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップジョブの設定には、<span class="monospaced">notification-mode</span>オプションがあり、3つの値のいずれかを指定できます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">auto</span>：<span class="monospaced">mailto/Send</span><span class="monospaced">email to</span>フィールドに電子メール・アドレスが入力されていない場合は、<span class="monospaced">legacy-sendmail</span>モードを使用します。メールアドレスが入力されていない場合、<span class="monospaced">notification-system</span>モードが使用されます。</p>
</li>
<li>
<p>
<span class="monospaced">legacy-sendmail</span>：通知システムはバイパスされ、設定されたターゲット/マッチャーは無視されます。 このモードはProxmox VE 8.1より前のバージョンの通知動作と同等です。</p>
</li>
<li>
<p>
<span class="monospaced">通知システム</span>：新しいフレキシブルな通知システムをご利用ください。</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">notification-mode</span>オプションが設定されていない場合、Proxmox VEのデフォルトは<span class="monospaced">autoに</span>なります。</p></div>
<div class="paragraph">
<p><span class="monospaced">レガシー送信メール</span>モードはProxmox VEの後のリリースで削除されるかもしれません。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_important_service_daemons">
18.重要なサービスデーモン<a class="headerlink" href="#_important_service_daemons" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pvedaemon_proxmox_ve_api_daemon">
<span>18.1. pvedaemon - Proxmox VE API デーモン</span> <a class="headerlink" href="#_pvedaemon_proxmox_ve_api_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、Proxmox VE API全体を<span class="monospaced">127.0.0.1:85に</span>公開します。このデーモンは<span class="monospaced">rootとして</span>実行され、すべての特権操作を実行する権限を持っています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デーモンはローカルアドレスのみをリッスンするので、外部からアクセスすることはできません。<span class="monospaced">pveproxy</span>デーモンはAPIを外部に公開します。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_pveproxy_proxmox_ve_api_proxy_daemon">
<span>18.2. pveproxy - Proxmox VE API プロキシデーモン</span> <a class="headerlink" href="#_pveproxy_proxmox_ve_api_proxy_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、HTTPSを使用してTCPポート8006でProxmox VE API全体を公開します。ユーザー<span class="monospaced">www-dataとして</span>実行され、非常に限定されたパーミッションを持っています。  より多くのパーミッションを必要とする操作は、ローカルの<span class="monospaced">pvedaemonに</span>転送されます。</p></div>
<div class="paragraph">
<p>つまり、1台のProxmox VEノードに接続するだけで、クラスタ全体を管理できます。</p></div>
<div class="sect3">
<h4 id="pveproxy_host_acls">18.2.1.ホストベースのアクセス制御<a class="headerlink" href="#pveproxy_host_acls" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>apache2" ライクなアクセス制御リストを設定することができます。値は<span class="monospaced">/etc/default/pveproxy</span> ファイルから読み込まれます。例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ALLOW_FROM="10.0.0.1-10.0.0.5,192.168.0.0/22" DENY_FROM="all" POLICY="allow"</pre>
</div></div>
<div class="paragraph">
<p>IPアドレスは、<span class="monospaced">Net::IPが</span>理解できる構文を使用して指定できます。<span class="monospaced">all</span>という名前は、<span class="monospaced">0/0</span>と<span class="monospaced">::/0</span>(すべての IPv4 アドレスと IPv6 アドレスを意味する) のエイリアスです。</p></div>
<div class="paragraph">
<p>デフォルトのポリシーは<span class="monospaced">許可</span>です。</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:33%;" />
<col style="width:33%;" />
<col style="width:33%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">試合      </th>
<th class="tableblock halign-left valign-top">POLICY=拒否 </th>
<th class="tableblock halign-left valign-top">POLICY=許可</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">マッチ許可のみ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">認める</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">認める</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">マッチ拒否のみ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">争う</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">争う</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">争う</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">認める</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">許可と拒否の両方に対応</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">争う</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">認める</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="pveproxy_listening_address">18.2.2.リスニングIPアドレス<a class="headerlink" href="#pveproxy_listening_address" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、<span class="monospaced">pveproxy</span>デーモンと<span class="monospaced">spiceproxy</span>デーモンはワイルドカードアドレスをリッスンし、IPv4クライアントとIPv6クライアントの両方からの接続を受け入れます。</p></div>
<div class="paragraph">
<p><span class="monospaced">etc/default/pveproxy</span>で<span class="monospaced">LISTEN_IP を</span>設定することで、<span class="monospaced">pveproxy</span>デーモンと<span class="monospaced">spiceproxy</span>デーモンがバインドする IP アドレスを制御できます。IP アドレスはシステム上で設定する必要があります。</p></div>
<div class="paragraph">
<p><span class="monospaced">sysctl</span> <span class="monospaced">net.ipv6.bindv6onlyを</span>デフォルトでない<span class="monospaced">1に</span>設定すると、デーモンがIPv6クライアントからの接続のみを受け付けるようになりますが、通常は他の多くの問題も発生します。この設定を行った場合、<span class="monospaced">sysctl</span>設定を削除するか、<span class="monospaced">LISTEN_IPを</span> <span class="monospaced">0.0.0.0</span>（IPv4クライアントのみを許可する）に設定することをお勧めします。</p></div>
<div class="paragraph">
<p><span class="monospaced">LISTEN_IPは</span>、ソケットを内部インターフェイスに制限するためだけに使うことができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>LISTEN_IP="192.0.2.1"</pre>
</div></div>
<div class="paragraph">
<p>同様に、IPv6アドレスを設定することもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>LISTEN_IP="2001:db8:85a3::1"</pre>
</div></div>
<div class="paragraph">
<p>リンクローカルIPv6アドレスを指定したい場合は、インターフェース名そのものを指定する必要があることに注意してください。例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>LISTEN_IP="fe80::c463:8cff:feb9:6a4e%vmbr0"</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">クラスタ内のノードは、通信のために<span class="monospaced">pveproxy</span>にアクセスする必要があります。クラスタ化されたシステムで<span class="monospaced">LISTEN_IP を</span>設定することは<strong>お勧めしません</strong>。</td>
</tr></table>
</div>
<div class="paragraph">
<p>変更を適用するには、ノードを再起動するか、<span class="monospaced">pveproxy</span>および<span class="monospaced">spiceproxy</span>サービスを完全に再起動する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl restart pveproxy.service spiceproxy.service</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">reload</span> とは異なり、pveproxy サービスの<span class="monospaced">再起動は</span>、仮想ゲストから実行中のコンソールやシェルなど、いくつかの長時間実行中のワーカープロセスを中断する可能性があります。そのため、この変更を有効にするにはメンテナンスウィンドウを使用してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_cipher_suite">18.2.3.SSL 暗号スイート<a class="headerlink" href="#_ssl_cipher_suite" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">etc/default/pveproxy</span>で、<span class="monospaced">CIPHERS</span>(TLS ⇐ 1.2) および<span class="monospaced">CIPHERSUITES</span>(TLS &gt;= 1.3) キーを使用して暗号化リストを定義できます。例えば</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>CIPHERS="ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256"
CIPHERSUITES="TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256"</pre>
</div></div>
<div class="paragraph">
<p>上記はデフォルトです。利用可能なオプションの一覧は、openssl パッケージの ciphers(1) man ページを参照してください。</p></div>
<div class="paragraph">
<p>さらに、<span class="monospaced">/etc/default/pveproxy</span>で使用される暗号をクライアントが選択するように設定できます (デフォルトは、クライアントと<span class="monospaced">pveproxy の</span>両方で使用可能なリストの最初の暗号です)：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>honor_cipher_order=0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_supported_tls_versions">18.2.4.対応TLSバージョン<a class="headerlink" href="#_supported_tls_versions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>安全でないSSLバージョン2と3は、pveproxyでは無条件に無効化されます。 1.1未満のTLSバージョンは、最近のOpenSSLバージョンではデフォルトで無効化され、<span class="monospaced">pveproxyは</span>これに従います(<span class="monospaced">/etc/ssl/openssl.cnfを</span>参照)。</p></div>
<div class="paragraph">
<p>TLSバージョン1.2または1.3を無効にするには、<span class="monospaced">/etc/default/pveproxyで</span>以下を設定します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>disable_tls_1_2=1</pre>
</div></div>
<div class="paragraph">
<p>または、それぞれ</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>disable_tls_1_3=1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">特別な理由がない限り、サポートされるTLSバージョンを手動で調整することは推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_diffie_hellman_parameters">18.2.5.Diffie-Hellman パラメータ<a class="headerlink" href="#_diffie_hellman_parameters" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">etc/default/pveproxyで</span>使用するDiffie-Hellmanパラメータを定義するには、<span class="monospaced">DHPARAMSを</span>PEM形式のDHパラメータを含むファイルのパスに設定します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>DHPARAMS="/path/to/dhparams.pem"</pre>
</div></div>
<div class="paragraph">
<p>このオプションが設定されていない場合、組み込みの<span class="monospaced">skip2048</span>パラメータが使用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">DHパラメータは、DH鍵交換アルゴリズムを利用する暗号スイートがネゴシエートされた場合にのみ使用されます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveproxy_custom_tls_cert">18.2.6.代替HTTPS証明書<a class="headerlink" href="#pveproxy_custom_tls_cert" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>使用する証明書は、外部証明書または ACME 経由で取得した証明書に変更できます。</p></div>
<div class="paragraph">
<p>pveproxy は、<span class="monospaced">/etc/pve/local/pveproxy-ssl.pem</span>と<span class="monospaced">/etc/pve/local/pveproxy-ssl.key が</span>あればそれを使用し、<span class="monospaced">/etc/pve/local/pve-ssl.pem</span>と<span class="monospaced">/etc/pve/local/pve-ssl.key</span> にフォールバックします。 秘密鍵はパスフレーズを使用しないこともできます。</p></div>
<div class="paragraph">
<p><span class="monospaced">etc/default/pveproxyで</span> <span class="monospaced">TLS_KEY_FILEを</span>設定するなどして、証明書の秘密鍵<span class="monospaced">/etc/pve/local/pveproxy-ssl.keyの</span>場所を上書きすることができます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>TLS_KEY_FILE="/secrets/pveproxy.key"</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">付属のACMEインテグレーションはこの設定に対応していません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>詳細については、マニュアルの「ホストシステム管理」の章を参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="pveproxy_response_compression">18.2.7.レスポンス圧縮<a class="headerlink" href="#pveproxy_response_compression" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、<span class="monospaced">pveproxy は</span>圧縮可能なコンテンツに対して gzip HTTP レベル圧縮を使用します。これは<span class="monospaced">/etc/default/pveproxy</span>で無効にできます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>COMPRESSION=0</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_pvestatd_proxmox_ve_status_daemon">
<span>18.3. pvestatd - Proxmox VE ステータスデーモン</span> <a class="headerlink" href="#_pvestatd_proxmox_ve_status_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、VM、ストレージ、コンテナのステータスを定期的にクエリします。結果はクラスタ内のすべてのノードに送信されます。</p></div>
</div>
<div class="sect2">
<h3 id="_spiceproxy_spice_proxy_service">
<span>18.4. spiceproxy - SPICE プロキシ・サービス</span> <a class="headerlink" href="#_spiceproxy_spice_proxy_service" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="http://www.spice-space.org">SPICE（Simple</a>Protocol for Independent Computing Environments）はオープンなリモートコンピューティングソリューションで、リモートディスプレイやデバイス（キーボード、マウス、オーディオなど）へのクライアントアクセスを提供します。主なユースケースは、仮想マシンやコンテナへのリモートアクセスです。</p></div>
<div class="paragraph">
<p>このデーモンは TCP ポート 3128 をリッスンし、SPICE クライアントからの<em>CONNECT</em>要求を正しい Proxmox VE VM に転送する HTTP プロキシを実装しています。ユーザ<span class="monospaced">www-dataとして</span>実行され、非常に限定された権限を持っています。</p></div>
<div class="sect3">
<h4 id="_host_based_access_control">18.4.1.ホストベースのアクセス制御<a class="headerlink" href="#_host_based_access_control" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>アクセス制御リストのように "apache2" を設定することができます。値は<span class="monospaced">/etc/default/pveproxy</span> ファイルから読み込まれます。 詳細は<span class="monospaced">pveproxy の</span>ドキュメントを参照してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_pvescheduler_proxmox_ve_scheduler_daemon">
<span>18.5. pvescheduler - Proxmox VE スケジューラデーモン</span> <a class="headerlink" href="#_pvescheduler_proxmox_ve_scheduler_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、レプリケーションやvzdumpジョブなど、スケジュールに従ってジョブを開始する役割を担います。</p></div>
<div class="paragraph">
<p>vzdumpジョブについては、<span class="monospaced">/etc/pve/jobs.cfg</span>ファイルから設定を取得します。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_useful_command_line_tools">
19.便利なコマンドラインツール<a class="headerlink" href="#_useful_command_line_tools" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pvesubscription_subscription_management">
<span>19.1. pvesubscription - サブスクリプション管理</span> <a class="headerlink" href="#_pvesubscription_subscription_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このツールはProxmox VEのサブスクリプションを処理するために使用されます。</p></div>
</div>
<div class="sect2">
<h3 id="_pveperf_proxmox_ve_benchmark_script">
<span>19.2. pveperf - Proxmox VE ベンチマークスクリプト</span> <a class="headerlink" href="#_pveperf_proxmox_ve_benchmark_script" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">PATHに</span>マウントされているハードディスク<span class="monospaced">（</span>デフォルトは<span class="monospaced">/）の</span>CPU/ハードディスクのパフォーマンスデータの収集を試みます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
CPUボゴミップス</dt>
<dd>
<p>
全CPUのボゴミップス合計</p>
</dd>
<dt class="hdlist1">
REGEX/SECOND</dt>
<dd>
<p>
1秒あたりの正規表現数（perlパフォーマンステスト）は300000以上である必要があります。</p>
</dd>
<dt class="hdlist1">
HDサイズ</dt>
<dd>
<p>
ハードディスクサイズ</p>
</dd>
<dt class="hdlist1">
バファードリード</dt>
<dd>
<p>
簡単なHD読み取りテスト。最近のHDは少なくとも40MB/秒に達するはずです。</p>
</dd>
<dt class="hdlist1">
平均シーク時間</dt>
<dd>
<p>
は平均シーク時間をテストします。高速SCSI HDは8ミリ秒未満の値に達します。一般的なIDE/SATAディスクの値は15～20ミリ秒です。</p>
</dd>
<dt class="hdlist1">
FSYNCS/SECOND</dt>
<dd>
<p>
の値は200以上でなければなりません（RAIDコントローラで<span class="monospaced">ライトバックキャッシュモードを</span>有効にする必要があります - バッテリーバックアップキャッシュ（BBWC）が必要です）。</p>
</dd>
<dt class="hdlist1">
DNS EXT</dt>
<dd>
<p>
外部DNS名の平均解決時間</p>
</dd>
<dt class="hdlist1">
DNS INT</dt>
<dd>
<p>
ローカルDNS名の平均解決時間</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_shell_interface_for_the_proxmox_ve_api">
<span>19.3.Proxmox VE API 用シェルインターフェース</span> <a class="headerlink" href="#_shell_interface_for_the_proxmox_ve_api" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE管理ツール<span class="monospaced">(pvesh</span>)を使用すると、REST/HTTPSサーバを使用せずにAPI関数を直接呼び出すことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">それができるのは<em>rootだけ</em>です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_examples_13">19.3.1.例<a class="headerlink" href="#_examples_13" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタ内のノードのリストを取得</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesh get /nodes</pre>
</div></div>
<div class="paragraph">
<p>データセンターで利用可能なオプションのリストを取得します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesh usage cluster/options -v</pre>
</div></div>
<div class="paragraph">
<p>HTMl5 NoVNCコンソールをデータセンターのデフォルトコンソールに設定</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesh set cluster/options -console html5</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_frequently_asked_questions_2">
20.よくある質問<a class="headerlink" href="#_frequently_asked_questions_2" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">新しいFAQはこのセクションの一番下に追加されています。</td>
</tr></table>
</div>
<div class="qlist qanda"><ol>
<li>
<p><em>
Proxmox VEはどのようなディストリビューションに基づいていますか？</em></p>
<p>
Proxmox VE は<a href="https://www.debian.org">Debian GNU/Linux</a>をベースにしています。</p>
</li>
<li>
<p><em>
Proxmox VEプロジェクトはどのライセンスを使用していますか？</em></p>
<p>
Proxmox VEコードのライセンスはGNU Affero General Public License, version 3です。</p>
</li>
<li>
<p><em>
Proxmox VEは32ビットプロセッサで動作しますか？</em></p>
<p>
Proxmox VEは64ビットCPU（AMDまたはIntel）でのみ動作します。32ビットのプラットフォームは予定されていません。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VMとコンテナは、32ビットと64ビットの両方に対応しています。</td>
</tr></table>
</div>
</li>
<li>
<p><em>
私のCPUは仮想化をサポートしていますか？</em></p>
<p>
CPUが仮想化に対応しているかどうかを確認するには、このコマンドの出力に<span class="monospaced">vmx</span>または<span class="monospaced">svm</span>タグがあるかどうかを確認します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>egrep '(vmx|svm)' /proc/cpuinfo</pre>
</div></div>
</li>
<li>
<p><em>
対応インテルCPU</em></p>
<p>
<a href="https://en.wikipedia.org/wiki/Virtualization_Technology#Intel_virtualization_.28VT-x.29">インテル® バーチャライゼーション・テクノロジー(インテル® VT-x)を</a>サポートする64ビット・プロセッサー<a href="https://ark.intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873&amp;2_VTX=True&amp;2_InstructionSet=64-bit">(インテル® VTおよび64ビットをサポートするプロセッサー一覧</a>)</p>
</li>
<li>
<p><em>
対応AMD CPU</em></p>
<p>
<a href="https://en.wikipedia.org/wiki/Virtualization_Technology#AMD_virtualization_.28AMD-V.29">AMD仮想化テクノロジー（AMD-V）を</a>サポートする64ビットプロセッサー。</p>
</li>
<li>
<p><em>
コンテナ／仮想環境（VE）／仮想専用サーバー（VPS）とは何ですか？</em></p>
<p>
コンテナの文脈では、これらの用語はすべてオペレーティング・システム・レベルの仮想化という概念を指しています。オペレーティング・システム・レベルの仮想化とは、オペレーティング・システムのカーネルが、カーネルを共有する複数の分離されたインスタンスを可能にする仮想化の手法です。LXCでは、このようなインスタンスをコンテナと呼びます。コンテナは完全なオペレーティング・システムをエミュレートするのではなく、ホストのカーネルを使用するため、オーバーヘッドが少なくて済みますが、Linuxゲストに限定されます。</p>
</li>
<li>
<p><em>
QEMU/KVMゲスト（またはVM）とは何ですか？</em></p>
<p>
QEMU/KVM ゲスト (または VM) は、QEMU と Linux KVM カーネルモジュールを使用して Proxmox VE で仮想化されたゲストシステムです。</p>
</li>
<li>
<p><em>
QEMUとは何ですか？</em></p>
<p>
QEMU は、汎用的なオープンソースのマシンエミュレータおよび仮想化ツールです。QEMU は Linux KVM カーネルモジュールを使用し、ホスト CPU 上でゲストコードを直接実行することで、ネイティブに近いパフォーマンスを実現します。 Linux ゲストに限らず、任意のオペレーティングシステムを実行できます。</p>
</li>
<li>
<p><em>
Proxmox VEのサポート期間はいつまでですか？</em></p>
<p>
Proxmox VEのバージョンは、少なくとも対応するDebianバージョンが<a href="https://wiki.debian.org/DebianOldStable">oldstable</a>である限りサポートされます。Proxmox VE はローリングリリースモデルを採用しており、常に最新の安定版を使用することを推奨します。</p>
<table class="tableblock frame-all grid-all" id="faq-support-table" style="
width:100%;
">
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">プロックスモックスVEバージョン </th>
<th class="tableblock halign-left valign-top">Debian バージョン      </th>
<th class="tableblock halign-left valign-top">ファースト・リリース </th>
<th class="tableblock halign-left valign-top">Debian EOL </th>
<th class="tableblock halign-left valign-top">プロックスモックスEOL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 12 (本の虫)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tba</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tba</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 11 (Bullseye)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024-07</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 10 (Buster)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-09</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 9 (Stretch)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-07</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 8 (Jessie)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-06</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 7 (Wheezy)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-02</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 6 (Squeeze)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-05</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プロックスモックスVE 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 5 (Lenny)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-01</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><em>
Proxmox VEを次のポイントリリースにアップグレードする方法を教えてください。</em></p>
<p>
マイナーバージョンのアップグレード、例えばバージョン7.1のProxmox VEから7.2や7.3へのアップグレードは、通常のアップデートと同様に行うことができます。 しかし、関連する注目すべき変更、または破壊的な変更については、<a href="https://pve.proxmox.com/wiki/Roadmap">リリースノートを</a>確認する必要があります。</p>
<div class="paragraph" id="faq-upgrade">
<p>アップデート自体には、Web UI<em>Node → Updates</em>パネルまたは CLI を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update apt full-upgrade</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必ず<a href="#sysadmin_package_repositories">パッケージリポジトリを</a>正しくセットアップし、<span class="monospaced">apt update</span>でエラーが出なかった場合のみ、実際のアップグレードを続行してください。</td>
</tr></table>
</div>
</li>
<li>
<p><em>
Proxmox VEを次のメジャーリリースにアップグレードする方法を教えてください。</em></p>
<p>
例えばProxmox VE 4.4から5.0へのメジャーバージョンアップもサポートされています。 これらのアップグレードは慎重に計画され、テストされなければなりません<strong>。</strong></p>
<div class="paragraph" id="faq-upgrade-major">
<p>アップグレードの具体的な手順は、それぞれのセットアップによって異なりますが、アップグレードの実行方法に関する一般的な手順とアドバイスを提供します：</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_7_to_8">Proxmox VE 7から8へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_6.x_to_7.0">Proxmox VE 6から7へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_5.x_to_6.0">Proxmox VE 5から6へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_4.x_to_5.0">Proxmox VE 4から5へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_3.x_to_4.0">Proxmox VE 3から4へのアップグレード</a></p>
</li>
</ul></div>
</li>
<li>
<p><em>
LXC vs LXD vs Proxmox Containers vs Docker</em></p>
<p>
LXCは、Linuxカーネルのコンテナ機能のユーザー空間インターフェイスです。強力なAPIとシンプルなツールにより、Linuxユーザーはシステムコンテナを簡単に作成・管理できます。LXCは、以前のOpenVZと同様に、<strong>システムの仮想化を</strong>目的としています。そのため、コンテナ内で完全な OS を実行することができ、ssh を使用してログインしたり、ユーザーを追加したり、apache を実行したりすることができます。</p>
<div class="paragraph">
<p>LXDはLXCの上に構築され、より優れた新しいユーザー体験を提供します。LXDは、<span class="monospaced">liblxcと</span>そのGoバインディングを通じてLXCを使用し、コンテナの作成と管理を行います。基本的には、LXCのツールやディストリビューションテンプレートシステムに代わるもので、ネットワーク経由で制御可能な機能が追加されています。</p></div>
<div class="paragraph">
<p>Proxmoxコンテナは、Proxmox Container Toolkit<span class="monospaced">(pct</span>)を使用して作成および管理されるコンテナを指します。また、<strong>システム仮想化を</strong>ターゲットとし、コンテナ提供の基盤としてLXCを使用します。Proxmox Container Toolkit<span class="monospaced">(pct</span>)はProxmox VEと緊密に連携しています。つまり、クラスタ・セットアップを認識し、QEMU 仮想マシン（VM）と同じネットワークおよびストレージ・リソースを使用できます。Proxmox VEのファイアウォールの使用、バックアップの作成と復元、HAフレームワークを使用したコンテナの管理も可能です。Proxmox VE APIを使用して、すべてをネットワーク経由で制御できます。</p></div>
<div class="paragraph">
<p>Dockerは、隔離された自己完結型の環境で<strong>単一の</strong>アプリケーションを実行することを目的としています。これらは一般的に「システムコンテナ」ではなく「アプリケーションコンテナ」と呼ばれています。Dockerインスタンスは、Docker Engineコマンドラインインタフェースを使用してホストから管理します。Proxmox VEホスト上で直接Dockerを実行することは推奨されません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">アプリケーションコンテナ、例えば<em>Docker</em>イメージを実行する場合は、Proxmox QEMU VM内で実行するのが最適です。</td>
</tr></table>
</div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography">
21.参考文献<a class="headerlink" href="#_bibliography" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="ulist bibliography"><div class="title">プロックスモックスVEに関する書籍</div><ul>
<li>
<p>
<a id="Ahmed16"></a>[<em>Proxmox を使いこなす - 第 3 版</em>. Packt Publishing, 2017. ISBN 978-1788397605.</p>
</li>
<li>
<p>
<a id="Ahmed15"></a>[<em>Proxmox Cookbook</em>. Packt Publishing, 2015. ISBN 978-1783980901.</p>
</li>
<li>
<p>
<a id="Cheng14"></a>[Cheng14】Simon M.C. Cheng.<em>Proxmox High Availability</em>. Packt Publishing, 2014.</p>
</li>
<li>
<p>
<a id="Goldman16"></a>[Goldman16] Rik Goldman.<em>Learning Proxmox VE</em>. Packt Publishing, 2016.</p>
</li>
<li>
<p>
<a id="Surber16"></a>[Surber16]]リー・R・サーバー.<em>仮想化大全：</em>Linux Solutions (LRS-TEK), 2016. ASIN B01BBVQZT6</p>
</li>
</ul></div>
<div class="ulist bibliography"><div class="title">関連技術に関する書籍</div><ul>
<li>
<p>
<a id="Hertzog13"></a>[Hertzog13] Raphaël Hertzog, Roland Mas., Freexian SARL<a href="https://debian-handbook.info/get">The Debian Administrator's Handbook：Debian</a> 管理<a href="https://debian-handbook.info/get">者ハンドブック: Debian Bullseye の発見から習得まで</a>, Freexian, 2021.</p>
</li>
<li>
<p>
<a id="Bir96"></a>[Bir96] Kenneth P. Birman.<em>Building Secure and Reliable Network Applications</em>. Manning Publications Co, 1996.</p>
</li>
<li>
<p>
<a id="Walsh10"></a>[<em>DocBook 5: The Definitive Guide</em>. オライリー＆アソシエイツ, 2010.</p>
</li>
<li>
<p>
<a id="Richardson07"></a>[Richardson07] Leonard Richardson &amp; Sam Ruby.<em>RESTful Web Services</em>. O'Reilly Media, 2007.</p>
</li>
<li>
<p>
<a id="Singh15"></a>[Singh15] Karan Singh.<em>Learning Ceph</em>. Packt Publishing, 2015. ISBN 978-1783985623</p>
</li>
<li>
<p>
<a id="Singh16"></a>[Singh16] Karan Signh.<em>Ceph Cookbook</em>Packt Publishing, 2016.</p>
</li>
<li>
<p>
<a id="Mauerer08"></a>[Mauerer08] Wolfgang Mauerer.<em>Professional Linux Kernel Architecture</em>. John Wiley &amp; Sons, 2008. ISBN 978-0470343432</p>
</li>
<li>
<p>
<a id="Loshin03"></a>[Loshin03] Pete Loshin,<em>IPv6: Theory, Protocol, and Practice, 2nd Edition</em>. Morgan Kaufmann, 2003. ISBN 978-1558608108.</p>
</li>
<li>
<p>
<a id="Loeliger12"></a>[Loeliger12] Jon Loeliger &amp; Matthew McCullough.<em>Version Control with Git</em>：Version Control with Git:<em>Powerful tools and techniques for collaborative software development</em>.</p>
</li>
<li>
<p>
<a id="Kreibich10"></a>[Kreibich10] Jay A. Kreibich.<em>Using SQLite</em>, O'Reilly and Associates, 2010.</p>
</li>
</ul></div>
<div class="ulist bibliography"><div class="title">関連書籍</div><ul>
<li>
<p>
<a id="Bessen09"></a>[Bessen09] James Bessen &amp; Michael J. Meurer,<em>Patent Failure：How Judges, Bureaucrats, and Lawyers Put Innovators at Risk</em>. Princeton Univ Press, 2009. ISBN 978-0691143217</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_command_line_interface">22.付録 A: コマンドライン・インターフェース</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cli_general">
<span>22.1.一般</span> <a class="headerlink" href="#cli_general" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>歴史的に統一されていないオプションのケーシングスタイルについては、<a href="#configuration_files_casing">設定ファイルの関連セクションを</a>参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="_output_format_options_span_class_monospaced_format_options_span">
<span>22.2.出力フォーマット・オプション<span class="monospaced">[FORMAT_OPTIONS]</span></span> <a class="headerlink" href="#_output_format_options_span_class_monospaced_format_options_span" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>出力形式は<span class="monospaced">--output-format</span>パラメータで指定できます。デフォルトのフォーマット・<em>テキストは</em>、ASCII-artを使用して表の周囲にきれいな枠線を描きます。さらに、いくつかの値を人間が読めるテキストに変換します：</p></div>
<div class="ulist"><ul>
<li>
<p>
Unix epoch は ISO 8601 日付文字列として表示されます。</p>
</li>
<li>
<p>
期間は週/日/時/分/秒のカウントで表示されます。</p>
</li>
<li>
<p>
バイトサイズの値には単位<span class="monospaced">（B</span>、<span class="monospaced">KiB</span>、<span class="monospaced">MiB</span>、<span class="monospaced">GiB</span>、<span class="monospaced">TiB</span>、<span class="monospaced">PiB</span>）が含まれます。</p>
</li>
<li>
<p>
分数はパーセントで表示されます。つまり、1.0は100%として表示されます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>オプション<span class="monospaced">--quietを</span>使えば、出力を完全に抑制することもできます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--human-readable</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
出力レンダリング関数を呼び出して、人間が読めるテキストを生成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noborder</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ボーダーを描画しません（<em>テキスト</em>形式の場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noheader</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
カラムヘッダを表示しない（<em>テキスト</em>形式の場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--output-format</span> <span class="monospaced">&lt;json | json-pretty | text | yaml&gt;</span><em>(default =</em> <span class="monospaced">text</span>)</dt>
<dd>
<p>
出力フォーマット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--quiet</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
印刷結果を抑制します。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesm_strong_proxmox_ve_storage_manager">
<span>22.3.<strong>pvesm</strong>- Proxmox VE Storage Manager</span> <a class="headerlink" href="#_strong_pvesm_strong_proxmox_ve_storage_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesm</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pvesm add</strong> <span class="monospaced">&lt;タイプ&gt; &lt;ストレージ&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>新しいストレージを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;type&gt;:</span> <span class="monospaced">&lt;btrfs | cephfs | cifs | dir | esxi | glusterfs | iscsi | iscsidirect | lvm | lvmthin | nfs | pbs | rbd | zfs | zfspool&gt; です。</span></dt>
<dd>
<p>
収納タイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--authsupported</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
認証済み。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ベース</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
基本音量。このボリュームは自動的にアクティブになります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ブロックサイズ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ブロックサイズ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">[clone=&lt;LIMIT&gt;] [,default=&lt;LIMIT&gt;] [,migration=&lt;LIMIT&gt;] [,move=&lt;LIMIT&gt;] [,restore=&lt;LIMIT&gt;</span>] となります<span class="monospaced">。</span></dt>
<dd>
<p>
各種操作のI/O帯域幅制限を設定（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コムスター_hg</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コムスタービューのホストグループ</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">comstar_tg</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コムスター・ビューの対象者</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--内容</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
許可されるコンテンツタイプ</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナには<em>rootdir が</em>、VM には<em>images</em>が使用されます。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コンテンツディレクトリ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
デフォルトのコンテンツタイプのディレクトリを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ベースパス作成</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ベース・ディレクトリが存在しない場合は作成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サブディレクトリの作成</span> <span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリにデフォルトの構造を入力します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--データプール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
データプール（消去符号化専用）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--データストア</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
Proxmox Backup Server データストア名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--無効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ストレージを無効にするフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
CIFS ドメイン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--encryption-key</span> <span class="monospaced">暗号化キーを含むファイル、または特別な値 "autogen"</span></dt>
<dd>
<p>
暗号化キー。パスフレーズなしで自動生成するには<em>autogenを</em>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--エクスポート</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
NFSエクスポートパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span> 
</dt>
<dd>
<p>
証明書の SHA 256 フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
デフォルトの画像フォーマット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-fs-name</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
Cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ヒューズ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
FUSEを使用してCephFSをマウントします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--is_mountpoint</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">no</span>)</dt>
<dd>
<p>
指定されたパスが外部で管理されているマウントポイントであると仮定し、マウントされていない場合はストレージをオフラインと見なします。ブーリアン（yes/no）値を使用すると、このフィールドでターゲットパスを使用するショートカットとして機能します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--iscsiprovider</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
iscsi プロバイダ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--</span> <span class="monospaced">Cephクラスタで認証するためのキーリングを含む</span><span class="monospaced">keyring</span> <span class="monospaced">ファイル</span></dt>
<dd>
<p>
クライアントのキーリングの内容（外部クラスタ用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--krbd</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
常にkrbdカーネルモジュールを通してrbdにアクセスしてください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lio_tpg</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
Linux LIOターゲット用ターゲットポータルグループ</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">PEM 形式のマスター公開鍵を含むファイル。</span></dt>
<dd>
<p>
Base64 エンコードされた PEM 形式の RSA 公開鍵。暗号化された各バックアップに追加される暗号化キーのコピーを暗号化するために使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max-protected-backups</span> <span class="monospaced">&lt;integer&gt; (-1 - N)</span><em>(デフォルト =</em> <span class="monospaced">Datastore.Allocate権限を持つユーザは無制限、その他のユーザは5</span>)</dt>
<dd>
<p>
ゲストごとの保護バックアップの最大数。無制限には<em>-1を</em>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-マックスファイル</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
非推奨: 代わりに<em>prune-backups を</em>使用してください。VMごとのバックアップファイルの最大数。無制限の場合は<em>0を</em>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mkdir</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリが存在しない場合は作成し、デフォルトのサブディレクトリを設定します。注意: 非推奨。代わりに<em>create-base-path</em>および<em>create-subdirs</em>オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--monhost</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
モニターのIPアドレス（外部クラスタの場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マウントポイント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--名前空間</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
名前空間。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nocow</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイルに NOCOW フラグを設定します。データのチェックサムを無効にし、直接I/Oを許可しながらデータエラーを回復できなくします。このフラグを使用するのは、基礎となるレイドシステムがない単一の ext4 フォーマットディスク上よりもデータを安全にする必要がない場合だけです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ノード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ストレージ構成が適用されるノードのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nowritecache</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ターゲットの書き込みキャッシュを無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--オプション</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
NFS/CIFS マウントオプション (<em>man nfs</em>または<em>man mount.cifs</em> を参照)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;password</span></dt>
<dd>
<p>
共有/データストアにアクセスするためのパスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パス</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ファイルシステムのパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ポート</span> <span class="monospaced">&lt;整数&gt; (1 - 65535</span>)</dt>
<dd>
<p>
デフォルトのポートの代わりにこのポートを使用してストレージに接続します（PBS や ESXi など）。NFS および CIFS の場合は、<em>options</em>オプションを使用して、マウントオプションでポートを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--portal</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
iSCSIポータル（IPまたはDNS名とオプションのポート）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--preallocation</span> <span class="monospaced">&lt;falloc | full | metadata | off&gt;</span><em>(デフォルト =</em> <span class="monospaced">メタデータ</span>)</dt>
<dd>
<p>
raw および qcow2 画像のプリアロケーションモード。raw 画像で<em>メタデータを</em>使用すると、preallocation=off になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--prune-backups</span> <span class="monospaced">[keep-all=&lt;1|0&gt;] [,keep-daily=&lt;N&gt;] [,keep-hourly=&lt;N&gt;] [,keep-last=&lt;N&gt;] [,keep-monthly=&lt;N&gt;] [,keep-weekly=&lt;N&gt;] [,keep-yearly=&lt;N&gt;</span>].</dt>
<dd>
<p>
間隔が短い保持オプションが最初に処理され、--keep-lastが一番最初に処理されます。各オプションは特定の期間をカバーします。この期間内のバックアップはこのオプションの対象となります。次のオプションは、すでにカバーされているバックアップを考慮せず、古いバックアップのみを考慮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--セーフリムーブ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
LVを削除するとデータがゼロになります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-saferemove_throughput</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ワイプスループット（cstream -tパラメータ値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーIPまたはDNS名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバー2</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップファイルサーバーのIPまたはDNS名。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">server</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--共有</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
CIFS 共有。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--共有</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
すべてのノード（または<em>nodes</em>オプションにリストされているすべて）で同じ内容を持つ単一のストレージであることを示します。ローカルストレージの内容が自動的に他のノードからアクセスできるようになるわけではなく、すでに共有されているストレージをそのようにマークするだけです！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-skip-cert-verification</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">false</span>)</dt>
<dd>
<p>
TLS証明書の検証を無効にし、完全に信頼できるネットワークでのみ有効にします！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbversion</span> <span class="monospaced">&lt;2.0 | 2.1 | 3 | 3.0 | 3.11 | default&gt;</span><em>(default =</em> <span class="monospaced">デフォルト</span>)</dt>
<dd>
<p>
SMBプロトコルのバージョン。<em>デフォルトでは</em>、設定されていない場合、クライアントとサーバーの両方でサポートされている最高のSMB2+バージョンをネゴシエートします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-スパース</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
スパースボリュームを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サブディレクトリ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
マウントするサブディレクトリ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ付きのみ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
<em>pve-vm-ID</em> でタグ付けされた論理ボリュームのみを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
iSCSI ターゲット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--シンプール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LVMシンプールLV名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--トランスポート</span> <span class="monospaced">&lt;rdma | tcp | unix&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
クラスタ・トランスポート：tcpまたはrdma</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ユーザー名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
RBD Id.</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vgname</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ボリュームグループ名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ボリューム</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
Glusterfsボリューム。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm alloc</strong> <span class="monospaced">&lt;storage&gt; &lt;vmid&gt; &lt;filename&gt; &lt;size&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ディスクイメージを割り当てます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
オーナーVMの指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ファイル名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
作成するファイル名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;サイズ&gt;です：</span> <span class="monospaced">\d+[MG]?</span>
</dt>
<dd>
<p>
キロバイト（1024バイト）単位のサイズ。オプションの接尾辞<em>M</em>（メガバイト、1024K）および<em>G</em>（ギガバイト、1024M）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;qcow2 | raw | subvol&gt;</span>.</dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">サイズ</span></td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm apiinfo</strong></p></div>
<div class="paragraph">
<p>APIVERとAPIAGEを返します。</p></div>
<div class="paragraph">
<p><strong>pvesm cifsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan cifs</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvesm export</strong> <span class="monospaced">&lt;ボリューム&gt; &lt;フォーマット&gt; &lt;ファイル名&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ボリュームのエクスポートに内部的に使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ボリューム&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;format&gt;:</span> <span class="monospaced">&lt;btrfs | qcow2+size | raw+size | tar+size | vmdk+size | zfs&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
ストリーム形式のエクスポート</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ファイル名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
保存先ファイル名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ベース</span> <span class="monospaced">(?^i:[a-z0-9_-]{1,40})</span></dt>
<dd>
<p>
から増分ストリームを開始するスナップショット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,40})</span> </dt>
<dd>
<p>
エクスポートするスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップショットリスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
転送するスナップショットの順序付きリスト</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-snapshots</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
中間スナップショットをストリームに含めるかどうか</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm extractconfig</strong> <span class="monospaced">&lt;ボリューム&gt;。</span></p></div>
<div class="paragraph">
<p>vzdumpバックアップアーカイブから設定を抽出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ボリューム&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm free</strong> <span class="monospaced">&lt;ボリューム&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>ボリュームの削除</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ボリューム&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ディレイ</span> <span class="monospaced">&lt;整数&gt; (1 - 30</span>)</dt>
<dd>
<p>
タスクが終了するまでの待ち時間。その時間内にタスクが終了した場合は<em>null を</em>返します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm glusterfsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan glusterfs</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvesm help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm import</strong> <span class="monospaced">&lt;volume&gt; &lt;format&gt; &lt;filename&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ボリュームのインポートに内部的に使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ボリューム&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;format&gt;:</span> <span class="monospaced">&lt;btrfs | qcow2+size | raw+size | tar+size | vmdk+size | zfs&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
インポートストリーム形式</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ファイル名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースファイル名。<em>stdinが</em>使用される場合、tcp://&lt;IPまたはCIDR&gt;フォーマットはTCP接続を、unix://PATH-TO-SOCKETフォーマットはUNIXソケットを入力として使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--allow-rename</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
要求されたボリュームIDがすでに存在する場合は、エラーをスローする代わりに新しいボリュームIDを選択します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ベース</span> <span class="monospaced">(?^i:[a-z0-9_-]{1,40})</span></dt>
<dd>
<p>
増分ストリームの基本スナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete-snapshot</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,80})</span> </dt>
<dd>
<p>
成功時に削除するスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,40})</span> </dt>
<dd>
<p>
ストリームにスナップショットが含まれている場合は、現在の状態のスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-snapshots</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストリームが中間スナップショットを含むかどうか</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm iscsiscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan iscsi</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvesm list</strong> <span class="monospaced">&lt;storage&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ストレージの内容を一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--内容</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このタイプのコンテンツのみをリストアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
このVMのイメージのみを表示</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm lvmscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan lvm</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvesm lvmthinscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan lvmthin</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvesm nfsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan nfs</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvesm パス</strong> <span class="monospaced">&lt;ボリューム</span></p></div>
<div class="paragraph">
<p>指定されたボリュームのファイルシステムのパスを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ボリューム&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm prune-backups</strong> <span class="monospaced">&lt;storage&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>バックアップを削除します。標準の命名スキームを使用しているもののみが考慮されます。 keepオプションが指定されていない場合は、ストレージ構成のものが使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ドライラン</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
刈り込まれるものだけを表示し、何も削除しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-all</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
すべてのバックアップを保持します。trueの場合、他のオプションと競合します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--キープ・デイリー</span> <span class="monospaced">&lt;N&gt;</span></dt>
<dd>
<p>
過去&lt;N&gt;日分のバックアップを保持します。1日に複数のバックアップがある場合は、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--キープ・アワー</span> <span class="monospaced">&lt;N</span></dt>
<dd>
<p>
最後の&lt;N&gt;異なる時間のバックアップを保持します。1時間に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-last</span> <span class="monospaced">&lt;N&gt;</span></dt>
<dd>
<p>
最後の&lt;N&gt;個のバックアップを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--キープマンスリー</span> <span class="monospaced">&lt;N</span></dt>
<dd>
<p>
過去&lt;N&gt;の異なる月のバックアップを保持します。1つの月に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--キープウィークリー</span> <span class="monospaced">&lt;N&gt;</span></dt>
<dd>
<p>
過去&lt;N&gt;週間分のバックアップを保持します。1週間に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--キープ・イヤー・リー</span> <span class="monospaced">&lt;N</span></dt>
<dd>
<p>
過去&lt;N&gt;年分のバックアップを保持します。一つの年に複数のバックアップがある場合、最新のものだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイプ</span> <span class="monospaced">&lt;lxc | qemu&gt;</span></dt>
<dd>
<p>
<em>qemu</em>または<em>lxcの</em>いずれか。このタイプのゲストのバックアップのみを考慮してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
このゲストのバックアップのみを考慮してください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm remove</strong> <span class="monospaced">&lt;ストレージ</span></p></div>
<div class="paragraph">
<p>ストレージ構成を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan cifs</strong> <span class="monospaced">&lt;server&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>リモート CIFS サーバーをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;サーバー&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーアドレス（名前またはIP）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
SMBドメイン（ワークグループ）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;password</span></dt>
<dd>
<p>
ユーザーパスワード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ユーザー名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー名</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan glusterfs</strong> <span class="monospaced">&lt;server&gt;</span></p></div>
<div class="paragraph">
<p>リモートのGlusterFSサーバをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;サーバー&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーアドレス（名前またはIP）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan iscsi</strong> <span class="monospaced">&lt;portal&gt;</span></p></div>
<div class="paragraph">
<p>リモートiSCSIサーバーをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ポータル&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
iSCSIポータル（IPまたはDNS名とオプションのポート）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan lvm</strong></p></div>
<div class="paragraph">
<p>ローカルLVMボリュームグループを一覧表示します。</p></div>
<div class="paragraph">
<p><strong>pvesmスキャン lvmthin</strong> <span class="monospaced">&lt;vg&gt;</span></p></div>
<div class="paragraph">
<p>ローカル LVM シンプールをリストします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vg&gt;：</span> <span class="monospaced">[a-zA-Z0-9\.\+\_][a-zA-Z0-9\.\+\_\-]+</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan nfs</strong> <span class="monospaced">&lt;server&gt;</span></p></div>
<div class="paragraph">
<p>リモート NFS サーバーをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;サーバー&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーのアドレス（名前またはIP）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan pbs</strong> <span class="monospaced">&lt;server&gt; &lt;username&gt; --password &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>リモートのProxmoxバックアップサーバをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;サーバー&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーのアドレス（名前またはIP）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザー名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー名またはAPIトークンID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span> 
</dt>
<dd>
<p>
証明書 SHA 256 フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザーパスワードまたはAPIトークンの秘密。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ポート</span> <span class="monospaced">&lt;整数&gt; (1 - 65535)</span><em>(デフォルト =</em> <span class="monospaced">8007</span>)</dt>
<dd>
<p>
オプションのポート。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan zfs</strong></p></div>
<div class="paragraph">
<p>ローカルノードのzfsプールリストをスキャンします。</p></div>
<div class="paragraph">
<p><strong>pvesm set</strong> <span class="monospaced">&lt;storage&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ストレージ構成を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ブロックサイズ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ブロックサイズ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">[clone=&lt;LIMIT&gt;] [,default=&lt;LIMIT&gt;] [,migration=&lt;LIMIT&gt;] [,move=&lt;LIMIT&gt;] [,restore=&lt;LIMIT&gt;</span>] となります<span class="monospaced">。</span></dt>
<dd>
<p>
各種操作のI/O帯域幅制限を設定（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コムスター_hg</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コムスタービューのホストグループ</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">comstar_tg</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コムスター・ビューの対象者</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--内容</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
許可されるコンテンツタイプ</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナには<em>rootdir が</em>、VM には<em>images</em>が使用されます。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コンテンツディレクトリ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
デフォルトのコンテンツタイプのディレクトリを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ベースパス作成</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ベース・ディレクトリが存在しない場合は作成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サブディレクトリの作成</span> <span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリにデフォルトの構造を入力します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--データプール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
データプール（消去符号化専用）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在のコンフィギュレーション・ファイルのダイジェストが異なる場合、変更を防止します。これは同時修正を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--無効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ストレージを無効にするフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
CIFS ドメイン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--encryption-key</span> <span class="monospaced">暗号化キーを含むファイル、または特別な値 "autogen"</span></dt>
<dd>
<p>
暗号化キー。パスフレーズなしで自動生成するには<em>autogenを</em>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span> 
</dt>
<dd>
<p>
証明書 SHA 256 フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
デフォルトの画像フォーマット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-fs-name</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
Cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ヒューズ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
FUSEを使用してCephFSをマウントします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--is_mountpoint</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">no</span>)</dt>
<dd>
<p>
指定されたパスが外部で管理されているマウントポイントであると仮定し、マウントされていない場合はストレージをオフラインと見なします。ブーリアン（yes/no）値を使用すると、このフィールドでターゲットパスを使用するショートカットとして機能します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--</span> <span class="monospaced">Cephクラスタで認証するためのキーリングを含む</span><span class="monospaced">keyring</span> <span class="monospaced">ファイル</span></dt>
<dd>
<p>
クライアントのキーリングの内容（外部クラスタ用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--krbd</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
常にkrbdカーネルモジュールを通してrbdにアクセスしてください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lio_tpg</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
Linux LIOターゲット用ターゲットポータルグループ</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">PEM 形式のマスター公開鍵を含むファイル。</span></dt>
<dd>
<p>
Base64 エンコードされた PEM 形式の RSA 公開鍵。暗号化された各バックアップに追加される暗号化キーのコピーを暗号化するために使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max-protected-backups</span> <span class="monospaced">&lt;integer&gt; (-1 - N)</span><em>(デフォルト =</em> <span class="monospaced">Datastore.Allocate権限を持つユーザは無制限、その他のユーザは5</span>)</dt>
<dd>
<p>
ゲストごとの保護バックアップの最大数。無制限には<em>-1を</em>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-マックスファイル</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
非推奨: 代わりに<em>prune-backups を</em>使用してください。VMごとのバックアップファイルの最大数。無制限の場合は<em>0を</em>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mkdir</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリが存在しない場合は作成し、デフォルトのサブディレクトリを設定します。注意: 非推奨。代わりに<em>create-base-path</em>および<em>create-subdirs</em>オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--monhost</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
モニターのIPアドレス（外部クラスタの場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マウントポイント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--名前空間</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
名前空間。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nocow</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイルに NOCOW フラグを設定します。データのチェックサムを無効にし、直接I/Oを許可しながらデータエラーを回復できなくします。このフラグを使用するのは、基礎となるレイドシステムがない単一の ext4 フォーマットディスク上よりもデータを安全にする必要がない場合だけです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ノード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ストレージ構成が適用されるノードのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nowritecache</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ターゲットの書き込みキャッシュを無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--オプション</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
NFS/CIFS マウントオプション (<em>man nfs</em>または<em>man mount.cifs</em> を参照)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;password</span></dt>
<dd>
<p>
共有/データストアにアクセスするためのパスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ポート</span> <span class="monospaced">&lt;整数&gt; (1 - 65535</span>)</dt>
<dd>
<p>
デフォルトのポートの代わりにこのポートを使用してストレージに接続します（PBS や ESXi など）。NFS および CIFS の場合は、<em>options</em>オプションを使用して、マウントオプションでポートを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--preallocation</span> <span class="monospaced">&lt;falloc | full | metadata | off&gt;</span><em>(デフォルト =</em> <span class="monospaced">メタデータ</span>)</dt>
<dd>
<p>
raw および qcow2 画像のプリアロケーションモード。raw 画像で<em>メタデータを</em>使用すると、preallocation=off になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--prune-backups</span> <span class="monospaced">[keep-all=&lt;1|0&gt;] [,keep-daily=&lt;N&gt;] [,keep-hourly=&lt;N&gt;] [,keep-last=&lt;N&gt;] [,keep-monthly=&lt;N&gt;] [,keep-weekly=&lt;N&gt;] [,keep-yearly=&lt;N&gt;</span>].</dt>
<dd>
<p>
間隔が短い保持オプションが最初に処理され、--keep-lastが一番最初に処理されます。各オプションは特定の期間をカバーします。この期間内のバックアップはこのオプションの対象となります。次のオプションは、すでにカバーされているバックアップを考慮せず、古いバックアップのみを考慮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--セーフリムーブ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
LVを削除するとデータがゼロになります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-saferemove_throughput</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ワイプスループット（cstream -tパラメータ値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーIPまたはDNS名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバー2</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップファイルサーバーのIPまたはDNS名。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">server</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--共有</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
すべてのノード（または<em>nodes</em>オプションにリストされているすべて）で同じ内容を持つ単一のストレージであることを示します。ローカルストレージの内容が自動的に他のノードからアクセスできるようになるわけではなく、すでに共有されているストレージをそのようにマークするだけです！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-skip-cert-verification</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">false</span>)</dt>
<dd>
<p>
TLS証明書の検証を無効にし、完全に信頼できるネットワークでのみ有効にします！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbversion</span> <span class="monospaced">&lt;2.0 | 2.1 | 3 | 3.0 | 3.11 | default&gt;</span><em>(default =</em> <span class="monospaced">デフォルト</span>)</dt>
<dd>
<p>
SMBプロトコルのバージョン。<em>デフォルトでは</em>、設定されていない場合、クライアントとサーバーの両方でサポートされている最高のSMB2+バージョンをネゴシエートします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-スパース</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
スパースボリュームを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サブディレクトリ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
マウントするサブディレクトリ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ付きのみ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
<em>pve-vm-ID</em> でタグ付けされた論理ボリュームのみを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--トランスポート</span> <span class="monospaced">&lt;rdma | tcp | unix&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
クラスタ・トランスポート：tcpまたはrdma</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ユーザー名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
RBD Id.</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm status</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>すべてのデータストアのステータスを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--内容</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このコンテンツタイプをサポートするストアのみをリストします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--有効</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
有効になっている (設定で無効になっていない) ストアのみをリストします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
フォーマットに関する情報</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
指定したストレージのステータスのみを一覧表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ターゲットが<em>ノードと</em>異なる場合、この<em>ノードと</em>指定された<em>ターゲット</em>ノードでアクセス可能な共有ストレージのみがリストされます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm zfsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan zfs</em> のエイリアス。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesubscription_strong_proxmox_ve_subscription_manager">
<span>22.4.<strong>pvesubscription</strong>- Proxmox VE サブスクリプションマネージャ</span> <a class="headerlink" href="#_strong_pvesubscription_strong_proxmox_ve_subscription_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesubscription</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pvesubscriptionの削除</strong></p></div>
<div class="paragraph">
<p>このノードの購読キーを削除します。</p></div>
<div class="paragraph">
<p><strong>サブスクリプション取得</strong></p></div>
<div class="paragraph">
<p>購読情報を読む</p></div>
<div class="paragraph">
<p><strong>pvesubscriptionヘルプ</strong> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesubscriptionセット</strong> <span class="monospaced">&lt;キー</span></p></div>
<div class="paragraph">
<p>購読キーを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;key&gt;：</span> <span class="monospaced">\s*pve([1248])([cbsp])-[0-9a-f]{10}\s*</span></dt>
<dd>
<p>
Proxmox VEサブスクリプションキー</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesubscription set-offline-key</strong> <span class="monospaced">&lt;data&gt;</span><strong>を設定します。</strong></p></div>
<div class="paragraph">
<p>内部使用のみです！オフラインキーを設定するには、代わりに proxmox-offline-mirror-helper パッケージを使ってください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;データ&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
署名された購読情報の塊</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesubscription update</strong> <span class="monospaced">[OPTIONS]を実行します。</span></p></div>
<div class="paragraph">
<p>購読情報を更新しました。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ローカルのキャッシュがまだ有効であっても、常にサーバーに接続します。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pveperf_strong_proxmox_ve_benchmark_script">
<span>22.5.<strong>pveperf</strong>- Proxmox VE ベンチマークスクリプト</span> <a class="headerlink" href="#_strong_pveperf_strong_proxmox_ve_benchmark_script" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveperf</strong> <span class="monospaced">[PATH］</span></p></div>
</div>
<div class="sect2">
<h3 id="_strong_pveceph_strong_manage_ceph_services_on_proxmox_ve_nodes">
<span>22.6.<strong>pveceph</strong>- Proxmox VE ノードで CEPH サービスを管理</span> <a class="headerlink" href="#_strong_pveceph_strong_manage_ceph_services_on_proxmox_ve_nodes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveceph</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pveceph createmgr</strong></p></div>
<div class="paragraph">
<p><em>pveceph mgr create</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>ヴェセフ・クリエイトモン</strong></p></div>
<div class="paragraph">
<p><em>pveceph mon create</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>プベケフ・クリエイト・オスド</strong></p></div>
<div class="paragraph">
<p><em>pveceph osd create</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pvecephはプールを作成します。</strong></p></div>
<div class="paragraph">
<p><em>pveceph pool create</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>ヴェーセフ・デストロイムグ</strong></p></div>
<div class="paragraph">
<p><em>pveceph mgr destroy</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>プヴェセフ・デストロイモン</strong></p></div>
<div class="paragraph">
<p><em>pveceph mon destroy</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>ヴェセフ・デストロエスディー</strong></p></div>
<div class="paragraph">
<p><em>pveceph osd destroy</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>プベセフ・デストロイプール</strong></p></div>
<div class="paragraph">
<p><em>pveceph pool destroy</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pveceph fs create</strong> <span class="monospaced">[OPTIONS]</span><strong>(pveceph fs create</strong> <span class="monospaced">[OPTIONS])</span></p></div>
<div class="paragraph">
<p>Cephファイルシステムの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--add-storage</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
作成されたCephFSをこのクラスタのストレージとして構成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">cephfs</span>)</dt>
<dd>
<p>
cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num</span> <span class="monospaced">&lt;整数&gt; (8 - 32768)</span><em>(デフォルト =</em> <span class="monospaced">128</span>)</dt>
<dd>
<p>
バッキング・データ・プールの配置グループ数。メタデータ・プールはこの4分の1を使用します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph fs destroy</strong> <span class="monospaced">&lt;name&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>Cephファイルシステムの破棄</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;名前&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove-pools</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この fs に設定されているデータとメタデータのプールを削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove-storages</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この fs 用に構成された pveceph 管理ストレージをすべて削除します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph help</strong> <span class="monospaced">[OPTIONS] (オプション)</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph init</strong> <span class="monospaced">[OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p>cephの初期デフォルト構成を作成し、シンボリックリンクを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--cluster-network</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
独立したクラスタネットワークを宣言し、OSDはハートビート、オブジェクトレプリケーション、リカバリのトラフィックをルーティングします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション：<span class="monospaced">ネットワーク</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable_cephx</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
cephx認証を無効にします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">cephxは中間者攻撃から保護するセキュリティ機能です。ネットワークがプライベートな場合にのみ、cephxの無効化を検討してください！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
--<span class="monospaced">min_size</span> <span class="monospaced">&lt;整数&gt; (1 - 7)</span><em>(デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
I/Oを許可するために、オブジェクトごとに利用可能なレプリカの最小数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネットワーク</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
すべてのceph関連トラフィックに特定のネットワークを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_bits</span> <span class="monospaced">&lt;整数&gt; (6 - 14)</span><em>(デフォルト =</em> <span class="monospaced">6</span>)</dt>
<dd>
<p>
配置グループのデフォルト数を指定するために使用します。</p>
<div class="paragraph">
<p>非推奨。この設定は、最近のCephバージョンで非推奨になりました。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サイズ</span> <span class="monospaced">&lt;整数&gt; (1 - 7)</span><em>(デフォルト =</em> <span class="monospaced">3</span>)</dt>
<dd>
<p>
オブジェクトあたりの目標レプリカ数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph install</strong> <span class="monospaced">[OPTIONS] (オプション)</span></p></div>
<div class="paragraph">
<p>ceph関連パッケージをインストールします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--allow-experimental</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
実験的バージョンを許可します。注意して使用してください！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--リポジトリ</span> <span class="monospaced">&lt;enterprise | no-subscription | test&gt;</span><em>(デフォルト =</em> <span class="monospaced">enterprise</span>)</dt>
<dd>
<p>
使用するCephリポジトリ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--バージョン</span> <span class="monospaced">&lt;quincy | reef | squid&gt;</span><em>(デフォルト =</em> <span class="monospaced">quincy</span>)</dt>
<dd>
<p>
インストールするCephのバージョン。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち鞭打ち</strong></p></div>
<div class="paragraph">
<p><em>pveceph pool ls</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pveceph mds create</strong> <span class="monospaced">[OPTIONS] [オプション]</span>。</p></div>
<div class="paragraph">
<p>Cephメタデータサーバ(MDS)の作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--hotstandby</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ceph-mdsデーモンがアクティブなデータシートのログをポーリングして再生するかどうかを決定します。データシートの障害時の切り替えが高速化されますが、アイドルリソースがより多く必要になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?</span><em>(default =</em> <span class="monospaced">nodename</span>)</dt>
<dd>
<p>
省略時はノード名と同じ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mds destroy</strong> <span class="monospaced">&lt;名前&gt;。</span></p></div>
<div class="paragraph">
<p>Cephメタデータサーバの破棄</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;name&gt;：</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
mdsの名前（ID）</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mgr create</strong> <span class="monospaced">[OPTIONS] [オプション]</span>。</p></div>
<div class="paragraph">
<p>Ceph Managerの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span> </dt>
<dd>
<p>
省略時はノード名と同じ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mgr destroy</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>Ceph Managerを破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
マネージャーのID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mon create</strong> <span class="monospaced">[OPTIONS]を</span><strong>作成します。</strong></p></div>
<div class="paragraph">
<p>Cephモニタとマネージャの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--モン・アドレス</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
自動検出されたモニタIPアドレスを上書きします。Cephのパブリックネットワーク内にある必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--monid</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span> </dt>
<dd>
<p>
省略時はノード名と同じ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph モンを破壊する</strong> <span class="monospaced">&lt;monid</span></p></div>
<div class="paragraph">
<p>Ceph MonitorとManagerを破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;monid&gt;：</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
モニターID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph osd create</strong> <span class="monospaced">&lt;dev&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>OSDの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;dev&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ブロックデバイス名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-crush-device-class</span> <span class="monospaced">&lt;文字列&gt;。</span></dt>
<dd>
<p>
OSDのデバイスクラスをクラッシュで設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--db_dev</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
block.db のブロックデバイス名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--db_dev_size</span> <span class="monospaced">&lt;number&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">bluestore_block_db_size または OSD サイズの 10%</span>)</dt>
<dd>
<p>
block.dbのGiB単位のサイズ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">db_dev</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--暗号化</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
OSDの暗号化を有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--osds-per-device</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
物理デバイスごとのOSDサービス。高速な NVMe デバイスにのみ有効です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--wal_dev</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
block.walのブロックデバイス名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--wal_dev_size</span> <span class="monospaced">&lt;number&gt; (0.5 - N)</span><em>(デフォルト =</em> <span class="monospaced">bluestore_block_wal_size または OSD サイズの 1%</span>)</dt>
<dd>
<p>
block.walのGiBサイズ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">wal_dev</span></td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph osd destroy</strong> <span class="monospaced">&lt;osdid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>OSDの破棄</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;osdid&gt;:</span> <span class="monospaced">&lt;整数</span></dt>
<dd>
<p>
OSD ID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--クリーンアップ</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
もしセットされていれば、パーティションテーブルのエントリーを削除します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph osd details</strong> <span class="monospaced">&lt;osdid&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>OSDの詳細を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;osdid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OSDのID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
json-pretty 出力形式と同じです。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool create</strong> <span class="monospaced">&lt;name&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>Cephプールの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;名前&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プールの名前。一意でなければなりません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--add_storages</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0; データ消去プールの場合: 1</span>)</dt>
<dd>
<p>
新しいプールを使用してVMとCTストレージを構成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--アプリケーション</span> <span class="monospaced">&lt;cephfs | rbd | rgw&gt;</span><em>(デフォルト =</em> <span class="monospaced">rbd</span>)</dt>
<dd>
<p>
プールの応用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-crush_rule（クラッシュルール）</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ内のオブジェクト配置のマッピングに使用するルール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--erasure-coding</span> <span class="monospaced">k=&lt;integer&gt; ,m=&lt;integer&gt; [,device-class=&lt;class&gt;] [,failure-domain=&lt;domain&gt;] [,profile=&lt;profile&gt;</span>]。</dt>
<dd>
<p>
RBD用の消去コード化プールと、それに付随するメタデータストレージ用の複製プールを作成します。ECでは、共通のcephオプション<em>size</em>、<em>min_size</em>、<em>crush_rule</em>パラメータがメタデータプールに適用されます。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">min_size</span> <span class="monospaced">&lt;整数&gt; (1 - 7)</span><em>(デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
オブジェクトあたりの最小レプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_autoscale_mode</span> <span class="monospaced">&lt;off | on | warn&gt;</span><em>(デフォルト =</em> <span class="monospaced">warn</span>)</dt>
<dd>
<p>
プールの自動PGスケーリングモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num</span> <span class="monospaced">&lt;整数&gt; (1 - 32768)</span><em>(デフォルト =</em> <span class="monospaced">128</span>)</dt>
<dd>
<p>
配置グループの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num_min</span> <span class="monospaced">&lt;整数&gt; (-N - 32768</span>)</dt>
<dd>
<p>
配置グループの最小数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サイズ</span> <span class="monospaced">&lt;整数&gt; (1 - 7)</span><em>(デフォルト =</em> <span class="monospaced">3</span>)</dt>
<dd>
<p>
オブジェクトごとのレプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target_size</span> <span class="monospaced">^(￢d+(￢d+)?)([KMGT])?$?</span></dt>
<dd>
<p>
PGオートスケーラのプールの推定目標サイズ。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">target_size_ratio</span> <span class="monospaced">&lt;数値&gt; を指定します。</span></dt>
<dd>
<p>
PGオートスケーラのプールの推定目標比率。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool destroy</strong> <span class="monospaced">&lt;name&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>プールを破壊</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;名前&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プールの名前。一意でなければなりません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
trueの場合、使用中であってもプールを破棄します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_ecprofile</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
消去コード・プロファイルを削除します。該当する場合、デフォルトは true です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_storages</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このプールに設定されているすべての pveceph 管理ストレージを削除します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool get</strong> <span class="monospaced">&lt;name&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p>現在のプールの状態を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;名前&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プールの名前。一意でなければなりません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
有効にすると、追加データ（統計など）が表示されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool ls</strong> <span class="monospaced">[FORMAT_OPTIONS] です</span><strong>。</strong></p></div>
<div class="paragraph">
<p>すべてのプールとその設定 (POST/PUT エンドポイントで設定可能) を一覧表示します。</p></div>
<div class="paragraph">
<p><strong>pveceph pool set</strong> <span class="monospaced">&lt;name&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>POOL設定の変更</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;名前&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プールの名前。一意でなければなりません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--application</span> <span class="monospaced">&lt;cephfs | rbd | rgw&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
プールの応用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-crush_rule（クラッシュルール）</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ内のオブジェクト配置のマッピングに使用するルール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--最小サイズ</span> <span class="monospaced">&lt;整数&gt; (1 - 7</span>)</dt>
<dd>
<p>
オブジェクトあたりの最小レプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_autoscale_mode</span> <span class="monospaced">&lt;off | on | warn&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
プールの自動PGスケーリングモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num</span> <span class="monospaced">&lt;整数&gt; (1 - 32768</span>)</dt>
<dd>
<p>
配置グループの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num_min</span> <span class="monospaced">&lt;整数&gt; (-N - 32768</span>)</dt>
<dd>
<p>
配置グループの最小数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サイズ</span> <span class="monospaced">&lt;整数&gt; (1 - 7</span>)</dt>
<dd>
<p>
オブジェクトごとのレプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target_size</span> <span class="monospaced">^(￢d+(￢d+)?)([KMGT])?$?</span></dt>
<dd>
<p>
PGオートスケーラのプールの推定目標サイズ。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">target_size_ratio</span> <span class="monospaced">&lt;数値&gt; を指定します。</span></dt>
<dd>
<p>
PGオートスケーラのプールの推定目標比率。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph purge</strong> <span class="monospaced">[OPTIONS] (</span><strong>パージ・</strong> <span class="monospaced">オプション)</span></p></div>
<div class="paragraph">
<p>ceph関連のデータと構成ファイルを破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--クラッシュ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
さらに、/var/lib/ceph/crashのCephクラッシュログをパージします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ログ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
さらに、/var/log/cephのCephログをパージします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph start</strong> <span class="monospaced">[OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p>cephサービスを開始します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--service</span> <span class="monospaced">(ceph|mon|mds|osd|mgr)(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)</span><em>(default =</em> <span class="monospaced">ceph.target</span> <span class="monospaced">)?</span></dt>
<dd>
<p>
Cephサービス名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecephステータス</strong></p></div>
<div class="paragraph">
<p>Cephのステータスを取得します。</p></div>
<div class="paragraph">
<p><strong>pveceph stop</strong> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>cephサービスを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--service</span> <span class="monospaced">(ceph|mon|mds|osd|mgr)(\.[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?)</span><em>(default =</em> <span class="monospaced">ceph.target</span> <span class="monospaced">)?</span></dt>
<dd>
<p>
Cephサービス名。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvenode_strong_proxmox_ve_node_management">
<span>22.7.<strong>pvenode</strong>- Proxmox VE ノード管理</span> <a class="headerlink" href="#_strong_pvenode_strong_proxmox_ve_node_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvenode</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pvenode acme account deactivate</strong> <span class="monospaced">[&lt;name&gt;]</span><strong>(アクメアカウントの無効化)</strong></p></div>
<div class="paragraph">
<p>CAで既存のACMEアカウントを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;name&gt;:</span> <span class="monospaced">&lt;名前&gt;</span><em>(デフォルト =</em> <span class="monospaced">デフォルト</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme account info</strong> <span class="monospaced">[&lt;name&gt;]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>既存のACMEアカウント情報を返します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;name&gt;:</span> <span class="monospaced">&lt;名前&gt;</span><em>(デフォルト =</em> <span class="monospaced">デフォルト</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acmeアカウントリスト</strong></p></div>
<div class="paragraph">
<p>ACMEAccount インデックス。</p></div>
<div class="paragraph">
<p><strong>pvenode acme account register</strong> <span class="monospaced">[&lt;name&gt;] {&lt;contact&gt;}</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>互換性のあるCAに新しいACMEアカウントを登録します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;name&gt;:</span> <span class="monospaced">&lt;名前&gt;</span><em>(デフォルト =</em> <span class="monospaced">デフォルト</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;連絡先&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
連絡先メールアドレス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ディレクトリ</span> <span class="monospaced">^https?://.*.</span></dt>
<dd>
<p>
ACME CA ディレクトリエンドポイントの URL。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme account update</strong> <span class="monospaced">[&lt;name&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>既存の ACME アカウント情報を CA で更新します。注意：新しいアカウント情報を指定しないと、更新がトリガされます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;name&gt;:</span> <span class="monospaced">&lt;名前&gt;</span><em>(デフォルト =</em> <span class="monospaced">デフォルト</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--連絡先</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
連絡先メールアドレス</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme cert order</strong> <span class="monospaced">[OPTIONS]</span><strong>(アクメ証明書注文</strong> <span class="monospaced">)</span></p></div>
<div class="paragraph">
<p>ACME 互換の CA に新しい証明書を注文します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
既存のカスタム証明書を上書きします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme cert renew</strong> <span class="monospaced">[OPTIONS]</span><strong>(アクメ証明書の更新</strong> <span class="monospaced">)</span></p></div>
<div class="paragraph">
<p>CA から既存の証明書を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
有効期限が30日以上先の場合でも、強制的に更新されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme 認証取り消し</strong></p></div>
<div class="paragraph">
<p>CA から既存の証明書を失効させます。</p></div>
<div class="paragraph">
<p><strong>pvenode acme plugin add</strong> <span class="monospaced">&lt;type&gt; &lt;id&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ACMEプラグインの設定を追加します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;タイプ&gt;:</span> <span class="monospaced">&lt;dns | standalone&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
ACMEのチャレンジタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ACMEプラグインID名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--api</span> <span class="monospaced">&lt;1984hosting | acmedns | acmeproxy | active24 | ad | ali | anx | artfiles | arvan | aurora | autodns | aws | azion | azure | bookmyname | bunny | cf | clouddns | cloudns| cn｜conoha｜constellix｜cpanel｜curanet｜cyon｜da｜ddnss｜desec｜df｜dgon｜dnsexit｜dnshome｜dnsimple｜dnsservices｜do｜doapi｜domeneshop｜dp｜dpi| dreamhost | duckdns | durabledns | dyn | dynu | dynv6 | easydns | edgedns | euserv | exoscale | fornex | freedns | gandi_livedns | gcloud | gcore | gd | geoscaling| googledomains | he | hetzner | hexonet | hostingde | huaweicloud | infoblox | infomaniak | internetbs | inwx | ionos | ipv64 | ispconfig | jd | joker | kappernet | kas| kinghost|knot|la| leaseweb|lexicon|linode|linode_v4|loopia|lua|maradns|me|miab|misaka|myapi|mydevil|mydnsjp|mythic_beasts|namecheap| namecom | namesilo | nanelo | nederhost | neodigit | netcup | netlify | nic | njalla | nm | nsd | nsone | nsupdate | nw | oci | one | online | openprovider | openstack| opnsense｜ovh｜pdns｜pleskxml｜pointhq｜porkbun｜rackcorp｜rackspace｜rage4｜rcode0｜regru｜scaleway｜schlundtech｜selectel｜selfhost｜servercow｜simply｜tele3｜tencent｜transip｜udr｜ultra｜unoeuro｜variomedia｜veesp｜vercel｜vscale｜vultr｜websupport｜world4you｜yandex｜yc｜zilore｜zone｜zonomi&gt;。</span>
</dt>
<dd>
<p>
APIプラグイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--data</span> <span class="monospaced">1行に1つのキーと値のペアを持つファイルで、プラグイン設定に保存するためにbase64urlエンコードされます。</span>
</dt>
<dd>
<p>
DNSプラグインのデータ。(base64 エンコード)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--無効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
設定を無効にするフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ノード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--validation-delay</span> <span class="monospaced">&lt;integer&gt; (0 - 172800)</span><em>(デフォルト =</em> <span class="monospaced">30</span>)</dt>
<dd>
<p>
検証を要求する前に待つ、秒単位の追加遅延。DNS レコードの TTL が長い場合に対応できるようにします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme plugin config</strong> <span class="monospaced">&lt;id&gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span>です。</p></div>
<div class="paragraph">
<p>ACMEプラグインの設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ACMEプラグインインスタンスの一意な識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acmeプラグインリスト</strong> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS］</span></p></div>
<div class="paragraph">
<p>ACMEプラグインインデックス</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--タイプ</span> <span class="monospaced">&lt;dns | standalone&gt;</span></dt>
<dd>
<p>
特定のタイプのACMEプラグインのみをリストアップします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme プラグイン remove</strong> <span class="monospaced">&lt;id</span></p></div>
<div class="paragraph">
<p>ACMEプラグインの設定を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ACMEプラグインインスタンスの一意な識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme plugin set</strong> <span class="monospaced">&lt;id&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>。</p></div>
<div class="paragraph">
<p>ACMEプラグインの設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ACMEプラグインID名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--api</span> <span class="monospaced">&lt;1984hosting | acmedns | acmeproxy | active24 | ad | ali | anx | artfiles | arvan | aurora | autodns | aws | azion | azure | bookmyname | bunny | cf | clouddns | cloudns| cn｜conoha｜constellix｜cpanel｜curanet｜cyon｜da｜ddnss｜desec｜df｜dgon｜dnsexit｜dnshome｜dnsimple｜dnsservices｜do｜doapi｜domeneshop｜dp｜dpi| dreamhost | duckdns | durabledns | dyn | dynu | dynv6 | easydns | edgedns | euserv | exoscale | fornex | freedns | gandi_livedns | gcloud | gcore | gd | geoscaling| googledomains | he | hetzner | hexonet | hostingde | huaweicloud | infoblox | infomaniak | internetbs | inwx | ionos | ipv64 | ispconfig | jd | joker | kappernet | kas| kinghost|knot|la| leaseweb|lexicon|linode|linode_v4|loopia|lua|maradns|me|miab|misaka|myapi|mydevil|mydnsjp|mythic_beasts|namecheap| namecom | namesilo | nanelo | nederhost | neodigit | netcup | netlify | nic | njalla | nm | nsd | nsone | nsupdate | nw | oci | one | online | openprovider | openstack| opnsense｜ovh｜pdns｜pleskxml｜pointhq｜porkbun｜rackcorp｜rackspace｜rage4｜rcode0｜regru｜scaleway｜schlundtech｜selectel｜selfhost｜servercow｜simply｜tele3｜tencent｜transip｜udr｜ultra｜unoeuro｜variomedia｜veesp｜vercel｜vscale｜vultr｜websupport｜world4you｜yandex｜yc｜zilore｜zone｜zonomi&gt;。</span>
</dt>
<dd>
<p>
APIプラグイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--data</span> <span class="monospaced">1行に1つのキーと値のペアを持つファイルで、プラグイン設定に保存するためにbase64urlエンコードされます。</span>
</dt>
<dd>
<p>
DNSプラグインのデータ。(base64 エンコード)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在のコンフィギュレーション・ファイルのダイジェストが異なる場合、変更を防止します。これは同時修正を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--無効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
設定を無効にするフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ノード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--validation-delay</span> <span class="monospaced">&lt;integer&gt; (0 - 172800)</span><em>(デフォルト =</em> <span class="monospaced">30</span>)</dt>
<dd>
<p>
検証を要求する前に待つ、秒単位の追加遅延。DNS レコードの TTL が長い場合に対応できるようにします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode cert delete</strong> <span class="monospaced">[&lt;restart&gt;]。</span></p></div>
<div class="paragraph">
<p>カスタム証明書チェーンとキーを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;restart&gt;:</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
pveproxyを再起動します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode証明書情報</strong> <span class="monospaced">[FORMAT_OPTIONS]</span>。</p></div>
<div class="paragraph">
<p>ノードの証明書に関する情報を取得します。</p></div>
<div class="paragraph">
<p><strong>pvenode cert set</strong> <span class="monospaced">&lt;ertificates&gt; [&lt;key&gt;]</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span> <span class="monospaced">.</span></p></div>
<div class="paragraph">
<p>カスタム証明書チェーンとキーをアップロードまたは更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;証明書&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
PEM エンコードされた証明書（チェーン）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;キー&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
PEM エンコードされた秘密鍵。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
既存のカスタムまたは ACME 証明書ファイルを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restart</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
pveproxyを再起動します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode config get</strong> <span class="monospaced">[OPTIONS] [OPTIONS]を</span><strong>取得します</strong>。</p></div>
<div class="paragraph">
<p>ノード設定オプションを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--プロパティ</span> <span class="monospaced">&lt;acme | acmedomain0 | acmedomain1 | acmedomain2 | acmedomain3 | acmedomain4 | acmedomain5 | description | startall-onboot-delay | wakeonlan&gt;</span><em>(デフォルト =</em> <span class="monospaced">all</span>)</dt>
<dd>
<p>
ノード構成から特定のプロパティのみを返します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode config set</strong> <span class="monospaced">[OPTIONS]を</span><strong>設定</strong> <span class="monospaced">します。</span></p></div>
<div class="paragraph">
<p>ノード設定オプションを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--acme</span> <span class="monospaced">[アカウント=&lt;名前&gt;] [,ドメイン=&lt;ドメイン[;ドメイン;...]&gt;]]。</span>
</dt>
<dd>
<p>
ノード固有のACME設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acmedomain[n]</span> <span class="monospaced">[domain=]&lt;domain&gt; [,alias=&lt;ドメイン&gt;] [,plugin=&lt;プラグイン設定名&gt;]]。</span></dt>
<dd>
<p>
ACMEドメインとバリデーションプラグイン</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ノードの説明。ウェブインターフェースのノードノートパネルに表示されます。これは設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルの SHA1 ダイジェストが異なる場合に変更を防止します。これは同時変更を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startall-onboot-delay</span> <span class="monospaced">&lt;integer&gt; (0 - 300)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
オンブートが有効なすべての仮想ゲストを開始するまでの初期遅延時間 (秒)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--wakeonlan</span> <span class="monospaced">[mac=]&lt;MACアドレス&gt; [,bind-interface=&lt;バインドインターフェース&gt;] [,broadcast-address=&lt;IPv4ブロードキャストアドレス&gt;</span>]。</dt>
<dd>
<p>
ノード固有のウェイクオンLAN設定。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenodeヘルプ</strong> <span class="monospaced">[オプション］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode migrateall</strong> <span class="monospaced">&lt;ターゲット&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>すべてのVMとコンテナを移行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
対象ノード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-最大労働者数</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
並列マイグレーションジョブの最大数。設定されていない場合は、datacenter.cfgの'max_workers'を使用します。両方を設定する必要があります！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
これらのIDをお持ちのお客様のみご検討ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ローカルディスクあり</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ローカルディスクのライブストレージ移行を有効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode startall</strong> <span class="monospaced">[OPTIONS] [OPTIONS]</span>。</p></div>
<div class="paragraph">
<p>このノードにあるすべてのVMとコンテナ（デフォルトではonboot=1のもののみ）を起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">オフ</span>)</dt>
<dd>
<p>
仮想ゲストの<em>onbootが</em>設定されていない、またはoffに設定されていてもstartコマンドを発行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンマで区切られたVMIDのリストからのゲストのみを考慮します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode stopall</strong> <span class="monospaced">[OPTIONS]</span><strong>(プベノード・ストップオール)</strong></p></div>
<div class="paragraph">
<p>すべてのVMとコンテナを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">-強制停止</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
タイムアウト後の強引なストップ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - 7200)</span><em>(デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
各ゲストシャットダウンタスクのタイムアウト。<span class="monospaced">強制停止に応じて</span>、シャットダウンは単に中止されるか、ハード停止が強制されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
これらのIDをお持ちのお客様のみご検討ください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenodeタスクリスト</strong> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS］</span></p></div>
<div class="paragraph">
<p>1つのノードのタスクリスト（終了したタスク）を読み取ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--エラー</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ステータスが ERROR のタスクのみをリストします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--リミット</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">50</span>)</dt>
<dd>
<p>
この量のタスクだけをリストアップしてください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--以降</span> <span class="monospaced">&lt;整数</span></dt>
<dd>
<p>
この UNIX エポック以降のタスクのみをリストします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソース</span> <span class="monospaced">&lt;アクティブ | すべて | アーカイブ&gt;</span><em>(デフォルト =</em> <span class="monospaced">アーカイブ</span>)</dt>
<dd>
<p>
アーカイブされたタスク、アクティブなタスク、すべてのタスクを一覧表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このオフセットから始まるタスクをリストします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--statusfilter</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
返されるべきタスク状態のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--typefilter</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このタイプのタスク（例：vzstart、vzdump）のみをリストアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;integer&gt;</span><span class="monospaced"> まで</span></dt>
<dd>
<p>
このUNIXエポックまでのタスクだけをリストアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--userfilter</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このユーザーのタスクのみをリストアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
この VM のタスクのみをリストします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode タスクログ</strong> <span class="monospaced">&lt;upid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>タスクログを読む</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;upid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
タスク固有のID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ダウンロード</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
タスクログファイルをダウンロードするかどうか。このパラメータは他のパラメータと併用することはできません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
タスクログを読むときは、この行から始めます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode タスクステータス</strong> <span class="monospaced">&lt;upid&gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>タスクのステータスを読み取ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;upid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
タスク固有のID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode wakeonlan</strong> <span class="monospaced">&lt;ノード&gt;。</span></p></div>
<div class="paragraph">
<p><em>wake on LAN</em>ネットワークパケットでノードをウェイクアップします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ウェイクオンLANパケットのターゲットノード</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesh_strong_shell_interface_for_the_proxmox_ve_api">
<span>22.8.<strong>pvesh</strong>- Proxmox VE API 用シェルインターフェース</span> <a class="headerlink" href="#_strong_pvesh_strong_shell_interface_for_the_proxmox_ve_api" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesh</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>pvesh create</strong> <span class="monospaced">&lt;api_path&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p>&lt;api_path&gt;でAPI POSTを呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;api_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
自動プロキシを無効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh delete</strong> <span class="monospaced">&lt;api_path&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>&lt;api_path&gt;でAPI DELETEを呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;api_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
自動プロキシを無効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh get</strong> <span class="monospaced">&lt;api_path&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>&lt;api_path&gt;でAPI GETを呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;api_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
自動プロキシを無効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh ls</strong> <span class="monospaced">&lt;api_path&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>&lt;api_path&gt;上の子オブジェクトを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;api_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
自動プロキシを無効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh set</strong> <span class="monospaced">&lt;api_path&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>&lt;api_path&gt;でAPI PUTを呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;api_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
自動プロキシを無効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh usage</strong> <span class="monospaced">&lt;api_path&gt;</span> <span class="monospaced">[OPTIONS]を</span><strong>使用します。</strong></p></div>
<div class="paragraph">
<p>&lt;api_path&gt; の API 使用情報を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;api_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コマンド</span> <span class="monospaced">&lt;create | delete | get | set&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
APIコマンド。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;boolean&gt;を</span><span class="monospaced">返します。</span></dt>
<dd>
<p>
返されたデータのスキーマを含みます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_qm_strong_qemu_kvm_virtual_machine_manager">
<span>22.9.<strong>qm</strong>- QEMU/KVM 仮想マシンマネージャ</span> <a class="headerlink" href="#_strong_qm_strong_qemu_kvm_virtual_machine_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>qm</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>qmエージェント</strong></p></div>
<div class="paragraph">
<p><em>qm guest cmd</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm cleanup</strong> <span class="monospaced">&lt;vmid&gt; &lt;clean-shutdown&gt; &lt;guest-requested&gt;</span>.</p></div>
<div class="paragraph">
<p>タップデバイスやvgpusなどのリソースをクリーンアップします。vm のシャットダウンやクラッシュなどの後に呼び出されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;クリーンシャットダウン&gt;:</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
qemuがクリーンにシャットダウンしたかどうかを示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ゲストリクエスト&gt;:</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
シャットダウンがゲストによって要求されたか、qmp を介して要求されたかを示します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm clone</strong> <span class="monospaced">&lt;vmid&gt; &lt;newid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシン/テンプレートのコピーを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;newid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
クローンの VMID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのクローン制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
新しいVMの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;qcow2 | raw | vmdk&gt;</span>.</dt>
<dd>
<p>
ファイルストレージのターゲットフォーマット。フルクローンの場合のみ有効です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
すべてのディスクの完全コピーを作成します。これは通常のVMをクローンするときに必ず行われます。VMテンプレートでは、デフォルトでリンクされたクローンを作成しようとします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
新しいVMの名前を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
新しいVMを指定したプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップネーム</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
フルクローンの対象ストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ターゲット・ノード。元のVMが共有ストレージ上にある場合にのみ許可されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm cloudinit dump</strong> <span class="monospaced">&lt;vmid&gt; &lt;type&gt;</span>です。</p></div>
<div class="paragraph">
<p>自動生成された cloudinit 設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;type&gt;:</span> <span class="monospaced">&lt;meta | network | user&gt;</span><span class="monospaced"> です。</span></dt>
<dd>
<p>
コンフィグタイプ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm cloudinit pending</strong> <span class="monospaced">&lt;vmid&gt;</span>です。</p></div>
<div class="paragraph">
<p>cloudinitコンフィギュレーションを現在の値と保留中の値の両方で取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm cloudinit update</strong> <span class="monospaced">&lt;vmid&gt;</span>です。</p></div>
<div class="paragraph">
<p>cloudinit設定ドライブを再生成して変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm config</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>保留中の構成変更を適用した仮想マシン構成を取得します。現在のコンフィギュレーションを取得するには、<em>current</em>パラメータを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--カレント</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
保留値ではなく）現在の値を取得します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップショット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたスナップショットから設定値を取得します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm create</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>。</p></div>
<div class="paragraph">
<p>仮想マシンを作成またはリストアします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acpi</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPI を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--アフィニティ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ゲストプロセスの実行に使用されるホストコアのリスト（例：0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--agent</span> <span class="monospaced">[enabled=]&lt;1|0&gt; [,freeze-fs-on-backup=&lt;1|0&gt;] [,fstrim_cloned_disks=&lt;1|0&gt;] [,type=&lt;virtio|isa&gt;</span>].</dt>
<dd>
<p>
QEMU ゲストエージェントとそのプロパティとの通信を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--amd-sev</span> <span class="monospaced">[type=]&lt;sev-type&gt;[,kernel-hashes=&lt;1|0&gt;][,no-debug=&lt;1|0&gt;][,no-key-sharing=&lt;1|0&gt;</span>]。</dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&lt;aarch64 | x86_64&gt;</span>.</dt>
<dd>
<p>
仮想プロセッサ・アーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--アーカイブ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップアーカイブ。.tarまたは.vmaファイルへのファイルシステムのパス（標準入力からデータをパイプする場合は<em>-を</em>使用）、またはproxmoxストレージのバックアップボリューム識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--args</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
kvm に渡される任意の引数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--audio0</span> <span class="monospaced">device=&lt;ich9-intel-hda|intel-hda|AC97&gt; [,driver=&lt;spice|none&gt;</span>].</dt>
<dd>
<p>
QXL/Spiceと組み合わせると便利です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autostart</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--バルーン</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
VM のターゲット RAM の量 (MiB 単位)。ゼロを使用すると、バロンドライバが無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bios</span> <span class="monospaced">&lt;ovmf | seabios&gt;</span><em>(デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOSの実装を選択します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--boot</span> <span class="monospaced">[[legacy=]&lt;[acdn]{1,4}&gt;][,order=&lt;デバイス[;デバイス...]&gt;]]。</span>
</dt>
<dd>
<p>
ゲストの起動順序を指定します。<em>order=</em>サブプロパティを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ブートディスク</span> <span class="monospaced">(ide|sata|scsi|virtio)◆d+.</span></dt>
<dd>
<p>
指定したディスクからの起動を有効にします。非推奨：代わりに<em>boot: order=foo;bar</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を復元</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">CDROM</span> <span class="monospaced">&lt;ボリューム</span></dt>
<dd>
<p>
これは -ide2 オプションのエイリアスです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cicustom</span> <span class="monospaced">[meta=&lt;volume&gt;] [,network=&lt;volume&gt;] [,user=&lt;volume&gt;] [,vendor=&lt;volume&gt;</span>].</dt>
<dd>
<p>
cloud-init：開始時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span></dt>
<dd>
<p>
cloud-init：ユーザーに割り当てるパスワード。一般的に、これを使うことは推奨されません。代わりに ssh 鍵を使います。また、古いバージョンの cloud-init はハッシュ化されたパスワードをサポートしていないことに注意しましょう。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--citype</span> <span class="monospaced">&lt;configdrive2 | nocloud | opennebula&gt;</span>.</dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは、設定されているオペレーティングシステムの種類<span class="monospaced">（ostype</span>.Linuxでは<span class="monospaced">nocloud</span>形式、Windowsでは<span class="monospaced">configdrive2を</span>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciupgrade</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 最初の起動後にパッケージの自動アップグレードを行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciuser</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：イメージに設定されているデフォルトユーザーの代わりに、sshキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コア数</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpu</span> <span class="monospaced">[[cputype=]&lt;string&gt;] ]</span>。<span class="monospaced">[,フラグ=&lt;+FLAG[;-FLAG...]&gt;] ]を指定します。[,hidden=&lt;1|0&gt;] [,hv-vendor-id=&lt;vendor-id&gt;] [,phys-bits=&lt;8-64|host&gt;] [,reported-model=&lt;enum&gt;</span>]。</dt>
<dd>
<p>
エミュレートされたCPUタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&lt;number&gt; (0 - 128)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&lt;integer&gt; (1 - 262144)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VM の CPU ウェイトは、cgroup v2 では [1, 10000] にクランプされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の説明。WebインターフェイスのVMのサマリーに表示されます。コンフィギュレーション・ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--efidisk0</span> <span class="monospaced">[file=]&lt;volume&gt; [,efitype=&lt;2m|4m&gt;] [,format=&lt;enum&gt;] [,import-from=&lt;ソースボリューム&gt;] [,pre-enrolled-keys=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;</span>].</dt>
<dd>
<p>
EFIバーを格納するディスクを設定します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。SIZE_IN_GiBはここでは無視され、代わりにデフォルトのEFIバーがボリュームにコピーされることに注意してください。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
既存のVMの上書きを許可します。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">archive</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--フリーズ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
起動時にCPUをフリーズ（<em>c</em>monitorコマンドで実行開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
vmsのライフタイムの様々なステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostpci[n]</span> <span class="monospaced">[[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;][,device-id=&lt;hex id&gt;] [,legacy-igd=&lt;1|0&gt;] [,mapping=&lt;mapping-id&gt;] [,mdev=&lt;string&gt;] [,pcie=&lt;1|0&gt;] [,rombar=&lt;1|0&gt; ] [,romfile=&lt;string&gt;] [,sub-devpci=&lt;1|0&gt;] [[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;]。] [,romfile=&lt;string&gt;] [,sub-device-id=&lt;hex id&gt;] [,sub-vendor-id=&lt;hex id&gt;] [,vendor-id=&lt;hex id&gt;] [,x-vga=&lt;1|0&gt;</span>] となります。</dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hotplug</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">ネットワーク,ディスク,USB</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効にします。これはカンマ区切りのホットプラグ機能のリストです：<em>ネットワーク</em>、<em>ディスク</em>、<em>CPU</em>、<em>メモリ</em>、<em>USB</em>、<em>cloudinit</em>。ホットプラグを完全に無効にするには<em>0を</em>使用します。値として<em>1 を</em>使用すると、デフォルトの<span class="monospaced">network、disk、usb</span> のエイリアスになります。USB ホットプラグは、マシンのバージョンが &gt;= 7.1 で、ostype l26 または Windows &gt; 7 のゲストで可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hugepages</span> <span class="monospaced">&lt;1024 | 2 | any&gt;</span>.</dt>
<dd>
<p>
hugepagesメモリの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ide[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソース・ボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;CDROM|DISK] [,model=&lt;model&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用します（nは0～3）。新しいボリュームを割り当てるには、特別な構文STORAGE_ID:SIZE_IN_GiBを使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--import-working-storage</span> <span class="monospaced">&lt;ストレージID&gt;</span>.</dt>
<dd>
<p>
インポート時に中間抽出ストレージとして使用されます<em>。</em>デフォルトはソースストレージです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ipconfig[n]</span> <span class="monospaced">[gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,ip=&lt;IPv4Format/CIDR&gt;] [,ip6=&lt;IPv6Format/CIDR&gt;].</span></dt>
<dd>
<p>
cloud-init：対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>特別な文字列<em>dhcpは</em>、DHCPを使用するIPアドレスに使用することができ、その場合、明示的なゲートウェイを提供する必要はありません。 IPv6の場合、特別な文字列<em>autoは</em>、ステートレス自動設定を使用するために使用することができます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-initが有効で、IPv4アドレスもIPv6アドレスも指定されていない場合、デフォルトでIPv4のdhcpを使用します。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ivshmem</span> <span class="monospaced">size=&lt;整数&gt; [,name=&lt;文字列&gt;</span>]<span class="monospaced"> です。</span></dt>
<dd>
<p>
VM間共有メモリ。VM間やホストとの直接通信に便利。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keephugepages</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepagesと一緒に使用します。有効にすると、hugepagesはVMシャットダウン後も削除されず、その後の起動に使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyboard</span> <span class="monospaced">&lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&gt;</span>.</dt>
<dd>
<p>
VNC サーバーのキーボードレイアウト。このオプションは一般的には必要なく、ゲストOS内で処理した方が良い場合が多いです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--kvm</span> <span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効/無効を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ライブリストア</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
バックグラウンドでインポートまたはリストアしている間、VMを直ちに起動します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ローカルタイム</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）をローカルタイムに設定します。<span class="monospaced">ostypeが</span>Microsoft Windows OSの場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&lt;バックアップ｜クローン｜作成｜マイグレーション｜ロールバック｜スナップショット｜スナップショット削除｜サスペンド｜一時停止&gt;。</span></dt>
<dd>
<p>
VMをロック/アンロックします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マシン</span> <span class="monospaced">[[タイプ=]&lt;マシンタイプ&gt;]] [</span>,viommu=&lt;intel|virtio&gt;]<span class="monospaced">]</span><span class="monospaced">。</span> <span class="monospaced">[viommu=&lt;intel|virtio&gt;</span>]です。</dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メモリ</span> <span class="monospaced">[current=]&lt;整数</span></dt>
<dd>
<p>
メモリ特性。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_downtime</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
マイグレーションの最大許容ダウンタイム（秒）を設定します。新しく汚れたRAMを転送する必要があるため、マイグレーションが最後まで収束しない場合、マイグレーションが収束するまで、この上限は自動的に段階的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_speed</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
マイグレーションの最大速度（MB/s）を設定します。値 0 は制限なしです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の名前を設定します。コンフィギュレーションWebインターフェイスでのみ使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネームサーバー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナの DNS サーバー IP アドレスを設定します。searchdomain も nameserver も設定されていない場合、Create は自動的にホストからの設定を使用します。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">net[n]</span> <span class="monospaced">[model=]&lt;enum&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,link_down=&lt;1|0&gt;] [,macaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,mtu=&lt;integer&gt;] [,queues=&lt;integer&gt;] [,rate=&lt;number&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr</span></dt>
<dd>
<p>
ネットワーク機器を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa[n]</span> <span class="monospaced">cpus=&lt;id[-id];...&gt; [,hostnodes=&lt;id[-id];...&gt;]を</span>指定します。<span class="monospaced">[,memory=&lt;number&gt;] [,policy=&lt;preferred|bind|interleave&gt;</span>]となります。</dt>
<dd>
<p>
NUMAトポロジー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時に VM を起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&gt;</span>.</dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parallel[n]</span> <span class="monospaced">/dev/parportd+|/dev/usb/lpd+</span></dt>
<dd>
<p>
ホスト・パラレル・デバイスをマップします（nは0～2）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VMを指定したプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクション</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VM の保護フラグを設定します。これにより、VM の削除とディスクの削除操作が無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--reboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可。<em>0</em>に設定すると、VM は再起動時に終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rng0</span> <span class="monospaced">[source=]&lt;/dev/urandom|/dev/random|/dev/hwrng&gt; [,max_bytes=&lt;integer&gt;] [,period=&lt;integer&gt;</span>].</dt>
<dd>
<p>
VirtIO ベースの乱数ジェネレータを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sata[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソース・ボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt; ]。] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>]。</dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用します（nは0～5）。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsi[n]</span> <span class="monospaced">[[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソースボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,product=&lt;product&gt;] [,queues=&lt;integer&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,scsiblock=&lt;1|0&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt; ]。] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,vendor=&lt;vendor&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用します（nは0～30）。新しいボリュームを割り当てるには、特別な構文STORAGE_ID:SIZE_IN_GiBを使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scihw</span> <span class="monospaced">&lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&gt;</span><em>(デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--検索ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-シリアル[n]</span> <span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアル・デバイスを作成（nは0～3）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shares</span> <span class="monospaced">&lt;integer&gt; (0 - 50000)</span><em>(デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
オート・バルーニングのメモリ・シェア量。この数値が大きいほど、このVMはより多くのメモリを取得します。数値は、他のすべての実行中のVMの重みに対する相対値です。ゼロを使用すると、オートバルーニングは無効になります。オートバルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbios1</span> <span class="monospaced">[base64=&lt;1|0&gt;] [,family=&lt;Base64エンコードされた文字列&gt;] [,manufacturer=&lt;Base64エンコードされた文字列&gt;] [,product=&lt;Base64エンコードされた文字列] [,serial=&lt;Base64エンコードされた文字列&gt;] [,sku=&lt;Base64エンコードされた文字列&gt;] [,uuid=&lt;UUID&gt;] [,version=&lt;Base64エンコードされた文字列&gt;</span>] と<span class="monospaced">なります</span>。</dt>
<dd>
<p>
SMBIOSタイプ1のフィールドを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smp</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPU数。代わりに -sockets オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソケット</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--spice_enhancements</span> <span class="monospaced">[foldersharing=&lt;1|0&gt;] [,videostreaming=&lt;off|all|filter&gt;</span>]。</dt>
<dd>
<p>
SPICE の追加機能拡張を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sshkeys</span> <span class="monospaced">&lt;ファイルパス</span></dt>
<dd>
<p>
cloud-init：公開 SSH 鍵を設定します (1 行に 1 つの鍵、OpenSSH 形式)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMの作成に成功したら、VMを起動します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startdate</span> <span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span><em>(default =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。有効な日付のフォーマットは'now'または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=d+] [,down=d+] `.</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
デフォルトのストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tablet</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスを有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM のタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tdf</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
時間ドリフト修正の有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--テンプレート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tpmstate0</span> <span class="monospaced">[ファイル=]&lt;ボリューム&gt; [,インポート元=&lt;ソースボリューム&gt;] [,サイズ=&lt;ディスクサイズ&gt;] [,バージョン=&lt;v1.2|v2.0&gt;]。</span></dt>
<dd>
<p>
TPMの状態を保存するDiskを設定します。フォーマットは<em>rawに</em>固定されています。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。SIZE_IN_GiBはここでは無視され、代わりに4MiBが使用されることに注意してください。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">archive</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[file=]&lt;volume&gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--usb[n]</span> <span class="monospaced">[[host=]&lt;HOSTUSBDEVICE|spice&gt;]の場合[,マッピング=&lt;マッピングID&gt;] [,usb3=&lt;1|0］</span></dt>
<dd>
<p>
USBデバイスを設定します（nは0～4、マシンのバージョンが7.1以上、かつostype l26またはwindows &gt; 7の場合、nは最大14まで）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vcpus</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされたvcpusの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vga</span> <span class="monospaced">[[タイプ=]&lt;enum&gt;]] [[</span>クリップボード<span class="monospaced">=&lt;</span>vnc<span class="monospaced">[クリップボード=&lt;vnc&gt;] [,メモリ=&lt;整数］</span></dt>
<dd>
<p>
VGAハードウェアを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtio[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソース・ボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,secs=&lt;integer&gt; ] [,serial=&lt;serial] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;&gt;] [,snapshot=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,secs=&lt;integer&gt;&gt;のように</span>指定します。</dt>
<dd>
<p>
ボリュームをVIRTIOハードディスクとして使用します（nは0～15）。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmgenid</span> <span class="monospaced">&lt;UUID&gt;</span><em>(デフォルト =</em> <span class="monospaced">1 (自動生成</span>))</dt>
<dd>
<p>
VM生成IDを設定します。作成または更新時に自動生成する場合は<em>1 を</em>使用し、明示的に無効にする場合は<em>0 を</em>渡します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstatestorage</span> <span class="monospaced">&lt;ストレージID&gt;。</span></dt>
<dd>
<p>
VM 状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--watchdog</span> <span class="monospaced">[[model=]&lt;i6300esb|ib700&gt;][アクション］</span></dt>
<dd>
<p>
仮想ハードウェア・ウォッチドッグ・デバイスを作成します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm delsnapshot</strong> <span class="monospaced">&lt;vmid&gt; &lt;snapname&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VMスナップショットを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;スナップ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ディスクスナップショットの削除に失敗した場合でも、設定ファイルから削除できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm destroy</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VM とすべての使用済み/所有ボリュームを破棄します。VM固有の権限とファイアウォールルールを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--destroy-unreferenced-disks</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、有効になっているすべてのストレージから、VMIDが一致し、設定内で参照されていないすべてのディスクを追加で破棄します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パージ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
バックアップ＆レプリケーションジョブやHAなどの構成からVMIDを削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk import</strong> <span class="monospaced">&lt;vmid&gt; &lt;source&gt; &lt;storage&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">.</span></p></div>
<div class="paragraph">
<p>VM の未使用ディスクとして外部ディスクイメージをインポート。イメージフォーマットは qemu-img(1) でサポートされている必要があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ソース&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
インポートするディスクイメージへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
対象ストレージID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;qcow2 | raw | vmdk&gt;</span>.</dt>
<dd>
<p>
対象フォーマット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットディスク</span> <span class="monospaced">&lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21| scsi22｜scsi23｜scsi24｜scsi25｜scsi26｜scsi27｜scsi28｜scsi29｜scsi3｜scsi30｜scsi4｜scsi5｜scsi6｜scsi7｜scsi8｜scsi9｜tpmstate0｜unused0｜unused1｜unused10｜unused100｜unused101｜unused102｜unused未使用103｜未使用104｜未使用105｜未使用106｜未使用107｜未使用108｜未使用109｜未使用11｜未使用110｜未使用111｜未使用112｜未使用113｜未使用114｜未使用115｜未使用116｜未使用117｜未使用118｜未使用119｜未使用119未使用12｜未使用120｜未使用121｜未使用122｜未使用123｜未使用124｜未使用125｜未使用126｜未使用127｜未使用128｜未使用129｜未使用13｜未使用130｜未使用131｜未使用132｜未使用133｜未使用134｜未使用135｜未使用136| 未使用137｜未使用138｜未使用139｜未使用14｜未使用140｜未使用141｜未使用142｜未使用143｜未使用144｜未使用145｜未使用146｜未使用147｜未使用148｜未使用149｜未使用15｜未使用150｜未使用151｜未使用152| 未使用153｜未使用154｜未使用155｜未使用156｜未使用157｜未使用158｜未使用159｜未使用16｜未使用160｜未使用161｜未使用162｜未使用163｜未使用164｜未使用165｜未使用166｜未使用167｜未使用168｜未使用169未使用17｜未使用170｜未使用171｜未使用172｜未使用173｜未使用174｜未使用175｜未使用176｜未使用177｜未使用178｜未使用179｜未使用18｜未使用180｜未使用181｜未使用182｜未使用183｜未使用184｜未使用185未使用186名｜未使用187名｜未使用188名｜未使用189名｜未使用189名｜未使用191名｜未使用192名｜未使用193名｜未使用194名｜未使用195名｜未使用196名｜未使用197名｜未使用198名｜未使用199名｜未使用2名｜未使用20名｜未使用200名｜未使用201名未使用202|未使用203|未使用204|未使用205|未使用206|未使用207|未使用208|未使用209|未使用21|未使用210|未使用211|未使用212|未使用213|未使用214|未使用215|未使用216|未使用217|未使用218未使用219｜未使用22｜未使用220｜未使用221｜未使用222｜未使用223｜未使用224｜未使用225｜未使用226｜未使用227｜未使用228｜未使用229｜未使用23｜未使用230｜未使用231｜未使用232｜未使用233｜未使用234｜未使用235| 未使用236｜未使用237｜未使用238｜未使用239｜未使用24｜未使用240｜未使用241｜未使用242｜未使用243｜未使用244｜未使用245｜未使用246｜未使用247｜未使用248｜未使用249｜未使用25｜未使用250｜未使用251未使用252|未使用253|未使用254|未使用255|未使用26|未使用27|未使用28|未使用29|未使用3|未使用30|未使用31|未使用32|未使用33|未使用34|未使用35|未使用36|未使用37|未使用38|未使用39|未使用4|未使用未使用40｜未使用41｜未使用42｜未使用43｜未使用44｜未使用45｜未使用46｜未使用47｜未使用48｜未使用49｜未使用5｜未使用50｜未使用51｜未使用52｜未使用53｜未使用54｜未使用55｜未使用56｜未使用57｜未使用58| 未使用6｜未使用60｜未使用61｜未使用62｜未使用63｜未使用64｜未使用65｜未使用66｜未使用67｜未使用68｜未使用69｜未使用7｜未使用70｜未使用71｜未使用72｜未使用73｜未使用74｜未使用75｜未使用76｜未使用76未使用77|未使用78|未使用79|未使用8|未使用80|未使用81|未使用82|未使用83|未使用84|未使用85|未使用86|未使用87|未使用88|未使用89|未使用9|未使用90|未使用91|未使用92|未使用93|未使用94|未使用未使用95｜未使用96｜未使用97｜未使用98｜未使用99｜virtio0｜virtio1｜virtio10｜virtio11｜virtio12｜virtio13｜virtio14｜virtio15｜virtio2｜virtio3｜virtio4｜virtio5｜virtio6｜virtio7｜virtio8｜virtio9＞。</span>
</dt>
<dd>
<p>
ボリュームのインポート先のディスク名（例：scsi1）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk move</strong> <span class="monospaced">&lt;vmid&gt; &lt;disk&gt; [&lt;storage&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ボリュームを別のストレージまたは別のVMに移動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ディスク&gt;：</span> <span class="monospaced">&lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21| scsi22｜scsi23｜scsi24｜scsi25｜scsi26｜scsi27｜scsi28｜scsi29｜scsi3｜scsi30｜scsi4｜scsi5｜scsi6｜scsi7｜scsi8｜scsi9｜tpmstate0｜unused0｜unused1｜unused10｜unused100｜unused101｜unused102｜unused未使用103｜未使用104｜未使用105｜未使用106｜未使用107｜未使用108｜未使用109｜未使用11｜未使用110｜未使用111｜未使用112｜未使用113｜未使用114｜未使用115｜未使用116｜未使用117｜未使用118｜未使用119｜未使用119未使用12｜未使用120｜未使用121｜未使用122｜未使用123｜未使用124｜未使用125｜未使用126｜未使用127｜未使用128｜未使用129｜未使用13｜未使用130｜未使用131｜未使用132｜未使用133｜未使用134｜未使用135｜未使用136| 未使用137｜未使用138｜未使用139｜未使用14｜未使用140｜未使用141｜未使用142｜未使用143｜未使用144｜未使用145｜未使用146｜未使用147｜未使用148｜未使用149｜未使用15｜未使用150｜未使用151｜未使用152| 未使用153｜未使用154｜未使用155｜未使用156｜未使用157｜未使用158｜未使用159｜未使用16｜未使用160｜未使用161｜未使用162｜未使用163｜未使用164｜未使用165｜未使用166｜未使用167｜未使用168｜未使用169未使用17｜未使用170｜未使用171｜未使用172｜未使用173｜未使用174｜未使用175｜未使用176｜未使用177｜未使用178｜未使用179｜未使用18｜未使用180｜未使用181｜未使用182｜未使用183｜未使用184｜未使用185未使用186名｜未使用187名｜未使用188名｜未使用189名｜未使用189名｜未使用191名｜未使用192名｜未使用193名｜未使用194名｜未使用195名｜未使用196名｜未使用197名｜未使用198名｜未使用199名｜未使用2名｜未使用20名｜未使用200名｜未使用201名未使用202|未使用203|未使用204|未使用205|未使用206|未使用207|未使用208|未使用209|未使用21|未使用210|未使用211|未使用212|未使用213|未使用214|未使用215|未使用216|未使用217|未使用218未使用219｜未使用22｜未使用220｜未使用221｜未使用222｜未使用223｜未使用224｜未使用225｜未使用226｜未使用227｜未使用228｜未使用229｜未使用23｜未使用230｜未使用231｜未使用232｜未使用233｜未使用234｜未使用235| 未使用236｜未使用237｜未使用238｜未使用239｜未使用24｜未使用240｜未使用241｜未使用242｜未使用243｜未使用244｜未使用245｜未使用246｜未使用247｜未使用248｜未使用249｜未使用25｜未使用250｜未使用251未使用252|未使用253|未使用254|未使用255|未使用26|未使用27|未使用28|未使用29|未使用3|未使用30|未使用31|未使用32|未使用33|未使用34|未使用35|未使用36|未使用37|未使用38|未使用39|未使用4|未使用未使用40｜未使用41｜未使用42｜未使用43｜未使用44｜未使用45｜未使用46｜未使用47｜未使用48｜未使用49｜未使用5｜未使用50｜未使用51｜未使用52｜未使用53｜未使用54｜未使用55｜未使用56｜未使用57｜未使用58| 未使用6｜未使用60｜未使用61｜未使用62｜未使用63｜未使用64｜未使用65｜未使用66｜未使用67｜未使用68｜未使用69｜未使用7｜未使用70｜未使用71｜未使用72｜未使用73｜未使用74｜未使用75｜未使用76｜未使用76未使用77|未使用78|未使用79|未使用8|未使用80|未使用81|未使用82|未使用83|未使用84|未使用85|未使用86|未使用87|未使用88|未使用89|未使用9|未使用90|未使用91|未使用92|未使用93|未使用94|未使用未使用95｜未使用96｜未使用97｜未使用98｜未使用99｜virtio0｜virtio1｜virtio10｜virtio11｜virtio12｜virtio13｜virtio14｜virtio15｜virtio2｜virtio3｜virtio4｜virtio5｜virtio6｜virtio7｜virtio8｜virtio9＞。</span>
</dt>
<dd>
<p>
移動したいディスク。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
対象のストレージ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を移動</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コピー成功後、元のディスクを削除します。デフォルトでは、元のディスクは未使用ディスクとして保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1" . "ダイジェストが異なる場合、変更を防止します。これは、同時変更を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;qcow2 | raw | vmdk&gt;</span>.</dt>
<dd>
<p>
対象フォーマット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲット・ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ターゲットVMの現在のコンフィグファイルのSHA1ダイジェストが" . "異なる場合、変更を防止します。これは、同時変更を検出するために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットディスク</span> <span class="monospaced">&lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21| scsi22｜scsi23｜scsi24｜scsi25｜scsi26｜scsi27｜scsi28｜scsi29｜scsi3｜scsi30｜scsi4｜scsi5｜scsi6｜scsi7｜scsi8｜scsi9｜tpmstate0｜unused0｜unused1｜unused10｜unused100｜unused101｜unused102｜unused未使用103｜未使用104｜未使用105｜未使用106｜未使用107｜未使用108｜未使用109｜未使用11｜未使用110｜未使用111｜未使用112｜未使用113｜未使用114｜未使用115｜未使用116｜未使用117｜未使用118｜未使用119｜未使用119未使用12｜未使用120｜未使用121｜未使用122｜未使用123｜未使用124｜未使用125｜未使用126｜未使用127｜未使用128｜未使用129｜未使用13｜未使用130｜未使用131｜未使用132｜未使用133｜未使用134｜未使用135｜未使用136| 未使用137｜未使用138｜未使用139｜未使用14｜未使用140｜未使用141｜未使用142｜未使用143｜未使用144｜未使用145｜未使用146｜未使用147｜未使用148｜未使用149｜未使用15｜未使用150｜未使用151｜未使用152| 未使用153｜未使用154｜未使用155｜未使用156｜未使用157｜未使用158｜未使用159｜未使用16｜未使用160｜未使用161｜未使用162｜未使用163｜未使用164｜未使用165｜未使用166｜未使用167｜未使用168｜未使用169未使用17｜未使用170｜未使用171｜未使用172｜未使用173｜未使用174｜未使用175｜未使用176｜未使用177｜未使用178｜未使用179｜未使用18｜未使用180｜未使用181｜未使用182｜未使用183｜未使用184｜未使用185未使用186名｜未使用187名｜未使用188名｜未使用189名｜未使用189名｜未使用191名｜未使用192名｜未使用193名｜未使用194名｜未使用195名｜未使用196名｜未使用197名｜未使用198名｜未使用199名｜未使用2名｜未使用20名｜未使用200名｜未使用201名未使用202|未使用203|未使用204|未使用205|未使用206|未使用207|未使用208|未使用209|未使用21|未使用210|未使用211|未使用212|未使用213|未使用214|未使用215|未使用216|未使用217|未使用218未使用219｜未使用22｜未使用220｜未使用221｜未使用222｜未使用223｜未使用224｜未使用225｜未使用226｜未使用227｜未使用228｜未使用229｜未使用23｜未使用230｜未使用231｜未使用232｜未使用233｜未使用234｜未使用235| 未使用236｜未使用237｜未使用238｜未使用239｜未使用24｜未使用240｜未使用241｜未使用242｜未使用243｜未使用244｜未使用245｜未使用246｜未使用247｜未使用248｜未使用249｜未使用25｜未使用250｜未使用251｜未使用252｜未使用253｜未使用252｜未使用253｜未使用254｜未使用245｜未使用246｜未使用247｜未使用248｜未使用249｜未使用25｜未使用250｜未使用251未使用252|未使用253|未使用254|未使用255|未使用26|未使用27|未使用28|未使用29|未使用3|未使用30|未使用31|未使用32|未使用33|未使用34|未使用35|未使用36|未使用37|未使用38|未使用39|未使用4|未使用未使用40｜未使用41｜未使用42｜未使用43｜未使用44｜未使用45｜未使用46｜未使用47｜未使用48｜未使用49｜未使用5｜未使用50｜未使用51｜未使用52｜未使用53｜未使用54｜未使用55｜未使用56｜未使用57｜未使用58| 未使用6｜未使用60｜未使用61｜未使用62｜未使用63｜未使用64｜未使用65｜未使用66｜未使用67｜未使用68｜未使用69｜未使用7｜未使用70｜未使用71｜未使用72｜未使用73｜未使用74｜未使用75｜未使用76｜未使用76未使用77|未使用78|未使用79|未使用8|未使用80|未使用81|未使用82|未使用83|未使用84|未使用85|未使用86|未使用87|未使用88|未使用89|未使用9|未使用90|未使用91|未使用92|未使用93|未使用94|未使用未使用95｜未使用96｜未使用97｜未使用98｜未使用99｜virtio0｜virtio1｜virtio10｜virtio11｜virtio12｜virtio13｜virtio14｜virtio15｜virtio2｜virtio3｜virtio4｜virtio5｜virtio6｜virtio7｜virtio8｜virtio9＞。</span>
</dt>
<dd>
<p>
ターゲット VM 上でディスクが移動される設定キー (例えば、ide0 または scsi1)。デフォルトはソースディスクキーです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲット-vmid</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk rescan</strong> <span class="monospaced">[OPTIONS] (</span><strong>ディスク再スキャン)</strong></p></div>
<div class="paragraph">
<p>すべてのストレージを再スキャンし、ディスクサイズと未使用ディスクイメージを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--ドライラン</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VM config(s)に実際に変更を書き出さないようにします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk resize</strong> <span class="monospaced">&lt;vmid&gt; &lt;disk&gt; &lt;size&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ボリュームサイズを拡張します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ディスク&gt;：</span> <span class="monospaced">&lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 |Scsi13 | Scsi14 | Scsi15 | Scsi16 | Scsi17 | Scsi18 | Scsi19 | Scsi2 | Scsi20 | Scsi21 | Scsi22 | Scsi23 | Scsi24 | Scsi25 | Scsi26 |scsi27｜scsi28｜scsi29｜scsi3｜scsi30｜scsi4｜scsi5｜scsi6｜scsi7｜scsi8｜scsi9｜tpmstate0｜virtio0｜virtio1｜virtio10｜virtio11｜virtio12｜virtio13｜virtio14｜virtio15｜virtio2｜virtio3｜virtio4｜virtio5｜virtio6｜virtio7｜virtio8｜virtio9</span>
</dt>
<dd>
<p>
サイズを変更したいディスク。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;サイズ&gt;です：</span> <span class="monospaced">\+?\d+(\.\d+)?[KMGT]?</span>
</dt>
<dd>
<p>
新しいサイズ。<span class="monospaced">記号を</span>付けると、その値はボリュームの実際のサイズに加算され、付けない場合は絶対値となります。ディスク・サイズの縮小はサポートされていません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルの SHA1 ダイジェストが異なる場合に変更を防止します。これは同時変更を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk unlink</strong> <span class="monospaced">&lt;vmid&gt; --idlist &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ディスクイメージのリンク解除/削除</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
物理的な削除を強制します。これがないと、単純に設定ファイルからディスクを削除し、ボリュームIDを含む<em>unused[n]</em>という追加の設定エントリを作成します。unused[n]のリンク解除は、常に物理的な削除を引き起こします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--idlist</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したいディスク ID のリスト。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest cmd</strong> <span class="monospaced">&lt;vmid&gt; &lt;command</span></p></div>
<div class="paragraph">
<p>QEMU Guest Agentのコマンドを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;command&gt;:</span> <span class="monospaced">&lt;fsfreeze-freeze｜fsfreeze-status｜fsfreeze-thaw｜fstrim｜get-fsinfo｜get-host-name｜get-memory-block-info｜get-memory-blocks｜get-osinfo｜get-time｜get-timezone｜get-users｜get-vcpus｜info｜network-get-interfaces｜ping｜shutdown｜suspend-disk｜suspend-hybrid｜suspend-ram&gt;。</span></dt>
<dd>
<p>
QGAコマンド。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest exec</strong> <span class="monospaced">&lt;vmid&gt; [&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ゲストエージェント経由で指定されたコマンドを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;:</span> <span class="monospaced">&lt;array&gt; です。</span></dt>
<dd>
<p>
配列としての追加引数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pass-stdin</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されると、EOF まで STDIN を読み込み、<em>input-data</em>経由でゲストエージェントに転送します (通常、ゲストエージェントによって起動されるプロセスの STDIN として扱われます)。最大 1MiB を許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--同期</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
off に設定すると、コマンドの終了やタイムアウトを待たずに、即座に pid を返します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">30</span>)</dt>
<dd>
<p>
コマンドが終了するまで同期的に待つ最大時間。到達した場合、pidが返されます。無効にするには0を設定します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest exec-status</strong> <span class="monospaced">&lt;vmid&gt; &lt;pid&gt;</span>.</p></div>
<div class="paragraph">
<p>ゲストエージェントによって開始された指定された pid のステータスを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;pid&gt;:</span> <span class="monospaced">&lt;整数</span></dt>
<dd>
<p>
問い合わせるPID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest passwd</strong> <span class="monospaced">&lt;vmid&gt; &lt;username&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定されたユーザのパスワードを指定されたパスワードに設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザー名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
パスワードを設定するユーザー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--暗号化</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
パスワードがすでに crypt() を通過している場合は 1 を設定します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm import</strong> <span class="monospaced">&lt;vmid&gt; &lt;source&gt; --storage &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">.</span></p></div>
<div class="paragraph">
<p>ESXi ストレージなど、サポートされているインポートソースから外国の仮想ゲストをインポートします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ソース&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
インポート元のボリューム ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acpi</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPI を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--アフィニティ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ゲストプロセスの実行に使用されるホストコアのリスト（例：0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--agent</span> <span class="monospaced">[enabled=]&lt;1|0&gt; [,freeze-fs-on-backup=&lt;1|0&gt;] [,fstrim_cloned_disks=&lt;1|0&gt;] [,type=&lt;virtio|isa&gt;</span>].</dt>
<dd>
<p>
QEMU ゲストエージェントとそのプロパティとの通信を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--amd-sev</span> <span class="monospaced">[type=]&lt;sev-type&gt;[,kernel-hashes=&lt;1|0&gt;][,no-debug=&lt;1|0&gt;][,no-key-sharing=&lt;1|0&gt;</span>]。</dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&lt;aarch64 | x86_64&gt;</span>.</dt>
<dd>
<p>
仮想プロセッサ・アーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--args</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
kvm に渡される任意の引数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--audio0</span> <span class="monospaced">device=&lt;ich9-intel-hda|intel-hda|AC97&gt; [,driver=&lt;spice|none&gt;</span>].</dt>
<dd>
<p>
QXL/Spiceと組み合わせると便利です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autostart</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視されています）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--バルーン</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
VM のターゲット RAM の量 (MiB 単位)。ゼロを使用すると、バロンドライバが無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bios</span> <span class="monospaced">&lt;ovmf | seabios&gt;</span><em>(デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOSの実装を選択します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--boot</span> <span class="monospaced">[[legacy=]&lt;[acdn]{1,4}&gt;][,order=&lt;デバイス[;デバイス...]&gt;]]。</span>
</dt>
<dd>
<p>
ゲストの起動順序を指定します。<em>order=</em>サブプロパティを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ブートディスク</span> <span class="monospaced">(ide|sata|scsi|virtio)◆d+.</span></dt>
<dd>
<p>
指定したディスクからの起動を有効にします。非推奨：代わりに<em>boot: order=foo;bar</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">CDROM</span> <span class="monospaced">&lt;ボリューム</span></dt>
<dd>
<p>
これは -ide2 オプションのエイリアスです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cicustom</span> <span class="monospaced">[meta=&lt;volume&gt;] [,network=&lt;volume&gt;] [,user=&lt;volume&gt;] [,vendor=&lt;volume&gt;</span>].</dt>
<dd>
<p>
cloud-init：開始時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-パスワード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：ユーザーに割り当てるパスワード。一般的に、これを使うことは推奨されません。代わりに ssh 鍵を使います。また、古いバージョンの cloud-init はハッシュ化されたパスワードをサポートしていないことに注意しましょう。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--citype</span> <span class="monospaced">&lt;configdrive2 | nocloud | opennebula&gt;</span>.</dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは、設定されているオペレーティングシステムの種類<span class="monospaced">（ostype</span>.Linuxでは<span class="monospaced">nocloud</span>形式、Windowsでは<span class="monospaced">configdrive2を</span>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciupgrade</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 最初の起動後にパッケージの自動アップグレードを行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciuser</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：イメージに設定されているデフォルトユーザーの代わりに、sshキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コア数</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpu</span> <span class="monospaced">[[cputype=]&lt;string&gt;] ]</span>。<span class="monospaced">[,フラグ=&lt;+FLAG[;-FLAG...]&gt;] ]を指定します。[,hidden=&lt;1|0&gt;] [,hv-vendor-id=&lt;vendor-id&gt;] [,phys-bits=&lt;8-64|host&gt;] [,reported-model=&lt;enum&gt;</span>]。</dt>
<dd>
<p>
エミュレートされたCPUタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&lt;number&gt; (0 - 128)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&lt;integer&gt; (1 - 262144)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VM の CPU ウェイトは、cgroup v2 では [1, 10000] にクランプされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の説明。WebインターフェイスのVMのサマリーに表示されます。コンフィギュレーション・ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドライラン</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
createコマンドを表示し、何もせずに終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--efidisk0</span> <span class="monospaced">[file=]&lt;volume&gt; [,efitype=&lt;2m|4m&gt;] [,format=&lt;enum&gt;] [,pre-enrolled-keys=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;</span>].</dt>
<dd>
<p>
EFIバーを保存するディスクを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;qcow2 | raw | vmdk&gt;</span>.</dt>
<dd>
<p>
対象フォーマット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--フリーズ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
起動時にCPUをフリーズ（<em>c</em>monitorコマンドで実行開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
vmsのライフタイムの様々なステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostpci[n]</span> <span class="monospaced">[[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;][,device-id=&lt;hex id&gt;] [,legacy-igd=&lt;1|0&gt;] [,mapping=&lt;mapping-id&gt;] [,mdev=&lt;string&gt;] [,pcie=&lt;1|0&gt;] [,rombar=&lt;1|0&gt; ] [,romfile=&lt;string&gt;] [,sub-devpci=&lt;1|0&gt;] [[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;]。] [,romfile=&lt;string&gt;] [,sub-device-id=&lt;hex id&gt;] [,sub-vendor-id=&lt;hex id&gt;] [,vendor-id=&lt;hex id&gt;] [,x-vga=&lt;1|0&gt;</span>] となります。</dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hotplug</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">ネットワーク,ディスク,USB</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効にします。これはカンマ区切りのホットプラグ機能のリストです：<em>ネットワーク</em>、<em>ディスク</em>、<em>CPU</em>、<em>メモリ</em>、<em>USB</em>、<em>cloudinit</em>。ホットプラグを完全に無効にするには<em>0を</em>使用します。値として<em>1 を</em>使用すると、デフォルトの<span class="monospaced">network、disk、usb</span> のエイリアスになります。USB ホットプラグは、マシンのバージョンが &gt;= 7.1 で、ostype l26 または Windows &gt; 7 のゲストで可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hugepages</span> <span class="monospaced">&lt;1024 | 2 | any&gt;</span>.</dt>
<dd>
<p>
hugepagesメモリの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ide[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;秒&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,model=&lt;model&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt; ] [,size=&lt;Disk] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>]。</dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用します（nは0～3）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ipconfig[n]</span> <span class="monospaced">[gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,ip=&lt;IPv4Format/CIDR&gt;] [,ip6=&lt;IPv6Format/CIDR&gt;].</span></dt>
<dd>
<p>
cloud-init：対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>特別な文字列<em>dhcpは</em>、DHCPを使用するIPアドレスに使用することができ、その場合、明示的なゲートウェイを提供する必要はありません。 IPv6の場合、特別な文字列<em>autoは</em>、ステートレス自動設定を使用するために使用することができます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-initが有効で、IPv4アドレスもIPv6アドレスも指定されていない場合、デフォルトでIPv4のdhcpを使用します。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ivshmem</span> <span class="monospaced">size=&lt;整数&gt; [,name=&lt;文字列&gt;</span>]<span class="monospaced"> です。</span></dt>
<dd>
<p>
VM間共有メモリ。VM間やホストとの直接通信に便利。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keephugepages</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepagesと一緒に使用します。有効にすると、hugepagesはVMシャットダウン後も削除されず、その後の起動に使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyboard</span> <span class="monospaced">&lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&gt;</span>.</dt>
<dd>
<p>
VNC サーバーのキーボードレイアウト。このオプションは一般的には必要なく、ゲストOS内で処理した方が良い場合が多いです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--kvm</span> <span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効/無効を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--live-import</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
すぐにVMを起動し、バックグラウンドでデータをコピーします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ローカルタイム</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）をローカルタイムに設定します。<span class="monospaced">ostypeが</span>Microsoft Windows OSの場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&lt;バックアップ｜クローン｜作成｜マイグレーション｜ロールバック｜スナップショット｜スナップショット削除｜サスペンド｜一時停止&gt;。</span></dt>
<dd>
<p>
VMをロック/アンロックします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マシン</span> <span class="monospaced">[[タイプ=]&lt;マシンタイプ&gt;]] [</span>,viommu=&lt;intel|virtio&gt;]<span class="monospaced">]</span><span class="monospaced">。</span> <span class="monospaced">[viommu=&lt;intel|virtio&gt;</span>]です。</dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メモリ</span> <span class="monospaced">[current=]&lt;整数</span></dt>
<dd>
<p>
メモリ特性。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_downtime</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
マイグレーションの最大許容ダウンタイム（秒）を設定します。新しく汚れたRAMを転送する必要があるため、マイグレーションが最後まで収束しない場合、マイグレーションが収束するまで、この上限は自動的に段階的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_speed</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
マイグレーションの最大速度（MB/s）を設定します。値 0 は制限なしです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の名前を設定します。コンフィギュレーションWebインターフェイスでのみ使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネームサーバー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナの DNS サーバー IP アドレスを設定します。searchdomain も nameserver も設定されていない場合、Create は自動的にホストからの設定を使用します。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">net[n]</span> <span class="monospaced">[model=]&lt;enum&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,link_down=&lt;1|0&gt;] [,macaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,mtu=&lt;integer&gt;] [,queues=&lt;integer&gt;] [,rate=&lt;number&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr</span></dt>
<dd>
<p>
ネットワーク機器を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa[n]</span> <span class="monospaced">cpus=&lt;id[-id];...&gt; [,hostnodes=&lt;id[-id];...&gt;]を</span>指定します。<span class="monospaced">[,memory=&lt;number&gt;] [,policy=&lt;preferred|bind|interleave&gt;</span>]となります。</dt>
<dd>
<p>
NUMAトポロジー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時に VM を起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&gt;</span>.</dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parallel[n]</span> <span class="monospaced">/dev/parportd+|/dev/usb/lpd+</span></dt>
<dd>
<p>
ホスト・パラレル・デバイスをマップします（nは0～2）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクション</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VM の保護フラグを設定します。これにより、VM の削除とディスクの削除操作が無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--reboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可。<em>0</em>に設定すると、VM は再起動時に終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rng0</span> <span class="monospaced">[source=]&lt;/dev/urandom|/dev/random|/dev/hwrng&gt; [,max_bytes=&lt;integer&gt;] [,period=&lt;integer&gt;</span>].</dt>
<dd>
<p>
VirtIO ベースの乱数ジェネレータを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sata[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;秒&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>]。</dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用します（nは0～5）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsi[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt; ]。] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,product=&lt;product&gt;] [,queues=&lt;integer&gt;] [,replicate=&lt;1|0] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,scsiblock=&lt;1|0&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,vendor=&lt;vendor&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用します（nは0～30）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scihw</span> <span class="monospaced">&lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&gt;</span><em>(デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--検索ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-シリアル[n]</span> <span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアル・デバイスを作成（nは0～3）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shares</span> <span class="monospaced">&lt;integer&gt; (0 - 50000)</span><em>(デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
オート・バルーニングのメモリ・シェア量。この数値が大きいほど、このVMはより多くのメモリを取得します。数値は、他のすべての実行中のVMの重みに対する相対値です。ゼロを使用すると、オートバルーニングは無効になります。オートバルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbios1</span> <span class="monospaced">[base64=&lt;1|0&gt;] [,family=&lt;Base64エンコードされた文字列&gt;] [,manufacturer=&lt;Base64エンコードされた文字列&gt;] [,product=&lt;Base64エンコードされた文字列] [,serial=&lt;Base64エンコードされた文字列&gt;] [,sku=&lt;Base64エンコードされた文字列&gt;] [,uuid=&lt;UUID&gt;] [,version=&lt;Base64エンコードされた文字列&gt;</span>] と<span class="monospaced">なります</span>。</dt>
<dd>
<p>
SMBIOSタイプ1のフィールドを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smp</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPU数。代わりに -sockets オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソケット</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--spice_enhancements</span> <span class="monospaced">[foldersharing=&lt;1|0&gt;] [,videostreaming=&lt;off|all|filter&gt;</span>]。</dt>
<dd>
<p>
SPICE の追加機能拡張を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sshkeys</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：公開 SSH 鍵を設定します (1 行に 1 つの鍵、OpenSSH 形式)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startdate</span> <span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span><em>(default =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。有効な日付のフォーマットは'now'または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=d+] [,down=d+] `.</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
デフォルトのストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tablet</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスを有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM のタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tdf</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
時間ドリフト修正の有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--テンプレート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tpmstate0</span> <span class="monospaced">[file=]&lt;volume&gt; [,size=&lt;DiskSize&gt;] [,version=&lt;v1.2|v2.0&gt;].</span></dt>
<dd>
<p>
TPMの状態を保存するDiskを設定します。フォーマットは<em>raw</em>固定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[file=]&lt;volume&gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--usb[n]</span> <span class="monospaced">[[host=]&lt;HOSTUSBDEVICE|spice&gt;]の場合[,マッピング=&lt;マッピングID&gt;] [,usb3=&lt;1|0］</span></dt>
<dd>
<p>
USBデバイスを設定します（nは0～4、マシンのバージョンが7.1以上、かつostype l26またはwindows &gt; 7の場合、nは最大14まで）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vcpus</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされたvcpusの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vga</span> <span class="monospaced">[[タイプ=]&lt;enum&gt;]] [[</span>クリップボード<span class="monospaced">=&lt;</span>vnc<span class="monospaced">[クリップボード=&lt;vnc&gt;] [,メモリ=&lt;整数］</span></dt>
<dd>
<p>
VGAハードウェアを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtio[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;秒&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt; ]。] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームを VIRTIO ハード ディスクとして使用します (n は 0 ～ 15)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmgenid</span> <span class="monospaced">&lt;UUID&gt;</span><em>(デフォルト =</em> <span class="monospaced">1 (自動生成</span>))</dt>
<dd>
<p>
VM生成IDを設定します。作成または更新時に自動生成する場合は<em>1 を</em>使用し、明示的に無効にする場合は<em>0 を</em>渡します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstatestorage</span> <span class="monospaced">&lt;ストレージID&gt;。</span></dt>
<dd>
<p>
VM 状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--watchdog</span> <span class="monospaced">[[model=]&lt;i6300esb|ib700&gt;][アクション］</span></dt>
<dd>
<p>
仮想ハードウェア・ウォッチドッグ・デバイスを作成します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qmインポートディスク</strong></p></div>
<div class="paragraph">
<p><em>qm disk import</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm importovf</strong> <span class="monospaced">&lt;vmid&gt; &lt;manifest&gt; &lt;storage&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>OVFマニフェストから読み込んだパラメータを使用して新しいVMを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;マニフェスト&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ovfファイルへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
対象ストレージID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドライラン</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
抽出されたOVFパラメータの解析済み表現を出力しますが、VMは作成しません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&lt;qcow2 | raw | vmdk&gt;</span>.</dt>
<dd>
<p>
対象フォーマット</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qmリスト</strong> <span class="monospaced">[オプション］</span></p></div>
<div class="paragraph">
<p>仮想マシンのインデックス（ノードごと）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
アクティブなVMの完全なステータスを決定します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm listsnapshot</strong> <span class="monospaced">&lt;vmid&gt;</span><strong>です</strong>。</p></div>
<div class="paragraph">
<p>すべてのスナップショットを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm migrate</strong> <span class="monospaced">&lt;vmid&gt; &lt;target&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンを移行します。新しい移行タスクを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
対象ノード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのマイグレーション制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ローカルデバイスを使用するVMのマイグレーションを許可します。このオプションはrootのみが使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マイグレーションネットワーク</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
移行に使用する（サブ）ネットワークのCIDR。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マイグレーションタイプ</span> <span class="monospaced">&lt;insecure | secure&gt;</span></dt>
<dd>
<p>
マイグレーショントラフィックはデフォルトでSSHトンネルを使用して暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンスを上げるためにこれを無効にすることができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--オンライン</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
VM が実行中の場合、オンライン/ライブマイグレーションを使用。VM が停止している場合は無視されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットストレージ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースストレージからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソース・ストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ストレージはそれ自体にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ローカルディスクあり</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ローカルディスクのライブストレージ移行を有効にします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm モニタ</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>QEMU Monitorインターフェイスに入ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm ディスク移動</strong></p></div>
<div class="paragraph">
<p><em>qm disk move</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm move_disk</strong></p></div>
<div class="paragraph">
<p><em>qm disk move</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm mtunnel</strong></p></div>
<div class="paragraph">
<p>qmigrate によって使用されます - 手動で使用しないでください。</p></div>
<div class="paragraph">
<p><strong>qm nbdstop</strong> <span class="monospaced">&lt;vmid&gt;</span><strong>です</strong>。</p></div>
<div class="paragraph">
<p>組み込み nbd サーバーを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm pending</strong> <span class="monospaced">&lt;vmid&gt;</span></p></div>
<div class="paragraph">
<p>現在の値と保留中の値の両方を含む仮想マシン設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm reboot</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VMをシャットダウンして再起動します。保留中の変更を適用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
シャットダウンまで最大タイムアウト秒数待ちます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm remote-migrate</strong> <span class="monospaced">&lt;vmid&gt; [&lt;target-vmid&gt;] &lt;target-endpoint&gt; --target-bridge &lt;string&gt; --target-storage &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンをリモートクラスタに移行します。新しい移行タスクを作成します。 EXPERIMENTAL 機能！</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット-vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲットエンドポイント&gt;:</span> <span class="monospaced">apitoken=&lt;PVEAPIToken=user@realm!token=SECRET&gt; ,host=&lt;ADDRESS&gt; [,fingerprint=&lt;FINGERPRINT&gt;] [,port=&lt;PORT&gt;</span>].</dt>
<dd>
<p>
リモートターゲットエンドポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのマイグレーション制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行成功後に元のVMと関連データを削除します。デフォルトでは、元のVMは停止した状態で移行元クラスタに保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--オンライン</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
VM が実行中の場合、オンライン/ライブマイグレーションを使用。VM が停止している場合は無視されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲットブリッジ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソース・ブリッジからターゲット・ブリッジへのマッピング。単一のブリッジ ID だけを指定すると、すべてのソース・ブリッジがそのブリッジにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ブリッジはそれ自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットストレージ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースストレージからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソース・ストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ストレージはそれ自体にマッピングされます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm再スキャン</strong></p></div>
<div class="paragraph">
<p><em>qm disk rescan</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm reset</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンをリセットします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm リサイズ</strong></p></div>
<div class="paragraph">
<p><em>qm disk resize</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm resume</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンを再開します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nocheck</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm rollback</strong> <span class="monospaced">&lt;vmid&gt; &lt;スナップ名&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>VMの状態を指定したスナップショットにロールバックします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;スナップ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ロールバック成功後にVMを起動するかどうか。(注意: スナップショットにRAMが含まれている場合、VMは自動的に起動します)</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm sendkey</strong> <span class="monospaced">&lt;vmid&gt; &lt;key&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンにキーイベントを送信します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;キー&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
キー（qemuモニターエンコーディング）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm set</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシン・オプションの設定（同期API） - ホットプラグまたはストレージ割り当てを含むアクションでは、代わりにPOSTメソッドの使用を検討する必要があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acpi</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPI を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--アフィニティ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ゲストプロセスの実行に使用されるホストコアのリスト（例：0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--agent</span> <span class="monospaced">[enabled=]&lt;1|0&gt; [,freeze-fs-on-backup=&lt;1|0&gt;] [,fstrim_cloned_disks=&lt;1|0&gt;] [,type=&lt;virtio|isa&gt;</span>].</dt>
<dd>
<p>
QEMU ゲストエージェントとそのプロパティとの通信を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--amd-sev</span> <span class="monospaced">[type=]&lt;sev-type&gt;[,kernel-hashes=&lt;1|0&gt;][,no-debug=&lt;1|0&gt;][,no-key-sharing=&lt;1|0&gt;</span>]。</dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&lt;aarch64 | x86_64&gt;</span>.</dt>
<dd>
<p>
仮想プロセッサ・アーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--args</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
kvm に渡される任意の引数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--audio0</span> <span class="monospaced">device=&lt;ich9-intel-hda|intel-hda|AC97&gt; [,driver=&lt;spice|none&gt;</span>].</dt>
<dd>
<p>
QXL/Spiceと組み合わせると便利です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autostart</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--バルーン</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
VM のターゲット RAM の量 (MiB 単位)。ゼロを使用すると、バロンドライバが無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bios</span> <span class="monospaced">&lt;ovmf | seabios&gt;</span><em>(デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOSの実装を選択します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--boot</span> <span class="monospaced">[[legacy=]&lt;[acdn]{1,4}&gt;][,order=&lt;デバイス[;デバイス...]&gt;]]。</span>
</dt>
<dd>
<p>
ゲストの起動順序を指定します。<em>order=</em>サブプロパティを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ブートディスク</span> <span class="monospaced">(ide|sata|scsi|virtio)◆d+.</span></dt>
<dd>
<p>
指定したディスクからの起動を有効にします。非推奨：代わりに<em>boot: order=foo;bar</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">CDROM</span> <span class="monospaced">&lt;ボリューム</span></dt>
<dd>
<p>
これは -ide2 オプションのエイリアスです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cicustom</span> <span class="monospaced">[meta=&lt;volume&gt;] [,network=&lt;volume&gt;] [,user=&lt;volume&gt;] [,vendor=&lt;volume&gt;</span>].</dt>
<dd>
<p>
cloud-init：開始時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span></dt>
<dd>
<p>
cloud-init：ユーザーに割り当てるパスワード。一般的に、これを使うことは推奨されません。代わりに ssh 鍵を使います。また、古いバージョンの cloud-init はハッシュ化されたパスワードをサポートしていないことに注意しましょう。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--citype</span> <span class="monospaced">&lt;configdrive2 | nocloud | opennebula&gt;</span>.</dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは、設定されているオペレーティングシステムの種類<span class="monospaced">（ostype</span>.Linuxでは<span class="monospaced">nocloud</span>形式、Windowsでは<span class="monospaced">configdrive2を</span>使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciupgrade</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 最初の起動後にパッケージの自動アップグレードを行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciuser</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：イメージに設定されているデフォルトユーザーの代わりに、sshキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コア数</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpu</span> <span class="monospaced">[[cputype=]&lt;string&gt;] ]</span>。<span class="monospaced">[,フラグ=&lt;+FLAG[;-FLAG...]&gt;] ]を指定します。[,hidden=&lt;1|0&gt;] [,hv-vendor-id=&lt;vendor-id&gt;] [,phys-bits=&lt;8-64|host&gt;] [,reported-model=&lt;enum&gt;</span>]。</dt>
<dd>
<p>
エミュレートされたCPUタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&lt;number&gt; (0 - 128)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&lt;integer&gt; (1 - 262144)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VM の CPU ウェイトは、cgroup v2 では [1, 10000] にクランプされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の説明。WebインターフェイスのVMのサマリーに表示されます。コンフィギュレーション・ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルの SHA1 ダイジェストが異なる場合に変更を防止します。これは同時変更を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--efidisk0</span> <span class="monospaced">[file=]&lt;volume&gt; [,efitype=&lt;2m|4m&gt;] [,format=&lt;enum&gt;] [,import-from=&lt;ソースボリューム&gt;] [,pre-enrolled-keys=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;</span>].</dt>
<dd>
<p>
EFIバーを格納するディスクを設定します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。SIZE_IN_GiBはここでは無視され、代わりにデフォルトのEFIバーがボリュームにコピーされることに注意してください。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
物理的な削除を強制します。これがないと、単純に設定ファイルからディスクを削除し、ボリュームIDを含む<em>unused[n]</em>という追加の設定エントリを作成します。unused[n]のリンク解除は、常に物理的な削除を引き起こします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">削除</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--フリーズ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
起動時にCPUをフリーズ（<em>c</em>monitorコマンドで実行開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
vmsのライフタイムの様々なステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostpci[n]</span> <span class="monospaced">[[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;][,device-id=&lt;hex id&gt;] [,legacy-igd=&lt;1|0&gt;] [,mapping=&lt;mapping-id&gt;] [,mdev=&lt;string&gt;] [,pcie=&lt;1|0&gt;] [,rombar=&lt;1|0&gt; ] [,romfile=&lt;string&gt;] [,sub-devpci=&lt;1|0&gt;] [[host=]&lt;HOSTPCIID[;HOSTPCIID2...]&gt;]。] [,romfile=&lt;string&gt;] [,sub-device-id=&lt;hex id&gt;] [,sub-vendor-id=&lt;hex id&gt;] [,vendor-id=&lt;hex id&gt;] [,x-vga=&lt;1|0&gt;</span>] となります。</dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hotplug</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">ネットワーク,ディスク,USB</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効にします。これはカンマ区切りのホットプラグ機能のリストです：<em>ネットワーク</em>、<em>ディスク</em>、<em>CPU</em>、<em>メモリ</em>、<em>USB</em>、<em>cloudinit</em>。ホットプラグを完全に無効にするには<em>0を</em>使用します。値として<em>1 を</em>使用すると、デフォルトの<span class="monospaced">network、disk、usb</span> のエイリアスになります。USB ホットプラグは、マシンのバージョンが &gt;= 7.1 で、ostype l26 または windows &gt; 7 のゲストで可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hugepages</span> <span class="monospaced">&lt;1024 | 2 | any&gt;</span>.</dt>
<dd>
<p>
hugepagesメモリの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ide[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソース・ボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;CDROM|DISK] [,model=&lt;model&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用します（nは0～3）。新しいボリュームを割り当てるには、特別な構文STORAGE_ID:SIZE_IN_GiBを使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ipconfig[n]</span> <span class="monospaced">[gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,ip=&lt;IPv4Format/CIDR&gt;] [,ip6=&lt;IPv6Format/CIDR&gt;].</span></dt>
<dd>
<p>
cloud-init：対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>特別な文字列<em>dhcpは</em>、DHCPを使用するIPアドレスに使用することができ、その場合、明示的なゲートウェイを提供する必要はありません。 IPv6の場合、特別な文字列<em>autoは</em>、ステートレス自動設定を使用するために使用することができます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-initが有効で、IPv4アドレスもIPv6アドレスも指定されていない場合、デフォルトでIPv4のdhcpを使用します。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ivshmem</span> <span class="monospaced">size=&lt;整数&gt; [,name=&lt;文字列&gt;</span>]<span class="monospaced"> です。</span></dt>
<dd>
<p>
VM間共有メモリ。VM間やホストとの直接通信に便利。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keephugepages</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepagesと一緒に使用します。有効にすると、hugepagesはVMシャットダウン後も削除されず、その後の起動に使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyboard</span> <span class="monospaced">&lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&gt;</span>.</dt>
<dd>
<p>
VNC サーバーのキーボードレイアウト。このオプションは一般的には必要なく、ゲストOS内で処理した方が良い場合が多いです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--kvm</span> <span class="monospaced">&lt;論理値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効/無効を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ローカルタイム</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）をローカルタイムに設定します。<span class="monospaced">ostypeが</span>Microsoft Windows OSの場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&lt;バックアップ｜クローン｜作成｜マイグレーション｜ロールバック｜スナップショット｜スナップショット削除｜サスペンド｜一時停止&gt;。</span></dt>
<dd>
<p>
VMをロック/アンロックします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マシン</span> <span class="monospaced">[[タイプ=]&lt;マシンタイプ&gt;]] [</span>,viommu=&lt;intel|virtio&gt;]<span class="monospaced">]</span><span class="monospaced">。</span> <span class="monospaced">[viommu=&lt;intel|virtio&gt;</span>]です。</dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メモリ</span> <span class="monospaced">[current=]&lt;整数</span></dt>
<dd>
<p>
メモリ特性。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_downtime</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
マイグレーションの最大許容ダウンタイム（秒）を設定します。新しく汚れたRAMを転送する必要があるため、マイグレーションが最後まで収束しない場合、マイグレーションが収束するまで、この上限は自動的に段階的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_speed</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
マイグレーションの最大速度（MB/s）を設定します。値 0 は制限なしです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM の名前を設定します。コンフィギュレーションWebインターフェイスでのみ使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネームサーバー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナの DNS サーバー IP アドレスを設定します。searchdomain も nameserver も設定されていない場合、Create は自動的にホストからの設定を使用します。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">net[n]</span> <span class="monospaced">[model=]&lt;enum&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,link_down=&lt;1|0&gt;] [,macaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,mtu=&lt;integer&gt;] [,queues=&lt;integer&gt;] [,rate=&lt;number&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr&gt;] [,&lt;model&gt;=&lt;macaddr</span></dt>
<dd>
<p>
ネットワーク機器を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa[n]</span> <span class="monospaced">cpus=&lt;id[-id];...&gt; [,hostnodes=&lt;id[-id];...&gt;]を</span>指定します。<span class="monospaced">[,memory=&lt;number&gt;] [,policy=&lt;preferred|bind|interleave&gt;</span>]となります。</dt>
<dd>
<p>
NUMAトポロジー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時に VM を起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&gt;</span>.</dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parallel[n]</span> <span class="monospaced">/dev/parportd+|/dev/usb/lpd+</span></dt>
<dd>
<p>
ホスト・パラレル・デバイスをマップします（nは0～2）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクション</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VM の保護フラグを設定します。これにより、VM の削除とディスクの削除操作が無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--reboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可。<em>0</em>に設定すると、VM は再起動時に終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--復帰</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
保留中の変更を元に戻します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rng0</span> <span class="monospaced">[source=]&lt;/dev/urandom|/dev/random|/dev/hwrng&gt; [,max_bytes=&lt;integer&gt;] [,period=&lt;integer&gt;</span>].</dt>
<dd>
<p>
VirtIO ベースの乱数ジェネレータを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sata[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソース・ボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,mbps=&lt;mbps] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt; ]。] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>]。</dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用します（nは0～5）。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsi[n]</span> <span class="monospaced">[[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds&gt;] [,bps_rd=&lt;bps] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソースボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops&gt;] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,product=&lt;product&gt;] [,queues=&lt;integer&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,scsiblock=&lt;1|0&gt;] [,secs=&lt;integer&gt;] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt; ]。] [,size=&lt;DiskSize&gt;] [,snapshot=&lt;1|0&gt;] [,ssd=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,vendor=&lt;vendor&gt;] [,werror=&lt;enum&gt;] [,wwn=&lt;wwn&gt;</span>] となります。</dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用します（nは0～30）。新しいボリュームを割り当てるには、特別な構文STORAGE_ID:SIZE_IN_GiBを使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scihw</span> <span class="monospaced">&lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&gt;</span><em>(デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--検索ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
cloud-init：コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-シリアル[n]</span> <span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアル・デバイスを作成（nは0～3）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shares</span> <span class="monospaced">&lt;integer&gt; (0 - 50000)</span><em>(デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
オート・バルーニングのメモリ・シェア量。この数値が大きいほど、このVMはより多くのメモリを取得します。数値は、他のすべての実行中のVMの重みに対する相対値です。ゼロを使用すると、オートバルーニングは無効になります。オートバルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbios1</span> <span class="monospaced">[base64=&lt;1|0&gt;] [,family=&lt;Base64エンコードされた文字列&gt;] [,manufacturer=&lt;Base64エンコードされた文字列&gt;] [,product=&lt;Base64エンコードされた文字列] [,serial=&lt;Base64エンコードされた文字列&gt;] [,sku=&lt;Base64エンコードされた文字列&gt;] [,uuid=&lt;UUID&gt;] [,version=&lt;Base64エンコードされた文字列&gt;</span>] と<span class="monospaced">なります</span>。</dt>
<dd>
<p>
SMBIOSタイプ1のフィールドを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smp</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPU数。代わりに -sockets オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソケット</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--spice_enhancements</span> <span class="monospaced">[foldersharing=&lt;1|0&gt;] [,videostreaming=&lt;off|all|filter&gt;</span>]。</dt>
<dd>
<p>
SPICE の追加機能拡張を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sshkeys</span> <span class="monospaced">&lt;ファイルパス</span></dt>
<dd>
<p>
cloud-init：公開 SSH 鍵を設定します (1 行に 1 つの鍵、OpenSSH 形式)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startdate</span> <span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span><em>(default =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。有効な日付のフォーマットは'now'または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=d+] [,down=d+] `.</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tablet</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスを有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VM のタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tdf</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
時間ドリフト修正の有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--テンプレート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tpmstate0</span> <span class="monospaced">[ファイル=]&lt;ボリューム&gt; [,インポート元=&lt;ソースボリューム&gt;] [,サイズ=&lt;ディスクサイズ&gt;] [,バージョン=&lt;v1.2|v2.0&gt;]。</span></dt>
<dd>
<p>
TPMの状態を保存するDiskを設定します。フォーマットは<em>rawに</em>固定されています。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。SIZE_IN_GiBはここでは無視され、代わりに4MiBが使用されることに注意してください。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[file=]&lt;volume&gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--usb[n]</span> <span class="monospaced">[[host=]&lt;HOSTUSBDEVICE|spice&gt;]の場合[,マッピング=&lt;マッピングID&gt;] [,usb3=&lt;1|0］</span></dt>
<dd>
<p>
USBデバイスを設定します（nは0～4、マシンのバージョンが7.1以上、かつostype l26またはwindows &gt; 7の場合、nは最大14まで）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vcpus</span> <span class="monospaced">&lt;整数&gt; (1 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされたvcpusの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vga</span> <span class="monospaced">[[タイプ=]&lt;enum&gt;]] [[</span>クリップボード<span class="monospaced">=&lt;</span>vnc<span class="monospaced">[クリップボード=&lt;vnc&gt;] [,メモリ=&lt;整数］</span></dt>
<dd>
<p>
VGAハードウェアを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtio[n]</span> <span class="monospaced">[file=]&lt;volume&gt; [,aio=&lt;native|threads|io_uring&gt;&gt;] [,backup=&lt;1|0&gt;] [,bps=&lt;bps&gt;] [,bps_max_length=&lt;seconds] [,bps_rd=&lt;bps&gt;] [,bps_rd_max_length=&lt;seconds&gt;] [,bps_wr=&lt;bps&gt;] [,bps_wr_max_length=&lt;seconds&gt;] [,cache=&lt;enum&gt;] [,cyls=&lt;integer&gt;] [,detect_zeroes=&lt;1|0&gt;] [,discard=&lt;ignore|on&gt;] [,format=&lt;enum&gt;] [,heads=&lt;integer&gt;] [,import-from=&lt;ソース・ボリューム&gt;] [,iops=&lt;iops&gt;] [,iops_max=&lt;iops&gt;] [,iops_max_length=&lt;seconds&gt;] [,iops_rd=&lt;iops&gt;] [,iops_rd_max=&lt;iops] [,iops_rd_max_length=&lt;seconds&gt;] [,iops_wr=&lt;iops&gt;] [,iops_wr_max=&lt;iops&gt;] [,iops_wr_max_length=&lt;seconds&gt;] [,iothread=&lt;1|0&gt;] [,mbps=&lt;mbps&gt;] [,mbps_max=&lt;mbps&gt;] [,mbps_rd=&lt;mbps&gt;] [,mbps_rd_max=&lt;mbps&gt;] [,mbps_wr=&lt;mbps&gt;] [,mbps_wr_max=&lt;mbps&gt;] [,media=&lt;cdrom|disk&gt;] [,replicate=&lt;1|0&gt;] [,rerror=&lt;ignore|report|stop&gt;] [,ro=&lt;1|0&gt;] [,secs=&lt;integer&gt; ] [,serial=&lt;serial] [,serial=&lt;serial&gt;] [,shared=&lt;1|0&gt;] [,size=&lt;DiskSize&gt;&gt;] [,snapshot=&lt;1|0&gt;] [,trans=&lt;none|lba|auto&gt;] [,werror=&lt;enum&gt;] [,secs=&lt;integer&gt;&gt;のように</span>指定します。</dt>
<dd>
<p>
ボリュームをVIRTIOハードディスクとして使用します（nは0～15）。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。既存のボリュームからインポートするには、STORAGE_ID:0と<em>import-from</em>パラメータを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmgenid</span> <span class="monospaced">&lt;UUID&gt;</span><em>(デフォルト =</em> <span class="monospaced">1 (自動生成</span>))</dt>
<dd>
<p>
VM生成IDを設定します。作成または更新時に自動生成する場合は<em>1 を</em>使用し、明示的に無効にする場合は<em>0 を</em>渡します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstatestorage</span> <span class="monospaced">&lt;ストレージID&gt;。</span></dt>
<dd>
<p>
VM 状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--watchdog</span> <span class="monospaced">[[model=]&lt;i6300esb|ib700&gt;][アクション］</span></dt>
<dd>
<p>
仮想ハードウェア・ウォッチドッグ・デバイスを作成します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm showcmd</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VMの起動に使用されるコマンドラインを表示します（デバッグ情報）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pretty</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
各オプションを改行し、可読性を高めます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップショット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたスナップショットから設定値を取得します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm shutdown</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンをシャットダウンします。これは、物理マシンの電源ボタンを押すのと似ています。これにより、ゲスト OS に ACPI イベントが送信され、クリーンシャットダウンに進むはずです。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--forceStop</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMが停止していることを確認してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keepActive</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストレージボリュームを停止しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
最大タイムアウト秒数まで待ちます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm snapshot</strong> <span class="monospaced">&lt;vmid&gt; &lt;snapname&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VMをスナップショットします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;スナップ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
テキストによる説明やコメント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstate</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
vmstateの保存</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm start</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force-cpu</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
QEMUの-cpu引数を与えられた文字列でオーバーライドします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マシン</span> <span class="monospaced">[[タイプ=]&lt;マシンタイプ&gt;]] [</span>,viommu=&lt;intel|virtio&gt;]<span class="monospaced">]</span><span class="monospaced">。</span> <span class="monospaced">[viommu=&lt;intel|virtio&gt;</span>]です。</dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-migratedfrom</span> <span class="monospaced">&lt;文字列&gt;。</span></dt>
<dd>
<p>
クラスタ・ノード名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マイグレーションネットワーク</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
移行に使用する（サブ）ネットワークのCIDR。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マイグレーションタイプ</span> <span class="monospaced">&lt;insecure | secure&gt;</span></dt>
<dd>
<p>
マイグレーショントラフィックはデフォルトでSSHトンネルを使用して暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンスを上げるためにこれを無効にすることができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stateuri</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
いくつかのコマンドは、この場所から状態を保存/復元します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットストレージ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースストレージからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソース・ストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ストレージはそれ自体にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">max(30, vmのメモリはGiB)</span>)</dt>
<dd>
<p>
最大タイムアウト秒数まで待ちます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm status</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VMのステータスを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm stop</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンを停止します。qemuプロセスは直ちに終了します。これは実行中のコンピュータの電源プラグを抜くようなもので、仮想マシンのデータを損傷する可能性があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keepActive</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストレージボリュームを停止しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-migratedfrom</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--overrule-shutdown</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
停止する前に、アクティブな<em>qmshutdown</em>タスクを中止してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
最大タイムアウト秒数まで待ちます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm suspend</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>仮想マシンを一時停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
VMの状態を保存するストレージ</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">todisk</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">-todisk</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、VMをディスクにサスペンドします。次回のVM起動時に再開されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm テンプレート</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>テンプレートを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ディスク</span> <span class="monospaced">&lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 |Scsi13 | Scsi14 | Scsi15 | Scsi16 | Scsi17 | Scsi18 | Scsi19 | Scsi2 | Scsi20 | Scsi21 | Scsi22 | Scsi23 | Scsi24 | Scsi25 | Scsi26 |scsi27｜scsi28｜scsi29｜scsi3｜scsi30｜scsi4｜scsi5｜scsi6｜scsi7｜scsi8｜scsi9｜tpmstate0｜virtio0｜virtio1｜virtio10｜virtio11｜virtio12｜virtio13｜virtio14｜virtio15｜virtio2｜virtio3｜virtio4｜virtio5｜virtio6｜virtio7｜virtio8｜virtio9</span>
</dt>
<dd>
<p>
1つのディスクだけをベースイメージに変換したい場合。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm terminal</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>シリアル・デバイスを使用してターミナルを開きます（VMには<em>シリアル</em>・デバイスが設定されている必要があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--escape</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">^O</span>)</dt>
<dd>
<p>
エスケープ文字。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--iface</span> <span class="monospaced">&lt;シリアル0 | シリアル1 | シリアル2 | シリアル3&gt;。</span></dt>
<dd>
<p>
シリアル・デバイスを選択します。デフォルトでは、単に最初の適切なデバイスを使用します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qmアンリンク</strong></p></div>
<div class="paragraph">
<p><em>qm disk unlink</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>qm アンロック</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>VMのロックを解除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm vncproxy</strong> <span class="monospaced">&lt;vmid&gt;</span>です。</p></div>
<div class="paragraph">
<p>VMのVNCトラフィックを標準入力/標準出力にプロキシ</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm wait</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VMが停止するまで待ちます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
秒単位のタイムアウト。デフォルトは永久に待ちます。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_qmrestore_strong_restore_qemuserver_span_class_monospaced_vzdump_span_backups">
<span>22.10.<strong>qmrestore</strong>- QemuServer<span class="monospaced">vzdump</span>バックアップのリストア</span> <a class="headerlink" href="#_strong_qmrestore_strong_restore_qemuserver_span_class_monospaced_vzdump_span_backups" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>qmrestore</strong> <span class="monospaced">ヘルプ</span></p></div>
<div class="paragraph">
<p><strong>qmrestore</strong> <span class="monospaced">&lt;archive&gt; &lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>QemuServer vzdumpバックアップのリストア。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;アーカイブ&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップ・ファイル。標準入力から読み込む場合は<em>- を</em>渡します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-bwlimit</span> <span class="monospaced">&lt;数値&gt; (0 - N</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
既存のVMの上書きを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ライブリストア</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
バックアップから直ちにVMを起動し、バックグラウンドでリストアします。PBSのみ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VMを指定したプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
デフォルトのストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pct_strong_proxmox_container_toolkit">
<span>22.11.<strong>pct</strong>- Proxmox Container Toolkit</span> <a class="headerlink" href="#_strong_pct_strong_proxmox_container_toolkit" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pct</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pct clone</strong> <span class="monospaced">&lt;vmid&gt; &lt;newid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナのクローン/コピーの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;newid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
クローンの VMID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのクローン制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
新しいCTの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
すべてのディスクの完全コピーを作成します。これは通常のCTをクローンするときに必ず行われます。CTテンプレートでは、デフォルトでリンクされたクローンを作成しようとします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ホスト名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
新しいCTのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
新しいCTを指定されたプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップネーム</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
フルクローンの対象ストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ターゲット・ノード。元のVMが共有ストレージ上にある場合にのみ許可されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct config</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナ構成を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--カレント</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
保留値ではなく）現在の値を取得します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップショット</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたスナップショットから設定値を取得します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct コンソール</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定したコンテナのコンソールを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--escape</span> <span class="monospaced">\^?[a-z]</span><em>(default =</em> <span class="monospaced">^a</span>)</dt>
<dd>
<p>
エスケープシーケンスの接頭辞。例えば、&lt;Ctrl+b q&gt; をエスケープシーケンスとして使うには<em>^b を</em>渡します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct cpusets</strong></p></div>
<div class="paragraph">
<p>割り当てられたCPUセットのリストを印刷します。</p></div>
<div class="paragraph">
<p><strong>pct create</strong> <span class="monospaced">&lt;vmid&gt; &lt;ostemplate&gt;</span> <span class="monospaced">[OPTIONS]を</span><strong>作成します</strong>。</p></div>
<div class="paragraph">
<p>コンテナを作成または復元します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ostemplate&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OSテンプレートまたはバックアップファイル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&gt;</span><em>(デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャの種類。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を復元</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cmode</span> <span class="monospaced">&lt;コンソール | シェル | tty&gt;</span><em>(デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、consoleコマンドは利用可能なttyデバイスの1つに接続を開こうとします。cmode を<em>console</em>に設定すると、代わりに /dev/console にアタッチしようとします。cmode を<em>shell</em> に設定すると、コンテナ内で単にシェルを起動します（ログインはしません）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コンソール</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンテナにコンソールデバイス（/dev/console）をアタッチします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コア数</span> <span class="monospaced">&lt;整数&gt; (1 - 8192</span>)</dt>
<dd>
<p>
コンテナに割り当てられたコアの数。コンテナは、デフォルトで使用可能なすべてのコアを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&lt;number&gt; (0 - 8192)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2つの</em>CPU時間があります。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&lt;integer&gt; (0 - 500000)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナの CPU 重量は、cgroup v2 では [1, 10000] にクランプされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
もっと冗長にしてみてください。今のところ、これは起動時にデバッグログレベルを有効にするだけです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェイスCTのサマリーに表示されます。これは設定ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dev[n]</span> <span class="monospaced">[[path=]＜パス］[,deny-write=&lt;1|0&gt;] [,gid=&lt;integer&gt;] [,mode=&lt;オクタルアクセスモード&gt;] [,uid=&lt;integer&gt;</span>]<span class="monospaced">[,</span>n</dt>
<dd>
<p>
コンテナへの通過装置</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--features</span> <span class="monospaced">[force_rw_sys=&lt;1|0&gt;] [,fuse=&lt;1|0&gt;] [,keyctl=&lt;1|0&gt;] [,mknod=&lt;1|0&gt;] [,mount=&lt;fstype;fstype;...&gt;] [,nesting=&lt;1|0&gt;] となります</span><span class="monospaced">。</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスできるようにします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
既存のコンテナの上書きを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのライフタイムのさまざまなステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ホスト名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ignore-unpack-errors</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
テンプレートの抽出時にエラーを無視します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&lt;バックアップ｜作成｜破壊｜ディスク｜fstrim｜マイグレーション｜マウント｜ロールバック｜スナップショット｜スナップショット-削除&gt;。</span></dt>
<dd>
<p>
コンテナのロック/アンロック</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メモリ</span> <span class="monospaced">&lt;整数&gt; (16 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mp[n]</span> <span class="monospaced">[volume=]&lt;ボリューム&gt; ,mp=&lt; パス&gt; [,acl=&lt;1|0&gt;] [,backup=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,</span>quota=&lt;1|0&gt;] [<span class="monospaced">,</span>replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,<span class="monospaced">shared=&lt;1|0&gt;] [,</span>size=&lt;DiskS<span class="monospaced">[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナ・マウント・ポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネームサーバー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの DNS サーバー IP アドレスを設定します。searchdomainもnameserverも設定しない場合、Createは自動的にホストの設定を使用します。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">net[n]</span> <span class="monospaced">name=&lt;string&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,hwaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,ip=&lt;(IPv4/CIDR|dhcp|manual)&gt;] [,ip6=&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;] [,link_down=&lt;1|0&gt;] [,mtu=&lt;integer&gt;] [,rate=&lt;mbps&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,type=&lt;veth&gt;</span>]</dt>
<dd>
<p>
コンテナのネットワーク・インタフェースを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse |ubuntu | unmanaged&gt;.</span></dt>
<dd>
<p>
OS タイプ。これは、コンテナ内の設定を行うために使用され、/usr/share/lxc/config/&lt;ostype&gt;.common.conf 内の lxc 設定スクリプトに対応します。値<em>unmanaged</em>は、OS 固有のセットアップをスキップするために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;password</span></dt>
<dd>
<p>
コンテナ内の root パスワードを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VMを指定したプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクション</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、CT または CT のディスクの削除/更新操作を防止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restore</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
これを復元タスクとしてマークします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rootfs</span> <span class="monospaced">[ボリューム=]&lt;ボリューム&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,</span>quota=&lt;1|0<span class="monospaced">&gt;] [</span>,replicate=&lt;1|0&gt;]<span class="monospaced">[</span>,ro=&lt;1|0&gt;] [,shared=&lt;1|0<span class="monospaced">&gt;] [,</span>size=&lt;DiskS<span class="monospaced">[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--検索ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定しない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ssh-公開鍵</span> <span class="monospaced">&lt;ファイルパス</span></dt>
<dd>
<p>
公開SSH鍵を設定します（1行に1つの鍵、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CTの作成が正常に終了したら、CTを開始します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=d+] [,down=d+] `.</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&lt;ストレージID&gt;</span><em>(デフォルト =</em> <span class="monospaced">ローカル</span>)</dt>
<dd>
<p>
デフォルトのストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スワップ</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
MB単位のコンテナのSWAP量。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--テンプレート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムゾーン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナで使用するタイムゾーン。オプションが設定されていない場合は、何も行われません。ホストのタイムゾーンに合わせるために<em>host</em>を設定するか、/usr/share/zoneinfo/zone.tab から任意のタイムゾーンオプションを設定することができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tty</span> <span class="monospaced">&lt;整数&gt; (0 - 6)</span><em>(デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナで利用可能なttyの数を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">リストア</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unprivileged</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します。(手動で変更してはいけません)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--未使用[n]</span> <span class="monospaced">[ボリューム=]&lt;ボリューム</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct delsnapshot</strong> <span class="monospaced">&lt;vmid&gt; &lt;snapname&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>LXCスナップショットを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;スナップ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ディスクスナップショットの削除に失敗した場合でも、設定ファイルから削除できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct destroy</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナを破棄します（使用中のファイルもすべて削除します）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-destroy-unreferenced-disks</span> <span class="monospaced">&lt;boolean&gt;。</span></dt>
<dd>
<p>
設定されている場合、設定内で参照されていないすべての有効なストレージから、VMIDを持つすべてのディスクを追加で破棄します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
走っていても強制破壊。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パージ</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
関連するすべての構成からコンテナを削除します。たとえば、バックアップジョブ、レプリケーションジョブ、HAなどです。関連するACLとファイアウォールのエントリは<strong>常に</strong>削除されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct df</strong> <span class="monospaced">&lt;vmid&gt;</span></p></div>
<div class="paragraph">
<p>コンテナの現在のディスク使用量を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct enter</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定したコンテナのシェルを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-env</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在の環境を維持します。このオプションは PVE 9 ではデフォルトで無効になります。保存された環境に依存している場合は、将来を見越してこのオプションを使用してください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct exec</strong> <span class="monospaced">&lt;vmid&gt; [&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定したコンテナ内でコマンドを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;:</span> <span class="monospaced">&lt;array&gt; です。</span></dt>
<dd>
<p>
配列としての追加引数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-env</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在の環境を維持します。このオプションは PVE 9 ではデフォルトで無効になります。保存された環境に依存している場合は、将来を見越してこのオプションを使用してください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct fsck</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナ・ボリュームでファイルシステム・チェック（fsck）を実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--device</span> <span class="monospaced">&lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111| mp112 | mp113 | mp114 | mp115 | mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp127 | mp127mp126｜mp127｜mp128｜mp129｜mp13｜mp130｜mp131｜mp132｜mp133｜mp134｜mp135｜mp136｜mp137｜mp138｜mp139｜mp14| MP140｜MP141｜MP142｜MP143｜MP144｜MP145｜MP146｜MP147｜MP148｜MP149｜MP15｜MP150｜MP151｜MP152｜MP153｜MP154｜MP155｜MP151｜MP152｜MP153｜MP154｜MP155｜MP155｜MP156｜MP157｜MP158｜MP159｜MP15mp154 | mp155 | mp156 | mp157 | mp158 | mp159 | mp16 | mp160 | mp161 | mp162 | mp163 | mp164 | mp165 | mp166 | mp167 |MP168｜MP169｜MP17｜MP170｜MP171｜MP172｜MP173｜MP174｜MP175｜MP176｜MP177｜MP178｜MP179｜MP18｜MP180｜MP181| mp181｜｜mp182｜｜mp183｜｜mp184｜｜mp185｜｜mp186｜｜mp187｜｜mp188｜｜mp189｜｜mp19｜｜mp190｜｜mp191｜｜mp192｜｜mp193｜｜mp194｜｜mp195｜｜mp196｜｜mp197｜｜｜mp197mp196｜mp197｜mp198｜mp199｜mp2｜mp20｜mp200｜mp201｜mp202｜mp203｜mp204｜mp205｜mp206｜mp207｜mp208｜mp209| mp21｜mp210｜mp211｜mp212｜mp213｜mp214｜mp215｜mp216｜mp217｜mp218｜mp219｜mp22｜mp220｜mp221｜mp222| mp223｜mp224｜mp225｜mp226｜mp227｜mp228｜mp229｜mp23｜mp230｜mp231｜mp232｜mp233｜mp234｜mp235｜mp236｜mp237｜mp238｜mp236｜mp236mp237｜mp238｜mp239｜mp24｜mp240｜mp241｜mp242｜mp243｜mp244｜mp245｜mp246｜mp247｜mp248｜mp249｜mp25｜mp250| mp251｜mp252｜mp253｜mp254｜mp255｜mp26｜mp27｜mp28｜mp29｜mp3｜mp30｜mp31｜mp32｜mp33｜mp34｜mp35｜mp36| mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 | mp46 | mp47 | mp48 | mp49 | mp5 | mp50 | mp51 |mp52 | mp53 | mp54 | mp55 | mp56 | mp57 | mp58 | mp59 | mp6 | mp60 | mp61 | mp62 | mp63 | mp64 | mp65 | mp66 | mp67 | mp68 |mp69 | mp7 | mp70 | mp71 | mp72 | mp73 | mp74 | mp75 | mp76 | mp77 | mp78 | mp79 | mp8 | mp80 | mp81 | mp82 | mp83 | mp84| mp85｜mp86｜mp87｜mp88｜mp89｜mp9｜mp90｜mp91｜mp92｜mp93｜mp94｜mp95｜mp96｜mp97｜mp98｜mp99｜rootfs</span>
</dt>
<dd>
<p>
ファイルシステム・チェックを実行するボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイルシステムがクリーンであるように見えても強制チェック</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct fstrim</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>選択したCTとそのマウントポイント（バインドまたは読み取り専用マウントポイントを除く）に対してfstrimを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ignore-mountpoints</span> <span class="monospaced">&lt;boolean&gt;。</span></dt>
<dd>
<p>
すべてのマウントポイントをスキップし、コンテナルート上のfstrimのみを実行します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>パーセントリスト</strong></p></div>
<div class="paragraph">
<p>LXC コンテナのインデックス（ノードごと）。</p></div>
<div class="paragraph">
<p><strong>pct listsnapshot</strong> <span class="monospaced">&lt;vmid&gt;</span>です。</p></div>
<div class="paragraph">
<p>すべてのスナップショットを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct migrate</strong> <span class="monospaced">&lt;vmid&gt; &lt;target&gt;</span> <span class="monospaced">[OPTIONS] (</span><strong>マイグレート</strong> <span class="monospaced">&lt;vmid&gt; &lt;ターゲット&gt;</span> <span class="monospaced">[オプション])</span></p></div>
<div class="paragraph">
<p>コンテナを別のノードに移行します。新しいマイグレーションタスクを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
対象ノード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのマイグレーション制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--オンライン</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
オンライン/ライブマイグレーションを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restart</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
リスタートマイグレーションを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットストレージ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースストレージからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソース・ストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ストレージはそれ自体にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
再移行のためのシャットダウンのタイムアウト時間（秒</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct マウント</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>コンテナのファイルシステムをホストにマウントします。これはコンテナに対するロックを保持し、コンテナに対する起動と停止以外の操作を防止するため、緊急メンテナンスのみを目的としています。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct move-volume</strong> <span class="monospaced">&lt;vmid&gt; &lt;volume&gt; [&lt;storage&gt;] [&lt;target-vmid&gt;] [&lt;target-volume&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>rootfs-/mp-ボリュームを別のストレージまたは別のコンテナに移動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ボリューム&gt;：</span> <span class="monospaced">&lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111 | mp112 | mp113 | mp114 | mp115| mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp128 | mp129 | mp13 | mp130 | mp131 | mp132MP133｜MP134｜MP135｜MP136｜MP137｜MP138｜MP139｜MP14｜MP140｜MP141｜MP142｜MP143｜MP144｜MP145｜MP146｜MP147｜MP148｜MP149｜MP15｜MP150｜MP151｜MP151｜MP152｜MP146｜MP147｜MP148｜MP149｜MP15｜MP15MP150｜MP151｜MP152｜MP153｜MP154｜MP155｜MP156｜MP157｜MP158｜MP159｜MP16｜MP160｜MP161｜MP162｜MP163｜MP164｜MP165｜MP166｜MP167｜MP168| MP169｜MP17｜MP170｜MP171｜MP172｜MP173｜MP174｜MP175｜MP176｜MP177｜MP178｜MP179｜MP18｜MP180｜MP181｜MP182｜MP183｜MP184｜MP185｜MP186｜MP187｜MP185mp186｜mp187｜mp188｜mp189｜mp19｜mp190｜mp191｜mp192｜mp193｜mp194｜mp195｜mp196｜mp197｜mp198｜mp199｜mp2｜mp20｜mp200｜mp201｜mp202| mp203 | mp204 | mp205 | mp206 | mp207 | mp208 | mp209 | mp21 | mp210 | mp211 | mp212 | mp213 | mp214 | mp215 | mp216 | mp217 | mp218 | mp219 | mp22 |mp220｜mp221｜mp222｜mp223｜mp224｜mp225｜mp226｜mp227｜mp228｜mp229｜mp23｜mp230｜mp231｜mp232｜mp233｜mp234｜mp235｜mp236｜mp237｜mp238| MP239｜MP24｜MP240｜MP241｜MP242｜MP243｜MP244｜MP245｜MP246｜MP247｜MP248｜MP249｜MP25｜MP250｜MP251｜MP252｜MP253｜MP254｜MP255| mp26 | mp27 | mp28 | mp29 | mp3 | mp30 | mp31 | mp32 | mp33 | mp34 | mp35 | mp36 | mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 |mp46｜mp47｜mp48｜mp49｜mp5｜mp50｜mp51｜mp52｜mp53｜mp54｜mp55｜mp56｜mp57｜mp58｜mp59｜mp6｜mp60｜mp61｜mp62｜mp63｜mp64｜mp65｜MP66｜MP67｜MP68｜MP68mp66｜mp67｜mp68｜mp69｜mp7｜mp70｜mp71｜mp72｜mp73｜mp74｜mp75｜mp76｜mp77｜mp78｜mp79｜mp8｜mp80｜mp81｜mp82｜mp83｜mp84｜mp85｜mp86| mp87｜mp88｜mp89｜mp9｜mp90｜mp91｜mp92｜mp93｜mp94｜mp95｜mp96｜mp97｜mp98｜mp99｜rootfs｜unused0｜unused1｜unused10｜unused100｜unused101｜unused10｜unused100｜unused100unused101｜unused102｜unused103｜unused104｜unused105｜unused106｜unused107｜unused108｜unused109｜unused11｜unused110｜unused111｜unused112｜未使用未使用113号｜未使用114号｜未使用115号｜未使用116号｜未使用117号｜未使用118号｜未使用119号｜未使用120号｜未使用121号｜未使用122号｜未使用123号｜未使用124号｜未使用125号｜未使用126号｜未使用127号｜未使用128号｜未使用129号｜未使用13号｜未使用130号｜未使用131号｜未使用132号｜未使用133号｜未使用134号｜未使用135号｜未使用136号｜未使用未使用137｜未使用138｜未使用139｜未使用14｜未使用140｜未使用141｜未使用142｜未使用143｜未使用144｜未使用145｜未使用146｜未使用147｜未使用148｜未使用149｜未使用15｜未使用150｜未使用151｜未使用152｜未使用153｜未使用154｜未使用155｜未使用156｜未使用157｜未使用158｜未使用159｜未使用16| 未使用160｜未使用161｜未使用162｜未使用163｜未使用164｜未使用165｜未使用166｜未使用167｜未使用168｜未使用169｜未使用17｜未使用170｜未使用171｜未使用172｜未使用173｜未使用174｜未使用175｜未使用176｜未使用177｜未使用178｜未使用179｜未使用18｜未使用180｜未使用181｜未使用182未使用183号｜未使用184号｜未使用185号｜未使用186号｜未使用187号｜未使用188号｜未使用189号｜未使用190号｜未使用191号｜未使用192号｜未使用193号｜未使用194号｜未使用195号｜未使用196号｜未使用197号｜未使用198号｜未使用199号｜未使用2号｜未使用20号｜未使用200号｜未使用201号｜未使用202号｜未使用203号｜未使用204号｜未使用205号未使用206号｜未使用207号｜未使用208号｜未使用209号｜未使用21号｜未使用210号｜未使用211号｜未使用212号｜未使用213号｜未使用214号｜未使用215号｜未使用216号｜未使用217号｜未使用218号｜未使用219号｜未使用221号｜未使用222号｜未使用223号｜未使用224号｜未使用225号｜未使用226号｜未使用227号｜未使用228号｜未使用229号｜未使用229号未使用23｜未使用230｜未使用231｜未使用232｜未使用233｜未使用234｜未使用235｜未使用236｜未使用237｜未使用238｜未使用239｜未使用24｜未使用240｜未使用241｜未使用242｜未使用243｜未使用244｜未使用245｜未使用246｜未使用247｜未使用248｜未使用249｜未使用25｜未使用250｜未使用251｜未使用252| 未使用253｜未使用254｜未使用255｜未使用26｜未使用27｜未使用28｜未使用29｜未使用3｜未使用30｜未使用31｜未使用32｜未使用33｜未使用34｜未使用35｜未使用36｜未使用37｜未使用38｜未使用39｜未使用4｜未使用40｜未使用41｜未使用42｜未使用43｜未使用44｜未使用45｜未使用46｜未使用47｜未使用48| 未使用5:未使用50:未使用51:未使用52:未使用53:未使用54:未使用55:未使用56:未使用57:未使用58:未使用59:未使用6:未使用60:未使用61:未使用62:未使用63:未使用64:未使用65:未使用66:未使用67:未使用68:未使用69:未使用7:未使用70:未使用71:未使用72:未使用73:未使用73未使用74｜未使用75｜未使用76｜未使用77｜未使用78｜未使用79｜未使用8｜未使用80｜未使用81｜未使用82｜未使用83｜未使用84｜未使用85｜未使用86｜未使用87｜未使用88｜未使用89｜未使用9｜未使用90｜未使用91｜未使用92｜未使用93｜未使用94｜未使用95｜未使用96｜未使用97｜未使用98｜未使用99＞。</span>
</dt>
<dd>
<p>
移動するボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
対象ストレージ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット-vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲットボリューム&gt;：</span> <span class="monospaced">&lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111 | mp112 | mp113 | mp114 | mp115| mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp128 | mp129 | mp13 | mp130 | mp131 | mp132MP133｜MP134｜MP135｜MP136｜MP137｜MP138｜MP139｜MP14｜MP140｜MP141｜MP142｜MP143｜MP144｜MP145｜MP146｜MP147｜MP148｜MP149｜MP15｜MP150｜MP151｜MP151｜MP152｜MP146｜MP147｜MP148｜MP149｜MP15｜MP15MP150｜MP151｜MP152｜MP153｜MP154｜MP155｜MP156｜MP157｜MP158｜MP159｜MP16｜MP160｜MP161｜MP162｜MP163｜MP164｜MP165｜MP166｜MP167｜MP168| MP169｜MP17｜MP170｜MP171｜MP172｜MP173｜MP174｜MP175｜MP176｜MP177｜MP178｜MP179｜MP18｜MP180｜MP181｜MP182｜MP183｜MP184｜MP185｜MP186｜MP187｜MP185mp186｜mp187｜mp188｜mp189｜mp19｜mp190｜mp191｜mp192｜mp193｜mp194｜mp195｜mp196｜mp197｜mp198｜mp199｜mp2｜mp20｜mp200｜mp201｜mp202| mp203 | mp204 | mp205 | mp206 | mp207 | mp208 | mp209 | mp21 | mp210 | mp211 | mp212 | mp213 | mp214 | mp215 | mp216 | mp217 | mp218 | mp219 | mp22 |mp220｜mp221｜mp222｜mp223｜mp224｜mp225｜mp226｜mp227｜mp228｜mp229｜mp23｜mp230｜mp231｜mp232｜mp233｜mp234｜mp235｜mp236｜mp237｜mp238| MP239｜MP24｜MP240｜MP241｜MP242｜MP243｜MP244｜MP245｜MP246｜MP247｜MP248｜MP249｜MP25｜MP250｜MP251｜MP252｜MP253｜MP254｜MP255| mp26 | mp27 | mp28 | mp29 | mp3 | mp30 | mp31 | mp32 | mp33 | mp34 | mp35 | mp36 | mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 |mp46｜mp47｜mp48｜mp49｜mp5｜mp50｜mp51｜mp52｜mp53｜mp54｜mp55｜mp56｜mp57｜mp58｜mp59｜mp6｜mp60｜mp61｜mp62｜mp63｜mp64｜mp65｜MP66｜MP67｜MP68｜MP68mp66｜mp67｜mp68｜mp69｜mp7｜mp70｜mp71｜mp72｜mp73｜mp74｜mp75｜mp76｜mp77｜mp78｜mp79｜mp8｜mp80｜mp81｜mp82｜mp83｜mp84｜mp85｜mp86| mp87｜mp88｜mp89｜mp9｜mp90｜mp91｜mp92｜mp93｜mp94｜mp95｜mp96｜mp97｜mp98｜mp99｜rootfs｜unused0｜unused1｜unused10｜unused100｜unused101｜unused10｜unused100｜unused100unused101｜unused102｜unused103｜unused104｜unused105｜unused106｜unused107｜unused108｜unused109｜unused11｜unused110｜unused111｜unused112｜未使用未使用113号｜未使用114号｜未使用115号｜未使用116号｜未使用117号｜未使用118号｜未使用119号｜未使用120号｜未使用121号｜未使用122号｜未使用123号｜未使用124号｜未使用125号｜未使用126号｜未使用127号｜未使用128号｜未使用129号｜未使用13号｜未使用130号｜未使用131号｜未使用132号｜未使用133号｜未使用134号｜未使用135号｜未使用136号｜未使用未使用137｜未使用138｜未使用139｜未使用14｜未使用140｜未使用141｜未使用142｜未使用143｜未使用144｜未使用145｜未使用146｜未使用147｜未使用148｜未使用149｜未使用15｜未使用150｜未使用151｜未使用152｜未使用153｜未使用154｜未使用155｜未使用156｜未使用157｜未使用158｜未使用159｜未使用16| 未使用160｜未使用161｜未使用162｜未使用163｜未使用164｜未使用165｜未使用166｜未使用167｜未使用168｜未使用169｜未使用17｜未使用170｜未使用171｜未使用172｜未使用173｜未使用174｜未使用175｜未使用176｜未使用177｜未使用178｜未使用179｜未使用18｜未使用180｜未使用181｜未使用182未使用183号｜未使用184号｜未使用185号｜未使用186号｜未使用187号｜未使用188号｜未使用189号｜未使用190号｜未使用191号｜未使用192号｜未使用193号｜未使用194号｜未使用195号｜未使用196号｜未使用197号｜未使用198号｜未使用199号｜未使用2号｜未使用20号｜未使用200号｜未使用201号｜未使用202号｜未使用203号｜未使用204号｜未使用205号未使用206号｜未使用207号｜未使用208号｜未使用209号｜未使用21号｜未使用210号｜未使用211号｜未使用212号｜未使用213号｜未使用214号｜未使用215号｜未使用216号｜未使用217号｜未使用218号｜未使用219号｜未使用221号｜未使用222号｜未使用223号｜未使用224号｜未使用225号｜未使用226号｜未使用227号｜未使用228号｜未使用229号｜未使用229号未使用23｜未使用230｜未使用231｜未使用232｜未使用233｜未使用234｜未使用235｜未使用236｜未使用237｜未使用238｜未使用239｜未使用24｜未使用240｜未使用241｜未使用242｜未使用243｜未使用244｜未使用245｜未使用246｜未使用247｜未使用248｜未使用249｜未使用25｜未使用250｜未使用251｜未使用252| 未使用253｜未使用254｜未使用255｜未使用26｜未使用27｜未使用28｜未使用29｜未使用3｜未使用30｜未使用31｜未使用32｜未使用33｜未使用34｜未使用35｜未使用36｜未使用37｜未使用38｜未使用39｜未使用4｜未使用40｜未使用41｜未使用42｜未使用43｜未使用44｜未使用45｜未使用46｜未使用47｜未使用48| 未使用5:未使用50:未使用51:未使用52:未使用53:未使用54:未使用55:未使用56:未使用57:未使用58:未使用59:未使用6:未使用60:未使用61:未使用62:未使用63:未使用64:未使用65:未使用66:未使用67:未使用68:未使用69:未使用7:未使用70:未使用71:未使用72:未使用73:未使用73未使用74｜未使用75｜未使用76｜未使用77｜未使用78｜未使用79｜未使用8｜未使用80｜未使用81｜未使用82｜未使用83｜未使用84｜未使用85｜未使用86｜未使用87｜未使用88｜未使用89｜未使用9｜未使用90｜未使用91｜未使用92｜未使用93｜未使用94｜未使用95｜未使用96｜未使用97｜未使用98｜未使用99＞。</span>
</dt>
<dd>
<p>
ボリュームの移動先のコンフィグキー。デフォルトは移動元のボリュームキーです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのクローン制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コピー成功後、元のボリュームを削除します。デフォルトでは、オリジナルは未使用のボリューム・エントリとして保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1" . "ダイジェストが異なる場合、変更を防止します。これは同時変更を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲット・ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ターゲット" . "コンテナの現在の設定ファイルが異なる SHA1 ダイジェストを持つ場合、変更を防止。これは同時変更を防ぐために" .</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct 移動量</strong></p></div>
<div class="paragraph">
<p><em>pct move-volumeの</em>エイリアス。</p></div>
<div class="paragraph">
<p><strong>pct 保留中</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>保留中の変更を含むコンテナ構成を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct pull</strong> <span class="monospaced">&lt;vmid&gt; &lt;path&gt; &lt;destination&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナからローカルシステムにファイルをコピー。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
プルするコンテナ内のファイルへのパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;目的地&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
目的地</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
所有者のグループ名または ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--perms</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
使用するファイルパーミッション（デフォルトは8進数、16進数の場合は先頭に<em>0xを</em>付けます）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ユーザー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
所有者のユーザー名またはID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct push</strong> <span class="monospaced">&lt;vmid&gt; &lt;file&gt; &lt;destination&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ローカルファイルをコンテナにコピー。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ファイル&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ローカルファイルへのパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;目的地&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナ内の書き込み先。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
オーナー・グループ名または ID。名前を使用する場合は、コンテナ内に存在する必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--perms</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
使用するファイルパーミッション（デフォルトは8進数、16進数の場合は先頭に<em>0xを</em>付けます）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ユーザー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
所有者のユーザー名または ID。名前を使用する場合は、コンテナ内に存在する必要があります。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct reboot</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナをシャットダウンして再起動します。保留中の変更を適用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
シャットダウンまで最大タイムアウト秒数待ちます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct remote-migrate</strong> <span class="monospaced">&lt;vmid&gt; [&lt;target-vmid&gt;] &lt;target-endpoint&gt; --target-bridge &lt;string&gt; --target-storage &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナをリモートクラスタに移行します。新しいマイグレーションタスクを作成します。 EXPERIMENTAL 機能！</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット-vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲットエンドポイント&gt;:</span> <span class="monospaced">apitoken=&lt;PVEAPIToken=user@realm!token=SECRET&gt; ,host=&lt;ADDRESS&gt; [,fingerprint=&lt;FINGERPRINT&gt;] [,port=&lt;PORT&gt;</span>].</dt>
<dd>
<p>
リモートターゲットエンドポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのマイグレーション制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行成功後、元のCTと関連データを削除します。デフォルトでは、元のCTは停止状態で移行元クラスタに保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--オンライン</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
オンライン/ライブマイグレーションを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restart</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
リスタートマイグレーションを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲットブリッジ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソース・ブリッジからターゲット・ブリッジへのマッピング。単一のブリッジ ID だけを指定すると、すべてのソース・ブリッジがそのブリッジにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ブリッジはそれ自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ターゲットストレージ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースストレージからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソース・ストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソース・ストレージはそれ自体にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
再移行のためのシャットダウンのタイムアウト時間（秒</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct rescan</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>すべてのストレージを再スキャンし、ディスクサイズと未使用ディスクイメージを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--ドライラン</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
実際にコンフィギュレーションに変更を書き込まないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct resize</strong> <span class="monospaced">&lt;vmid&gt; &lt;disk&gt; &lt;size&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナマウントポイントのサイズを変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ディスク&gt;：</span> <span class="monospaced">&lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111| mp112 | mp113 | mp114 | mp115 | mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp127 | mp127mp126｜mp127｜mp128｜mp129｜mp13｜mp130｜mp131｜mp132｜mp133｜mp134｜mp135｜mp136｜mp137｜mp138｜mp139｜mp14| MP140｜MP141｜MP142｜MP143｜MP144｜MP145｜MP146｜MP147｜MP148｜MP149｜MP15｜MP150｜MP151｜MP152｜MP153｜MP154｜MP155｜MP151｜MP152｜MP153｜MP154｜MP155｜MP155｜MP156｜MP157｜MP158｜MP159｜MP15mp154 | mp155 | mp156 | mp157 | mp158 | mp159 | mp16 | mp160 | mp161 | mp162 | mp163 | mp164 | mp165 | mp166 | mp167 |MP168｜MP169｜MP17｜MP170｜MP171｜MP172｜MP173｜MP174｜MP175｜MP176｜MP177｜MP178｜MP179｜MP18｜MP180｜MP181| mp181｜mp182｜mp183｜mp184｜mp185｜mp186｜mp187｜mp188｜mp189｜mp19｜mp190｜mp191｜mp192｜mp193｜mp194｜mp195｜mp196｜mp197｜mp197mp196｜mp197｜mp198｜mp199｜mp2｜mp20｜mp200｜mp201｜mp202｜mp203｜mp204｜mp205｜mp206｜mp207｜mp208｜mp209| mp21｜mp210｜mp211｜mp212｜mp213｜mp214｜mp215｜mp216｜mp217｜mp218｜mp219｜mp22｜mp220｜mp221｜mp222| mp223｜mp224｜mp225｜mp226｜mp227｜mp228｜mp229｜mp23｜mp230｜mp231｜mp232｜mp233｜mp234｜mp235｜mp236｜mp237｜mp238｜mp236｜mp236mp237｜mp238｜mp239｜mp24｜mp240｜mp241｜mp242｜mp243｜mp244｜mp245｜mp246｜mp247｜mp248｜mp249｜mp25｜mp250| mp251｜mp252｜mp253｜mp254｜mp255｜mp26｜mp27｜mp28｜mp29｜mp3｜mp30｜mp31｜mp32｜mp33｜mp34｜mp35｜mp36| mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 | mp46 | mp47 | mp48 | mp49 | mp5 | mp50 | mp51 |mp52 | mp53 | mp54 | mp55 | mp56 | mp57 | mp58 | mp59 | mp6 | mp60 | mp61 | mp62 | mp63 | mp64 | mp65 | mp66 | mp67 | mp68 |mp69 | mp7 | mp70 | mp71 | mp72 | mp73 | mp74 | mp75 | mp76 | mp77 | mp78 | mp79 | mp8 | mp80 | mp81 | mp82 | mp83 | mp84| mp85｜mp86｜mp87｜mp88｜mp89｜mp9｜mp90｜mp91｜mp92｜mp93｜mp94｜mp95｜mp96｜mp97｜mp98｜mp99｜rootfs</span>
</dt>
<dd>
<p>
サイズを変更したいディスク。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;サイズ&gt;です：</span> <span class="monospaced">\+?\d+(\.\d+)?[KMGT]?</span>
</dt>
<dd>
<p>
新しいサイズ。<em>記号を</em>付けると、その値はボリュームの実際のサイズに加算され、付けない場合は絶対値となります。ディスク・サイズの縮小はサポートされていません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルの SHA1 ダイジェストが異なる場合に変更を防止します。これは、同時変更を防ぐために使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct restore</strong> <span class="monospaced">&lt;vmid&gt; &lt;ostemplate&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナを作成または復元します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ostemplate&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OSテンプレートまたはバックアップファイル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&gt;</span><em>(デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャの種類。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;number&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を復元</span>)</dt>
<dd>
<p>
I/O帯域幅制限のオーバーライド（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cmode</span> <span class="monospaced">&lt;コンソール | シェル | tty&gt;</span><em>(デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、consoleコマンドは利用可能なttyデバイスの1つに接続を開こうとします。cmode を<em>console</em>に設定すると、代わりに /dev/console にアタッチしようとします。cmode を<em>shell</em> に設定すると、コンテナ内で単にシェルを起動します（ログインはしません）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コンソール</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンテナにコンソールデバイス（/dev/console）をアタッチします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コア数</span> <span class="monospaced">&lt;整数&gt; (1 - 8192</span>)</dt>
<dd>
<p>
コンテナに割り当てられたコアの数。コンテナは、デフォルトで使用可能なすべてのコアを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&lt;number&gt; (0 - 8192)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2つの</em>CPU時間があります。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&lt;integer&gt; (0 - 500000)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナの CPU 重量は、cgroup v2 では [1, 10000] にクランプされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
もっと冗長にしてみてください。今のところ、これは起動時にデバッグログレベルを有効にするだけです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェイスCTのサマリーに表示されます。これは設定ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dev[n]</span> <span class="monospaced">[[path=]＜パス］[,deny-write=&lt;1|0&gt;] [,gid=&lt;integer&gt;] [,mode=&lt;オクタルアクセスモード&gt;] [,uid=&lt;integer&gt;</span>]<span class="monospaced">[,</span>n</dt>
<dd>
<p>
コンテナへの通過装置</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--features</span> <span class="monospaced">[force_rw_sys=&lt;1|0&gt;] [,fuse=&lt;1|0&gt;] [,keyctl=&lt;1|0&gt;] [,mknod=&lt;1|0&gt;] [,mount=&lt;fstype;fstype;...&gt;] [,nesting=&lt;1|0&gt;] となります</span><span class="monospaced">。</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスできるようにします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
既存のコンテナの上書きを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのライフタイムのさまざまなステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ホスト名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ignore-unpack-errors</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
テンプレートの抽出時にエラーを無視します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&lt;バックアップ｜作成｜破壊｜ディスク｜fstrim｜マイグレーション｜マウント｜ロールバック｜スナップショット｜スナップショット-削除&gt;。</span></dt>
<dd>
<p>
コンテナのロック/アンロック</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メモリ</span> <span class="monospaced">&lt;整数&gt; (16 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mp[n]</span> <span class="monospaced">[volume=]&lt;ボリューム&gt; ,mp=&lt; パス&gt; [,acl=&lt;1|0&gt;] [,backup=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,</span>quota=&lt;1|0&gt;] [<span class="monospaced">,</span>replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,<span class="monospaced">shared=&lt;1|0&gt;] [,</span>size=&lt;DiskS<span class="monospaced">[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナ・マウント・ポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネームサーバー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの DNS サーバー IP アドレスを設定します。searchdomainもnameserverも設定しない場合、Createは自動的にホストの設定を使用します。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">net[n]</span> <span class="monospaced">name=&lt;string&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,hwaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,ip=&lt;(IPv4/CIDR|dhcp|manual)&gt;] [,ip6=&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;] [,link_down=&lt;1|0&gt;] [,mtu=&lt;integer&gt;] [,rate=&lt;mbps&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,type=&lt;veth&gt;</span>]</dt>
<dd>
<p>
コンテナのネットワーク・インタフェースを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse |ubuntu | unmanaged&gt;.</span></dt>
<dd>
<p>
OS タイプ。これは、コンテナ内の設定を行うために使用され、/usr/share/lxc/config/&lt;ostype&gt;.common.conf 内の lxc 設定スクリプトに対応します。値<em>unmanaged</em>は、OS 固有のセットアップをスキップするために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;password</span></dt>
<dd>
<p>
コンテナ内の root パスワードを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
VMを指定したプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクション</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、CT または CT のディスクの削除/更新操作を防止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rootfs</span> <span class="monospaced">[ボリューム=]&lt;ボリューム&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,</span>quota=&lt;1|0<span class="monospaced">&gt;] [</span>,replicate=&lt;1|0&gt;]<span class="monospaced">[</span>,ro=&lt;1|0&gt;] [,shared=&lt;1|0<span class="monospaced">&gt;] [,</span>size=&lt;DiskS<span class="monospaced">[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--検索ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定しない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ssh-公開鍵</span> <span class="monospaced">&lt;ファイルパス</span></dt>
<dd>
<p>
公開SSH鍵を設定します（1行に1つの鍵、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CTの作成が正常に終了したら、CTを開始します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=d+] [,down=d+] `.</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&lt;ストレージID&gt;</span><em>(デフォルト =</em> <span class="monospaced">ローカル</span>)</dt>
<dd>
<p>
デフォルトのストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スワップ</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
MB単位のコンテナのSWAP量。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--テンプレート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムゾーン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナで使用するタイムゾーン。オプションが設定されていない場合は、何も行われません。ホストのタイムゾーンに合わせるために<em>host</em>を設定するか、/usr/share/zoneinfo/zone.tab から任意のタイムゾーンオプションを設定することができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tty</span> <span class="monospaced">&lt;整数&gt; (0 - 6)</span><em>(デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナで利用可能なttyの数を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">リストア</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unprivileged</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します。(手動で変更してはいけません)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--未使用[n]</span> <span class="monospaced">[ボリューム=]&lt;ボリューム</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct レジューム</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>コンテナを再開します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct rollback</strong> <span class="monospaced">&lt;vmid&gt; &lt;スナップ名&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>LXCの状態を指定したスナップショットにロールバックします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;スナップ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ロールバック成功後にコンテナを起動するかどうか</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct set</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナのオプションを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&gt;</span><em>(デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャの種類。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cmode</span> <span class="monospaced">&lt;コンソール | シェル | tty&gt;</span><em>(デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、consoleコマンドは利用可能なttyデバイスの1つに接続を開こうとします。cmode を<em>console</em>に設定すると、代わりに /dev/console にアタッチしようとします。cmode を<em>shell</em> に設定すると、コンテナ内で単にシェルを起動します（ログインはしません）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コンソール</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンテナにコンソールデバイス（/dev/console）をアタッチします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コア数</span> <span class="monospaced">&lt;整数&gt; (1 - 8192</span>)</dt>
<dd>
<p>
コンテナに割り当てられたコアの数。コンテナは、デフォルトで使用可能なすべてのコアを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&lt;number&gt; (0 - 8192)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用量の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2つの</em>CPU時間があります。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&lt;integer&gt; (0 - 500000)</span><em>(デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナの CPU 重量は、cgroup v2 では [1, 10000] にクランプされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
もっと冗長にしてみてください。今のところ、これは起動時にデバッグログレベルを有効にするだけです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェイスCTのサマリーに表示されます。これは設定ファイルのコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dev[n]</span> <span class="monospaced">[[path=]＜パス］[,deny-write=&lt;1|0&gt;] [,gid=&lt;integer&gt;] [,mode=&lt;オクタルアクセスモード&gt;] [,uid=&lt;integer&gt;</span>]<span class="monospaced">[,</span>n</dt>
<dd>
<p>
コンテナへの通過装置</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在の設定ファイルの SHA1 ダイジェストが異なる場合に変更を防止します。これは同時変更を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--features</span> <span class="monospaced">[force_rw_sys=&lt;1|0&gt;] [,fuse=&lt;1|0&gt;] [,keyctl=&lt;1|0&gt;] [,mknod=&lt;1|0&gt;] [,mount=&lt;fstype;fstype;...&gt;] [,nesting=&lt;1|0&gt;] となります</span><span class="monospaced">。</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスできるようにします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのライフタイムのさまざまなステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ホスト名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&lt;バックアップ｜作成｜破壊｜ディスク｜fstrim｜マイグレーション｜マウント｜ロールバック｜スナップショット｜スナップショット-削除&gt;。</span></dt>
<dd>
<p>
コンテナのロック/アンロック</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メモリ</span> <span class="monospaced">&lt;整数&gt; (16 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mp[n]</span> <span class="monospaced">[volume=]&lt;ボリューム&gt; ,mp=&lt; パス&gt; [,acl=&lt;1|0&gt;] [,backup=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,</span>quota=&lt;1|0&gt;] [<span class="monospaced">,</span>replicate=&lt;1|0&gt;] [,ro=&lt;1|0&gt;] [,<span class="monospaced">shared=&lt;1|0&gt;] [,</span>size=&lt;DiskS<span class="monospaced">[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナ・マウント・ポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネームサーバー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナの DNS サーバー IP アドレスを設定します。searchdomainもnameserverも設定しない場合、Createは自動的にホストの設定を使用します。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">net[n]</span> <span class="monospaced">name=&lt;string&gt; [,bridge=&lt;bridge&gt;] [,firewall=&lt;1|0&gt;] [,gw=&lt;GatewayIPv4&gt;] [,gw6=&lt;GatewayIPv6&gt;] [,hwaddr=&lt;XX:XX:XX:XX:XX：XX&gt;] [,ip=&lt;(IPv4/CIDR|dhcp|manual)&gt;] [,ip6=&lt;(IPv6/CIDR|auto|dhcp|manual)&gt;] [,link_down=&lt;1|0&gt;] [,mtu=&lt;integer&gt;] [,rate=&lt;mbps&gt;] [,tag=&lt;integer&gt;] [,trunks=&lt;vlanid[;vlanid...]&gt;][,type=&lt;veth&gt;</span>]</dt>
<dd>
<p>
コンテナのネットワーク・インタフェースを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse |ubuntu | unmanaged&gt;.</span></dt>
<dd>
<p>
OS タイプ。これは、コンテナ内の設定を行うために使用され、/usr/share/lxc/config/&lt;ostype&gt;.common.conf 内の lxc 設定スクリプトに対応します。値<em>unmanaged</em>は、OS 固有のセットアップをスキップするために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクション</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、CT または CT のディスクの削除/更新操作を防止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--復帰</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
保留中の変更を元に戻します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rootfs</span> <span class="monospaced">[ボリューム=]&lt;ボリューム&gt; [,acl=&lt;1|0&gt;] [,mountoptions=&lt;opt[;opt...]&gt;] [,</span>quota=&lt;1|0<span class="monospaced">&gt;] [</span>,replicate=&lt;1|0&gt;]<span class="monospaced">[</span>,ro=&lt;1|0&gt;] [,shared=&lt;1|0<span class="monospaced">&gt;] [,</span>size=&lt;DiskS<span class="monospaced">[quota=&lt;1|0&gt;][,replicate=&lt;1|0&gt;][,ro=&lt;1|0&gt;][,shared=&lt;1|0&gt;][,size=&lt;DiskSize&gt;</span>]。</dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--検索ドメイン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定しない場合、Createはホストからの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=d+] [,down=d+] `.</dt>
<dd>
<p>
スタートアップとシャットダウンの動作。Orderは一般的な起動順序を定義する非負の数値です。シャットダウンは逆の順序で行われます。さらに、次のVMが起動または<em>停止</em>するまでの待ち時間を秒単位で設定できます<em>。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スワップ</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
MB単位のコンテナのSWAP量。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タグ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナのタグ。これは単なるメタ情報です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--テンプレート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効/無効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムゾーン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
コンテナで使用するタイムゾーン。オプションが設定されていない場合は、何も行われません。ホストのタイムゾーンに合わせるために<em>host</em>を設定するか、/usr/share/zoneinfo/zone.tab から任意のタイムゾーンオプションを設定することができます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tty</span> <span class="monospaced">&lt;整数&gt; (0 - 6)</span><em>(デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナで利用可能なttyの数を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unprivileged</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します。(手動で変更してはいけません)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--未使用[n]</span> <span class="monospaced">[ボリューム=]&lt;ボリューム</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部的に使用されるので、手動で変更しないでください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct shutdown</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナをシャットダウンします。詳細は lxc-stop(1) を参照。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--forceStop</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナが停止していることを確認してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">60</span>)</dt>
<dd>
<p>
最大タイムアウト秒数まで待ちます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct snapshot</strong> <span class="monospaced">&lt;vmid&gt; &lt;snapname&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナをスナップショットします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;スナップ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--説明</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
テキストによる説明やコメント。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct start</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定すると、起動時に非常に冗長なデバッグ・ログ・レベルを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct status</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>CTステータスを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct stop</strong> <span class="monospaced">&lt;vmid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>コンテナを停止します。これにより、コンテナ内で実行されているすべてのプロセスが突然停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--overrule-shutdown</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
停止する前に、アクティブな<em>vzshutdown</em>タスクを中止してみてください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
Ignore locks - rootのみがこのオプションを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct サスペンド</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>コンテナを一時停止します。これは実験的なものです。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct テンプレート</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>テンプレートを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct アンロック</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>VMのロックを解除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct アンマウント</strong> <span class="monospaced">&lt;vmid</span></p></div>
<div class="paragraph">
<p>コンテナのファイルシステムをアンマウントします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pveam_strong_proxmox_ve_appliance_manager">
<span>22.12.<strong>pveam</strong>- Proxmox VE アプライアンスマネージャ</span> <a class="headerlink" href="#_strong_pveam_strong_proxmox_ve_appliance_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveam</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pveamあり</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>利用可能なテンプレートを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--section</span> <span class="monospaced">&lt;メール | システム | turnkeylinux&gt;</span></dt>
<dd>
<p>
リストを指定したセクションに制限します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam ダウンロード</strong> <span class="monospaced">&lt;ストレージ&gt; &lt;テンプレート</span></p></div>
<div class="paragraph">
<p>アプライアンスのテンプレートをダウンロード</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
テンプレートが保存されるストレージ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;テンプレート&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ダウンロードされるテンプレート</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam リスト</strong> <span class="monospaced">&lt;ストレージ</span></p></div>
<div class="paragraph">
<p>ストレージ上の全テンプレートのリストを取得</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ストレージ&gt;:</span> <span class="monospaced">&lt;ストレージID</span></dt>
<dd>
<p>
指定したストレージ上のテンプレートのみをリストアップ</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam remove</strong> <span class="monospaced">&lt;template_path&gt;</span><strong>です</strong>。</p></div>
<div class="paragraph">
<p>テンプレートを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;template_path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除するテンプレート。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveamアップデート</strong></p></div>
<div class="paragraph">
<p>コンテナテンプレートデータベースの更新</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvecm_strong_proxmox_ve_cluster_manager">
<span>22.13.<strong>pvecm</strong>- Proxmox VE Cluster Manager</span> <a class="headerlink" href="#_strong_pvecm_strong_proxmox_ve_cluster_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvecm</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pvecm add</strong> <span class="monospaced">&lt;ホスト名&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>現在のノードを既存のクラスタに追加します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ホスト名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
既存のクラスタ・メンバーのホスト名（またはIP）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span> 
</dt>
<dd>
<p>
証明書の SHA 256 フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ノードが既に存在する場合はエラーをスローしません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-リンク[n]</span> <span class="monospaced">[アドレス=]&lt;IP&gt; [,優先度=&lt;整数&gt;]。</span></dt>
<dd>
<p>
1つのコロシンク・リンクのアドレスとプライオリティ情報。(最大8リンクまでサポート; link0..link7)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodeid</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
このノードのノード ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--use_ssh</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
相手がAPI経由で参加する場合でも、常にSSHを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--votes</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
このノードの投票数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm addnode</strong> <span class="monospaced">&lt;node&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>クラスタ構成にノードを追加します。この呼び出しは内部用です。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--apiversion</span> <span class="monospaced">&lt;整数</span></dt>
<dd>
<p>
新しいノードの JOIN_API_VERSION。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
ノードが既に存在する場合はエラーをスローしません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-リンク[n]</span> <span class="monospaced">[アドレス=]&lt;IP&gt; [,優先度=&lt;整数&gt;]。</span></dt>
<dd>
<p>
1つのコロシンク・リンクのアドレスとプライオリティ情報。(最大8リンクまでサポート; link0..link7)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--new_node_ip</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
追加するノードのIPアドレス。リンクがない場合のフォールバックとして使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodeid</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
このノードのノード ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--votes</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
このノードの投票数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm アピバー</strong></p></div>
<div class="paragraph">
<p>このノードで利用可能なクラスタ結合 API のバージョンを返します。</p></div>
<div class="paragraph">
<p><strong>pvecm create</strong> <span class="monospaced">&lt;clustername&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>新しいクラスタ構成を生成します。リンクが指定されていない場合、デフォルトでローカルIPアドレスがlink0になります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;クラスタ名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-リンク[n]</span> <span class="monospaced">[アドレス=]&lt;IP&gt; [,優先度=&lt;整数&gt;]。</span></dt>
<dd>
<p>
1つのコロシンク・リンクのアドレスとプライオリティ情報。(最大8リンクまでサポート; link0..link7)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodeid</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
このノードのノード ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--投票数</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
このノードの投票数。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm delnode</strong> <span class="monospaced">&lt;ノード&gt;。</span></p></div>
<div class="paragraph">
<p>クラスタ構成からノードを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm 予想</strong> <span class="monospaced">&lt;予想</span></p></div>
<div class="paragraph">
<p>corosyncに期待される投票数の新しい値を伝えます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;予想&gt;:</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
予想得票数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm keygen</strong> <span class="monospaced">&lt;ファイル名&gt;.</span></p></div>
<div class="paragraph">
<p>corosync用の新しい暗号鍵を生成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ファイル名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
出力ファイル名</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm mtunnel</strong> <span class="monospaced">[&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>VM/CTマイグレーションで使用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;:</span> <span class="monospaced">&lt;array&gt; です。</span></dt>
<dd>
<p>
配列としての追加引数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--get_migration_ip</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、マイグレーション IP を返します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--マイグレーションネットワーク</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ローカルマイグレーションIPの検出に使用されるマイグレーションネットワーク</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--run-command</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
tcpソケットを標準入力としてコマンドを実行します。IPアドレスとポートは、まずこのコマンドの標準出力から、それぞれ別の行に出力されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecmノード</strong></p></div>
<div class="paragraph">
<p>クラスタノードのローカルビューを表示します。</p></div>
<div class="paragraph">
<p><strong>pvecm qdevice remove</strong></p></div>
<div class="paragraph">
<p>設定されたQDeviceの削除</p></div>
<div class="paragraph">
<p><strong>pvecm qdevice setup</strong> <span class="monospaced">&lt;アドレス&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>QDeviceの使用設定</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;アドレス&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
外部corosync QDeviceのネットワークアドレスを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
危険な可能性のある操作でエラーを投げないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ネットワーク</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
外部qdeviceへの接続に使用するネットワーク。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecmステータス</strong></p></div>
<div class="paragraph">
<p>クラスタステータスのローカルビューを表示します。</p></div>
<div class="paragraph">
<p><strong>pvecm updatecerts</strong> <span class="monospaced">[OPTIONS]</span><strong>(証明書の更新)</strong></p></div>
<div class="paragraph">
<p>ノード証明書を更新します（必要なファイル/ディレクトリをすべて生成します）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
新しいSSL証明書を強制的に生成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サイレント</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
エラーを無視します（クラスタに定足数がない場合など）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unmerge-known-hosts</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
レガシーSSH既知のホストをアンマージします。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesr_strong_proxmox_ve_storage_replication">
<span>22.14.<strong>pvesr</strong>- Proxmox VE Storage Replication</span> <a class="headerlink" href="#_strong_pvesr_strong_proxmox_ve_storage_replication" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesr</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pvesr create-local-job</strong> <span class="monospaced">&lt;id&gt; &lt;target&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>新しいレプリケーション・ジョブの作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ターゲット&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
対象ノード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--無効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
エントリーを無効化/非活性化するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--レート</span> <span class="monospaced">&lt;数値&gt; (1 - N</span>)</dt>
<dd>
<p>
mbps（メガバイト/秒）単位のレート制限を浮動小数点数で指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_job</span> <span class="monospaced">&lt;full | local&gt;</span>.</dt>
<dd>
<p>
レプリケーション・ジョブを削除するようにマークします。このジョブはすべてのローカルレプリケーションスナップショットを削除します。<em>フルに</em>設定すると、ターゲット上のレプリケートされたボリュームも削除しようとします。その後、ジョブは構成ファイルから自身を削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スケジュール</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">*/15</span>)</dt>
<dd>
<p>
ストレージのレプリケーションスケジュール。このフォーマットは<span class="monospaced">systemd</span>カレンダーイベントのサブセットです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソース</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ゲストが盗まれたかどうかを検出するための内部使用。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr delete</strong> <span class="monospaced">&lt;id&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>削除するレプリケーション・ジョブをマークします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
jobconfig エントリを削除しますが、クリーンアップはしません。</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">keep</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
レプリケートされたデータをターゲットに保持します（削除しないでください）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr disable</strong> <span class="monospaced">&lt;id</span></p></div>
<div class="paragraph">
<p>レプリケーション・ジョブを無効にします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr enable</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>レプリケーション・ジョブを有効にします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr finalize-local-job</strong> <span class="monospaced">&lt;id&gt; [&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>レプリケーション・ジョブを確定します。これにより、&lt;last_sync&gt;と異なるタイムスタンプを持つすべてのレプリケーション・スナップショットが削除されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;:</span> <span class="monospaced">&lt;array&gt; です。</span></dt>
<dd>
<p>
検討するボリュームIDのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--last_sync</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
最後に同期に成功した時刻（UNIXエポック）。指定しない場合は、すべてのレプリケーションスナップショットが削除されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesrリスト</strong></p></div>
<div class="paragraph">
<p>レプリケーション・ジョブを一覧表示します。</p></div>
<div class="paragraph">
<p><strong>pvesr prepare-local-job</strong> <span class="monospaced">&lt;id&gt; [&lt;extra-args&gt;]</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>レプリケーション・ジョブの開始準備。これはレプリケーション開始前にターゲットノードで呼び出されます。この呼び出しは内部用で、標準出力にJSONオブジェクトを返します。このメソッドは、まず VM &lt;vmid&gt; がローカルノードに存在するかどうかをテストします。存在する場合は直ちに停止します。その後、このメソッドはスナップショットについてすべてのボリュームIDをスキャンし、&lt;last_sync&gt;と異なるタイムスタンプを持つすべてのレプリケーション・スナップショットを削除します。また、未使用のボリュームも削除します。既存のレプリケーション・スナップショットを持つすべてのボリュームのブール値マーカーを持つハッシュを返します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;extra-args&gt;:</span> <span class="monospaced">&lt;array&gt; です。</span></dt>
<dd>
<p>
検討するボリュームIDのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
既存のボリュームをすべて削除できます（空のボリュームリスト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--last_sync</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
最後に同期に成功した時刻（UNIXエポック）。指定しない場合は、すべてのレプリケーション・スナップショットが削除されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-親スナップ名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキャン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
古くなったボリュームをスキャンするストレージIDのリスト。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr read</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>レプリケーション・ジョブの設定を読み取ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr run</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>このメソッドは systemd-timer によって呼び出され、すべての（または特定の）同期ジョブを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">[1-9][0-9]{2,8}-d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メール</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
障害発生時にメール通知を送信します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
標準出力に詳細なログを出力します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr schedule-now</strong> <span class="monospaced">&lt;id&gt;</span></p></div>
<div class="paragraph">
<p>レプリケーション・ジョブをできるだけ早く開始するようにスケジュールします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr set-state</strong> <span class="monospaced">&lt;vmid&gt; &lt;state&gt;</span><strong>です。</strong></p></div>
<div class="paragraph">
<p>マイグレーション時にジョブのレプリケーション状態を設定します。この呼び出しは内部用で、ja JSON objとしてジョブ状態を受け取ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;状態&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
JSON デコードされた文字列としてのジョブ状態。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr status</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>このノードのすべてのレプリケーション・ジョブのステータスを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--ゲスト</span> <span class="monospaced">&lt;整数&gt; (100 - 999999999</span>)</dt>
<dd>
<p>
このゲストのレプリケーションジョブのみをリストします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr update</strong> <span class="monospaced">&lt;id&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>レプリケーション・ジョブ構成を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;id&gt;：</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span>
</dt>
<dd>
<p>
レプリケーション・ジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます（<em>&lt;GUEST&gt;-&lt;JOBNUM&gt;）。</em></p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在のコンフィギュレーション・ファイルのダイジェストが異なる場合、変更を防止します。これは同時修正を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--無効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
エントリーを無効化/非活性化するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--レート</span> <span class="monospaced">&lt;数値&gt; (1 - N</span>)</dt>
<dd>
<p>
mbps（メガバイト/秒）単位のレート制限を浮動小数点数で指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_job</span> <span class="monospaced">&lt;full | local&gt;</span>.</dt>
<dd>
<p>
レプリケーション・ジョブを削除するようにマークします。このジョブはすべてのローカルレプリケーションスナップショットを削除します。<em>フルに</em>設定すると、ターゲット上のレプリケートされたボリュームも削除しようとします。その後、ジョブは構成ファイルから自身を削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スケジュール</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">*/15</span>)</dt>
<dd>
<p>
ストレージのレプリケーションスケジュール。このフォーマットは<span class="monospaced">systemd</span>カレンダーイベントのサブセットです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソース</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ゲストが盗まれたかどうかを検出するための内部使用。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pveum_strong_proxmox_ve_user_manager">
<span>22.15.<strong>pveum</strong>- Proxmox VE User Manager</span> <a class="headerlink" href="#_strong_pveum_strong_proxmox_ve_user_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveum</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span><strong>。</strong></p></div>
<div class="paragraph">
<p><strong>pveum acl delete</strong> <span class="monospaced">&lt;path&gt; --roles &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>アクセスコントロールリストの更新（権限の追加または削除）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
アクセス制御パス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ一覧。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロパゲート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
パーミッションの伝搬（継承）を許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--roles</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
役割の一覧。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--トークン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIトークンのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--users</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー一覧。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum acl list</strong> <span class="monospaced">[FORMAT_OPTIONS]。</span></p></div>
<div class="paragraph">
<p>アクセス制御リスト（ACL）を取得します。</p></div>
<div class="paragraph">
<p><strong>pveum acl modify</strong> <span class="monospaced">&lt;path&gt; --roles &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>アクセスコントロールリストの更新（権限の追加または削除）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;path&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
アクセス制御パス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ一覧。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロパゲート</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
パーミッションの伝搬（継承）を許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--roles</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
役割の一覧。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--トークン</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
APIトークンのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--users</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー一覧。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>プベウム・アクデル</strong></p></div>
<div class="paragraph">
<p><em>pveum acl delete</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pveum aclmod</strong></p></div>
<div class="paragraph">
<p><em>pveum acl modify</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pveum group add</strong> <span class="monospaced">&lt;groupid&gt;</span> <span class="monospaced">[OPTIONS]</span><strong>(グループ追加</strong> <span class="monospaced">&lt;グループID</span> <span class="monospaced">&gt;[オプション])</span></p></div>
<div class="paragraph">
<p>新しいグループを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;groupid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum グループ削除</strong> <span class="monospaced">&lt;グループID</span></p></div>
<div class="paragraph">
<p>グループを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;groupid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum グループ・リスト</strong> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>グループインデックス</p></div>
<div class="paragraph">
<p><strong>pveum group modify</strong> <span class="monospaced">&lt;groupid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>グループデータを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;groupid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>グループ追加</strong></p></div>
<div class="paragraph">
<p><em>pveum group add</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>プベウム・グループデル</strong></p></div>
<div class="paragraph">
<p><em>pveum group delete</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>プベウム・グループモッド</strong></p></div>
<div class="paragraph">
<p><em>pveum group modify</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pveum help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum passwd</strong> <span class="monospaced">&lt;ユーザーID&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ユーザーパスワードを変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--確認パスワード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
変更を実行するユーザーの現在のパスワード。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum pool add</strong> <span class="monospaced">&lt;poolid&gt;</span> <span class="monospaced">[OPTIONS]</span><strong>(プール追加</strong> <span class="monospaced">&lt;プール)</span> <span class="monospaced">[オプション])</span></p></div>
<div class="paragraph">
<p>新しいプールを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;プール&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>プール削除</strong> <span class="monospaced">&lt;プール</span></p></div>
<div class="paragraph">
<p>プールを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;プール&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum プールリスト</strong> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>プールの一覧表示またはプール設定の取得</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイプ</span> <span class="monospaced">&lt;lxc | qemu | storage&gt;</span></dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">poolid</span></td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum pool modify</strong> <span class="monospaced">&lt;poolid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>プールを更新。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;プール&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--allow-move</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
すでに別のプールにいる場合でも、ゲストを追加できるようにします。ゲストは現在のプールから削除され、このプールに追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
渡されたVMIDやストレージIDを追加する代わりに削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このプールから追加または削除するストレージ ID のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このプールから追加または削除するゲスト VMID のリスト。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm add</strong> <span class="monospaced">&lt;realm&gt; --type &lt;string&gt;</span> <span class="monospaced">[OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p>認証サーバーを追加します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;realm&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acr-values</span> <span class="monospaced">^[^x00-xxx1F &lt;&gt;#"]*$</span>.</dt>
<dd>
<p>
認証サーバが認証要求に使用するよう要求される認証コンテキスト・クラス参照値 を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autocreate</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ユーザーが存在しない場合、自動的にユーザーを作成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base_dn</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LDAPベースドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bind_dn</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LDAPバインドドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--capath</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">/etc/ssl/certs</span>)</dt>
<dd>
<p>
CA 証明書ストアへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--大文字小文字を区別</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ユーザー名は大文字と小文字を区別します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--証明書</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クライアント証明書へのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--認証キー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クライアント証明書キーへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--check-connection</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーへのバインド接続を確認します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--クライアントID</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OpenIDクライアントID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--client-key</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OpenIDクライアント・キー</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--default</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
デフォルトのレルムとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドメイン</span></dt>
<dd>
<p>
ADドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--フィルタ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー同期用のLDAPフィルター。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_classes</span> <span class="monospaced">&lt;string&gt;</span><em>(default =</em> <span class="monospaced">groupOfNames, group, univentionGroup, ipausergroup</span>)</dt>
<dd>
<p>
グループのオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_dn</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ同期用のLDAPベース・ドメイン名。設定されていない場合は、base_dnが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループフィルター</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ同期用のLDAPフィルタ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_name_attr</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ名を表すLDAP属性。設定されていない場合、または見つかった場合は、DN の最初の値が name として使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--issuer-url</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OpenID発行者URL</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--モード</span> <span class="monospaced">&lt;ldap | ldap+starttls | ldaps&gt;</span><em>(デフォルト =</em> <span class="monospaced">ldap</span>)</dt>
<dd>
<p>
LDAPプロトコルモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LDAP バインドパスワード。<em>etc/pve/priv/realm/&lt;REALM&gt;.pw</em> に格納されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ポート</span> <span class="monospaced">&lt;整数&gt; (1 - 65535</span>)</dt>
<dd>
<p>
サーバーポート</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロンプト</span> <span class="monospaced">(?:none|login|consent|select_account|S+)</span></dt>
<dd>
<p>
認証サーバがエンドユーザに再認証と同意を求めるかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スコープ</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">電子メールプロファイル</span>)</dt>
<dd>
<p>
認可され返されるべきスコープ (ユーザの詳細) を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--secure</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
安全な LDAPS プロトコルを使用します。廃止: 代わりに<em>mode</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバ1</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバー2</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
フォールバックサーバーのIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-sslバージョン</span> <span class="monospaced">&lt;tlsv1 | tlsv1_1 | tlsv1_2 | tlsv1_3&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
LDAPS TLS/SSLのバージョン。1.2より古いバージョンを使用することはお勧めしません！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-sync-defaults-options</span> <span class="monospaced">[enable-new=&lt;1|0&gt;] [,full=&lt;1|0&gt;] [,purge=&lt;1|0&gt;] [,remove-vanished=([acl];[properties];[entry])|none] [,scope=&lt;users|groups|both&gt;] となります</span><span class="monospaced">。</span></dt>
<dd>
<p>
同期の動作に関するデフォルトのオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sync_attributes</span> <span class="monospaced">\w+=[^,]+(,\s*\w+=[^,]+)*</span> </dt>
<dd>
<p>
どの LDAP 属性をどの PVE ユーザーフィールドにマッピングするかを指定するための key=value ペアのカンマ区切りリスト。例えば、LDAP 属性の<em>mail</em>を PVE の<em>email</em> にマッピングするには、<em>email=mail</em> と記述します。デフォルトでは、各 PVE ユーザーフィールドは同じ名前の LDAP 属性で表されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tfa</span> <span class="monospaced">type=&lt;TFATYPE&gt; [,digits=&lt;COUNT&gt;] [,id=&lt;ID&gt;] [,key=&lt;KEY&gt;] [,step=&lt;SECONDS&gt;] [,url=&lt;URL&gt;</span>].</dt>
<dd>
<p>
二要素認証を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&lt;ad | ldap | openid | pam | pve&gt;</span>.</dt>
<dd>
<p>
レルムタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_attr</span> <span class="monospaced">\S{2,}.</span></dt>
<dd>
<p>
LDAPユーザー属性名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_classes</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">inetorgperson, posixaccount, person, user</span>)</dt>
<dd>
<p>
ユーザーのオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--username-claim</span> <span class="monospaced">&lt;string&gt;</span></dt>
<dd>
<p>
一意のユーザー名を生成するために使用されるOpenIDクレーム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verify</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーのSSL証明書の確認</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm delete</strong> <span class="monospaced">&lt;realm&gt;</span></p></div>
<div class="paragraph">
<p>認証サーバーを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;realm&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm list</strong> <span class="monospaced">[FORMAT_OPTIONS]</span><strong>。</strong></p></div>
<div class="paragraph">
<p>認証ドメインインデックス。</p></div>
<div class="paragraph">
<p><strong>pveum realm modify</strong> <span class="monospaced">&lt;realm&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>認証サーバーの設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;realm&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acr-values</span> <span class="monospaced">^[^x00-xxx1F &lt;&gt;#"]*$</span>.</dt>
<dd>
<p>
認証サーバが認証要求に使用するよう要求される認証コンテキスト・クラス参照値 を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autocreate</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ユーザーが存在しない場合、自動的にユーザーを作成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base_dn</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LDAPベースドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bind_dn</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LDAPバインドドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--capath</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">/etc/ssl/certs</span>)</dt>
<dd>
<p>
CA 証明書ストアへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--大文字小文字を区別</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ユーザー名は大文字と小文字を区別します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--証明書</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クライアント証明書へのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--認証キー</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クライアント証明書キーへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--check-connection</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーへのバインド接続を確認します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--クライアントID</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OpenIDクライアントID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--client-key</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OpenIDクライアント・キー</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--default</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
デフォルトのレルムとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在のコンフィギュレーション・ファイルのダイジェストが異なる場合、変更を防止します。これは同時修正を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドメイン</span></dt>
<dd>
<p>
ADドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--フィルタ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー同期用のLDAPフィルター。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_classes</span> <span class="monospaced">&lt;string&gt;</span><em>(default =</em> <span class="monospaced">groupOfNames, group, univentionGroup, ipausergroup</span>)</dt>
<dd>
<p>
グループのオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_dn</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ同期用のLDAPベース・ドメイン名。設定されていない場合は、base_dnが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループフィルター</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ同期用のLDAPフィルタ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_name_attr</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
グループ名を表すLDAP属性。設定されていない場合、または見つかった場合は、DN の最初の値が name として使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--issuer-url</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
OpenID発行者URL</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--モード</span> <span class="monospaced">&lt;ldap | ldap+starttls | ldaps&gt;</span><em>(デフォルト =</em> <span class="monospaced">ldap</span>)</dt>
<dd>
<p>
LDAPプロトコルモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
LDAP バインドパスワード。<em>etc/pve/priv/realm/&lt;REALM&gt;.pw</em> に格納されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ポート</span> <span class="monospaced">&lt;整数&gt; (1 - 65535</span>)</dt>
<dd>
<p>
サーバーポート</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロンプト</span> <span class="monospaced">(?:none|login|consent|select_account|S+)</span></dt>
<dd>
<p>
認証サーバがエンドユーザに再認証と同意を求めるかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スコープ</span> <span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">電子メールプロファイル</span>)</dt>
<dd>
<p>
認可され返されるべきスコープ (ユーザの詳細) を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--secure</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
安全な LDAPS プロトコルを使用します。廃止: 代わりに<em>mode</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバ1</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
サーバーIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--サーバー2</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
フォールバックサーバーのIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-sslバージョン</span> <span class="monospaced">&lt;tlsv1 | tlsv1_1 | tlsv1_2 | tlsv1_3&gt;</span><span class="monospaced">.</span></dt>
<dd>
<p>
LDAPS TLS/SSLのバージョン。1.2より古いバージョンを使用することはお勧めしません！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-sync-defaults-options</span> <span class="monospaced">[enable-new=&lt;1|0&gt;] [,full=&lt;1|0&gt;] [,purge=&lt;1|0&gt;] [,remove-vanished=([acl];[properties];[entry])|none] [,scope=&lt;users|groups|both&gt;] となります</span><span class="monospaced">。</span></dt>
<dd>
<p>
同期の動作に関するデフォルトのオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sync_attributes</span> <span class="monospaced">\w+=[^,]+(,\s*\w+=[^,]+)*</span> </dt>
<dd>
<p>
どの LDAP 属性をどの PVE ユーザーフィールドにマッピングするかを指定するための key=value ペアのカンマ区切りリスト。例えば、LDAP 属性の<em>mail</em>を PVE の<em>email</em> にマッピングするには、<em>email=mail</em> と記述します。デフォルトでは、各 PVE ユーザーフィールドは同じ名前の LDAP 属性で表されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tfa</span> <span class="monospaced">type=&lt;TFATYPE&gt; [,digits=&lt;COUNT&gt;] [,id=&lt;ID&gt;] [,key=&lt;KEY&gt;] [,step=&lt;SECONDS&gt;] [,url=&lt;URL&gt;</span>].</dt>
<dd>
<p>
二要素認証を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_attr</span> <span class="monospaced">\S{2,}.</span></dt>
<dd>
<p>
LDAPユーザー属性名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_classes</span> <span class="monospaced">&lt;string&gt;</span><em>(デフォルト =</em> <span class="monospaced">inetorgperson, posixaccount, person, user</span>)</dt>
<dd>
<p>
ユーザーのオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verify</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーのSSL証明書の確認</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm sync</strong> <span class="monospaced">&lt;realm&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>設定されたLDAPからuser.cfgにユーザまたはグループを同期します。注意: 同期されたグループは<em>name-$realm</em> という名前を持つので、上書きを防ぐためにそれらのグループが存在しないことを確認してください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;realm&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ドライラン</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、何も書きません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--enable-new</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
新しく同期されたユーザーをすぐに有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
廃止: 代わりに<em>remove-vanished</em>を使用してください。設定されている場合、真実のソースとしてLDAPディレクトリを使用し、同期から返されなかったユーザまたはグループを削除し、同期されたユーザのローカルで変更されたすべてのプロパティを削除します。設定されていない場合、同期されたデータに存在する情報のみが同期され、それ以外のものは削除または変更されません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パージ</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
廃止: 代わりに<em>remove-vanished</em>を使用してください。同期中に設定から削除されたユーザまたはグループの ACL を削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove-vanished</span> <span class="monospaced">([acl];[properties];[entry])|none</span><em>(default =</em> <span class="monospaced">none</span>)</dt>
<dd>
<p>
セミコロンで区切られたリストで、同期中にユーザーやグループが消えたときに削除します。<em>aclは</em>、ユーザー/グループが同期から返されなかったときにaclsを削除します。リストの代わりに<em>none</em>（デフォルト）を指定することもできます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スコープ</span> <span class="monospaced">&lt;両方 | グループ | ユーザー</span></dt>
<dd>
<p>
同期するものを選択します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum role add</strong> <span class="monospaced">&lt;roleid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>新しいロールを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;roleid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privs</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveumロール削除</strong> <span class="monospaced">&lt;ロールID</span></p></div>
<div class="paragraph">
<p>役割を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;roleid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveumロールリスト</strong> <span class="monospaced">[FORMAT_OPTIONS]</span><strong>。</strong></p></div>
<div class="paragraph">
<p>役割インデックス</p></div>
<div class="paragraph">
<p><strong>pveum role modify</strong> <span class="monospaced">&lt;roleid&gt;</span> <span class="monospaced">[オプション]</span>.</p></div>
<div class="paragraph">
<p>既存のロールを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;roleid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--append</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">privs</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privs</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>プベウム・ロールアド</strong></p></div>
<div class="paragraph">
<p><em>pveum role addの</em>エイリアス。</p></div>
<div class="paragraph">
<p><strong>プベウム・ローデル</strong></p></div>
<div class="paragraph">
<p><em>pveum role deleteの</em>エイリアスです。</p></div>
<div class="paragraph">
<p><strong>pveumロールモッド</strong></p></div>
<div class="paragraph">
<p><em>pveum role modifyの</em>エイリアス。</p></div>
<div class="paragraph">
<p><strong>pveum ticket</strong> <span class="monospaced">&lt;ユーザー名&gt;</span> <span class="monospaced">[オプション].</span></p></div>
<div class="paragraph">
<p>認証チケットを作成または検証します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザー名&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザー名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--new-format</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このパラメータは無視され、1とみなされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--otp</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
二要素認証用のワンタイムパスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パス</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
チケットを確認し、ユーザが<em>パスに</em>アクセス<em>権限を持って</em>いるかチェックします<em>。</em></p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">privs</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privs</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
チケットを確認し、ユーザが<em>パスに</em>アクセス<em>権限を持って</em>いるかチェックします<em>。</em></p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション:<span class="monospaced">path</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--realm</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
オプションで、このパラメータに realm を渡すことができます。通常、レルムは単にユーザ名 &lt;username&gt;@&lt;relam&gt; に追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-tfa-チャレンジ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ユーザーが応答したい署名済みTFAチャレンジ文字列。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user add</strong> <span class="monospaced">&lt;userid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>新しいユーザーを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--電子メール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--有効</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
アカウントを有効にします（デフォルト）。アカウントを無効にするには、これを<em>0に</em>設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
アカウントの有効期限 (エポックからの秒数)。<em>0は</em>有効期限がないことを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keys</span> <span class="monospaced">[0-9a-zA-Z!=]{0,4096}。</span>
</dt>
<dd>
<p>
二要素認証（yubico）用のキー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ラストネーム</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
初期パスワード</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum ユーザー削除</strong> <span class="monospaced">&lt;ユーザーID</span></p></div>
<div class="paragraph">
<p>ユーザーを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum ユーザーリスト</strong> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ユーザーインデックス</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--有効</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
enableプロパティのオプションフィルタ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
グループおよびトークン情報を含みます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user modify</strong> <span class="monospaced">&lt;userid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>ユーザー設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--append</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">グループ</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--電子メール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--有効</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
アカウントを有効にします（デフォルト）。アカウントを無効にするには、これを<em>0に</em>設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
アカウントの有効期限 (エポックからの秒数)。<em>0は</em>有効期限がないことを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--名</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keys</span> <span class="monospaced">[0-9a-zA-Z!=]{0,4096}。</span>
</dt>
<dd>
<p>
二要素認証（yubico）用のキー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ラストネーム</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user permissions</strong> <span class="monospaced">[&lt;userid&gt;]</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定されたユーザ/トークンの有効なパーミッションを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;userid&gt;:</span> <span class="monospaced">(?^:^(?^:[^\s:/]+)\@(?^:[A-Za-z][A-Za-z0-9\.\-_]+)(?:!(?^:[A-Za-z][A-Za-z0-9\.\-_]+))?$)</span> </dt>
<dd>
<p>
ユーザーIDまたは完全なAPIトークンID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パス</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ツリー全体ではなく、特定のパスだけをダンプします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user tfa delete</strong> <span class="monospaced">&lt;userid&gt;</span> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>ユーザーから TFA エントリを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
TFA ID。指定がない場合は、すべての TFA エントリが削除されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveumユーザーtfaリスト</strong> <span class="monospaced">[&lt;ユーザーID&gt;]。</span></p></div>
<div class="paragraph">
<p>TFAエントリー一覧。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveumユーザーtfaロック解除</strong> <span class="monospaced">&lt;ユーザーID</span></p></div>
<div class="paragraph">
<p>ユーザーのTFA認証を解除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token add</strong> <span class="monospaced">&lt;userid&gt; &lt;tokenid&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>特定のユーザー用に新しいAPIトークンを生成します。注意: APIトークンの値を返します。この値は後から取得できないため、保存しておく必要があります！</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;tokenid&gt;:</span> <span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span> </dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">user と同じ</span>)</dt>
<dd>
<p>
APIトークンの有効期限（エポックからの秒数）。<em>0は</em>有効期限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privsep</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
個別のACLでAPIトークンの権限を制限するか（デフォルト）、対応するユーザーの全権限を与えます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token delete</strong> <span class="monospaced">&lt;userid&gt; &lt;tokenid&gt;</span> <span class="monospaced">[FORMAT_OPTIONS]。</span></p></div>
<div class="paragraph">
<p>特定のユーザーのAPIトークンを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;tokenid&gt;:</span> <span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span> </dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum ユーザー・トークン・リスト</strong> <span class="monospaced">&lt;ユーザーID&gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ユーザー API トークンを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token modify</strong> <span class="monospaced">&lt;userid&gt; &lt;tokenid&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>特定のユーザーのAPIトークンを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;tokenid&gt;:</span> <span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span> </dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">user と同じ</span>)</dt>
<dd>
<p>
APIトークンの有効期限（エポックからの秒数）。<em>0は</em>有効期限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privsep</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
個別のACLでAPIトークンの権限を制限するか（デフォルト）、対応するユーザーの全権限を与えます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token permissions</strong> <span class="monospaced">&lt;userid&gt; &lt;tokenid&gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>与えられたトークンの有効なパーミッションを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ユーザーID&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
<span class="monospaced">name@realm</span>形式の完全なユーザーID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;tokenid&gt;:</span> <span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span> </dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パス</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ツリー全体ではなく、特定のパスだけをダンプします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum ユーザートークンの削除</strong></p></div>
<div class="paragraph">
<p><em>pveum user token delete</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>ユーザー追加</strong></p></div>
<div class="paragraph">
<p><em>pveum user add</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>ユーザー削除</strong></p></div>
<div class="paragraph">
<p><em>pveum user delete</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>pveum usermod</strong></p></div>
<div class="paragraph">
<p><em>pveum user modify</em> のエイリアス。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_vzdump_strong_backup_utility_for_vms_and_containers">
<span>22.16.<strong>vzdump</strong>- VM とコンテナのバックアップユーティリティ</span> <a class="headerlink" href="#_strong_vzdump_strong_backup_utility_for_vms_and_containers" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>vzdump</strong> <span class="monospaced">ヘルプ</span></p></div>
<div class="paragraph">
<p><strong>vzdump</strong> <span class="monospaced">{&lt;vmid&gt;}</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>バックアップを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;vmid&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップするゲストシステムのID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--all</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このホスト上のすべての既知のゲストシステムをバックアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
I/Oバンド幅の制限（単位：KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--圧縮</span> <span class="monospaced">&lt;0 | 1 | gzip | lzo | zstd&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ダンプファイルを圧縮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dumpdir</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
結果のファイルを指定したディレクトリに保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--除外</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定したゲストシステムを除外 (--all を想定)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--除外パス</span> <span class="monospaced">&lt;配列</span></dt>
<dd>
<p>
特定のファイル/ディレクトリ（シェル・グロブ）を除外します。<em>で</em>始まるパスはコンテナのルートに固定され、その他のパスは各サブディレクトリに相対的に一致します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--フリーク</span> <span class="monospaced">[[enabled=]&lt;1|0&gt;]</span>。<span class="monospaced">[,ストレージ=&lt;ストレージID&gt;</span>]]。</dt>
<dd>
<p>
バックアップフリートのオプション（VMのみ）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ionice</span> <span class="monospaced">&lt;整数&gt; (0 - 8)</span><em>(デフォルト =</em> <span class="monospaced">7</span>)</dt>
<dd>
<p>
BFQスケジューラ使用時のIO優先度を設定します。VMのスナップショットとサスペンドモードのバックアップでは、これはコンプレッサにのみ影響します。値が8の場合はアイドル優先度が使用され、それ以外の場合は指定した値でベストエフォート優先度が使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ジョブID</span></dt>
<dd>
<p>
バックアップジョブのID。設定されると、バックアップ通知の<em>backup-job</em>メタデータフィールドにこの値が設定されます。<a href="mailto:root@pam">root@pamのみが</a>このパラメータを設定できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ロックウェイト</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
グローバルロックの最大待機時間（分）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--メール通知</span> <span class="monospaced">&lt;常に｜失敗&gt;</span><em>(デフォルト =</em> <span class="monospaced">常に</span>)</dt>
<dd>
<p>
非推奨: 代わりに通知ターゲット/マッチャーを使用してください。通知メールを送るタイミングを指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--宛先</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
非推奨：代わりに通知先/通知先を使用してください。メール通知を受け取るメールアドレスまたはユーザのカンマ区切りリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-マックスファイル</span> <span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
非推奨: 代わりに<em>prune-backups を</em>使用してください。ゲストシステムごとのバックアップファイルの最大数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--モード</span> <span class="monospaced">&lt;スナップショット | 停止 | サスペンド&gt;</span><em>(デフォルト =</em> <span class="monospaced">スナップショット</span>)</dt>
<dd>
<p>
バックアップモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ノード</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
このノードで実行された場合のみ実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--notes-template</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
バックアップのメモを生成するためのテンプレート文字列。値で置き換えられる変数を含むことができます。現在サポートされているのは{{cluster}}, {{guestname}}, {{node}}, {{vmid}}ですが、今後追加されるかもしれません。改行とバックスラッシュは、それぞれ<em>「˶n</em>」と「<em>˶n</em>」としてエスケープする必要があります。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">ストレージ</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--notification-mode</span> <span class="monospaced">&lt;auto | legacy-sendmail | notification-system&gt;</span><em>(デフォルト =</em> <span class="monospaced">auto</span>)</dt>
<dd>
<p>
使用する通知システムを決定します。<em>legacy-sendmail</em> に設定すると、vzdump は mailto/mailnotification パラメータを考慮し、<em>sendmail</em>コマンドで指定したアドレスにメールを送信します。<em>notification-systemに</em>設定すると、PVEの通知システム経由で通知が送信され、mailtoとmailnotificationは無視されます。<em>auto</em>(デフォルト設定) に設定すると、mailto が設定されていればメールが送信され、設定されていなければ通知システムが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--notification-policy</span> <span class="monospaced">&lt;always | failure | never&gt;</span><em>(デフォルト =</em> <span class="monospaced">always</span>)</dt>
<dd>
<p>
非推奨：を使用しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--通知先</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
非推奨：を使用しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pbs-change-detection-mode</span> <span class="monospaced">&lt;data | legacy | metadata&gt;</span>.</dt>
<dd>
<p>
ファイルの変更を検出し、コンテナバックアップのエンコード形式を切り替えるために使用されるPBSモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--performance</span> <span class="monospaced">[max-workers=&lt;integer&gt;] [,pbs-entries-max=&lt;integer&gt;</span>].</dt>
<dd>
<p>
その他のパフォーマンス関連の設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pigz</span> <span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
N&gt;0の場合はgzipの代わりにpigzを使用。N=1 はコアの半分を使用し、N&gt;1 は N をスレッド数として使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プール</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたプールに含まれるすべての既知のゲストシステムをバックアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロテクト</span> <span class="monospaced">&lt;ブール</span></dt>
<dd>
<p>
trueの場合、バックアップに保護マークを付けます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション：<span class="monospaced">ストレージ</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--prune-backups</span> <span class="monospaced">[keep-all=&lt;1|0&gt;] [,keep-daily=&lt;N&gt;] [,keep-hourly=&lt;N&gt;] [,keep-last=&lt;N&gt;] [,keep-monthly=&lt;N&gt;] [,keep-weekly=&lt;N&gt;] [,keep-yearly=&lt;N&gt;]</span><em>(default =</em> <span class="monospaced">keep-all=1</span>)</dt>
<dd>
<p>
ストレージ構成の保持オプションの代わりに、これらの保持オプションを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--quiet</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
静かにしてください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
<em>prune-backupsに従って</em>古いバックアップを削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スクリプト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定されたフックスクリプトを使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stdexcludes</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
一時ファイルとログを除外します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stdout</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
tar をファイルではなく標準出力に書き込みます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stop</span> <span class="monospaced">&lt;ブール値&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このホストでのバックアップジョブの実行を停止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stopwait</span> <span class="monospaced">&lt;整数&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">10</span>)</dt>
<dd>
<p>
ゲストシステムが停止するまでの最大待機時間 (分)。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ストレージ</span> <span class="monospaced">ID</span></dt>
<dd>
<p>
結果のファイルをこのストレージに保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tmpdir</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
指定したディレクトリに一時ファイルを保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--zstd</span> <span class="monospaced">&lt;整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
Zstdスレッド。N=0は利用可能なコアの半分を使用し、Nが0より大きな値に設定された場合、Nはスレッド数として使用されます。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_ha_manager_strong_proxmox_ve_ha_manager">
<span>22.17.<strong>ha-manager</strong>- Proxmox VE HA マネージャ</span> <a class="headerlink" href="#_strong_ha_manager_strong_proxmox_ve_ha_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>ha-manager</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>ha-manager add</strong> <span class="monospaced">&lt;sid&gt;</span> <span class="monospaced">[OPTIONS]を</span><strong>追加します。</strong></p></div>
<div class="paragraph">
<p>新しいHAリソースを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;sid</span> <span class="monospaced">&gt;：&lt;type&gt;：&lt;name&gt;。</span></dt>
<dd>
<p>
HAリソースID。これは、リソースの種類と、コロンで区切られたリソース固有の名前で構成されます（例：vm:100 / ct:100）。仮想マシンとコンテナの場合は、VMまたはCT IDをショートカットとして使用できます（例：100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_relocate</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
サービスの起動に失敗した場合のサービス再配置の最大試行回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_restart</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
起動に失敗したノードでサービスを再起動する最大回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--状態</span> <span class="monospaced">&lt;無効 | 有効 | 無視 | 開始 | 停止&gt;</span><em>(デフォルト =</em> <span class="monospaced">開始</span>)</dt>
<dd>
<p>
要求されたリソースの状態。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイプ</span> <span class="monospaced">&lt;ct | vm&gt;</span></dt>
<dd>
<p>
リソースの種類</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager config</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>HAのリソースをリストアップします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--タイプ</span> <span class="monospaced">&lt;ct | vm&gt;</span></dt>
<dd>
<p>
特定のタイプのリソースのみをリストアップ</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command migrate</strong> <span class="monospaced">&lt;sid&gt; &lt;node&gt;</span></p></div>
<div class="paragraph">
<p>別のノードへのリソース移行（オンライン）を要求します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;sid</span> <span class="monospaced">&gt;：&lt;type&gt;：&lt;name&gt;。</span></dt>
<dd>
<p>
HAリソースID。これは、リソースの種類と、コロンで区切られたリソース固有の名前で構成されます（例：vm:100 / ct:100）。仮想マシンとコンテナの場合は、VMまたはCT IDをショートカットとして使用できます（例：100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
対象ノード</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command ノードメンテナンス無効化</strong> <span class="monospaced">&lt;ノード</span></p></div>
<div class="paragraph">
<p>ノード保守要求の状態を変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-commandノードメンテナンスイネーブル</strong> <span class="monospaced">&lt;ノード</span></p></div>
<div class="paragraph">
<p>ノード保守要求の状態を変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
クラスタ・ノード名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-コマンド relocate</strong> <span class="monospaced">&lt;sid&gt; &lt;node</span></p></div>
<div class="paragraph">
<p>別のノードへのリソース再配置を要求します。これにより、古いノードでサービスが停止し、ターゲット・ノードでサービスが再起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;sid</span> <span class="monospaced">&gt;：&lt;type&gt;：&lt;name&gt;。</span></dt>
<dd>
<p>
HAリソースID。これは、リソースの種類と、コロンで区切られたリソース固有の名前で構成されます（例：vm:100 / ct:100）。仮想マシンとコンテナの場合は、VMまたはCT IDをショートカットとして使用できます（例：100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;ノード&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
対象ノード</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-コマンド停止</strong> <span class="monospaced">&lt;sid&gt; &lt;タイムアウト</span></p></div>
<div class="paragraph">
<p>サービスの停止を要求します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;sid</span> <span class="monospaced">&gt;：&lt;type&gt;：&lt;name&gt;。</span></dt>
<dd>
<p>
HAリソースID。これは、リソースの種類と、コロンで区切られたリソース固有の名前で構成されます（例：vm:100 / ct:100）。仮想マシンとコンテナの場合は、VMまたはCT IDをショートカットとして使用できます（例：100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&lt;タイムアウト&gt;:</span> <span class="monospaced">&lt;整数&gt; (0 - N</span>)</dt>
<dd>
<p>
秒単位のタイムアウト。0 に設定するとハードストップが実行されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager groupadd</strong> <span class="monospaced">&lt;group&gt; --nodes &lt;string&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>新しいHAグループを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;グループ&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&lt;node&gt;[:&lt;pri&gt;]{,&lt;node&gt;[:&lt;pri&gt;]}*.</span></dt>
<dd>
<p>
任意の優先度を持つクラスタ・ノード名のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nofailback</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CRM は最も優先度の高いノードでサービスを実行しようとします。より優先度の高いノードがオンラインになると、CRM はサービスをそのノードに移行します。nofailback を有効にすると、この動作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restricted</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
制限付きグループにバインドされたリソースは、グループによって定義されたノード上でのみ実行できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイプ</span> <span class="monospaced">&lt;グループ</span></dt>
<dd>
<p>
グループタイプ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager groupconfig</strong></p></div>
<div class="paragraph">
<p>HAグループを取得します。</p></div>
<div class="paragraph">
<p><strong>ha-manager groupremove</strong> <span class="monospaced">&lt;グループ</span><strong>削除</strong></p></div>
<div class="paragraph">
<p>haグループの設定を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;グループ&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager groupset</strong> <span class="monospaced">&lt;group&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>ha グループの設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;グループ&gt;:</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在のコンフィギュレーション・ファイルのダイジェストが異なる場合、変更を防止します。これは同時修正を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&lt;node&gt;[:&lt;pri&gt;]{,&lt;node&gt;[:&lt;pri&gt;]}*.</span></dt>
<dd>
<p>
任意の優先度を持つクラスタ・ノード名のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nofailback</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CRM は最も優先度の高いノードでサービスを実行しようとします。より優先度の高いノードがオンラインになると、CRM はサービスをそのノードに移行します。nofailback を有効にすると、この動作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restricted</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
制限付きグループにバインドされたリソースは、グループによって定義されたノード上でのみ実行できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager help</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager migrate</strong></p></div>
<div class="paragraph">
<p><em>ha-manager crm-command migrate</em> のエイリアス。</p></div>
<div class="paragraph">
<p><strong>HAマネージャー移転</strong></p></div>
<div class="paragraph">
<p><em>ha-manager crm-command relocateの</em>エイリアス。</p></div>
<div class="paragraph">
<p><strong>ha-manager remove</strong> <span class="monospaced">&lt;sid&gt;</span></p></div>
<div class="paragraph">
<p>リソース構成を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;sid</span> <span class="monospaced">&gt;：&lt;type&gt;：&lt;name&gt;。</span></dt>
<dd>
<p>
HAリソースID。これは、リソースの種類と、コロンで区切られたリソース固有の名前で構成されます（例：vm:100 / ct:100）。仮想マシンとコンテナの場合は、VMまたはCT IDをショートカットとして使用できます（例：100）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager set</strong> <span class="monospaced">&lt;sid&gt;</span> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>リソース構成を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&lt;sid</span> <span class="monospaced">&gt;：&lt;type&gt;：&lt;name&gt;。</span></dt>
<dd>
<p>
HAリソースID。これは、リソースの種類と、コロンで区切られたリソース固有の名前で構成されます（例：vm:100 / ct:100）。仮想マシンとコンテナの場合は、VMまたはCT IDをショートカットとして使用できます（例：100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
説明</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--削除</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-ダイジェスト</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
現在のコンフィギュレーション・ファイルのダイジェストが異なる場合、変更を防止します。これは同時修正を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--グループ</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_relocate</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
サービスの起動に失敗した場合のサービス再配置の最大試行回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_restart</span> <span class="monospaced">&lt;integer&gt; (0 - N)</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
起動に失敗したノードでサービスを再起動する最大回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--状態</span> <span class="monospaced">&lt;無効 | 有効 | 無視 | 開始 | 停止&gt;</span><em>(デフォルト =</em> <span class="monospaced">開始</span>)</dt>
<dd>
<p>
要求されたリソースの状態。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager status</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>HA 管理者のステータスを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
詳細出力。完全なCRMとLRMステータス（JSON）を含みます。</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_service_daemons">23.付録B：サービスデーモン</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_strong_pve_firewall_strong_proxmox_ve_firewall_daemon">
<span>23.1.<strong>pve-firewall</strong>- Proxmox VE Firewall デーモン</span> <a class="headerlink" href="#_strong_pve_firewall_strong_proxmox_ve_firewall_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pve-firewall</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>pve-firewall コンパイル</strong></p></div>
<div class="paragraph">
<p>ファイアウォールのルールをコンパイルして印刷します。これはテストに便利です。</p></div>
<div class="paragraph">
<p><strong>pve-firewallヘルプ</strong> <span class="monospaced">[オプション]。</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ファイアウォール</strong></p></div>
<div class="paragraph">
<p>ローカルネットワークの情報を印刷します。</p></div>
<div class="paragraph">
<p><strong>pve-ファイアウォール再起動</strong></p></div>
<div class="paragraph">
<p>Proxmox VEファイアウォールサービスを再起動します。</p></div>
<div class="paragraph">
<p><strong>pve-firewall simulate</strong> <span class="monospaced">[OPTIONS]を</span><strong>シミュレートします。</strong></p></div>
<div class="paragraph">
<p>ファイアウォールルールをシミュレートします。これはカーネルの<em>ルーティング</em>テーブルをシミュレートするのではなく、単にソースゾーンから宛先ゾーンへのルーティングが可能であると仮定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--dest</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
宛先IPアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ポート</span> <span class="monospaced">&lt;整数</span></dt>
<dd>
<p>
宛先ポート</p>
</dd>
<dt class="hdlist1">
--<span class="monospaced">from</span> <span class="monospaced">(host|outside|vmd+|ctd+|([a-zA-Z][a-zA-Z0-9]{0,9})/(˶S+))</span><em>(default =</em> <span class="monospaced">outside</span>)</dt>
<dd>
<p>
ソースゾーン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--プロトコル</span> <span class="monospaced">(tcp|udp)</span><em>(デフォルト =</em> <span class="monospaced">tcp</span>)</dt>
<dd>
<p>
プロトコル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ソース</span> <span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
ソースIPアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スポーツ</span> <span class="monospaced">&lt;整数</span></dt>
<dd>
<p>
ソースポート</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--to</span> <span class="monospaced">(host|outside|vmd+|ctd+|([a-zA-Z][a-zA-Z0-9]{0,9})/(\S+))</span><em>(default =</em> <span class="monospaced">host</span>)</dt>
<dd>
<p>
デスティネーションゾーン</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
冗長出力。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-firewall start</strong> <span class="monospaced">[OPTIONS] [オプション]</span>。</p></div>
<div class="paragraph">
<p>Proxmox VEファイアウォールサービスを開始します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ファイアウォールのステータス</strong></p></div>
<div class="paragraph">
<p>ファイアウォールの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pve-ファイアウォール停止</strong></p></div>
<div class="paragraph">
<p>Proxmox VEファイアウォールサービスを停止します。停止すると、Proxmox VE関連のiptableルールがすべてアクティブに削除され、ホストが保護されなくなる可能性があることに注意してください。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvedaemon_strong_proxmox_ve_api_daemon">
<span>23.2.<strong>pvedaemon</strong>- Proxmox VE API デーモン</span> <a class="headerlink" href="#_strong_pvedaemon_strong_proxmox_ve_api_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvedaemon</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>pvedaemonヘルプ</strong> <span class="monospaced">[オプション］</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvedaemon再起動</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（起動していない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pvedaemonスタート</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvedaemonステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>プベダエモンストップ</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pveproxy_strong_proxmox_ve_api_proxy_daemon">
<span>23.3.<strong>pveproxy</strong>- Proxmox VE API プロキシデーモン</span> <a class="headerlink" href="#_strong_pveproxy_strong_proxmox_ve_api_proxy_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveproxy</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pveproxy help</strong> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveproxyの再起動</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（起動していない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pveproxy start</strong> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveproxyステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pveproxy 停止</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvestatd_strong_proxmox_ve_status_daemon">
<span>23.4.<strong>pvestatd</strong>- Proxmox VE ステータスデーモン</span> <a class="headerlink" href="#_strong_pvestatd_strong_proxmox_ve_status_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvestatd</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>pvestatdヘルプ</strong> <span class="monospaced">[オプション]。</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvestatd再起動</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（起動していない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pvestatd start</strong> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvestatdステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pvestatdストップ</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_spiceproxy_strong_spice_proxy_service">
<span>23.5.<strong>spiceproxy</strong>- SPICE プロキシ・サービス</span> <a class="headerlink" href="#_strong_spiceproxy_strong_spice_proxy_service" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>spiceproxy</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>spiceproxy help</strong> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>spiceproxy の再起動</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（起動していない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>spiceproxy start</strong> <span class="monospaced">[OPTIONS]</span>.</p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>スパイクプロキシーのステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>スピセプロキシー停止</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pmxcfs_strong_proxmox_cluster_file_system">
<span>23.6.<strong>pmxcfs</strong>- Proxmox クラスタファイルシステム</span> <a class="headerlink" href="#_strong_pmxcfs_strong_proxmox_cluster_file_system" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pmxcfs</strong> <span class="monospaced">[OPTIONS］</span></p></div>
<div class="paragraph">
<p>ヘルプオプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
-<span class="monospaced">h</span>,<span class="monospaced">--help</span></dt>
<dd>
<p>
ヘルプオプションの表示</p>
</dd>
</dl></div>
<div class="paragraph">
<p>アプリケーションオプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
-<span class="monospaced">d</span>,<span class="monospaced">--debug</span></dt>
<dd>
<p>
デバッグメッセージをオンにします。</p>
</dd>
<dt class="hdlist1">
-<span class="monospaced">f</span>,<span class="monospaced">--foreground</span></dt>
<dd>
<p>
サーバーをデーモン化しない</p>
</dd>
<dt class="hdlist1">
-<span class="monospaced">l</span>,<span class="monospaced">--local</span></dt>
<dd>
<p>
ローカルモードを強制 (corosync.conf を無視し、クォーラムを強制)</p>
</dd>
</dl></div>
<div class="paragraph">
<p>このサービスは通常 systemd ツールセットを使って起動・管理されます。このサービスは<em>pve-cluster</em> と呼ばれます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>systemctl start pve-cluster</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>systemctl stop pve-cluster</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>systemctl status pve-cluster</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_strong_pve_ha_crm_strong_cluster_resource_manager_daemon">
<span>23.7.<strong>pve-ha-crm</strong>- クラスタリソースマネージャデーモン</span> <a class="headerlink" href="#_strong_pve_ha_crm_strong_cluster_resource_manager_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pve-ha-crm</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pve-ha-crmヘルプ</strong> <span class="monospaced">[オプション]。</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-crm start</strong> <span class="monospaced">[OPTIONS] [オプション]</span>。</p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-crmステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pve-ha-crmストップ</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pve_ha_lrm_strong_local_resource_manager_daemon">
<span>23.8.<strong>pve-ha-lrm</strong>- ローカルリソースマネージャーデーモン</span> <a class="headerlink" href="#_strong_pve_ha_lrm_strong_local_resource_manager_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pve-ha-lrm</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS] です</span>。</p></div>
<div class="paragraph">
<p><strong>pve-ha-lrm help</strong> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-lrm start</strong> <span class="monospaced">[OPTIONS] [オプション]</span>.</p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-lrmステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>プベ・ハ・ルム・ストップ</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvescheduler_strong_proxmox_ve_scheduler_daemon">
<span>23.9.<strong>pvescheduler</strong>- Proxmox VE スケジューラデーモン</span> <a class="headerlink" href="#_strong_pvescheduler_strong_proxmox_ve_scheduler_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvescheduler</strong> <span class="monospaced">&lt;COMMAND&gt; [ARGS] [OPTIONS]</span>.</p></div>
<div class="paragraph">
<p><strong>pveschedulerヘルプ</strong> <span class="monospaced">[オプション]。</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&lt;array&gt; です</span><span class="monospaced">。</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&lt;ブール値</span></dt>
<dd>
<p>
冗長出力フォーマット。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveschedulerの再起動</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（起動していない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pvescheduler start</strong> <span class="monospaced">[OPTIONS]</span><strong>（プベスケジューラ・スタート）</strong> <span class="monospaced">。</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドのまま</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveschedulerステータス</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pveschedulerストップ</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_files_2">24.付録 C: 設定ファイル</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="configuration_files">
<span>24.1.一般</span> <a class="headerlink" href="#configuration_files" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのほとんどの設定ファイルは、<span class="monospaced">/etc/pveに</span>マウントされた<a href="#chapter_pmxcfs">共有クラスタファイルシステムに</a>存在します。<span class="monospaced">etc/vzdump.confに</span>あるバックアップ用のノード固有の設定ファイルのような例外もあります。</p></div>
<div class="paragraph">
<p>通常、設定ファイルのプロパティは、関連するAPIエンドポイントにも使用されるJSONスキーマから派生します。</p></div>
<div class="sect3">
<h4 id="configuration_files_casing">24.1.1.プロパティ名のケーシング<a class="headerlink" href="#configuration_files_casing" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>歴史的に、長いプロパティ（およびサブプロパティ）はしばしば<span class="monospaced">snake_caseを</span>使用するか、1つの単語として記述されていました。これはProxmox VEスタックのほとんどがプログラミング言語Perlで開発されたためで、<span class="monospaced">kebab-caseを</span>使用したプロパティへのアクセスには追加の引用符が必要です。</p></div>
<div class="paragraph">
<p>新しいプロパティについては、<span class="monospaced">kebab-case</span>が望ましい方法で、既存の<span class="monospaced">snake_case</span>プロパティのエイリアスを導入し、長期的には API、CLI、および使用中の設定ファイルを<span class="monospaced">kebab-case に</span>切り替える予定です。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="datacenter_configuration_file">
<span>24.2.データセンター構成</span> <a class="headerlink" href="#datacenter_configuration_file" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">etc/pve/datacenter.cfg</span>ファイルはProxmox VEの設定ファイルです。このファイルには、すべてのノードで使用されるクラスタ全体のデフォルト値が含まれています。</p></div>
<div class="sect3">
<h4 id="_file_format_3">24.2.1.ファイルフォーマット<a class="headerlink" href="#_file_format_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このファイルでは、コロンで区切られた単純なキー/値形式を使用します。各行の書式は以下の通りです：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>オプション：値</pre>
</div></div>
<div class="paragraph">
<p>ファイル内の空白行は無視され、<span class="monospaced">#</span>文字で始まる行はコメントとして扱われ、これも無視されます。</p></div>
</div>
<div class="sect3">
<h4 id="_options">24.2.2.オプション<a class="headerlink" href="#_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bwlimit</span>:<span class="monospaced">[clone=&lt;LIMIT&gt;] [,default=&lt;LIMIT&gt;] [,migration=&lt;LIMIT&gt;] [,move=&lt;LIMIT&gt;] [,restore=&lt;LIMIT&gt;</span>] です。</dt>
<dd>
<p>
各種操作のI/O帯域幅制限を設定（単位：KiB/s）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">クローン</span></dt>
<dd>
<p>
クローン作成ディスクの帯域制限（KiB/s単位</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">デフォルト=</span><span class="monospaced">&lt;LIMIT</span></dt>
<dd>
<p>
デフォルトの帯域幅制限（単位：KiB/s</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">マイグレーション=</span><span class="monospaced">&lt;リミット</span></dt>
<dd>
<p>
ゲストの移行（ローカルディスクの移動を含む）の帯域幅制限（KiB/s単位</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">move=</span><span class="monospaced">&lt;リミット</span></dt>
<dd>
<p>
移動ディスクの帯域幅制限（KiB/s単位</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">リストア=</span><span class="monospaced">&lt;リミット</span></dt>
<dd>
<p>
バックアップからゲストをリストアする際の帯域幅の制限（KiB/s単位</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">コンソール</span>:<span class="monospaced">&lt;applet | html5 | vv | xtermjs&gt;</span>.</dt>
<dd>
<p>
デフォルトの Console ビューアを選択します。ビルトインの Java アプレット (VNC。非推奨で html5 にマップされます)、外部の virt-viewer 互換アプリケーション (SPICE)、HTML5 ベースの vnc ビューア (noVNC)、または HTML5 ベースのコンソールクライアント (xtermjs) のいずれかを使用できます。選択したビューアが利用できない場合 (例えば、SPICE が VM に対して有効化されていない場合)、フォールバックは noVNC になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">crs</span>：<span class="monospaced">[ha=&lt;基本|静的&gt;] [,ha-rebalance-on-start=&lt;1|0&gt;</span>]。</dt>
<dd>
<p>
クラスタリソースのスケジューリング設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ha=&lt;basic</span><span class="monospaced">| static&gt;</span><em>(デフォルト =</em> <span class="monospaced">basic</span>)</dt>
<dd>
<p>
HAマネージャがサービスを開始または回復するノードを選択する方法を設定します。<em>basicでは</em>、サービスの数のみが使用され、<em>staticでは</em>、サービスの静的なCPUとメモリ構成が考慮されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ha-rebalance-on-start=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
HAサービスの要求状態が停止から開始へ変更された場合に、CRSを使用して対象ノードを選択するように設定します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">説明</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
データセンターの説明。Webインターフェイスのデータセンター・ノート・パネルに表示されます。これは設定ファイル内のコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">email_from</span>:<span class="monospaced">&lt;文字列</span></dt>
<dd>
<p>
通知を送信するメールアドレスを指定（デフォルトはroot@$hostname）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fencing</span>:<span class="monospaced">&lt;both | hardware | watchdog&gt;</span><em>(デフォルト =</em> <span class="monospaced">watchdog</span>)</dt>
<dd>
<p>
HA クラスタのフェンシング モードを設定します。ハードウェアモードでは、/etc/pve/ha/fence.cfgにフェンスデバイスの有効な設定が必要です。両方では、2つのモードがすべて使用されます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><em>ハードウェアは</em>、<em>どちらも</em>実験的でWIPです。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ha</span>:<span class="monospaced">shutdown_policy=&lt;enum&gt;</span>です。</dt>
<dd>
<p>
クラスタ全体のHA設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">shutdown_policy=&lt;条件付き</span><span class="monospaced">| フェイルオーバー | フリーズ | マイグレーション&gt;</span><em>(デフォルト =</em> <span class="monospaced">条件付き</span>)</dt>
<dd>
<p>
ノードの電源オフまたは再起動時のHAサービスの処理ポリシーを記述します。Freezeは、シャットダウン時にノードに残っているサービスを常にフリーズします。フェイルオーバーは、シャットダウンしたノードがすぐに（1分未満で）復帰しない場合、サービスを凍結としてマークしないため、サービスは他のノードに回復されます。<em>条件付きは</em>、シャットダウンの種類に応じて自動的に選択されます。リブートまたはシャットダウンがトリガーされると、Migrateは実行中のサービスをすべて別のノードに移動しようとします。ノード上に実行中のサービスがなくなると、パワーオフプロセスが続行されます。ノードが再び起動した場合、少なくとも他のマイグレーション、リローアクション、リカバリが行われていなければ、サービスはパワーオフされたノードに戻されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">http_proxy</span>:<span class="monospaced">http://.*</span></dt>
<dd>
<p>
ダウンロードに使用する外部 http プロキシを指定します (例<em>: http://username:password@host:port/</em>)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キーボード</span>:<span class="monospaced">&lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&gt;</span>.</dt>
<dd>
<p>
vncサーバのデフォルトキーボードレイアウト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">言語</span>:<span class="monospaced">&lt;ar | ca | da | de | en | es | eu | fa | fr | he | hr | it | ja | ka | kr | nb | nl | nn | pl | pt_BR | ru | sl | sv | tr | ukr | zh_CN | zh_TW&gt;.</span></dt>
<dd>
<p>
デフォルトのGUI言語。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mac_prefix</span>:<span class="monospaced">&lt;文字列&gt;</span><em>(デフォルト =</em> <span class="monospaced">BC:24:11</span>)</dt>
<dd>
<p>
仮想ゲストの自動生成 MAC アドレスのプレフィックス。デフォルトの<span class="monospaced">BC:24:</span>11は、MACアドレスブロック大（MA-L）のためにIEEEからProxmox Server Solutions GmbHに割り当てられた組織一意識別子（OUI）です。これはローカルネットワーク、つまり一般ユーザーから直接アクセスできないネットワーク（LANやNAT/マスカレードなど）で使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>仮想ゲストのネットワークを(部分的に)共有する複数のクラスタを実行する場合は、デフォルトのMACプレフィックスを拡張するか、カスタムの(有効な)プレフィックスを生成して、MACの衝突の可能性を減らすことを強くお勧めします。たとえば、各クラスタのProxmox OUIに、1番目は<span class="monospaced">BC:24:11:0</span>、2番目は<span class="monospaced">BC:24:11:1という</span>ように、個別の16進数を追加します。 また、VLANを使用するなどして、ゲストのネットワークを論理的に分離することもできます。</p></div>
<div class="paragraph">
<p>+ 一般にアクセス可能なゲストの場合は、<a href="https://standards.ieee.org/products-programs/regauth/">IEEEに</a>登録されている<a href="https://standards.ieee.org/products-programs/regauth/">OUIを</a>取得するか、あなたまたはあなたのホスティング・プロバイダーのネットワーク管理者と調整することをお勧めします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">max_workers</span>:<span class="monospaced">&lt;整数&gt; (1 - N</span>)</dt>
<dd>
<p>
ha-managerからの<em>stopall VMや</em>タスクのようなアクションで、（ノードあたり）最大何人のワーカーが起動するかを定義します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">マイグレーションを</span>使用します：<span class="monospaced">[type=]&lt;secure|insecure&gt;[,network=&lt;CIDR&gt;</span>]です。</dt>
<dd>
<p>
クラスタ全体のマイグレーション設定</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ネットワーク=</span><span class="monospaced">&lt;CIDR</span></dt>
<dd>
<p>
移行に使用する（サブ）ネットワークのCIDR。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&lt;insecure</span><span class="monospaced">| secure&gt;</span><em>(デフォルト =</em> <span class="monospaced">secure</span>)</dt>
<dd>
<p>
マイグレーショントラフィックはデフォルトでSSHトンネルを使用して暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンスを上げるためにこれを無効にすることができます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">migration_unsecure</span>:<span class="monospaced">&lt;論理値</span></dt>
<dd>
<p>
移行はデフォルトでSSHトンネルを使用して安全に行われます。安全なプライベートネットワークでは、マイグレーションを高速化するためにこれを無効にすることができます。非推奨。代わりに<em>マイグレーションプロパティを</em>使用してください！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">next-id</span>：<span class="monospaced">[lower=&lt;整数&gt;] [,upper=&lt;整数&gt;</span>]。</dt>
<dd>
<p>
フリーVMID自動選択プールの範囲を制御します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">lower=</span><span class="monospaced">&lt;整数</span><span class="monospaced">&gt;</span><em>(デフォルト =</em> <span class="monospaced">100</span>)</dt>
<dd>
<p>
自由な next-id API 範囲の下限、包含境界。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">upper</span><span class="monospaced">=&lt;</span><span class="monospaced">整数&gt;</span><em>(デフォルト =</em> <span class="monospaced">1000000</span>)</dt>
<dd>
<p>
自由な next-id API 範囲の上限、排他的境界。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
を<span class="monospaced">通知</span>します：[<span class="monospaced">fencing=&lt;always|never&gt;&gt; [,package-updates=&lt;auto|always|never&gt;&gt;] [,replication=&lt;always|never&gt;&gt;] [,target-fencing=&lt;TARGET&gt;] [,target-package-updates=&lt;TARGET&gt;] [,target-replication=&lt;TARGET&gt;</span>] となります。］</dt>
<dd>
<p>
クラスタ全体の通知設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">フェンシング</span></dt>
<dd>
<p>
UNUSED - 代わりにデータセンター通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">package-updates=&lt;always</span><span class="monospaced">| auto | never&gt;</span><em>(default =</em> <span class="monospaced">auto</span>)</dt>
<dd>
<p>
廃止されました：代わりにデータセンター通知設定を使用します。 毎日の更新ジョブが通知を送信する頻度を制御します：</p>
<div class="ulist"><ul>
<li>
<p>
有効なサブスクリプションを持つシステムについては、毎日<em>自動更新さ</em>れます。</p>
</li>
<li>
<p>
新しい保留中の更新がある場合は、更新のたびに<em>常に</em>更新されます。</p>
</li>
<li>
<p>
新しい保留中の更新の通知を送信する<em>ことはありません</em>。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">レプリケーション</span></dt>
<dd>
<p>
UNUSED - 代わりにデータセンター通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ターゲット</span><span class="monospaced">・フェンシング=&lt;ターゲット</span></dt>
<dd>
<p>
UNUSED - 代わりにデータセンター通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">target-package-updates=</span><span class="monospaced">&lt;TARGET</span><span class="monospaced">&gt;を指定します。</span></dt>
<dd>
<p>
UNUSED - 代わりにデータセンター通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ターゲット</span><span class="monospaced">-レプリケーション=&lt;ターゲット</span></dt>
<dd>
<p>
UNUSED - 代わりにデータセンター通知設定を使用します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">登録タグ</span>:<span class="monospaced">&lt;tag&gt;[;&lt;tag&gt;...].</span></dt>
<dd>
<p>
設定および削除に<span class="monospaced">Sys.Modify</span>on<em>/</em>が必要なタグのリストです。ここで設定されたタグのうち、<em>user-tag-access</em>にあるタグも<span class="monospaced">Sys.Modify が</span>必要です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグスタイル</span> <span class="monospaced">[case-sensitive=&lt;1|0&gt;] [,color-map=&lt;tag&gt;:&lt;hex-color&gt;[:&lt;hex-color-for-text&gt;][;&lt;tag&gt;=...]][,ordering=&lt;config|alphabetical&gt;] [,shape=&lt;enum&gt;</span>].</dt>
<dd>
<p>
タグスタイルのオプション。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">case-sensitive=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
更新時の一意なタグのフィルタリングで、大文字小文字を区別してチェックするかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">color-map=&lt;tag</span><span class="monospaced">&gt;:&lt;hex-color&gt;[:&lt;hex-color-for-text&gt;][;&lt;tag&gt;=...</span>]。</dt>
<dd>
<p>
タグの手動カラーマッピング（セミコロン区切り）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ordering=&lt;alphabetical</span><span class="monospaced">| config&gt;</span><em>(デフォルト=</em> <span class="monospaced">アルファベット順</span>)</dt>
<dd>
<p>
ウェブインタフェースおよびAPIアップデートにおけるタグのソートを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shape=&lt;circle</span><span class="monospaced">| dense | full | none&gt;</span><em>(デフォルト=</em> <span class="monospaced">circle</span>)</dt>
<dd>
<p>
<em>fullは</em>タグ全体を描画します。<em>circleは</em>背景色のある円のみを描画します。<em>denseは</em>小さな四角形のみを描画します(多くのタグがそれぞれのゲストに割り当てられている場合に便利です)<em>.noneは</em>タグの表示を無効にします。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">u2f</span>です：[<span class="monospaced">appid=&lt;APPID&gt;] [,origin=&lt;URL&gt;</span>] です。</dt>
<dd>
<p>
u2f</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">appid=&lt;APPID&gt;</span></dt>
<dd>
<p>
U2F AppId URLのオーバーライド。デフォルトはオリジン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">オリジン</span><span class="monospaced">=&lt;</span><span class="monospaced">URL</span></dt>
<dd>
<p>
U2F Originのオーバーライド。主に1つのURLを持つ1つのノードに便利です。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">user-tag-access</span>：[<span class="monospaced">user-allow=&lt;enum&gt;] [,user-allow-list=&lt;tag&gt;[;&lt;tag&gt;...]]。</span></dt>
<dd>
<p>
ユーザー設定可能タグの特権オプション</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">user-allow=&lt;existing</span><span class="monospaced">| free | list | none&gt;</span><em>(デフォルト =</em> <span class="monospaced">free</span>)</dt>
<dd>
<p>
ユーザが制御するリソース (ゲストなど) で設定または削除できるタグを制御します。<span class="monospaced">Sys.Modify</span>権限を持つ<span class="monospaced">ユーザは</span>、常に制限されません。</p>
<div class="ulist"><ul>
<li>
<p>
タグは使用<em>できません</em>。</p>
</li>
<li>
<p>
<em>user-allow-list</em>の<em>リスト</em>タグが使用可能です。</p>
</li>
<li>
<p>
のような<em>既存の</em>リストも使えますが、すでにあるリソースのタグも使えます。</p>
</li>
<li>
<p>
タグの制限は<em>ありません</em>。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">user-allow-list=&lt;タグ</span><span class="monospaced">&gt;[;&lt;タグ&gt;...</span>]を<span class="monospaced">指定</span>します<span class="monospaced">。</span></dt>
<dd>
<p>
<em>user-allow</em>値<em>list</em>および<em>existingに対して</em>、ユーザが設定および削除を許可されるタグのリスト（セミコロン区切り）。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">webauthn</span>:<span class="monospaced">[allow-subdomains=&lt;1|0&gt;] [,id=&lt;DOMAINNAME&gt;] [,origin=&lt;URL&gt;] [,rp=&lt;RELYING_PARTY&gt;</span>] です。</dt>
<dd>
<p>
webauthnの設定</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">allow-subdomains=&lt;boolean&gt;</span><em>(デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
正確な URL ではなく、サブドメインのオリジンを許可するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">id=&lt;DOMAINNAME&gt;</span></dt>
<dd>
<p>
依拠当事者ID。プロトコル、ポート、場所を含まないドメイン名でなければなりません。これを変更<strong>すると、</strong>既存の認証情報が破壊されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">オリジン</span><span class="monospaced">=&lt;</span><span class="monospaced">URL</span></dt>
<dd>
<p>
サイトのオリジン。<span class="monospaced">https://</span>URL (または<span class="monospaced">http://localhost)</span> でなければなりません。ウェブ・インターフェイスにアクセスするためにユーザーがブラウザに入力するアドレスが含まれていなければなりません。これを変更すると、既存の認証情報が壊れる<strong>可能性が</strong>あります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rp=&lt;RELYING_PARTY&gt;</span><span class="monospaced">です。</span></dt>
<dd>
<p>
依拠当事者名。任意のテキスト識別子。これを変更すると、既存のクレデンシャルが壊れる<strong>可能性が</strong>あります。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calendar_events">25.付録D：カレンダー・イベント</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="chapter_calendar_events">
<span>25.1.スケジュールフォーマット</span> <a class="headerlink" href="#chapter_calendar_events" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは非常に柔軟なスケジュール設定を持っています。<span class="footnote"><br>[詳しくは<span class="monospaced">man 7 systemd.time を</span>参照してください]<br></span>カレンダーイベントは1つの式で1つ以上の時点を参照するために使うことができます。</p></div>
<div class="paragraph">
<p>このようなカレンダーイベントは、次のような書式を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[平日] [[年-]月-日] [時:分[:秒]]です。</pre>
</div></div>
<div class="paragraph">
<p>このフォーマットでは、ジョブを実行する日を設定することができます。 また、1つ以上の開始時間を設定することもできます。この情報を使って、毎日午後10時に実行するジョブを作成することができます：<span class="monospaced">'月,火,水,木,金,22'と</span>省略できます：ほとんどの合理的なスケジュールはこのように直感的に書くことができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">時間は24時間表示です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>便利で短い設定を可能にするために、ゲストごとに1つ以上の繰り返し時間を設定できます。これらは、開始時刻そのものと開始時刻に繰り返し値の倍数を加えた時刻にレプリケーションが行われることを示します。午前8時にレプリケーションを開始し、午前9時まで15分ごとにレプリケーションを繰り返す場合、次のようになります：<span class="monospaced">'8:00/15'</span></p></div>
<div class="paragraph">
<p>ここでは、時区切り (<span class="monospaced">:</span>) が使用されていない場合、値は分として解釈されることがわかります。このような区切りが使用された場合、左側の値は「時」を表し、右側の値は「分」を表します。 さらに、すべての可能な値にマッチさせるには<span class="monospaced">* を</span>使用します。</p></div>
<div class="paragraph">
<p>さらにアイデアを得るには<a href="#pvesr_schedule_format_examples">、以下の例を</a>ご覧ください。</p></div>
</div>
<div class="sect2">
<h3 id="_detailed_specification">
<span>25.2.詳細仕様</span> <a class="headerlink" href="#_detailed_specification" title="Permalink to this heading"></a></h3>
<div class="dlist"><dl>
<dt class="hdlist1">
平日</dt>
<dd>
<p>
曜日は、<span class="monospaced">sun、mon、tue、wed、thu、fri、sat</span> のように省略された英語で指定します。複数の曜日をカンマ区切りで指定することもできます。開始日と終了日を「...」で区切って指定することで、日数の範囲を設定することもできます。これらの書式は混在させることができます。 省略された場合、<span class="monospaced">'*'が</span>仮定されます。</p>
</dd>
<dt class="hdlist1">
タイムフォーマット</dt>
<dd>
<p>
時刻の書式は、時間と分の区切りリストで構成されます。 時間と分は<span class="monospaced">':'</span> で区切られます。時」と「分」は、「日」と同じ書式で、リストや値の範囲を指定することができます。 最初に「時」を指定し、次に「分」を指定します。必要なければ時間は省略できます。この場合、時間の値は<span class="monospaced">'*'</span>とみなされます。 値の有効範囲は、時間が<span class="monospaced">0～23</span>、分が<span class="monospaced">0～59</span>です。</p>
</dd>
</dl></div>
<div class="sect3">
<h4 id="pvesr_schedule_format_examples">25.2.1.例：<a class="headerlink" href="#pvesr_schedule_format_examples" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>特定の意味を持つ特別な値がいくつかあります：</p></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 19.特別な値</caption>
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">価値      </th>
<th class="tableblock halign-left valign-top">構文</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ことこまかに</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-* *:*:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">毎時</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-* *:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">デイリー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-* 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ウィークリー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">月 *-*-* 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">毎月</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-01 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">毎年</span>または<span class="monospaced">毎年</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-01-01 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">クォータリー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-01,04,07,10-01 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">半年ごと</span>または<span class="monospaced">半期ごと</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-01,07-01 00:00:00</span></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表20.スケジュール例</caption>
<col style="width:33%;" />
<col style="width:33%;" />
<col style="width:33%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">スケジュール文字列        </th>
<th class="tableblock halign-left valign-top">オルタナティブ            </th>
<th class="tableblock halign-left valign-top">意味</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月、火、水、木、金</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・金</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎営業日0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">土・日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">週末のみ0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月、水、金</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・水・金0:00のみ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12:05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12:05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎日午後12時5分</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*/5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0/5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5分ごと</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10月30日（月</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月、火、水 30/10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・火・水 30分、40分、50分（毎正時後</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・金 8・17・22:0/15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎営業日、午前8時から午後6時までと午後10時から午後11時までの間の15分ごと</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12日（金）13:5/20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12,13日(金):5/20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">金曜日12:05、12:25、12:45、13:05、13:25、13:45</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12,14,16,18,20,22:5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12/2:5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎日12:05から22:05まで2時間毎</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*/1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎分（最小間隔）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎月5日</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">土*-1.7 15:00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎月第一土曜日15:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-10-21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015年10月21日 00:00</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_qemu_vcpu_list">26.付録E: QEMU vCPUリスト</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="chapter_qm_vcpu_list">
<span>26.1.はじめに</span> <a class="headerlink" href="#chapter_qm_vcpu_list" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>これは、QEMUで定義されているAMDおよびIntel x86-64/amd64のCPUタイプのリストで、2007年までさかのぼります。</p></div>
</div>
<div class="sect2">
<h3 id="_intel_cpu_types">
<span>26.2.インテル CPU タイプ</span> <a class="headerlink" href="#_intel_cpu_types" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/List_of_Intel_Xeon_processors">インテルプロセッサー</a></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>ナヘレム</em>：<a href="https://en.wikipedia.org/wiki/Nehalem_(microarchitecture)">第1世代インテル・コア・プロセッサー</a></p>
</li>
<li>
<p>
<em>Nahelem-IBRS (v2)</em>: Spectre v1 保護の追加<em>(+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>Westmere</em>:<a href="https://en.wikipedia.org/wiki/Westmere_(microarchitecture)">第1世代のインテル・コア・プロセッサー（Xeon E7-）。</a></p>
</li>
<li>
<p>
<em>Westmere-IBRS (v2)</em>: Spectre v1 プロテクションの追加<em>(+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>SandyBridge</em>:<a href="https://en.wikipedia.org/wiki/Sandy_Bridge">第2世代インテル・コア・プロセッサー</a></p>
</li>
<li>
<p>
<em>SandyBridge-IBRS (v2)</em>: Spectre v1 プロテクションの追加<em>(+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>IvyBridge</em>:<a href="https://en.wikipedia.org/wiki/Ivy_Bridge_(microarchitecture)">第3世代インテル・コア・プロセッサー</a></p>
</li>
<li>
<p>
<em>IvyBridge-IBRS (v2)</em>: Spectre v1 保護の追加<em>(+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>Haswell</em>:<a href="https://en.wikipedia.org/wiki/Haswell_(microarchitecture)">第4世代インテル・コア・プロセッサー</a></p>
</li>
<li>
<p>
<em>Haswell-noTSX (v2)</em>: TSX<em>(-hle</em>,<em>-rtm</em>) を無効にします。</p>
</li>
<li>
<p>
<em>Haswell-IBRS (v3)</em>: TSX の再追加、Spectre v1 保護の追加<em>(+hle</em>、<em>+rtm</em>、<em>+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>Haswell-noTSX-IBRS (v4)</em>: TSX<em>(-hle</em>,<em>-rtm</em>) を無効にします。</p>
</li>
<li>
<p>
<em>ブロードウェル</em>：<a href="https://en.wikipedia.org/wiki/Broadwell_(microarchitecture)">第5世代インテル・コア・プロセッサー</a></p>
</li>
<li>
<p>
<em>Skylake</em>：<a href="https://en.wikipedia.org/wiki/Skylake_(microarchitecture)">第1世代Xeonスケーラブル・サーバー・プロセッサ</a></p>
</li>
<li>
<p>
<em>Skylake-IBRS (v2)</em>: Spectre v1プロテクションの追加、CLFLUSHOPTの無効化<em>(+spec-ctrl</em>,<em>-clflushopt</em>)</p>
</li>
<li>
<p>
<em>Skylake-noTSX-IBRS (v3)</em>: TSX<em>(-hle</em>,<em>-rtm</em>) を無効にします。</p>
</li>
<li>
<p>
<em>Skylake-v4</em>：EPTスイッチングを追加<em>（+vmx-eptp-switching）</em></p>
</li>
<li>
<p>
<em>Cascadelake</em>：<a href="https://en.wikipedia.org/wiki/Cascade_Lake_(microprocessor)">第2世代Xeonスケーラブル・プロセッサ</a></p>
</li>
<li>
<p>
<em>Cascadelake-v2</em>: add arch_capabilities msr<em>(+arch-capabilities</em>,<em>+rdctl-no</em>,<em>+ibrs-all</em>,<em>+skip-l1dfl-vmentry</em>,<em>+mds-no</em>)</p>
</li>
<li>
<p>
<em>Cascadelake-v3</em>: TSX<em>(-hle</em>,<em>-rtm</em>) を無効にします。</p>
</li>
<li>
<p>
<em>Cascadelake-v4</em>: EPTスイッチングを追加<em>(+vmx-eptp-switching</em>)</p>
</li>
<li>
<p>
<em>Cascadelake-v5</em>: XSAVESの追加<em>(+xsaves</em>,<em>+vmx-xsaves</em>)</p>
</li>
<li>
<p>
<em>Cooperlake</em>：<a href="https://en.wikipedia.org/wiki/Cooper_Lake_(microprocessor)">4ソケットおよび8ソケットサーバー用第3世代Xeonスケーラブル・プロセッサ</a></p>
</li>
<li>
<p>
<em>Cooperlake-v2</em>: XSAVESの追加<em>(+xsaves</em>,<em>+vmx-xsaves</em>)</p>
</li>
<li>
<p>
<em>アイスレイク</em> <a href="https://en.wikipedia.org/wiki/Ice_Lake_(microprocessor)">第3世代Xeonスケーラブル・サーバ・プロセッサ</a></p>
</li>
<li>
<p>
<em>Icelake-v2</em>: TSX<em>(-hle</em>,<em>-rtm</em>) を無効にします。</p>
</li>
<li>
<p>
<em>Icelake-v3</em>: arch_capabilities msr<em>(+arch-capabilities</em>,<em>+rdctl-no</em>,<em>+ibrs-all</em>,<em>+skip-l1dfl-vmentry</em>,<em>+mds-no</em>,<em>+pschange-mc-no</em>,<em>+taa-no</em>) を追加。</p>
</li>
<li>
<p>
<em>Icelake-v4</em>: 不足していたフラグを追加<em>(+sha-ni</em>,<em>+avx512ifma</em>,<em>+rdpid</em>,<em>+fsrm</em>,<em>+vmx-rdseed-exit</em>,<em>+vmx-pml</em>,<em>+vmx-eptp-switching</em>)</p>
</li>
<li>
<p>
<em>Icelake-v5</em>: XSAVESの追加<em>(+xsaves</em>,<em>+vmx-xsaves</em>)</p>
</li>
<li>
<p>
<em>Icelake-v6</em>: 「5レベルEPT」を追加<em>(+vmx-page-walk-5</em>)</p>
</li>
<li>
<p>
<em>SapphireRapids</em>:<a href="https://en.wikipedia.org/wiki/Sapphire_Rapids">第4世代Xeonスケーラブル・サーバ・プロセッサ</a></p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_amd_cpu_types">
<span>26.3.AMD CPU タイプ</span> <a class="headerlink" href="#_amd_cpu_types" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/List_of_AMD_processors">AMDプロセッサー</a></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Opteron_G3</em>:<a href="https://en.wikipedia.org/wiki/AMD_10h">K10</a></p>
</li>
<li>
<p>
<em>Opteron_G4</em>:<a href="https://en.wikipedia.org/wiki/Bulldozer_(microarchitecture)">ブルドーザー</a></p>
</li>
<li>
<p>
<em>Opteron_G5</em>:<a href="https://en.wikipedia.org/wiki/Piledriver_(microarchitecture)">パイルドライバー</a></p>
</li>
<li>
<p>
<em>EPYC</em>:<a href="https://en.wikipedia.org/wiki/Zen_(first_generation)">Zenプロセッサの第1世代</a></p>
</li>
<li>
<p>
<em>EPYC-IBPB (v2)</em>: Spectre v1プロテクションを追加<em>(+ibpb</em>)</p>
</li>
<li>
<p>
<em>EPYC-v3</em>: 不足していたフラグを追加<em>(+perfctr-core</em>,<em>+clzero</em>,<em>+xsaveerptr</em>,<em>+xsaves</em>)</p>
</li>
<li>
<p>
<em>EPYC-Rome</em>：<a href="https://en.wikipedia.org/wiki/Zen_2">第2世代Zenプロセッサ</a></p>
</li>
<li>
<p>
<em>EPYC-Rome-v2</em>: Spectre v2, v4プロテクションの追加<em>(+ibrs</em>,<em>+amd-ssbd</em>)</p>
</li>
<li>
<p>
<em>EPYC-Milan</em>：<a href="https://en.wikipedia.org/wiki/Zen_3">第3世代のZenプロセッサ</a></p>
</li>
<li>
<p>
<em>EPYC-Milan-v2</em>: 不足していたフラグを追加<em>(+vaes</em>,<em>+vpclmulqdq</em>,<em>+stibp-always-on</em>,<em>+amd-psfd</em>,<em>+no-nested-data-bp</em>,<em>+lfence-always-serializing</em>,<em>+null-sel-clr-base</em>)</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_firewall_macro_definitions">27.付録 F: ファイアウォール・マクロの定義</h2>
<div class="sectionbody">
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アマンダ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
アマンダ・バックアップ</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>認証</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
認証（identd）トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">113</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>BGP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ボーダー・ゲートウェイ・プロトコルのトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">179</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ビットトレント</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
BitTorrent 3.1 以前の BitTorrent トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881:6889</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ビットトレント32</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
BitTorrent 3.2以降のBitTorrentトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881:6999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>コンビニエンスストア</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
同時バージョン システム pserver トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>セフ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Cephストレージクラスタトラフィック (Cephモニタ、OSD、MDSデーモン)</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6789</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6800:7300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>シトリックス</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Citrix/ICAトラフィック（ICA、ICAブラウザ、CGP）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1494</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1604</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2598</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ダエーピー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
デジタルオーディオアクセスプロトコルトラフィック（iTunes、Rythmboxデーモン）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3689</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3689</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>DCC</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
分散型チェックサム・クリアリングハウス・スパム・フィルタリング機構</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6277</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>DHCPfwd</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
転送されたDHCPトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">67:68</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">67:68</p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ディーエイチシーピーブイ6</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
DHCPv6トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">546:547</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">546:547</p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>DNS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ドメインネームシステムのトラフィック（updおよびtcp）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ディストック</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
分散コンパイラサービス</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3632</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ファイル転送プロトコル</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ファイル転送プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>指</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
フィンガープロトコル（RFC 742）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">79</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>グニューネット</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
GNUnetセキュアなピアツーピアネットワーキングトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>GRE</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
汎用ルーティング・カプセル化トンネリング・プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">47</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ギット</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Git 分散リビジョン管理トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9418</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>HKP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OpenPGP HTTP鍵サーバプロトコルトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11371</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>HTTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ハイパーテキスト転送プロトコル（WWW）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>HTTPS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SSL上のハイパーテキスト転送プロトコル(WWW)</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ICPV2</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネット・キャッシュ・プロトコルV2（Squid）のトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3130</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アイシーキュー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
AOLインスタント・メッセンジャーのトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5190</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アイマップ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネットメッセージアクセスプロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">143</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アイマップス</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネット・メッセージ・アクセス・プロトコル・オーバーSSL</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">993</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IPIP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPIPカプセレーション・トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">94</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アイピーセック</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPsecトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アイピーセカ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPsec認証（AH）トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">51</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IPsecnat</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPsecトラフィックとNat-Traversal</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>インターネットリレーチャット</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネット・リレー・チャットのトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6667</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ジェットダイレクト</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
HP Jetdirectプリント</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>L2TP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
レイヤー2トンネリングプロトコルのトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1701</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ライトウェイトディレクトリアクセスプロトコル</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ライトウェイトディレクトリアクセスプロトコルトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">389</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>LDAPS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
セキュアなLightweight Directory Access Protocolトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">636</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>MDNS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マルチキャストDNS</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5353</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エムエスエヌピー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マイクロソフト通知プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1863</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エムエスエスキューエル</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マイクロソフト SQL サーバー</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1433</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>メール</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
メールトラフィック（SMTP、SMTPS、送信）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">465</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ムニン</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ムニン・ネットワーク・リソース・モニタリング・トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4949</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>MySQL</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
MySQLサーバー</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3306</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エヌエヌティーピー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
NNTPトラフィック（ユースネット）。</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エヌエヌティーピーエス</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
暗号化されたNNTPトラフィック（ユースネット）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">563</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エヌティーピー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ネットワークタイムプロトコル (ntpd)</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ネイバーディスカバリー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPv6ネイバー勧誘、ネイバー広告、ルーター広告</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">アイシーエムピーブイシックス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ルーター募集</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">アイシーエムピーブイシックス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ルーター広告</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">アイシーエムピーブイシックス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">隣人募集</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">アイシーエムピーブイシックス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">隣人広告</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>オープンさいたんパスファースト</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OSPFマルチキャストトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">89</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>オープンVPN</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OpenVPNトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1194</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>主成分分析</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
シマンテックPCAnywere (tm)</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5632</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5631</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>PMG</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Proxmox Mail Gatewayウェブインターフェース</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ポップスリー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
POP3トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ポップスリー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
暗号化されたPOP3トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">995</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ピーピーティーピー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ポイント・ツー・ポイント・トンネル・プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">47</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1723</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ピン</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ICMPエコーリクエスト</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">アイシーエムピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">エコー要求</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>PostgreSQL</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
PostgreSQLサーバー</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5432</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>プリンター</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ラインプリンタープロトコル印刷</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">515</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>アールディーピー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マイクロソフトリモートデスクトッププロトコルトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3389</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>リップ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ルーティング情報プロトコル（双方向）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">520</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>総合資源開発センター</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
BINDリモート管理プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">953</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>カミソリ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
レイザーアンチスパムシステム</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2703</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Rdate</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
リモート時刻検索（rdate）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>同期</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Rsyncサーバー</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">873</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>サンエ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SANEネットワーク・スキャン</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6566</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エスエムビー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マイクロソフトSMBトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">135,445</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">137:139</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024:65535</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">137</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">135,139,445</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SMBswat</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Sambaウェブ管理ツール</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">901</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SMTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
簡易メール転送プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エスエムティーピーエス</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
暗号化メール転送プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">465</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SNMP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
簡易ネットワーク管理プロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">161:162</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">161</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>スパムド</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
スパムアサシン SPAMD トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">783</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SPICEproxy</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Proxmox VE SPICEによるプロキシトラフィックの表示</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SSH</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
安全なシェルトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>エスブイエヌ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Subversion サーバー (svnserve)</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3690</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>シックスエックスエス</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SixXS IPv6の展開とトンネルブローカー</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3874</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3740</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5072,8374</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>イカ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SquidのWebプロキシトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>投稿</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
メール送信トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>シスログ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Syslogプロトコル（RFC 5424）のトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">514</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">514</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>TFTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Trivial File Transfer Protocol トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">69</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>テルネット</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Telnetトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>テレネット</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Telnet over SSL</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">992</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>時間</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RFC 868 タイムプロトコル</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Trcrt</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
トレースルート（30ホップまで）トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">33434:33524</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">アイシーエムピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">エコー要求</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ブイエヌシー</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
VNCディスプレイのVNCトラフィック0～99</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5900:5999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ブイエヌシーエル</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
VncsサーバからVncviewerへのVNCトラフィック（リッスンモード</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ウェブ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
WWWトラフィック（HTTPおよびHTTPS）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ウェブキャッシュ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ウェブキャッシュ/プロキシトラフィック（ポート8080）</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ウェブミン</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ウェブミンのトラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>フーイズ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Whois（nicname、RFC 3912）トラフィック</p>
</td>
</tr>
</table></div>
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">ポート</th>
<th class="tableblock halign-left valign-top">スポーツ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ティーシーピー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_markdown_primer">28.付録G：マークダウン入門</h2>
<div class="sectionbody">
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>MarkdownはウェブライターのためのテキストからHTMLへの変換ツールです。Markdownを使えば、読みやすく、書きやすいプレーンテキスト形式を使って文章を書き、それを構造的に妥当なXHTML（またはHTML）に変換することができます。</p></div>
</div>
<div class="attribution">
<em>https://daringfireball.net/projects/markdown/</em><br>
- ジョン・グルーバー</div></div>
<div class="paragraph">
<p>Proxmox VEウェブインターフェースは、ノードおよび仮想ゲストノートのリッチテキストフォーマットをレンダリングするMarkdownの使用をサポートしています。</p></div>
<div class="paragraph">
<p>Proxmox VEは、テーブルやタスクリストのようなGFM（GitHub Flavoured Markdown）のほとんどの拡張機能でCommonMarkをサポートしています。</p></div>
<div class="sect2">
<h3 id="markdown_basics">
<span>28.1.マークダウンの基本</span> <a class="headerlink" href="#markdown_basics" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ここでは基本的なことしか説明していませんので、例えば<a href="https://www.markdownguide.org/">https://www.markdownguide.org/</a>。</p></div>
<div class="sect3">
<h4 id="_headings">28.1.1.見出し<a class="headerlink" href="#_headings" title="Permalink to this heading"></a></h4>
<div class="listingblock">
<div class="content monospaced">
<pre># This is a heading h1 ## This is a heading h2 #### This is a heading h5</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_emphasis">28.1.2.強調<a class="headerlink" href="#_emphasis" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>強調したい場合は、<span class="monospaced">*text*</span>または<span class="monospaced">_text_</span>を使用してください。</p></div>
<div class="paragraph">
<p>太字、ヘビーウェイトのテキストには<span class="monospaced">**text**</span>または<span class="monospaced">__text__</span>を使用してください。</p></div>
<div class="paragraph">
<p>組み合わせも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>"あなたはそれを組み合わせることができます</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_links">28.1.3.リンク<a class="headerlink" href="#_links" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リンクの自動検出を使用することができます。例えば、<span class="monospaced">https://forum.proxmox.com/</span>、クリック可能なリンクに変換します。</p></div>
<div class="paragraph">
<p>例えば、リンクテキストをコントロールすることもできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>では、[カッコ内がリンクテキストになります](https://forum.proxmox.com/)。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_lists">28.1.4.リスト<a class="headerlink" href="#_lists" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_unordered_lists">順序なしリスト<a class="headerlink" href="#_unordered_lists" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>順序なしリストには<span class="monospaced">*</span>または<span class="monospaced">- を</span>使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>* アイテム1 * アイテム2 * アイテム2a * アイテム2b</pre>
</div></div>
<div class="paragraph">
<p>インデントを追加することで、入れ子になったリストを作成することができます。</p></div>
</div>
<div class="sect4">
<h5 id="_ordered_lists">注文リスト<a class="headerlink" href="#_ordered_lists" title="Permalink to this heading"></a></h5>
<div class="listingblock">
<div class="content monospaced">
<pre>1.項目 1 1.項目 2 1.項目 3 1.項目 3a 1.項目 3b</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">順番に並べられたリストの整数は正確である必要はなく、自動的に番号が振られます。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_task_lists">タスクリスト<a class="headerlink" href="#_task_lists" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>タスクリストでは、未完了のタスクには空白のボックス<span class="monospaced">[ ]</span>を、完了したタスクには<span class="monospaced">X の</span>ボックスを使用します。</p></div>
<div class="paragraph">
<p>例えば</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>- X] 1つ目のタスクはすでに完了 - [X] 2つ目のタスクも - [ ] このタスクはまだ実行中 - [ ] このタスクも実行中</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_tables">28.1.5.表<a class="headerlink" href="#_tables" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>テーブルでは、パイプ記号<span class="monospaced">｜で</span>カラムを区切り、<span class="monospaced">-で</span>テーブルのヘッダーと本文を区切ります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>| 左の列｜右の列｜いくつか｜もっと｜列。| 中央揃えも機能します：| 左のフー｜右のフー｜最初の｜行｜ここ｜&gt;center&lt;｜左のバー｜右のバー｜2番目の｜行｜ここ｜12345｜左のバズ｜右のバズ｜3番目の｜行｜ここ｜テスト｜左のザブ｜右のザブ｜4番目の｜行｜ここ｜☁️☁️☁️｜左のラヴ｜右のラヴ｜そして｜最後の｜ここ｜終わり｜｜｜です。</pre>
</div></div>
<div class="paragraph">
<p>列を空白できれいに揃える必要はありませんが、その方が表の編集が簡単になることに注意してください。</p></div>
</div>
<div class="sect3">
<h4 id="_block_quotes">28.1.6.ブロッククォート<a class="headerlink" href="#_block_quotes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ブロック引用符は、プレーンテキストの電子メールと同様に、行の先頭に<span class="monospaced">&gt;</span> を付けることで入力できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&gt; Markdownは、プレーンテキストフォーマットの構文を持つ軽量のマークアップ言語で、 &gt; &gt; 2004年にJohn GruberとAaron Swartzによって作成されました。 &gt;&gt; Markdownは、readmeファイルのフォーマットや、オンラインディスカッションフォーラムでのメッセージの記述、 &gt;&gt; プレーンテキストエディタを使ったリッチテキストの作成によく使われます。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_code_and_snippets">28.1.7.コードとスニペット<a class="headerlink" href="#_code_and_snippets" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックスティックを使って、いくつかの単語や段落の処理を避けることができます。これはコードや設定の塊が誤ってマークダウンとして解釈されるのを避けるのに便利です。</p></div>
<div class="sect4">
<h5 id="_inline_code">インラインコード<a class="headerlink" href="#_inline_code" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>行の一部をバックスティックで囲むと、例えばインラインでコードを書くことができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>このホストのIPアドレスは`10.0.0.1`です。</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_whole_blocks_of_code">コードブロック全体<a class="headerlink" href="#_whole_blocks_of_code" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>複数の行にまたがるコード・ブロックの場合、たとえばトリプル・バックティックを使ってそのようなブロックを開始したり終了したりすることができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto vmbr2 iface vmbr2 inet static address 10.0.0.1/24 bridge-ports ens20 bridge-stp off bridge-fd 0 bridge-vlan-aware yes bridge-vids 2-4094 ``` # ここで覚えておきたいネットワーク設定です。</pre>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gnu_free_documentation_license">29.付録H: GNUフリー・ドキュメンテーション・ライセンス</h2>
<div class="sectionbody">
<div class="paragraph">
<p>バージョン1.3、2008年11月3日</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc. &lt;http://fsf.org/&gt; このライセンス文書の逐語的な複製と頒布は誰にでも許可されていますが、変更することは許可されていません。</pre>
</div></div>
<div class="paragraph">
<div class="title">0.前文</div><p>本許諾書の目的は、マニュアルや教科書、あるいはその他の機能的で有用な 文書を、自由という意味で「自由」にすることです。つまり、商業的であれ非商業的であ ろうと、改変の有無に関わらず、誰もがそれを複製し再配布する実質的な自由 を保証することです。 第二に、本許諾書は、作者や出版者が自分たちの作品に 対する信用を得る方法を維持する一方で、他者による改変に対して責任を負 うとはみなされません。</p></div>
<div class="paragraph">
<p>このライセンスは一種の「コピーレフト」であり、この文書の派生物も同じ意味で自由でなければなりません。  これはGNU一般公衆ライセンス(GNU General Public License)を補完するもので、自由ソフトウェアのために設計されたコピーレフトのライセンスです。</p></div>
<div class="paragraph">
<p>なぜなら、自由ソフトウェアには自由な文書が必要だからです: 自由なプログラムには、ソフトウェアと同じ自由を提供するマニュアルが付属しているべきです。  しかし、本許諾書はソフトウェアのマニュアルに限定されるものではありません。題材や印刷された書籍として出版されるか否かに関わらず、あらゆるテキスト作品に利用することができます。  私たちは、この利用許諾契約書を、主に指導や参照を目的とした作品に推奨します。</p></div>
<div class="paragraph">
<div class="title">1.適用範囲と定義</div><p>本許諾書は、著作権者によって本許諾書の条項の下で頒布可能である旨の告知が 含まれた、あらゆる媒体のマニュアルやその他の作品に適用されます。  このような告知は、本許諾書に記載された条件の下で、その作品を使用するための、世界的な、期間無制限の、ロイヤリティフリーのライセンスを付与するものです。  以下の「文書」とは、そのようなマニュアルや作品を指します。  一般公衆はライセンシーであり、「あなた」として扱われます。  著作権法上の許可を必要とする方法で作品を複製、変更、頒布する場合、あなたはこのライセンスに同意するものとします。</p></div>
<div class="paragraph">
<p>本件文書の「改変版」とは、本件文書またはその一部をそのまま、あるいは改変を加えて、および/または他の言語に翻訳して複製した著作物を意味します。</p></div>
<div class="paragraph">
<p>二次的セクション(Secondary Section)」とは、その文書の出版者または著 者と、その文書全体の主題との関係(または関連事項)のみを扱い、その 文書全体の主題に直接含まれる可能性のあるものを含まない、名称の付 録または文書の前文セクションのことです。  (したがって、『文書』の一部が数学の教科書である場合、二次セクションでは数学について一切説明しないことができる)。  その関係とは、その主題や関連事項との歴史的な関係、あるいはそれらに関する法的、商業的、哲学的、倫理的、政治的な立場の問題である可能性があります。</p></div>
<div class="paragraph">
<p>変更不可セクション」とは、『文書』が本許諾書の下でリリースされたことを 示す告知において、そのタイトルが変更不可セクションであるとして指定され ている特定のセカンダリ・セクションのことです。  あるセクションが上記の「セカンダリ」の定義に当てはまらない場合、 そのセクションを「変更不可セクション」として指定することは認められません。  文書』には『変更不可セクション』がゼロであってもかまいません。  もし『文書』がいかなるInvariant Sectionも特定しない場合、それはInvariant Sectionが存在しないことを意味します。</p></div>
<div class="paragraph">
<p>表紙テキスト」とは、『文書』が本許諾書の下でリリースされることを示す告 知の中で、表紙テキストまたは裏表紙テキストとして列挙される特定の短い文 章のことです。  表表紙テキストは最大5語、裏表紙テキストは最大25語です。</p></div>
<div class="paragraph">
<p>透明な(Transparent)」『文書』のコピーとは、その仕様が一般公衆に利用可能な 形式で表現され、一般的なテキストエディタや(ピクセルで構成される画像については) 一般的なペイントプログラム、あるいは(図面については)広く利用可能な描画エディタを 用いて文書を直接修正するのに適しており、テキストフォーマッタへの入力や、 テキストフォーマッタへの入力に適した様々な形式への自動翻訳に適している、 機械可読なコピーを意味します。  そうでなければ「透過的」なファイルフォーマットで作成されたコピーで、そのマークアップが、あるいはマークアップがないことが、読者によるその後の改変を妨げたり、阻止したりするように配置されているものは、「透過的」ではありません。 画像フォーマットは、かなりの量のテキストに使われている場合、「透過的」ではありません。  透明」でないコピーは「不透明」と呼ばれます。</p></div>
<div class="paragraph">
<p>透過コピーに適したフォーマットの例としては、マークアップのないプレーンなASCII、Texinfo入力フォーマット、LaTeX入力フォーマット、一般に公開されているDTDを使ったSGMLやXML、人間が修正できるように設計された標準準拠のシンプルなHTML、PostScript、PDFなどがあります。  透過画像フォーマットの例としては、PNG、XCF、JPGがあります。  不透明なフォーマットには、プロプライエタリなワードプロセッサーによってのみ読み取りや編集が可能なプロプライエタリなフォーマット、DTDや処理ツールが一般に利用可能でないSGMLやXML、出力のみを目的として一部のワードプロセッサーによって生成される機械生成のHTML、PostScript、PDFなどがあります。</p></div>
<div class="paragraph">
<p>タイトルページ」とは、印刷された書籍の場合、タイトルページそれ自体と、 本許諾書がタイトルページに掲載することを要求する資料を読みやすく掲載 するために必要な次のページを加えたものを意味します。  そのようなタイトルページを持たない形式の著作物については、「タ イトルページ」とは、本文の冒頭に先立つ、著作物のタイトルが最も目立つ位置 にあるテキストを意味します。</p></div>
<div class="paragraph">
<p>発行者」とは、『文書』の複製物を公衆に頒布する個人または団体を意味します。</p></div>
<div class="paragraph">
<p>XYZと題された」セクションとは、そのタイトルが正確にXYZであるか、またはXYZを他 の言語で翻訳したテキストの後に括弧で括られたXYZを含む、『文書』の名前付きサブユニット を意味します。  (ここでXYZは、「謝辞」、「献辞」、「裏書」、「歴史」など、後述の特定のセクション名を表します)。  あなたが文書を変更するときに、そのようなセクションの「タイトルを保持する」ということは、この定義に従って、そのセクションが「XYZというタイトル」のままであることを意味します。</p></div>
<div class="paragraph">
<p>文書』には、本許諾書が『文書』に適用されることを示す告示の隣に、保証の否認が 含まれている場合があります。  これらの保証の否認は本許諾書に参考として含まれるものとみなされますが、それは保証の否認に関してのみです。</p></div>
<div class="paragraph">
<div class="title">2.逐語コピー</div><p>あなたは、本許諾書、著作権表示、および本許諾書が『文書』に適用され ることを示す使用許諾表示がすべての複製物に複製され、本許諾書の条件 にいかなる他の条件も付加されないことを条件として、営利・非営利を問わず、『文書』 をいかなる媒体にも複製・頒布することができます。  あなたは、あなたが作成または頒布した複製物の閲覧やさらなる複製を妨害または制 御する技術的手段を用いてはなりません。  ただし、あなたはコピーの対価として報酬を受け取ることができます。  あなたが十分な数の複製物を頒布する場合、あなたは第3項の条件にも従わなけれ ばなりません。</p></div>
<div class="paragraph">
<p>また、上記と同じ条件でコピーを貸与し、コピーを公に展示することもできます。</p></div>
<div class="paragraph">
<div class="title">3.数量コピー</div><p>あなたが『文書』の印刷物(または一般的に印刷された表紙を持つ媒体の複製物)を100部以上発行し、『文書』のライセンス告知でカバー・テキストが要求されている場合、あなたはその複製物を、以下のカバー・テキストをすべて明瞭かつ読みやすく記載した表紙に封入しなければなりません：表表紙には「Front-Cover Texts」、裏表紙には「Back-Cover Texts」。  また、両表紙とも、あなたがこれらのコピーの発行者であることを明確かつ判読しやすいように表示してください。  表表紙は、タイトルの全単語を等しく目立たせ、見えるようにしなければなりません。  文書の題名を保持し、これらの条件を満たす限り、表紙に限定して変更を加えた複製は、その他の点ではそのままの複製として扱うことができます。</p></div>
<div class="paragraph">
<p>どちらの表紙にも必要な文章が多すぎて読みにくい場合は、最初に挙げたもの（無理のない範囲で）を実際の表紙に載せ、残りは隣のページに続けて載せます。</p></div>
<div class="paragraph">
<p>あなたが『文書』の『不透明な複製物』を100部以上発行または頒布する場合、 あなたは各『不透明な複製物』に機械可読の『透明な複製物』を同梱するか、または各 『不透明な複製物』に、一般的なネットワーク利用者が公衆標準ネットワーク・プロトコルを 用いて『文書』の完全な『透明な複製物』(追加的なものは含まれない)をダウンロードできるコンピ ュータ・ネットワーク上の場所を明記しなければなりません。
後者の選択肢を使用する場合、あなたは『不透明コピー』の配布を大量に開始する際に、この『透明コピー』が、あなたがその版の『不透明コピー』を(直接、あるいはあなたの代理人や小売業者を通じて)公衆に配布した最後の時点から少なくとも1年経過するまでは、記載された場所でこのようにアクセス可能であり続けることを保証するために、合理的に慎重な手段を講じなければなりません。</p></div>
<div class="paragraph">
<p>大量のコピーを再配布する前に、文書の作成者によく連絡し、最新版の 文書を提供する機会を与えることが要求されますが、必須ではありません。</p></div>
<div class="paragraph">
<div class="title">4.変更点</div><p>あなたは、上記第2項および第3項の条件の下で、『文書』の改変された 版を複製し頒布することができます。ただし、改変された版をまさに本許諾書の下 でリリースし、改変された版が『文書』の役割を果たし、その結果、改変された版の 頒布と改変がそのコピーを所持する誰に対しても許諾されることを条件とします。  加えて、あなたは『改変されたバージョン』において以下のことを行わなけれ ばなりません：</p></div>
<div class="olist upperalpha"><ol class="upperalpha">
<li>
<p>
タイトルページ（および表紙がある場合は表紙）には、『文書』のタイトルおよび旧版のタイトル（旧版がある場合は、『文書』の「歴史」の項に記載されているはずです）とは異なるタイトルを使用してください。  旧版の発行元が許可している場合は、旧版と同じタイトルを使用してもかまいません。</p>
</li>
<li>
<p>
タイトル・ページには、改変された版における改変の著者に責任を負う一人以上の人物または団体を、その文書における主要な著者のうち少なくとも5人(主要な著者の数が5人未満の場合はその全員)とともに、著者として記載してください(ただし、彼らがこの要件からあなたを解放しない限り)。</p>
</li>
<li>
<p>
タイトルページには、発行者として修正版の発行者名を明記してください。</p>
</li>
<li>
<p>
文書のすべての著作権表示を保存してください。</p>
</li>
<li>
<p>
他の著作権表示に隣接して、あなたの改変に対する適切な著作権表示を追加してください。</p>
</li>
<li>
<p>
著作権表示の直後に、以下の補遺に示す形式で、本許諾書の条項の下で改変されたバージョンの利用を公衆に許可する利用許諾表示を含めてください。</p>
</li>
<li>
<p>
そのライセンス通知には、『文書』のライセンス通知で指定されている、変更不可のセクションと必要なカバーテキストの完全なリストを保存してください。</p>
</li>
<li>
<p>
本使用許諾の変更されていないコピーを同封してください。</p>
</li>
<li>
<p>
History "と題されたセクションを保存し、そのタイトルを保存し、少なくともタイトルページに記載されている修正版のタイトル、年、新しい著者、出版社を記載した項目をそのセクションに追加してください。  もし『文書』に「歴史」と題されたセクションがない場合、『文書』のタイトルページに記載されているように、『文書』のタイトル、年、著者、出版社を記載したセクションを作成し、前文で述べたように、修正版について記述した項目を追加してください。</p>
</li>
<li>
<p>
文書』の透過的な複製物への一般公開のために『文書』で指定された ネットワークの場所(もしあれば)を保存し、同様に『文書』の基になった旧版 のために『文書』で指定されたネットワークの場所も保存してください。  あなたは、『文書』自身より少なくとも4年前に出版された著作物、 あるいはその著作物が参照する版の原版発行者が許可した場合には、 ネットワークの場所を省略することができます。</p>
</li>
<li>
<p>
謝辞」または「献辞」と題されたセクションについては、そのセクションのタイトルを保持し、そこに記載された各寄稿者の謝辞および／または献辞の内容および論調をすべて保持します。</p>
</li>
<li>
<p>
文書のすべての不変セクションを、そのテキストもタイトルも変更せずに保存します。  セクション番号またはそれに相当するものは、セクションタイトルの一部とは見なされません。</p>
</li>
<li>
<p>
裏書」と題されたセクションを削除してください。  このようなセクションは、修正版には含まれない場合があります。</p>
</li>
<li>
<p>
既存のセクションのタイトルを「エンドースメント」に変更したり、不変のセクションのタイトルと矛盾させたりしないでください。</p>
</li>
<li>
<p>
保証の免責事項を守ってください。</p>
</li>
</ol></div>
<div class="paragraph">
<p>変更後のバージョン』に、セカンダリ・セクションとして適格であり、『文書』からコ ピーされた素材を含まない、新しいフロントマター・セクションや付録が含まれ る場合、あなたは任意でこれらのセクションの一部または全部を変更不可と指定するこ とができます。  そのためには、改変版のライセンス告知にある「変更不可のセクション」のリストに、それらのセクションのタイトルを追加してください。 これらのタイトルは、他のセクションのタイトルとは区別してください。</p></div>
<div class="paragraph">
<p>エンドースメント」というセクションを追加することができます。ただし、そのセクションには、さまざまな当事者による修正版のエンドースメント、たとえば、査読の記述や、ある標準の権威ある定義としてある組織によって承認されたという記述だけを含めることができます。</p></div>
<div class="paragraph">
<p>表紙テキストとして5語までの文章を、裏表紙テキストとして25語までの文章を、修正版の表紙テキストリストの最後に追加することができます。  表表紙テキストと裏表紙テキストは、それぞれ1つの主体によって（または主体による取り決めによって）1つの箇所のみ追加することができます。  もし『文書』に同じ表紙のカバーテキストが既に含まれており、それが以前にあなたによって追加されたものである場合、あるいはあなたが代行する同じ団体によって手配されたものである場合、あなたは別のカバーテキストを追加することはできません。</p></div>
<div class="paragraph">
<p>本許諾書によって、『文書』の著者および発行者は、その名前を宣伝のために使 用すること、あるいは改変された『文書』の支持を表明したり示唆したりするこ とを許可しないものとします。</p></div>
<div class="paragraph">
<div class="title">5.文書の結合</div><p>あなたは、本許諾書の下でリリースされた他の文書と、改変されたバージョンについ て上記第4項で定義された条件の下で、『文書』を結合することができます。ただし、 その結合の中に、改変されていないすべてのオリジナル文書の変更不可部分をすべて含 み、それらをすべてあなたの結合著作物の変更不可部分としてライセンス告知に記載し、 かつそれらのすべての保証の否認を保持することを条件とします。</p></div>
<div class="paragraph">
<p>結合された著作物には本許諾書が一 部含まれていればよく、複数の同一の変更不可部分が一つのコピーで置き換えられても よい。  同じ名前で異なる内容の複数の変更不可部分が存在する場合、そのような部 分のタイトルの末尾に、そのセクションの原著作者または発行者の名前(既知 の場合)、あるいは一意の番号を括弧書きで追加して、そのようなセクションを一意にし てください。 結合著作物の使用許諾告知にある変更不可部分の一覧にあるセクションの タイトルにも、同じ調整を加えてください。</p></div>
<div class="paragraph">
<p>同様に、「謝辞」と題されたセクションと「献辞」と題されたセクションもすべて組み合わせてください。  裏書」と題されたセクションはすべて削除してください。</p></div>
<div class="paragraph">
<div class="title">6.資料集</div><p>あなたは、『文書』と本許諾書に基づいてリリースされた他の文書から成る文 書集を作成し、様々な文書に含まれる本許諾書の個々のコピーを、その文 書集に含まれる単一のコピーに置き換えることができます。</p></div>
<div class="paragraph">
<p>あなたは、そのような文書集から一つの文書を抜き出し、本許諾書の下で個別に頒布することができます。ただし、抜き出した文書に本許諾書のコピーを挿入し、その文書の逐語的な複製に関する他のすべての点において本許諾書に従うことを条件とします。</p></div>
<div class="paragraph">
<div class="title">7.独立した作品とのアグリゲーション</div><p>文書』またはその派生物と、他の別個独立の文書または著作物とを、記憶媒体または頒布媒体の一巻の中に、あるいは一巻の上に編集したものは、その編集物から生じる著作権が、その編集物の利用者の法的権利を、個々の著作物が許容する範囲を超えて制限するために利用されない場合、「総体」と呼ばれる。 文書』が総体に含まれる場合、本許諾書は、総体に含まれる他の著作物のうち、それ自体が『文書』の派生物ではないものには適用されない。</p></div>
<div class="paragraph">
<p>第3項のカバーテキスト要件が当該文書のコピーに適用される場合、 当該文書が総体の2分の1未満であれば、当該文書のカバーテキストは、 総体内の当該文書を囲むカバー、または当該文書が電子形式である場合は カバーに相当する電子カバーに掲載することができる。 それ以外の場合は、総体全体を囲む印刷されたカバーに掲載しなければ ならない。</p></div>
<div class="paragraph">
<div class="title">8.翻訳</div><p>翻訳も一種の改変と見なされるため、あなたは第4項の条件に従って『文書』 の翻訳を頒布することができます。 変更不可条項を翻訳に置き換えるにはその著作権者から特別な許可を得 る必要がありますが、あなたはこれらの変更不可条項の原版に加えて、一部または全部の 変更不可条項の翻訳を含めることができます。  あなたは、本許諾書、『文書』中のすべてのライセンス表示、および保証の否認 の翻訳を含めることができます。ただし、本許諾書の英語原文、およびこれらの表示と否認 の原文も含めることが条件です。  翻訳と本許諾書の原版、または通知や免責事項の原版との間に不一致がある場合は、原版が優先されます。</p></div>
<div class="paragraph">
<p>文書のセクションのタイトルが「謝辞」、「献辞」、「歴史」である場合、そのタイトル（セクション1）を保持するための要件（セクション4）では、通常、実際のタイトルを変更する必要があります。</p></div>
<div class="paragraph">
<div class="title">9.終了</div><p>あなたは、本許諾書の下で明示的に規定されている場合を除き、『文書』を複製、変更、サブライセンス、または頒布することはできません。  それ以外の方法で複製、変更、サブライセンス、または頒布しようとする試みは無効であり、本使用許諾に基づくあなたの権利は自動的に消滅します。</p></div>
<div class="paragraph">
<p>ただし、あなたが本許諾書への違反をすべて止めた場合、特定の著作権者からのあなたのライセンスは、(a)著作権者が明示的かつ最終的にあなたのライセンスを終了させない限り、またそれまでは暫定的に、(b)著作権者が違反の停止後60日以前に何らかの合理的な手段であなたに違反を通知しなかった場合は、永久的に復活します。</p></div>
<div class="paragraph">
<p>さらに、著作権者が何らかの合理的な手段であなたに違反を通知し、あなたがその著作権者から本許諾書に対する違反の通知を(いかなる作品についても)初めて受け取り、あなたがその通知を受け取ってから30日以前に違反を是正した場合、特定の著作権者からのあなたのライセンスは永久に復活します。</p></div>
<div class="paragraph">
<p>本節に基づくあなたの権利の終了は、本許諾書に基づいてあなたから複製物や権利を受領した当事者のライセンスを終了させるものではありません。  あなたの権利が終了し、恒久的に復活しない場合、同じ資料の一部または全部の複製物を受け取ったとしても、それを使用する権利はあなたに与えられません。</p></div>
<div class="paragraph">
<div class="title">10.本ライセンスの将来の改訂</div><p>フリーソフトウェアファウンデーションは、GNU自由文書利用許諾書の新しい改訂 版を随時発表することができます。  そのような新バージョンは、現在のバージョンと精神的には似ていますが、新たな問題や懸念に対処するために細部において異なるかもしれません。 <a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/ を</a>ご覧ください<a href="http://www.gnu.org/copyleft/">。</a></p></div>
<div class="paragraph">
<p>本許諾書の各バージョンには、識別可能なバージョン番号が付されています。 文書』において、本許諾書の特定の番号の付いたバージョン「またはそれ以降のバージョ ン」が適用されると指定されている場合、あなたはその指定されたバージョンか、フリーソ フトウェア財団によって(草案としてではなく)発行されたそれ以降のバージョンのいず れかの条項と条件に従うことができます。  文書』に本許諾書のバージョン番号が明記されていない場合、あなたはフリーソフ トウェア財団によって(草案としてではなく)公表されたどのバージョンでも選ぶこ とができます。  文書』において、代理人が本許諾書の将来のどの版を使用できるかを決定で きると指定されている場合、その代理人がある版を受諾すると公言することで、あなたは 『文書』においてその版を選択することが永久に許可されることになります。</p></div>
<div class="paragraph">
<div class="title">11.リライセンス</div><p>「大規模多作者コラボレーション・サイト」(あるいは「MMCサイト」)とは、著作権で保護される作品を公開し、誰でもそれらの作品を編集することができる著名な設備を提供するワールド・ワイド・ウェブ・サーバを意味します。  誰でも編集できる公開ウィキは、そのようなサーバの一例です。  MMCサイトに含まれる「大規模複数著者の共同作業」(Massive Multiauthor Collaboration)（あるいは「MMC」）とは、このようにしてMMCサイトで公表される、著作権で保護される著作物のあらゆる集合を意味します。</p></div>
<div class="paragraph">
<p>「CC-BY-SA」とは、カリフォルニア州サンフランシスコに主たる事業所を置く非営利法人であるクリエイティブ・コモンズ・コーポレーション（Creative Commons Corporation）が発行するクリエイティブ・コモンズ表示-継承3.0ライセンス、および同団体が発行する同ライセンスの将来のコピーレフト版を意味します。</p></div>
<div class="paragraph">
<p>「組込」とは、文書の全部または一部を他の文書の一部として発行または再出版することを意味します。</p></div>
<div class="paragraph">
<p>MMCは、それが本許諾書の下でライセンスされ、かつ、本許諾書の下で本MMC以外のどこかで最初に公表され、その後にそのMMCに全部または一部が組み込まれたすべての作品が、(1)カバーテキストや不変部分がなく、(2)こうして2008年11月1日より前に組み込まれた場合、「再ライセンスの対象」となります。</p></div>
<div class="paragraph">
<p>MMCサイトの運営者は、2009年8月1日以前であればいつでも、CC-BY-SAのもと、同サイトに含まれるMMCを再公開することができます。</p></div>
</div>
</div>

<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
バージョン8.3.1<br>
最終更新 Wed Nov 20 21:19:42 CET 2024
</div>
</div>
</body>
</html>
